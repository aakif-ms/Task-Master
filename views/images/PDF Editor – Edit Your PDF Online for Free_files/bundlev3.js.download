/*! For license information please see bundle.js.LICENSE.txt */
var candyLib;(function(){var __webpack_modules__={90123:function(t,h,y){y(90497);var w=function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}(y(42131));w.default._babelPolyfill&&"undefined"!=typeof console&&console.warn&&console.warn("@babel/polyfill is loaded more than once on this page. This is probably not desirable/intended and may have consequences if different versions of the polyfills are applied sequentially. If you do need to load the polyfill more than once, use @babel/polyfill/noConflict instead to bypass the warning."),w.default._babelPolyfill=!0},90497:function(t,h,y){y(34438),y(11308),y(70856),y(72587),y(65441),y(76623),y(58485),y(58455),y(64160),y(97954),y(35888),y(16253),y(67991),y(80766)},34438:function(t,h,y){y(10634),y(77325),y(86783),y(69653),y(3457),y(71551),y(20103),y(20869),y(49472),y(41030),y(59659),y(18370),y(46717),y(71747),y(78922),y(61079),y(16628),y(54858),y(71242),y(84154),y(15242),y(91023),y(27471),y(95782),y(98750),y(38256),y(33065),y(87938),y(49665),y(50554),y(47890),y(60583),y(62696),y(5766),y(44562),y(31022),y(54585),y(10512),y(45697),y(41036),y(97463),y(78234),y(32120),y(54623),y(30153),y(52998),y(38990),y(14429),y(61225),y(29710),y(70395),y(48084),y(73862),y(69969),y(27848),y(65066),y(22729),y(84347),y(16520),y(43445),y(35142),y(9686),y(53512),y(78928),y(30590),y(26063),y(49689),y(13126),y(44278),y(79803),y(63176),y(38434),y(55431),y(72602),y(6495),y(14532),y(90539),y(23094),y(79683),y(60546),y(55647),y(12409),y(4140),y(9413),y(93013),y(92661),y(43377),y(75977),y(41356),y(1989),y(24709),y(89775),y(50698),y(23876),y(99098),y(38191),y(2696),y(36265),y(88873),y(98678),y(13346),y(17722),y(47414),y(58669),y(8078),y(26360),y(3483),y(49988),y(57200),y(93354),y(178),y(37562),y(54655),y(93900),y(71580),y(18466),y(52407),y(56502),y(24707),y(49348),y(65878),y(17960),y(1994),y(23394),y(90960),y(9),y(52300),y(66090),y(64867),y(43837),y(39118),y(16651),y(29398),y(91290),y(55858),y(64938),y(53402),y(11356),t.exports=y(39031)},70856:function(t,h,y){y(47583),t.exports=y(39031).Array.flatMap},11308:function(t,h,y){y(25879),t.exports=y(39031).Array.includes},35888:function(t,h,y){y(63124),t.exports=y(39031).Object.entries},64160:function(t,h,y){y(1906),t.exports=y(39031).Object.getOwnPropertyDescriptors},97954:function(t,h,y){y(49072),t.exports=y(39031).Object.values},16253:function(t,h,y){y(57200),y(12093),t.exports=y(39031).Promise.finally},65441:function(t,h,y){y(14260),t.exports=y(39031).String.padEnd},72587:function(t,h,y){y(30733),t.exports=y(39031).String.padStart},58485:function(t,h,y){y(35696),t.exports=y(39031).String.trimRight},76623:function(t,h,y){y(47963),t.exports=y(39031).String.trimLeft},58455:function(t,h,y){y(30442),t.exports=y(71493).f("asyncIterator")},42131:function(t,h,y){y(16106),t.exports=y(98928).global},88826:function(t){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},43592:function(t,h,y){var w=y(19449);t.exports=function(t){if(!w(t))throw TypeError(t+" is not an object!");return t}},98928:function(t){var h=t.exports={version:"2.6.12"};"number"==typeof __e&&(__e=h)},91272:function(t,h,y){var w=y(88826);t.exports=function(t,h,y){if(w(t),void 0===h)return t;switch(y){case 1:return function(y){return t.call(h,y)};case 2:return function(y,w){return t.call(h,y,w)};case 3:return function(y,w,A){return t.call(h,y,w,A)}}return function(){return t.apply(h,arguments)}}},92992:function(t,h,y){t.exports=!y(44391)((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},84640:function(t,h,y){var w=y(19449),A=y(78392).document,T=w(A)&&w(A.createElement);t.exports=function(t){return T?A.createElement(t):{}}},91038:function(t,h,y){var w=y(78392),A=y(98928),T=y(91272),E=y(61296),j=y(34912),B="prototype",$export=function(t,h,y){var N,V,W,H=t&$export.F,G=t&$export.G,z=t&$export.S,$=t&$export.P,J=t&$export.B,X=t&$export.W,K=G?A:A[h]||(A[h]={}),ne=K[B],ue=G?w:z?w[h]:(w[h]||{})[B];for(N in G&&(y=h),y)(V=!H&&ue&&void 0!==ue[N])&&j(K,N)||(W=V?ue[N]:y[N],K[N]=G&&"function"!=typeof ue[N]?y[N]:J&&V?T(W,w):X&&ue[N]==W?function(t){var F=function(h,y,w){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(h);case 2:return new t(h,y)}return new t(h,y,w)}return t.apply(this,arguments)};return F[B]=t[B],F}(W):$&&"function"==typeof W?T(Function.call,W):W,$&&((K.virtual||(K.virtual={}))[N]=W,t&$export.R&&ne&&!ne[N]&&E(ne,N,W)))};$export.F=1,$export.G=2,$export.S=4,$export.P=8,$export.B=16,$export.W=32,$export.U=64,$export.R=128,t.exports=$export},44391:function(t){t.exports=function(t){try{return!!t()}catch(t){return!0}}},78392:function(t){var h=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=h)},34912:function(t){var h={}.hasOwnProperty;t.exports=function(t,y){return h.call(t,y)}},61296:function(t,h,y){var w=y(85800),A=y(82124);t.exports=y(92992)?function(t,h,y){return w.f(t,h,A(1,y))}:function(t,h,y){return t[h]=y,t}},64563:function(t,h,y){t.exports=!y(92992)&&!y(44391)((function(){return 7!=Object.defineProperty(y(84640)("div"),"a",{get:function(){return 7}}).a}))},19449:function(t){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},85800:function(t,h,y){var w=y(43592),A=y(64563),T=y(93314),E=Object.defineProperty;h.f=y(92992)?Object.defineProperty:function defineProperty(t,h,y){if(w(t),h=T(h,!0),w(y),A)try{return E(t,h,y)}catch(t){}if("get"in y||"set"in y)throw TypeError("Accessors not supported!");return"value"in y&&(t[h]=y.value),t}},82124:function(t){t.exports=function(t,h){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:h}}},93314:function(t,h,y){var w=y(19449);t.exports=function(t,h){if(!w(t))return t;var y,A;if(h&&"function"==typeof(y=t.toString)&&!w(A=y.call(t)))return A;if("function"==typeof(y=t.valueOf)&&!w(A=y.call(t)))return A;if(!h&&"function"==typeof(y=t.toString)&&!w(A=y.call(t)))return A;throw TypeError("Can't convert object to primitive value")}},16106:function(t,h,y){var w=y(91038);w(w.G,{global:y(78392)})},94405:function(t){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},96270:function(t,h,y){var w=y(90325);t.exports=function(t,h){if("number"!=typeof t&&"Number"!=w(t))throw TypeError(h);return+t}},52451:function(t,h,y){var w=y(53581)("unscopables"),A=Array.prototype;null==A[w]&&y(61460)(A,w,{}),t.exports=function(t){A[w][t]=!0}},28831:function(t,h,y){var w=y(55185)(!0);t.exports=function(t,h,y){return h+(y?w(t,h).length:1)}},73197:function(t){t.exports=function(t,h,y,w){if(!(t instanceof h)||void 0!==w&&w in t)throw TypeError(y+": incorrect invocation!");return t}},86291:function(t,h,y){var w=y(67228);t.exports=function(t){if(!w(t))throw TypeError(t+" is not an object!");return t}},84594:function(t,h,y){var w=y(78938),A=y(50527),T=y(44142);t.exports=[].copyWithin||function copyWithin(t,h){var y=w(this),E=T(y.length),j=A(t,E),B=A(h,E),N=arguments.length>2?arguments[2]:void 0,V=Math.min((void 0===N?E:A(N,E))-B,E-j),W=1;for(B<j&&j<B+V&&(W=-1,B+=V-1,j+=V-1);V-- >0;)B in y?y[j]=y[B]:delete y[j],j+=W,B+=W;return y}},65970:function(t,h,y){var w=y(78938),A=y(50527),T=y(44142);t.exports=function fill(t){for(var h=w(this),y=T(h.length),E=arguments.length,j=A(E>1?arguments[1]:void 0,y),B=E>2?arguments[2]:void 0,N=void 0===B?y:A(B,y);N>j;)h[j++]=t;return h}},83504:function(t,h,y){var w=y(45831),A=y(44142),T=y(50527);t.exports=function(t){return function(h,y,E){var j,B=w(h),N=A(B.length),V=T(E,N);if(t&&y!=y){for(;N>V;)if((j=B[V++])!=j)return!0}else for(;N>V;V++)if((t||V in B)&&B[V]===y)return t||V||0;return!t&&-1}}},8948:function(t,h,y){var w=y(31218),A=y(35356),T=y(78938),E=y(44142),j=y(99773);t.exports=function(t,h){var y=1==t,B=2==t,N=3==t,V=4==t,W=6==t,H=5==t||W,G=h||j;return function(h,j,z){for(var $,J,X=T(h),K=A(X),ne=w(j,z,3),ue=E(K.length),pe=0,me=y?G(h,ue):B?G(h,0):void 0;ue>pe;pe++)if((H||pe in K)&&(J=ne($=K[pe],pe,X),t))if(y)me[pe]=J;else if(J)switch(t){case 3:return!0;case 5:return $;case 6:return pe;case 2:me.push($)}else if(V)return!1;return W?-1:N||V?V:me}}},60708:function(t,h,y){var w=y(94405),A=y(78938),T=y(35356),E=y(44142);t.exports=function(t,h,y,j,B){w(h);var N=A(t),V=T(N),W=E(N.length),H=B?W-1:0,G=B?-1:1;if(y<2)for(;;){if(H in V){j=V[H],H+=G;break}if(H+=G,B?H<0:W<=H)throw TypeError("Reduce of empty array with no initial value")}for(;B?H>=0:W>H;H+=G)H in V&&(j=h(j,V[H],H,N));return j}},87003:function(t,h,y){var w=y(67228),A=y(18808),T=y(53581)("species");t.exports=function(t){var h;return A(t)&&("function"!=typeof(h=t.constructor)||h!==Array&&!A(h.prototype)||(h=void 0),w(h)&&null===(h=h[T])&&(h=void 0)),void 0===h?Array:h}},99773:function(t,h,y){var w=y(87003);t.exports=function(t,h){return new(w(t))(h)}},37807:function(t,h,y){var w=y(94405),A=y(67228),T=y(860),E=[].slice,j={};t.exports=Function.bind||function bind(t){var h=w(this),y=E.call(arguments,1),bound=function(){var w=y.concat(E.call(arguments));return this instanceof bound?function(t,h,y){if(!(h in j)){for(var w=[],A=0;A<h;A++)w[A]="a["+A+"]";j[h]=Function("F,a","return new F("+w.join(",")+")")}return j[h](t,y)}(h,w.length,w):T(h,w,t)};return A(h.prototype)&&(bound.prototype=h.prototype),bound}},76774:function(t,h,y){var w=y(90325),A=y(53581)("toStringTag"),T="Arguments"==w(function(){return arguments}());t.exports=function(t){var h,y,E;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(y=function(t,h){try{return t[h]}catch(t){}}(h=Object(t),A))?y:T?w(h):"Object"==(E=w(h))&&"function"==typeof h.callee?"Arguments":E}},90325:function(t){var h={}.toString;t.exports=function(t){return h.call(t).slice(8,-1)}},9775:function(t,h,y){var w=y(85201).f,A=y(63262),T=y(81469),E=y(31218),j=y(73197),B=y(24409),N=y(32755),V=y(18920),W=y(15054),H=y(87478),G=y(57270).fastKey,z=y(65705),$=H?"_s":"size",getEntry=function(t,h){var y,w=G(h);if("F"!==w)return t._i[w];for(y=t._f;y;y=y.n)if(y.k==h)return y};t.exports={getConstructor:function(t,h,y,N){var V=t((function(t,w){j(t,V,h,"_i"),t._t=h,t._i=A(null),t._f=void 0,t._l=void 0,t[$]=0,null!=w&&B(w,y,t[N],t)}));return T(V.prototype,{clear:function clear(){for(var t=z(this,h),y=t._i,w=t._f;w;w=w.n)w.r=!0,w.p&&(w.p=w.p.n=void 0),delete y[w.i];t._f=t._l=void 0,t[$]=0},delete:function(t){var y=z(this,h),w=getEntry(y,t);if(w){var A=w.n,T=w.p;delete y._i[w.i],w.r=!0,T&&(T.n=A),A&&(A.p=T),y._f==w&&(y._f=A),y._l==w&&(y._l=T),y[$]--}return!!w},forEach:function forEach(t){z(this,h);for(var y,w=E(t,arguments.length>1?arguments[1]:void 0,3);y=y?y.n:this._f;)for(w(y.v,y.k,this);y&&y.r;)y=y.p},has:function has(t){return!!getEntry(z(this,h),t)}}),H&&w(V.prototype,"size",{get:function(){return z(this,h)[$]}}),V},def:function(t,h,y){var w,A,T=getEntry(t,h);return T?T.v=y:(t._l=T={i:A=G(h,!0),k:h,v:y,p:w=t._l,n:void 0,r:!1},t._f||(t._f=T),w&&(w.n=T),t[$]++,"F"!==A&&(t._i[A]=T)),t},getEntry:getEntry,setStrong:function(t,h,y){N(t,h,(function(t,y){this._t=z(t,h),this._k=y,this._l=void 0}),(function(){for(var t=this,h=t._k,y=t._l;y&&y.r;)y=y.p;return t._t&&(t._l=y=y?y.n:t._t._f)?V(0,"keys"==h?y.k:"values"==h?y.v:[y.k,y.v]):(t._t=void 0,V(1))}),y?"entries":"values",!y,!0),W(h)}}},89856:function(t,h,y){var w=y(81469),A=y(57270).getWeak,T=y(86291),E=y(67228),j=y(73197),B=y(24409),N=y(8948),V=y(4036),W=y(65705),H=N(5),G=N(6),z=0,uncaughtFrozenStore=function(t){return t._l||(t._l=new UncaughtFrozenStore)},UncaughtFrozenStore=function(){this.a=[]},findUncaughtFrozen=function(t,h){return H(t.a,(function(t){return t[0]===h}))};UncaughtFrozenStore.prototype={get:function(t){var h=findUncaughtFrozen(this,t);if(h)return h[1]},has:function(t){return!!findUncaughtFrozen(this,t)},set:function(t,h){var y=findUncaughtFrozen(this,t);y?y[1]=h:this.a.push([t,h])},delete:function(t){var h=G(this.a,(function(h){return h[0]===t}));return~h&&this.a.splice(h,1),!!~h}},t.exports={getConstructor:function(t,h,y,T){var N=t((function(t,w){j(t,N,h,"_i"),t._t=h,t._i=z++,t._l=void 0,null!=w&&B(w,y,t[T],t)}));return w(N.prototype,{delete:function(t){if(!E(t))return!1;var y=A(t);return!0===y?uncaughtFrozenStore(W(this,h)).delete(t):y&&V(y,this._i)&&delete y[this._i]},has:function has(t){if(!E(t))return!1;var y=A(t);return!0===y?uncaughtFrozenStore(W(this,h)).has(t):y&&V(y,this._i)}}),N},def:function(t,h,y){var w=A(T(h),!0);return!0===w?uncaughtFrozenStore(t).set(h,y):w[t._i]=y,t},ufstore:uncaughtFrozenStore}},23382:function(t,h,y){var w=y(35337),A=y(5968),T=y(46740),E=y(81469),j=y(57270),B=y(24409),N=y(73197),V=y(67228),W=y(28013),H=y(62030),G=y(41084),z=y(17340);t.exports=function(t,h,y,$,J,X){var K=w[t],ne=K,ue=J?"set":"add",pe=ne&&ne.prototype,me={},fixMethod=function(t){var h=pe[t];T(pe,t,"delete"==t?function(t){return!(X&&!V(t))&&h.call(this,0===t?0:t)}:"has"==t?function has(t){return!(X&&!V(t))&&h.call(this,0===t?0:t)}:"get"==t?function get(t){return X&&!V(t)?void 0:h.call(this,0===t?0:t)}:"add"==t?function add(t){return h.call(this,0===t?0:t),this}:function set(t,y){return h.call(this,0===t?0:t,y),this})};if("function"==typeof ne&&(X||pe.forEach&&!W((function(){(new ne).entries().next()})))){var ge=new ne,we=ge[ue](X?{}:-0,1)!=ge,Ce=W((function(){ge.has(1)})),ke=H((function(t){new ne(t)})),Ie=!X&&W((function(){for(var t=new ne,h=5;h--;)t[ue](h,h);return!t.has(-0)}));ke||((ne=h((function(h,y){N(h,ne,t);var w=z(new K,h,ne);return null!=y&&B(y,J,w[ue],w),w}))).prototype=pe,pe.constructor=ne),(Ce||Ie)&&(fixMethod("delete"),fixMethod("has"),J&&fixMethod("get")),(Ie||we)&&fixMethod(ue),X&&pe.clear&&delete pe.clear}else ne=$.getConstructor(h,t,J,ue),E(ne.prototype,y),j.NEED=!0;return G(ne,t),me[t]=ne,A(A.G+A.W+A.F*(ne!=K),me),X||$.setStrong(ne,t,J),ne}},39031:function(t){var h=t.exports={version:"2.6.12"};"number"==typeof __e&&(__e=h)},29242:function(t,h,y){var w=y(85201),A=y(31046);t.exports=function(t,h,y){h in t?w.f(t,h,A(0,y)):t[h]=y}},31218:function(t,h,y){var w=y(94405);t.exports=function(t,h,y){if(w(t),void 0===h)return t;switch(y){case 1:return function(y){return t.call(h,y)};case 2:return function(y,w){return t.call(h,y,w)};case 3:return function(y,w,A){return t.call(h,y,w,A)}}return function(){return t.apply(h,arguments)}}},64905:function(t,h,y){var w=y(28013),A=Date.prototype.getTime,T=Date.prototype.toISOString,lz=function(t){return t>9?t:"0"+t};t.exports=w((function(){return"0385-07-25T07:06:39.999Z"!=T.call(new Date(-50000000000001))}))||!w((function(){T.call(new Date(NaN))}))?function toISOString(){if(!isFinite(A.call(this)))throw RangeError("Invalid time value");var t=this,h=t.getUTCFullYear(),y=t.getUTCMilliseconds(),w=h<0?"-":h>9999?"+":"";return w+("00000"+Math.abs(h)).slice(w?-6:-4)+"-"+lz(t.getUTCMonth()+1)+"-"+lz(t.getUTCDate())+"T"+lz(t.getUTCHours())+":"+lz(t.getUTCMinutes())+":"+lz(t.getUTCSeconds())+"."+(y>99?y:"0"+lz(y))+"Z"}:T},76661:function(t,h,y){var w=y(86291),A=y(98493),T="number";t.exports=function(t){if("string"!==t&&t!==T&&"default"!==t)throw TypeError("Incorrect hint");return A(w(this),t!=T)}},57278:function(t){t.exports=function(t){if(null==t)throw TypeError("Can't call method on  "+t);return t}},87478:function(t,h,y){t.exports=!y(28013)((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},38826:function(t,h,y){var w=y(67228),A=y(35337).document,T=w(A)&&w(A.createElement);t.exports=function(t){return T?A.createElement(t):{}}},57707:function(t){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},87123:function(t,h,y){var w=y(54567),A=y(50430),T=y(98950);t.exports=function(t){var h=w(t),y=A.f;if(y)for(var E,j=y(t),B=T.f,N=0;j.length>N;)B.call(t,E=j[N++])&&h.push(E);return h}},5968:function(t,h,y){var w=y(35337),A=y(39031),T=y(61460),E=y(46740),j=y(31218),B="prototype",$export=function(t,h,y){var N,V,W,H,G=t&$export.F,z=t&$export.G,$=t&$export.S,J=t&$export.P,X=t&$export.B,K=z?w:$?w[h]||(w[h]={}):(w[h]||{})[B],ne=z?A:A[h]||(A[h]={}),ue=ne[B]||(ne[B]={});for(N in z&&(y=h),y)W=((V=!G&&K&&void 0!==K[N])?K:y)[N],H=X&&V?j(W,w):J&&"function"==typeof W?j(Function.call,W):W,K&&E(K,N,W,t&$export.U),ne[N]!=W&&T(ne,N,H),J&&ue[N]!=W&&(ue[N]=W)};w.core=A,$export.F=1,$export.G=2,$export.S=4,$export.P=8,$export.B=16,$export.W=32,$export.U=64,$export.R=128,t.exports=$export},21264:function(t,h,y){var w=y(53581)("match");t.exports=function(t){var h=/./;try{"/./"[t](h)}catch(y){try{return h[w]=!1,!"/./"[t](h)}catch(t){}}return!0}},28013:function(t){t.exports=function(t){try{return!!t()}catch(t){return!0}}},26943:function(t,h,y){y(17722);var w=y(46740),A=y(61460),T=y(28013),E=y(57278),j=y(53581),B=y(7632),N=j("species"),V=!T((function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")})),W=function(){var t=/(?:)/,h=t.exec;t.exec=function(){return h.apply(this,arguments)};var y="ab".split(t);return 2===y.length&&"a"===y[0]&&"b"===y[1]}();t.exports=function(t,h,y){var H=j(t),G=!T((function(){var h={};return h[H]=function(){return 7},7!=""[t](h)})),z=G?!T((function(){var h=!1,y=/a/;return y.exec=function(){return h=!0,null},"split"===t&&(y.constructor={},y.constructor[N]=function(){return y}),y[H](""),!h})):void 0;if(!G||!z||"replace"===t&&!V||"split"===t&&!W){var $=/./[H],J=y(E,H,""[t],(function maybeCallNative(t,h,y,w,A){return h.exec===B?G&&!A?{done:!0,value:$.call(h,y,w)}:{done:!0,value:t.call(y,h,w)}:{done:!1}})),X=J[0],K=J[1];w(String.prototype,t,X),A(RegExp.prototype,H,2==h?function(t,h){return K.call(t,this,h)}:function(t){return K.call(t,this)})}}},55351:function(t,h,y){var w=y(86291);t.exports=function(){var t=w(this),h="";return t.global&&(h+="g"),t.ignoreCase&&(h+="i"),t.multiline&&(h+="m"),t.unicode&&(h+="u"),t.sticky&&(h+="y"),h}},25796:function(t,h,y){var w=y(18808),A=y(67228),T=y(44142),E=y(31218),j=y(53581)("isConcatSpreadable");t.exports=function flattenIntoArray(t,h,y,B,N,V,W,H){for(var G,z,$=N,J=0,X=!!W&&E(W,H,3);J<B;){if(J in y){if(G=X?X(y[J],J,h):y[J],z=!1,A(G)&&(z=void 0!==(z=G[j])?!!z:w(G)),z&&V>0)$=flattenIntoArray(t,h,G,T(G.length),$,V-1)-1;else{if($>=9007199254740991)throw TypeError();t[$]=G}$++}J++}return $}},24409:function(t,h,y){var w=y(31218),A=y(48913),T=y(26035),E=y(86291),j=y(44142),B=y(13683),N={},V={},W=t.exports=function(t,h,y,W,H){var G,z,$,J,X=H?function(){return t}:B(t),K=w(y,W,h?2:1),ne=0;if("function"!=typeof X)throw TypeError(t+" is not iterable!");if(T(X)){for(G=j(t.length);G>ne;ne++)if((J=h?K(E(z=t[ne])[0],z[1]):K(t[ne]))===N||J===V)return J}else for($=X.call(t);!(z=$.next()).done;)if((J=A($,K,z.value,h))===N||J===V)return J};W.BREAK=N,W.RETURN=V},34398:function(t,h,y){t.exports=y(8059)("native-function-to-string",Function.toString)},35337:function(t){var h=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=h)},4036:function(t){var h={}.hasOwnProperty;t.exports=function(t,y){return h.call(t,y)}},61460:function(t,h,y){var w=y(85201),A=y(31046);t.exports=y(87478)?function(t,h,y){return w.f(t,h,A(1,y))}:function(t,h,y){return t[h]=y,t}},32382:function(t,h,y){var w=y(35337).document;t.exports=w&&w.documentElement},23627:function(t,h,y){t.exports=!y(87478)&&!y(28013)((function(){return 7!=Object.defineProperty(y(38826)("div"),"a",{get:function(){return 7}}).a}))},17340:function(t,h,y){var w=y(67228),A=y(28930).set;t.exports=function(t,h,y){var T,E=h.constructor;return E!==y&&"function"==typeof E&&(T=E.prototype)!==y.prototype&&w(T)&&A&&A(t,T),t}},860:function(t){t.exports=function(t,h,y){var w=void 0===y;switch(h.length){case 0:return w?t():t.call(y);case 1:return w?t(h[0]):t.call(y,h[0]);case 2:return w?t(h[0],h[1]):t.call(y,h[0],h[1]);case 3:return w?t(h[0],h[1],h[2]):t.call(y,h[0],h[1],h[2]);case 4:return w?t(h[0],h[1],h[2],h[3]):t.call(y,h[0],h[1],h[2],h[3])}return t.apply(y,h)}},35356:function(t,h,y){var w=y(90325);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==w(t)?t.split(""):Object(t)}},26035:function(t,h,y){var w=y(32903),A=y(53581)("iterator"),T=Array.prototype;t.exports=function(t){return void 0!==t&&(w.Array===t||T[A]===t)}},18808:function(t,h,y){var w=y(90325);t.exports=Array.isArray||function isArray(t){return"Array"==w(t)}},90672:function(t,h,y){var w=y(67228),A=Math.floor;t.exports=function isInteger(t){return!w(t)&&isFinite(t)&&A(t)===t}},67228:function(t){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},25772:function(t,h,y){var w=y(67228),A=y(90325),T=y(53581)("match");t.exports=function(t){var h;return w(t)&&(void 0!==(h=t[T])?!!h:"RegExp"==A(t))}},48913:function(t,h,y){var w=y(86291);t.exports=function(t,h,y,A){try{return A?h(w(y)[0],y[1]):h(y)}catch(h){var T=t.return;throw void 0!==T&&w(T.call(t)),h}}},11295:function(t,h,y){var w=y(63262),A=y(31046),T=y(41084),E={};y(61460)(E,y(53581)("iterator"),(function(){return this})),t.exports=function(t,h,y){t.prototype=w(E,{next:A(1,y)}),T(t,h+" Iterator")}},32755:function(t,h,y){var w=y(28642),A=y(5968),T=y(46740),E=y(61460),j=y(32903),B=y(11295),N=y(41084),V=y(15497),W=y(53581)("iterator"),H=!([].keys&&"next"in[].keys()),G="keys",z="values",returnThis=function(){return this};t.exports=function(t,h,y,$,J,X,K){B(y,h,$);var ne,ue,pe,getMethod=function(t){if(!H&&t in Ce)return Ce[t];switch(t){case G:return function keys(){return new y(this,t)};case z:return function values(){return new y(this,t)}}return function entries(){return new y(this,t)}},me=h+" Iterator",ge=J==z,we=!1,Ce=t.prototype,ke=Ce[W]||Ce["@@iterator"]||J&&Ce[J],Ie=ke||getMethod(J),Te=J?ge?getMethod("entries"):Ie:void 0,Ee="Array"==h&&Ce.entries||ke;if(Ee&&(pe=V(Ee.call(new t)))!==Object.prototype&&pe.next&&(N(pe,me,!0),w||"function"==typeof pe[W]||E(pe,W,returnThis)),ge&&ke&&ke.name!==z&&(we=!0,Ie=function values(){return ke.call(this)}),w&&!K||!H&&!we&&Ce[W]||E(Ce,W,Ie),j[h]=Ie,j[me]=returnThis,J)if(ne={values:ge?Ie:getMethod(z),keys:X?Ie:getMethod(G),entries:Te},K)for(ue in ne)ue in Ce||T(Ce,ue,ne[ue]);else A(A.P+A.F*(H||we),h,ne);return ne}},62030:function(t,h,y){var w=y(53581)("iterator"),A=!1;try{var T=[7][w]();T.return=function(){A=!0},Array.from(T,(function(){throw 2}))}catch(t){}t.exports=function(t,h){if(!h&&!A)return!1;var y=!1;try{var T=[7],E=T[w]();E.next=function(){return{done:y=!0}},T[w]=function(){return E},t(T)}catch(t){}return y}},18920:function(t){t.exports=function(t,h){return{value:h,done:!!t}}},32903:function(t){t.exports={}},28642:function(t){t.exports=!1},94473:function(t){var h=Math.expm1;t.exports=!h||h(10)>22025.465794806718||h(10)<22025.465794806718||-2e-17!=h(-2e-17)?function expm1(t){return 0==(t=+t)?t:t>-1e-6&&t<1e-6?t+t*t/2:Math.exp(t)-1}:h},53873:function(t,h,y){var w=y(93473),A=Math.pow,T=A(2,-52),E=A(2,-23),j=A(2,127)*(2-E),B=A(2,-126);t.exports=Math.fround||function fround(t){var h,y,A=Math.abs(t),N=w(t);return A<B?N*(A/B/E+1/T-1/T)*B*E:(y=(h=(1+E/T)*A)-(h-A))>j||y!=y?N*(1/0):N*y}},88562:function(t){t.exports=Math.log1p||function log1p(t){return(t=+t)>-1e-8&&t<1e-8?t-t*t/2:Math.log(1+t)}},93473:function(t){t.exports=Math.sign||function sign(t){return 0==(t=+t)||t!=t?t:t<0?-1:1}},57270:function(t,h,y){var w=y(61027)("meta"),A=y(67228),T=y(4036),E=y(85201).f,j=0,B=Object.isExtensible||function(){return!0},N=!y(28013)((function(){return B(Object.preventExtensions({}))})),setMeta=function(t){E(t,w,{value:{i:"O"+ ++j,w:{}}})},V=t.exports={KEY:w,NEED:!1,fastKey:function(t,h){if(!A(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!T(t,w)){if(!B(t))return"F";if(!h)return"E";setMeta(t)}return t[w].i},getWeak:function(t,h){if(!T(t,w)){if(!B(t))return!0;if(!h)return!1;setMeta(t)}return t[w].w},onFreeze:function(t){return N&&V.NEED&&B(t)&&!T(t,w)&&setMeta(t),t}}},3516:function(t,h,y){var w=y(35337),A=y(85813).set,T=w.MutationObserver||w.WebKitMutationObserver,E=w.process,j=w.Promise,B="process"==y(90325)(E);t.exports=function(){var t,h,y,flush=function(){var w,A;for(B&&(w=E.domain)&&w.exit();t;){A=t.fn,t=t.next;try{A()}catch(w){throw t?y():h=void 0,w}}h=void 0,w&&w.enter()};if(B)y=function(){E.nextTick(flush)};else if(!T||w.navigator&&w.navigator.standalone)if(j&&j.resolve){var N=j.resolve(void 0);y=function(){N.then(flush)}}else y=function(){A.call(w,flush)};else{var V=!0,W=document.createTextNode("");new T(flush).observe(W,{characterData:!0}),y=function(){W.data=V=!V}}return function(w){var A={fn:w,next:void 0};h&&(h.next=A),t||(t=A,y()),h=A}}},27711:function(t,h,y){var w=y(94405);function PromiseCapability(t){var h,y;this.promise=new t((function(t,w){if(void 0!==h||void 0!==y)throw TypeError("Bad Promise constructor");h=t,y=w})),this.resolve=w(h),this.reject=w(y)}t.exports.f=function(t){return new PromiseCapability(t)}},8360:function(t,h,y){var w=y(87478),A=y(54567),T=y(50430),E=y(98950),j=y(78938),B=y(35356),N=Object.assign;t.exports=!N||y(28013)((function(){var t={},h={},y=Symbol(),w="abcdefghijklmnopqrst";return t[y]=7,w.split("").forEach((function(t){h[t]=t})),7!=N({},t)[y]||Object.keys(N({},h)).join("")!=w}))?function assign(t,h){for(var y=j(t),N=arguments.length,V=1,W=T.f,H=E.f;N>V;)for(var G,z=B(arguments[V++]),$=W?A(z).concat(W(z)):A(z),J=$.length,X=0;J>X;)G=$[X++],w&&!H.call(z,G)||(y[G]=z[G]);return y}:N},63262:function(t,h,y){var w=y(86291),A=y(39025),T=y(57707),E=y(57189)("IE_PROTO"),Empty=function(){},j="prototype",createDict=function(){var t,h=y(38826)("iframe"),w=T.length;for(h.style.display="none",y(32382).appendChild(h),h.src="javascript:",(t=h.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),createDict=t.F;w--;)delete createDict[j][T[w]];return createDict()};t.exports=Object.create||function create(t,h){var y;return null!==t?(Empty[j]=w(t),y=new Empty,Empty[j]=null,y[E]=t):y=createDict(),void 0===h?y:A(y,h)}},85201:function(t,h,y){var w=y(86291),A=y(23627),T=y(98493),E=Object.defineProperty;h.f=y(87478)?Object.defineProperty:function defineProperty(t,h,y){if(w(t),h=T(h,!0),w(y),A)try{return E(t,h,y)}catch(t){}if("get"in y||"set"in y)throw TypeError("Accessors not supported!");return"value"in y&&(t[h]=y.value),t}},39025:function(t,h,y){var w=y(85201),A=y(86291),T=y(54567);t.exports=y(87478)?Object.defineProperties:function defineProperties(t,h){A(t);for(var y,E=T(h),j=E.length,B=0;j>B;)w.f(t,y=E[B++],h[y]);return t}},30295:function(t,h,y){var w=y(98950),A=y(31046),T=y(45831),E=y(98493),j=y(4036),B=y(23627),N=Object.getOwnPropertyDescriptor;h.f=y(87478)?N:function getOwnPropertyDescriptor(t,h){if(t=T(t),h=E(h,!0),B)try{return N(t,h)}catch(t){}if(j(t,h))return A(!w.f.call(t,h),t[h])}},66251:function(t,h,y){var w=y(45831),A=y(89851).f,T={}.toString,E="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];t.exports.f=function getOwnPropertyNames(t){return E&&"[object Window]"==T.call(t)?function(t){try{return A(t)}catch(t){return E.slice()}}(t):A(w(t))}},89851:function(t,h,y){var w=y(35075),A=y(57707).concat("length","prototype");h.f=Object.getOwnPropertyNames||function getOwnPropertyNames(t){return w(t,A)}},50430:function(t,h){h.f=Object.getOwnPropertySymbols},15497:function(t,h,y){var w=y(4036),A=y(78938),T=y(57189)("IE_PROTO"),E=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=A(t),w(t,T)?t[T]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?E:null}},35075:function(t,h,y){var w=y(4036),A=y(45831),T=y(83504)(!1),E=y(57189)("IE_PROTO");t.exports=function(t,h){var y,j=A(t),B=0,N=[];for(y in j)y!=E&&w(j,y)&&N.push(y);for(;h.length>B;)w(j,y=h[B++])&&(~T(N,y)||N.push(y));return N}},54567:function(t,h,y){var w=y(35075),A=y(57707);t.exports=Object.keys||function keys(t){return w(t,A)}},98950:function(t,h){h.f={}.propertyIsEnumerable},12783:function(t,h,y){var w=y(5968),A=y(39031),T=y(28013);t.exports=function(t,h){var y=(A.Object||{})[t]||Object[t],E={};E[t]=h(y),w(w.S+w.F*T((function(){y(1)})),"Object",E)}},60784:function(t,h,y){var w=y(87478),A=y(54567),T=y(45831),E=y(98950).f;t.exports=function(t){return function(h){for(var y,j=T(h),B=A(j),N=B.length,V=0,W=[];N>V;)y=B[V++],w&&!E.call(j,y)||W.push(t?[y,j[y]]:j[y]);return W}}},55693:function(t,h,y){var w=y(89851),A=y(50430),T=y(86291),E=y(35337).Reflect;t.exports=E&&E.ownKeys||function ownKeys(t){var h=w.f(T(t)),y=A.f;return y?h.concat(y(t)):h}},18820:function(t,h,y){var w=y(35337).parseFloat,A=y(45393).trim;t.exports=1/w(y(8594)+"-0")!=-1/0?function parseFloat(t){var h=A(String(t),3),y=w(h);return 0===y&&"-"==h.charAt(0)?-0:y}:w},53974:function(t,h,y){var w=y(35337).parseInt,A=y(45393).trim,T=y(8594),E=/^[-+]?0[xX]/;t.exports=8!==w(T+"08")||22!==w(T+"0x16")?function parseInt(t,h){var y=A(String(t),3);return w(y,h>>>0||(E.test(y)?16:10))}:w},6800:function(t){t.exports=function(t){try{return{e:!1,v:t()}}catch(t){return{e:!0,v:t}}}},67567:function(t,h,y){var w=y(86291),A=y(67228),T=y(27711);t.exports=function(t,h){if(w(t),A(h)&&h.constructor===t)return h;var y=T.f(t);return(0,y.resolve)(h),y.promise}},31046:function(t){t.exports=function(t,h){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:h}}},81469:function(t,h,y){var w=y(46740);t.exports=function(t,h,y){for(var A in h)w(t,A,h[A],y);return t}},46740:function(t,h,y){var w=y(35337),A=y(61460),T=y(4036),E=y(61027)("src"),j=y(34398),B="toString",N=(""+j).split(B);y(39031).inspectSource=function(t){return j.call(t)},(t.exports=function(t,h,y,j){var B="function"==typeof y;B&&(T(y,"name")||A(y,"name",h)),t[h]!==y&&(B&&(T(y,E)||A(y,E,t[h]?""+t[h]:N.join(String(h)))),t===w?t[h]=y:j?t[h]?t[h]=y:A(t,h,y):(delete t[h],A(t,h,y)))})(Function.prototype,B,(function toString(){return"function"==typeof this&&this[E]||j.call(this)}))},99592:function(t,h,y){var w=y(76774),A=RegExp.prototype.exec;t.exports=function(t,h){var y=t.exec;if("function"==typeof y){var T=y.call(t,h);if("object"!=typeof T)throw new TypeError("RegExp exec method returned something other than an Object or null");return T}if("RegExp"!==w(t))throw new TypeError("RegExp#exec called on incompatible receiver");return A.call(t,h)}},7632:function(t,h,y){var w,A,T=y(55351),E=RegExp.prototype.exec,j=String.prototype.replace,B=E,N="lastIndex",V=(w=/a/,A=/b*/g,E.call(w,"a"),E.call(A,"a"),0!==w[N]||0!==A[N]),W=void 0!==/()??/.exec("")[1];(V||W)&&(B=function exec(t){var h,y,w,A,B=this;return W&&(y=new RegExp("^"+B.source+"$(?!\\s)",T.call(B))),V&&(h=B[N]),w=E.call(B,t),V&&w&&(B[N]=B.global?w.index+w[0].length:h),W&&w&&w.length>1&&j.call(w[0],y,(function(){for(A=1;A<arguments.length-2;A++)void 0===arguments[A]&&(w[A]=void 0)})),w}),t.exports=B},2253:function(t){t.exports=Object.is||function is(t,h){return t===h?0!==t||1/t==1/h:t!=t&&h!=h}},28930:function(t,h,y){var w=y(67228),A=y(86291),check=function(t,h){if(A(t),!w(h)&&null!==h)throw TypeError(h+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,h,w){try{(w=y(31218)(Function.call,y(30295).f(Object.prototype,"__proto__").set,2))(t,[]),h=!(t instanceof Array)}catch(t){h=!0}return function setPrototypeOf(t,y){return check(t,y),h?t.__proto__=y:w(t,y),t}}({},!1):void 0),check:check}},15054:function(t,h,y){var w=y(35337),A=y(85201),T=y(87478),E=y(53581)("species");t.exports=function(t){var h=w[t];T&&h&&!h[E]&&A.f(h,E,{configurable:!0,get:function(){return this}})}},41084:function(t,h,y){var w=y(85201).f,A=y(4036),T=y(53581)("toStringTag");t.exports=function(t,h,y){t&&!A(t=y?t:t.prototype,T)&&w(t,T,{configurable:!0,value:h})}},57189:function(t,h,y){var w=y(8059)("keys"),A=y(61027);t.exports=function(t){return w[t]||(w[t]=A(t))}},8059:function(t,h,y){var w=y(39031),A=y(35337),T="__core-js_shared__",E=A[T]||(A[T]={});(t.exports=function(t,h){return E[t]||(E[t]=void 0!==h?h:{})})("versions",[]).push({version:w.version,mode:y(28642)?"pure":"global",copyright:"© 2020 Denis Pushkarev (zloirock.ru)"})},52195:function(t,h,y){var w=y(86291),A=y(94405),T=y(53581)("species");t.exports=function(t,h){var y,E=w(t).constructor;return void 0===E||null==(y=w(E)[T])?h:A(y)}},92357:function(t,h,y){var w=y(28013);t.exports=function(t,h){return!!t&&w((function(){h?t.call(null,(function(){}),1):t.call(null)}))}},55185:function(t,h,y){var w=y(37596),A=y(57278);t.exports=function(t){return function(h,y){var T,E,j=String(A(h)),B=w(y),N=j.length;return B<0||B>=N?t?"":void 0:(T=j.charCodeAt(B))<55296||T>56319||B+1===N||(E=j.charCodeAt(B+1))<56320||E>57343?t?j.charAt(B):T:t?j.slice(B,B+2):E-56320+(T-55296<<10)+65536}}},63022:function(t,h,y){var w=y(25772),A=y(57278);t.exports=function(t,h,y){if(w(h))throw TypeError("String#"+y+" doesn't accept regex!");return String(A(t))}},83541:function(t,h,y){var w=y(5968),A=y(28013),T=y(57278),E=/"/g,createHTML=function(t,h,y,w){var A=String(T(t)),j="<"+h;return""!==y&&(j+=" "+y+'="'+String(w).replace(E,"&quot;")+'"'),j+">"+A+"</"+h+">"};t.exports=function(t,h){var y={};y[t]=h(createHTML),w(w.P+w.F*A((function(){var h=""[t]('"');return h!==h.toLowerCase()||h.split('"').length>3})),"String",y)}},28517:function(t,h,y){var w=y(44142),A=y(69991),T=y(57278);t.exports=function(t,h,y,E){var j=String(T(t)),B=j.length,N=void 0===y?" ":String(y),V=w(h);if(V<=B||""==N)return j;var W=V-B,H=A.call(N,Math.ceil(W/N.length));return H.length>W&&(H=H.slice(0,W)),E?H+j:j+H}},69991:function(t,h,y){var w=y(37596),A=y(57278);t.exports=function repeat(t){var h=String(A(this)),y="",T=w(t);if(T<0||T==1/0)throw RangeError("Count can't be negative");for(;T>0;(T>>>=1)&&(h+=h))1&T&&(y+=h);return y}},45393:function(t,h,y){var w=y(5968),A=y(57278),T=y(28013),E=y(8594),j="["+E+"]",B=RegExp("^"+j+j+"*"),N=RegExp(j+j+"*$"),exporter=function(t,h,y){var A={},j=T((function(){return!!E[t]()||"​"!="​"[t]()})),B=A[t]=j?h(V):E[t];y&&(A[y]=B),w(w.P+w.F*j,"String",A)},V=exporter.trim=function(t,h){return t=String(A(t)),1&h&&(t=t.replace(B,"")),2&h&&(t=t.replace(N,"")),t};t.exports=exporter},8594:function(t){t.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"},85813:function(t,h,y){var w,A,T,E=y(31218),j=y(860),B=y(32382),N=y(38826),V=y(35337),W=V.process,H=V.setImmediate,G=V.clearImmediate,z=V.MessageChannel,$=V.Dispatch,J=0,X={},K="onreadystatechange",run=function(){var t=+this;if(X.hasOwnProperty(t)){var h=X[t];delete X[t],h()}},listener=function(t){run.call(t.data)};H&&G||(H=function setImmediate(t){for(var h=[],y=1;arguments.length>y;)h.push(arguments[y++]);return X[++J]=function(){j("function"==typeof t?t:Function(t),h)},w(J),J},G=function clearImmediate(t){delete X[t]},"process"==y(90325)(W)?w=function(t){W.nextTick(E(run,t,1))}:$&&$.now?w=function(t){$.now(E(run,t,1))}:z?(T=(A=new z).port2,A.port1.onmessage=listener,w=E(T.postMessage,T,1)):V.addEventListener&&"function"==typeof postMessage&&!V.importScripts?(w=function(t){V.postMessage(t+"","*")},V.addEventListener("message",listener,!1)):w=K in N("script")?function(t){B.appendChild(N("script"))[K]=function(){B.removeChild(this),run.call(t)}}:function(t){setTimeout(E(run,t,1),0)}),t.exports={set:H,clear:G}},50527:function(t,h,y){var w=y(37596),A=Math.max,T=Math.min;t.exports=function(t,h){return(t=w(t))<0?A(t+h,0):T(t,h)}},36988:function(t,h,y){var w=y(37596),A=y(44142);t.exports=function(t){if(void 0===t)return 0;var h=w(t),y=A(h);if(h!==y)throw RangeError("Wrong length!");return y}},37596:function(t){var h=Math.ceil,y=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?y:h)(t)}},45831:function(t,h,y){var w=y(35356),A=y(57278);t.exports=function(t){return w(A(t))}},44142:function(t,h,y){var w=y(37596),A=Math.min;t.exports=function(t){return t>0?A(w(t),9007199254740991):0}},78938:function(t,h,y){var w=y(57278);t.exports=function(t){return Object(w(t))}},98493:function(t,h,y){var w=y(67228);t.exports=function(t,h){if(!w(t))return t;var y,A;if(h&&"function"==typeof(y=t.toString)&&!w(A=y.call(t)))return A;if("function"==typeof(y=t.valueOf)&&!w(A=y.call(t)))return A;if(!h&&"function"==typeof(y=t.toString)&&!w(A=y.call(t)))return A;throw TypeError("Can't convert object to primitive value")}},17171:function(t,h,y){if(y(87478)){var w=y(28642),A=y(35337),T=y(28013),E=y(5968),j=y(47050),B=y(47952),N=y(31218),V=y(73197),W=y(31046),H=y(61460),G=y(81469),z=y(37596),$=y(44142),J=y(36988),X=y(50527),K=y(98493),ne=y(4036),ue=y(76774),pe=y(67228),me=y(78938),ge=y(26035),we=y(63262),Ce=y(15497),ke=y(89851).f,Ie=y(13683),Te=y(61027),Ee=y(53581),Me=y(8948),Be=y(83504),Ne=y(52195),Ze=y(98678),et=y(32903),tt=y(62030),rt=y(15054),nt=y(65970),it=y(84594),at=y(85201),st=y(30295),lt=at.f,ct=st.f,ht=A.RangeError,vt=A.TypeError,gt=A.Uint8Array,bt="ArrayBuffer",_t="Shared"+bt,St="BYTES_PER_ELEMENT",wt="prototype",Ct=Array[wt],Pt=B.ArrayBuffer,kt=B.DataView,xt=Me(0),At=Me(2),It=Me(3),Tt=Me(4),Ot=Me(5),Et=Me(6),Ft=Be(!0),Rt=Be(!1),Dt=Ze.values,Mt=Ze.keys,jt=Ze.entries,Lt=Ct.lastIndexOf,Bt=Ct.reduce,Nt=Ct.reduceRight,Vt=Ct.join,Ut=Ct.sort,Wt=Ct.slice,Ht=Ct.toString,Gt=Ct.toLocaleString,zt=Ee("iterator"),qt=Ee("toStringTag"),$t=Te("typed_constructor"),Jt=Te("def_constructor"),Xt=j.CONSTR,Qt=j.TYPED,Kt=j.VIEW,Yt="Wrong length!",Zt=Me(1,(function(t,h){return allocate(Ne(t,t[Jt]),h)})),er=T((function(){return 1===new gt(new Uint16Array([1]).buffer)[0]})),tr=!!gt&&!!gt[wt].set&&T((function(){new gt(1).set({})})),toOffset=function(t,h){var y=z(t);if(y<0||y%h)throw ht("Wrong offset!");return y},validate=function(t){if(pe(t)&&Qt in t)return t;throw vt(t+" is not a typed array!")},allocate=function(t,h){if(!pe(t)||!($t in t))throw vt("It is not a typed array constructor!");return new t(h)},speciesFromList=function(t,h){return fromList(Ne(t,t[Jt]),h)},fromList=function(t,h){for(var y=0,w=h.length,A=allocate(t,w);w>y;)A[y]=h[y++];return A},addGetter=function(t,h,y){lt(t,h,{get:function(){return this._d[y]}})},rr=function from(t){var h,y,w,A,T,E,j=me(t),B=arguments.length,V=B>1?arguments[1]:void 0,W=void 0!==V,H=Ie(j);if(null!=H&&!ge(H)){for(E=H.call(j),w=[],h=0;!(T=E.next()).done;h++)w.push(T.value);j=w}for(W&&B>2&&(V=N(V,arguments[2],2)),h=0,y=$(j.length),A=allocate(this,y);y>h;h++)A[h]=W?V(j[h],h):j[h];return A},nr=function of(){for(var t=0,h=arguments.length,y=allocate(this,h);h>t;)y[t]=arguments[t++];return y},or=!!gt&&T((function(){Gt.call(new gt(1))})),ir=function toLocaleString(){return Gt.apply(or?Wt.call(validate(this)):validate(this),arguments)},ar={copyWithin:function copyWithin(t,h){return it.call(validate(this),t,h,arguments.length>2?arguments[2]:void 0)},every:function every(t){return Tt(validate(this),t,arguments.length>1?arguments[1]:void 0)},fill:function fill(t){return nt.apply(validate(this),arguments)},filter:function filter(t){return speciesFromList(this,At(validate(this),t,arguments.length>1?arguments[1]:void 0))},find:function find(t){return Ot(validate(this),t,arguments.length>1?arguments[1]:void 0)},findIndex:function findIndex(t){return Et(validate(this),t,arguments.length>1?arguments[1]:void 0)},forEach:function forEach(t){xt(validate(this),t,arguments.length>1?arguments[1]:void 0)},indexOf:function indexOf(t){return Rt(validate(this),t,arguments.length>1?arguments[1]:void 0)},includes:function includes(t){return Ft(validate(this),t,arguments.length>1?arguments[1]:void 0)},join:function join(t){return Vt.apply(validate(this),arguments)},lastIndexOf:function lastIndexOf(t){return Lt.apply(validate(this),arguments)},map:function map(t){return Zt(validate(this),t,arguments.length>1?arguments[1]:void 0)},reduce:function reduce(t){return Bt.apply(validate(this),arguments)},reduceRight:function reduceRight(t){return Nt.apply(validate(this),arguments)},reverse:function reverse(){for(var t,h=this,y=validate(h).length,w=Math.floor(y/2),A=0;A<w;)t=h[A],h[A++]=h[--y],h[y]=t;return h},some:function some(t){return It(validate(this),t,arguments.length>1?arguments[1]:void 0)},sort:function sort(t){return Ut.call(validate(this),t)},subarray:function subarray(t,h){var y=validate(this),w=y.length,A=X(t,w);return new(Ne(y,y[Jt]))(y.buffer,y.byteOffset+A*y.BYTES_PER_ELEMENT,$((void 0===h?w:X(h,w))-A))}},sr=function slice(t,h){return speciesFromList(this,Wt.call(validate(this),t,h))},lr=function set(t){validate(this);var h=toOffset(arguments[1],1),y=this.length,w=me(t),A=$(w.length),T=0;if(A+h>y)throw ht(Yt);for(;T<A;)this[h+T]=w[T++]},cr={entries:function entries(){return jt.call(validate(this))},keys:function keys(){return Mt.call(validate(this))},values:function values(){return Dt.call(validate(this))}},isTAIndex=function(t,h){return pe(t)&&t[Qt]&&"symbol"!=typeof h&&h in t&&String(+h)==String(h)},ur=function getOwnPropertyDescriptor(t,h){return isTAIndex(t,h=K(h,!0))?W(2,t[h]):ct(t,h)},pr=function defineProperty(t,h,y){return!(isTAIndex(t,h=K(h,!0))&&pe(y)&&ne(y,"value"))||ne(y,"get")||ne(y,"set")||y.configurable||ne(y,"writable")&&!y.writable||ne(y,"enumerable")&&!y.enumerable?lt(t,h,y):(t[h]=y.value,t)};Xt||(st.f=ur,at.f=pr),E(E.S+E.F*!Xt,"Object",{getOwnPropertyDescriptor:ur,defineProperty:pr}),T((function(){Ht.call({})}))&&(Ht=Gt=function toString(){return Vt.call(this)});var dr=G({},ar);G(dr,cr),H(dr,zt,cr.values),G(dr,{slice:sr,set:lr,constructor:function(){},toString:Ht,toLocaleString:ir}),addGetter(dr,"buffer","b"),addGetter(dr,"byteOffset","o"),addGetter(dr,"byteLength","l"),addGetter(dr,"length","e"),lt(dr,qt,{get:function(){return this[Qt]}}),t.exports=function(t,h,y,B){var N=t+((B=!!B)?"Clamped":"")+"Array",W="get"+t,G="set"+t,z=A[N],X=z||{},K=z&&Ce(z),ne=!z||!j.ABV,me={},ge=z&&z[wt],addElement=function(t,y){lt(t,y,{get:function(){return function(t,y){var w=t._d;return w.v[W](y*h+w.o,er)}(this,y)},set:function(t){return function(t,y,w){var A=t._d;B&&(w=(w=Math.round(w))<0?0:w>255?255:255&w),A.v[G](y*h+A.o,w,er)}(this,y,t)},enumerable:!0})};ne?(z=y((function(t,y,w,A){V(t,z,N,"_d");var T,E,j,B,W=0,G=0;if(pe(y)){if(!(y instanceof Pt||(B=ue(y))==bt||B==_t))return Qt in y?fromList(z,y):rr.call(z,y);T=y,G=toOffset(w,h);var X=y.byteLength;if(void 0===A){if(X%h)throw ht(Yt);if((E=X-G)<0)throw ht(Yt)}else if((E=$(A)*h)+G>X)throw ht(Yt);j=E/h}else j=J(y),T=new Pt(E=j*h);for(H(t,"_d",{b:T,o:G,l:E,e:j,v:new kt(T)});W<j;)addElement(t,W++)})),ge=z[wt]=we(dr),H(ge,"constructor",z)):T((function(){z(1)}))&&T((function(){new z(-1)}))&&tt((function(t){new z,new z(null),new z(1.5),new z(t)}),!0)||(z=y((function(t,y,w,A){var T;return V(t,z,N),pe(y)?y instanceof Pt||(T=ue(y))==bt||T==_t?void 0!==A?new X(y,toOffset(w,h),A):void 0!==w?new X(y,toOffset(w,h)):new X(y):Qt in y?fromList(z,y):rr.call(z,y):new X(J(y))})),xt(K!==Function.prototype?ke(X).concat(ke(K)):ke(X),(function(t){t in z||H(z,t,X[t])})),z[wt]=ge,w||(ge.constructor=z));var Ie=ge[zt],Te=!!Ie&&("values"==Ie.name||null==Ie.name),Ee=cr.values;H(z,$t,!0),H(ge,Qt,N),H(ge,Kt,!0),H(ge,Jt,z),(B?new z(1)[qt]==N:qt in ge)||lt(ge,qt,{get:function(){return N}}),me[N]=z,E(E.G+E.W+E.F*(z!=X),me),E(E.S,N,{BYTES_PER_ELEMENT:h}),E(E.S+E.F*T((function(){X.of.call(z,1)})),N,{from:rr,of:nr}),St in ge||H(ge,St,h),E(E.P,N,ar),rt(N),E(E.P+E.F*tr,N,{set:lr}),E(E.P+E.F*!Te,N,cr),w||ge.toString==Ht||(ge.toString=Ht),E(E.P+E.F*T((function(){new z(1).slice()})),N,{slice:sr}),E(E.P+E.F*(T((function(){return[1,2].toLocaleString()!=new z([1,2]).toLocaleString()}))||!T((function(){ge.toLocaleString.call([1,2])}))),N,{toLocaleString:ir}),et[N]=Te?Ie:Ee,w||Te||H(ge,zt,Ee)}}else t.exports=function(){}},47952:function(t,h,y){var w=y(35337),A=y(87478),T=y(28642),E=y(47050),j=y(61460),B=y(81469),N=y(28013),V=y(73197),W=y(37596),H=y(44142),G=y(36988),z=y(89851).f,$=y(85201).f,J=y(65970),X=y(41084),K="ArrayBuffer",ne="DataView",ue="prototype",pe="Wrong index!",me=w[K],ge=w[ne],we=w.Math,Ce=w.RangeError,ke=w.Infinity,Ie=me,Te=we.abs,Ee=we.pow,Me=we.floor,Be=we.log,Ne=we.LN2,Ze="buffer",et="byteLength",tt="byteOffset",rt=A?"_b":Ze,nt=A?"_l":et,it=A?"_o":tt;function packIEEE754(t,h,y){var w,A,T,E=new Array(y),j=8*y-h-1,B=(1<<j)-1,N=B>>1,V=23===h?Ee(2,-24)-Ee(2,-77):0,W=0,H=t<0||0===t&&1/t<0?1:0;for((t=Te(t))!=t||t===ke?(A=t!=t?1:0,w=B):(w=Me(Be(t)/Ne),t*(T=Ee(2,-w))<1&&(w--,T*=2),(t+=w+N>=1?V/T:V*Ee(2,1-N))*T>=2&&(w++,T/=2),w+N>=B?(A=0,w=B):w+N>=1?(A=(t*T-1)*Ee(2,h),w+=N):(A=t*Ee(2,N-1)*Ee(2,h),w=0));h>=8;E[W++]=255&A,A/=256,h-=8);for(w=w<<h|A,j+=h;j>0;E[W++]=255&w,w/=256,j-=8);return E[--W]|=128*H,E}function unpackIEEE754(t,h,y){var w,A=8*y-h-1,T=(1<<A)-1,E=T>>1,j=A-7,B=y-1,N=t[B--],V=127&N;for(N>>=7;j>0;V=256*V+t[B],B--,j-=8);for(w=V&(1<<-j)-1,V>>=-j,j+=h;j>0;w=256*w+t[B],B--,j-=8);if(0===V)V=1-E;else{if(V===T)return w?NaN:N?-ke:ke;w+=Ee(2,h),V-=E}return(N?-1:1)*w*Ee(2,V-h)}function unpackI32(t){return t[3]<<24|t[2]<<16|t[1]<<8|t[0]}function packI8(t){return[255&t]}function packI16(t){return[255&t,t>>8&255]}function packI32(t){return[255&t,t>>8&255,t>>16&255,t>>24&255]}function packF64(t){return packIEEE754(t,52,8)}function packF32(t){return packIEEE754(t,23,4)}function addGetter(t,h,y){$(t[ue],h,{get:function(){return this[y]}})}function get(t,h,y,w){var A=G(+y);if(A+h>t[nt])throw Ce(pe);var T=t[rt]._b,E=A+t[it],j=T.slice(E,E+h);return w?j:j.reverse()}function set(t,h,y,w,A,T){var E=G(+y);if(E+h>t[nt])throw Ce(pe);for(var j=t[rt]._b,B=E+t[it],N=w(+A),V=0;V<h;V++)j[B+V]=N[T?V:h-V-1]}if(E.ABV){if(!N((function(){me(1)}))||!N((function(){new me(-1)}))||N((function(){return new me,new me(1.5),new me(NaN),me.name!=K}))){for(var at,st=(me=function ArrayBuffer(t){return V(this,me),new Ie(G(t))})[ue]=Ie[ue],lt=z(Ie),ct=0;lt.length>ct;)(at=lt[ct++])in me||j(me,at,Ie[at]);T||(st.constructor=me)}var ht=new ge(new me(2)),vt=ge[ue].setInt8;ht.setInt8(0,2147483648),ht.setInt8(1,2147483649),!ht.getInt8(0)&&ht.getInt8(1)||B(ge[ue],{setInt8:function setInt8(t,h){vt.call(this,t,h<<24>>24)},setUint8:function setUint8(t,h){vt.call(this,t,h<<24>>24)}},!0)}else me=function ArrayBuffer(t){V(this,me,K);var h=G(t);this._b=J.call(new Array(h),0),this[nt]=h},ge=function DataView(t,h,y){V(this,ge,ne),V(t,me,ne);var w=t[nt],A=W(h);if(A<0||A>w)throw Ce("Wrong offset!");if(A+(y=void 0===y?w-A:H(y))>w)throw Ce("Wrong length!");this[rt]=t,this[it]=A,this[nt]=y},A&&(addGetter(me,et,"_l"),addGetter(ge,Ze,"_b"),addGetter(ge,et,"_l"),addGetter(ge,tt,"_o")),B(ge[ue],{getInt8:function getInt8(t){return get(this,1,t)[0]<<24>>24},getUint8:function getUint8(t){return get(this,1,t)[0]},getInt16:function getInt16(t){var h=get(this,2,t,arguments[1]);return(h[1]<<8|h[0])<<16>>16},getUint16:function getUint16(t){var h=get(this,2,t,arguments[1]);return h[1]<<8|h[0]},getInt32:function getInt32(t){return unpackI32(get(this,4,t,arguments[1]))},getUint32:function getUint32(t){return unpackI32(get(this,4,t,arguments[1]))>>>0},getFloat32:function getFloat32(t){return unpackIEEE754(get(this,4,t,arguments[1]),23,4)},getFloat64:function getFloat64(t){return unpackIEEE754(get(this,8,t,arguments[1]),52,8)},setInt8:function setInt8(t,h){set(this,1,t,packI8,h)},setUint8:function setUint8(t,h){set(this,1,t,packI8,h)},setInt16:function setInt16(t,h){set(this,2,t,packI16,h,arguments[2])},setUint16:function setUint16(t,h){set(this,2,t,packI16,h,arguments[2])},setInt32:function setInt32(t,h){set(this,4,t,packI32,h,arguments[2])},setUint32:function setUint32(t,h){set(this,4,t,packI32,h,arguments[2])},setFloat32:function setFloat32(t,h){set(this,4,t,packF32,h,arguments[2])},setFloat64:function setFloat64(t,h){set(this,8,t,packF64,h,arguments[2])}});X(me,K),X(ge,ne),j(ge[ue],E.VIEW,!0),h[K]=me,h[ne]=ge},47050:function(t,h,y){for(var w,A=y(35337),T=y(61460),E=y(61027),j=E("typed_array"),B=E("view"),N=!(!A.ArrayBuffer||!A.DataView),V=N,W=0,H="Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array".split(",");W<9;)(w=A[H[W++]])?(T(w.prototype,j,!0),T(w.prototype,B,!0)):V=!1;t.exports={ABV:N,CONSTR:V,TYPED:j,VIEW:B}},61027:function(t){var h=0,y=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++h+y).toString(36))}},61193:function(t,h,y){var w=y(35337).navigator;t.exports=w&&w.userAgent||""},65705:function(t,h,y){var w=y(67228);t.exports=function(t,h){if(!w(t)||t._t!==h)throw TypeError("Incompatible receiver, "+h+" required!");return t}},77803:function(t,h,y){var w=y(35337),A=y(39031),T=y(28642),E=y(71493),j=y(85201).f;t.exports=function(t){var h=A.Symbol||(A.Symbol=T?{}:w.Symbol||{});"_"==t.charAt(0)||t in h||j(h,t,{value:E.f(t)})}},71493:function(t,h,y){h.f=y(53581)},53581:function(t,h,y){var w=y(8059)("wks"),A=y(61027),T=y(35337).Symbol,E="function"==typeof T;(t.exports=function(t){return w[t]||(w[t]=E&&T[t]||(E?T:A)("Symbol."+t))}).store=w},13683:function(t,h,y){var w=y(76774),A=y(53581)("iterator"),T=y(32903);t.exports=y(39031).getIteratorMethod=function(t){if(null!=t)return t[A]||t["@@iterator"]||T[w(t)]}},99098:function(t,h,y){var w=y(5968);w(w.P,"Array",{copyWithin:y(84594)}),y(52451)("copyWithin")},1989:function(t,h,y){var w=y(5968),A=y(8948)(4);w(w.P+w.F*!y(92357)([].every,!0),"Array",{every:function every(t){return A(this,t,arguments[1])}})},38191:function(t,h,y){var w=y(5968);w(w.P,"Array",{fill:y(65970)}),y(52451)("fill")},75977:function(t,h,y){var w=y(5968),A=y(8948)(2);w(w.P+w.F*!y(92357)([].filter,!0),"Array",{filter:function filter(t){return A(this,t,arguments[1])}})},36265:function(t,h,y){var w=y(5968),A=y(8948)(6),T="findIndex",E=!0;T in[]&&Array(1)[T]((function(){E=!1})),w(w.P+w.F*E,"Array",{findIndex:function findIndex(t){return A(this,t,arguments.length>1?arguments[1]:void 0)}}),y(52451)(T)},2696:function(t,h,y){var w=y(5968),A=y(8948)(5),T="find",E=!0;T in[]&&Array(1)[T]((function(){E=!1})),w(w.P+w.F*E,"Array",{find:function find(t){return A(this,t,arguments.length>1?arguments[1]:void 0)}}),y(52451)(T)},92661:function(t,h,y){var w=y(5968),A=y(8948)(0),T=y(92357)([].forEach,!0);w(w.P+w.F*!T,"Array",{forEach:function forEach(t){return A(this,t,arguments[1])}})},55647:function(t,h,y){var w=y(31218),A=y(5968),T=y(78938),E=y(48913),j=y(26035),B=y(44142),N=y(29242),V=y(13683);A(A.S+A.F*!y(62030)((function(t){Array.from(t)})),"Array",{from:function from(t){var h,y,A,W,H=T(t),G="function"==typeof this?this:Array,z=arguments.length,$=z>1?arguments[1]:void 0,J=void 0!==$,X=0,K=V(H);if(J&&($=w($,z>2?arguments[2]:void 0,2)),null==K||G==Array&&j(K))for(y=new G(h=B(H.length));h>X;X++)N(y,X,J?$(H[X],X):H[X]);else for(W=K.call(H),y=new G;!(A=W.next()).done;X++)N(y,X,J?E(W,$,[A.value,X],!0):A.value);return y.length=X,y}})},50698:function(t,h,y){var w=y(5968),A=y(83504)(!1),T=[].indexOf,E=!!T&&1/[1].indexOf(1,-0)<0;w(w.P+w.F*(E||!y(92357)(T)),"Array",{indexOf:function indexOf(t){return E?T.apply(this,arguments)||0:A(this,t,arguments[1])}})},60546:function(t,h,y){var w=y(5968);w(w.S,"Array",{isArray:y(18808)})},98678:function(t,h,y){var w=y(52451),A=y(18920),T=y(32903),E=y(45831);t.exports=y(32755)(Array,"Array",(function(t,h){this._t=E(t),this._i=0,this._k=h}),(function(){var t=this._t,h=this._k,y=this._i++;return!t||y>=t.length?(this._t=void 0,A(1)):A(0,"keys"==h?y:"values"==h?t[y]:[y,t[y]])}),"values"),T.Arguments=T.Array,w("keys"),w("values"),w("entries")},4140:function(t,h,y){var w=y(5968),A=y(45831),T=[].join;w(w.P+w.F*(y(35356)!=Object||!y(92357)(T)),"Array",{join:function join(t){return T.call(A(this),void 0===t?",":t)}})},23876:function(t,h,y){var w=y(5968),A=y(45831),T=y(37596),E=y(44142),j=[].lastIndexOf,B=!!j&&1/[1].lastIndexOf(1,-0)<0;w(w.P+w.F*(B||!y(92357)(j)),"Array",{lastIndexOf:function lastIndexOf(t){if(B)return j.apply(this,arguments)||0;var h=A(this),y=E(h.length),w=y-1;for(arguments.length>1&&(w=Math.min(w,T(arguments[1]))),w<0&&(w=y+w);w>=0;w--)if(w in h&&h[w]===t)return w||0;return-1}})},43377:function(t,h,y){var w=y(5968),A=y(8948)(1);w(w.P+w.F*!y(92357)([].map,!0),"Array",{map:function map(t){return A(this,t,arguments[1])}})},12409:function(t,h,y){var w=y(5968),A=y(29242);w(w.S+w.F*y(28013)((function(){function F(){}return!(Array.of.call(F)instanceof F)})),"Array",{of:function of(){for(var t=0,h=arguments.length,y=new("function"==typeof this?this:Array)(h);h>t;)A(y,t,arguments[t++]);return y.length=h,y}})},89775:function(t,h,y){var w=y(5968),A=y(60708);w(w.P+w.F*!y(92357)([].reduceRight,!0),"Array",{reduceRight:function reduceRight(t){return A(this,t,arguments.length,arguments[1],!0)}})},24709:function(t,h,y){var w=y(5968),A=y(60708);w(w.P+w.F*!y(92357)([].reduce,!0),"Array",{reduce:function reduce(t){return A(this,t,arguments.length,arguments[1],!1)}})},9413:function(t,h,y){var w=y(5968),A=y(32382),T=y(90325),E=y(50527),j=y(44142),B=[].slice;w(w.P+w.F*y(28013)((function(){A&&B.call(A)})),"Array",{slice:function slice(t,h){var y=j(this.length),w=T(this);if(h=void 0===h?y:h,"Array"==w)return B.call(this,t,h);for(var A=E(t,y),N=E(h,y),V=j(N-A),W=new Array(V),H=0;H<V;H++)W[H]="String"==w?this.charAt(A+H):this[A+H];return W}})},41356:function(t,h,y){var w=y(5968),A=y(8948)(3);w(w.P+w.F*!y(92357)([].some,!0),"Array",{some:function some(t){return A(this,t,arguments[1])}})},93013:function(t,h,y){var w=y(5968),A=y(94405),T=y(78938),E=y(28013),j=[].sort,B=[1,2,3];w(w.P+w.F*(E((function(){B.sort(void 0)}))||!E((function(){B.sort(null)}))||!y(92357)(j)),"Array",{sort:function sort(t){return void 0===t?j.call(T(this)):j.call(T(this),A(t))}})},88873:function(t,h,y){y(15054)("Array")},6495:function(t,h,y){var w=y(5968);w(w.S,"Date",{now:function(){return(new Date).getTime()}})},90539:function(t,h,y){var w=y(5968),A=y(64905);w(w.P+w.F*(Date.prototype.toISOString!==A),"Date",{toISOString:A})},14532:function(t,h,y){var w=y(5968),A=y(78938),T=y(98493);w(w.P+w.F*y(28013)((function(){return null!==new Date(NaN).toJSON()||1!==Date.prototype.toJSON.call({toISOString:function(){return 1}})})),"Date",{toJSON:function toJSON(t){var h=A(this),y=T(h);return"number"!=typeof y||isFinite(y)?h.toISOString():null}})},79683:function(t,h,y){var w=y(53581)("toPrimitive"),A=Date.prototype;w in A||y(61460)(A,w,y(76661))},23094:function(t,h,y){var w=Date.prototype,A="Invalid Date",T="toString",E=w[T],j=w.getTime;new Date(NaN)+""!=A&&y(46740)(w,T,(function toString(){var t=j.call(this);return t==t?E.call(this):A}))},71242:function(t,h,y){var w=y(5968);w(w.P,"Function",{bind:y(37807)})},15242:function(t,h,y){var w=y(67228),A=y(15497),T=y(53581)("hasInstance"),E=Function.prototype;T in E||y(85201).f(E,T,{value:function(t){if("function"!=typeof this||!w(t))return!1;if(!w(this.prototype))return t instanceof this;for(;t=A(t);)if(this.prototype===t)return!0;return!1}})},84154:function(t,h,y){var w=y(85201).f,A=Function.prototype,T=/^\s*function ([^ (]*)/,E="name";E in A||y(87478)&&w(A,E,{configurable:!0,get:function(){try{return(""+this).match(T)[1]}catch(t){return""}}})},93354:function(t,h,y){var w=y(9775),A=y(65705),T="Map";t.exports=y(23382)(T,(function(t){return function Map(){return t(this,arguments.length>0?arguments[0]:void 0)}}),{get:function get(t){var h=w.getEntry(A(this,T),t);return h&&h.v},set:function set(t,h){return w.def(A(this,T),0===t?0:t,h)}},w,!0)},31022:function(t,h,y){var w=y(5968),A=y(88562),T=Math.sqrt,E=Math.acosh;w(w.S+w.F*!(E&&710==Math.floor(E(Number.MAX_VALUE))&&E(1/0)==1/0),"Math",{acosh:function acosh(t){return(t=+t)<1?NaN:t>94906265.62425156?Math.log(t)+Math.LN2:A(t-1+T(t-1)*T(t+1))}})},54585:function(t,h,y){var w=y(5968),A=Math.asinh;w(w.S+w.F*!(A&&1/A(0)>0),"Math",{asinh:function asinh(t){return isFinite(t=+t)&&0!=t?t<0?-asinh(-t):Math.log(t+Math.sqrt(t*t+1)):t}})},10512:function(t,h,y){var w=y(5968),A=Math.atanh;w(w.S+w.F*!(A&&1/A(-0)<0),"Math",{atanh:function atanh(t){return 0==(t=+t)?t:Math.log((1+t)/(1-t))/2}})},45697:function(t,h,y){var w=y(5968),A=y(93473);w(w.S,"Math",{cbrt:function cbrt(t){return A(t=+t)*Math.pow(Math.abs(t),1/3)}})},41036:function(t,h,y){var w=y(5968);w(w.S,"Math",{clz32:function clz32(t){return(t>>>=0)?31-Math.floor(Math.log(t+.5)*Math.LOG2E):32}})},97463:function(t,h,y){var w=y(5968),A=Math.exp;w(w.S,"Math",{cosh:function cosh(t){return(A(t=+t)+A(-t))/2}})},78234:function(t,h,y){var w=y(5968),A=y(94473);w(w.S+w.F*(A!=Math.expm1),"Math",{expm1:A})},32120:function(t,h,y){var w=y(5968);w(w.S,"Math",{fround:y(53873)})},54623:function(t,h,y){var w=y(5968),A=Math.abs;w(w.S,"Math",{hypot:function hypot(t,h){for(var y,w,T=0,E=0,j=arguments.length,B=0;E<j;)B<(y=A(arguments[E++]))?(T=T*(w=B/y)*w+1,B=y):T+=y>0?(w=y/B)*w:y;return B===1/0?1/0:B*Math.sqrt(T)}})},30153:function(t,h,y){var w=y(5968),A=Math.imul;w(w.S+w.F*y(28013)((function(){return-5!=A(4294967295,5)||2!=A.length})),"Math",{imul:function imul(t,h){var y=65535,w=+t,A=+h,T=y&w,E=y&A;return 0|T*E+((y&w>>>16)*E+T*(y&A>>>16)<<16>>>0)}})},52998:function(t,h,y){var w=y(5968);w(w.S,"Math",{log10:function log10(t){return Math.log(t)*Math.LOG10E}})},38990:function(t,h,y){var w=y(5968);w(w.S,"Math",{log1p:y(88562)})},14429:function(t,h,y){var w=y(5968);w(w.S,"Math",{log2:function log2(t){return Math.log(t)/Math.LN2}})},61225:function(t,h,y){var w=y(5968);w(w.S,"Math",{sign:y(93473)})},29710:function(t,h,y){var w=y(5968),A=y(94473),T=Math.exp;w(w.S+w.F*y(28013)((function(){return-2e-17!=!Math.sinh(-2e-17)})),"Math",{sinh:function sinh(t){return Math.abs(t=+t)<1?(A(t)-A(-t))/2:(T(t-1)-T(-t-1))*(Math.E/2)}})},70395:function(t,h,y){var w=y(5968),A=y(94473),T=Math.exp;w(w.S,"Math",{tanh:function tanh(t){var h=A(t=+t),y=A(-t);return h==1/0?1:y==1/0?-1:(h-y)/(T(t)+T(-t))}})},48084:function(t,h,y){var w=y(5968);w(w.S,"Math",{trunc:function trunc(t){return(t>0?Math.floor:Math.ceil)(t)}})},95782:function(t,h,y){var w=y(35337),A=y(4036),T=y(90325),E=y(17340),j=y(98493),B=y(28013),N=y(89851).f,V=y(30295).f,W=y(85201).f,H=y(45393).trim,G="Number",z=w[G],$=z,J=z.prototype,X=T(y(63262)(J))==G,K="trim"in String.prototype,toNumber=function(t){var h=j(t,!1);if("string"==typeof h&&h.length>2){var y,w,A,T=(h=K?h.trim():H(h,3)).charCodeAt(0);if(43===T||45===T){if(88===(y=h.charCodeAt(2))||120===y)return NaN}else if(48===T){switch(h.charCodeAt(1)){case 66:case 98:w=2,A=49;break;case 79:case 111:w=8,A=55;break;default:return+h}for(var E,B=h.slice(2),N=0,V=B.length;N<V;N++)if((E=B.charCodeAt(N))<48||E>A)return NaN;return parseInt(B,w)}}return+h};if(!z(" 0o1")||!z("0b1")||z("+0x1")){z=function Number(t){var h=arguments.length<1?0:t,y=this;return y instanceof z&&(X?B((function(){J.valueOf.call(y)})):T(y)!=G)?E(new $(toNumber(h)),y,z):toNumber(h)};for(var ne,ue=y(87478)?N($):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),pe=0;ue.length>pe;pe++)A($,ne=ue[pe])&&!A(z,ne)&&W(z,ne,V($,ne));z.prototype=J,J.constructor=z,y(46740)(w,G,z)}},33065:function(t,h,y){var w=y(5968);w(w.S,"Number",{EPSILON:Math.pow(2,-52)})},87938:function(t,h,y){var w=y(5968),A=y(35337).isFinite;w(w.S,"Number",{isFinite:function isFinite(t){return"number"==typeof t&&A(t)}})},49665:function(t,h,y){var w=y(5968);w(w.S,"Number",{isInteger:y(90672)})},50554:function(t,h,y){var w=y(5968);w(w.S,"Number",{isNaN:function isNaN(t){return t!=t}})},47890:function(t,h,y){var w=y(5968),A=y(90672),T=Math.abs;w(w.S,"Number",{isSafeInteger:function isSafeInteger(t){return A(t)&&T(t)<=9007199254740991}})},60583:function(t,h,y){var w=y(5968);w(w.S,"Number",{MAX_SAFE_INTEGER:9007199254740991})},62696:function(t,h,y){var w=y(5968);w(w.S,"Number",{MIN_SAFE_INTEGER:-9007199254740991})},5766:function(t,h,y){var w=y(5968),A=y(18820);w(w.S+w.F*(Number.parseFloat!=A),"Number",{parseFloat:A})},44562:function(t,h,y){var w=y(5968),A=y(53974);w(w.S+w.F*(Number.parseInt!=A),"Number",{parseInt:A})},98750:function(t,h,y){var w=y(5968),A=y(37596),T=y(96270),E=y(69991),j=1..toFixed,B=Math.floor,N=[0,0,0,0,0,0],V="Number.toFixed: incorrect invocation!",W="0",multiply=function(t,h){for(var y=-1,w=h;++y<6;)w+=t*N[y],N[y]=w%1e7,w=B(w/1e7)},divide=function(t){for(var h=6,y=0;--h>=0;)y+=N[h],N[h]=B(y/t),y=y%t*1e7},numToString=function(){for(var t=6,h="";--t>=0;)if(""!==h||0===t||0!==N[t]){var y=String(N[t]);h=""===h?y:h+E.call(W,7-y.length)+y}return h},pow=function(t,h,y){return 0===h?y:h%2==1?pow(t,h-1,y*t):pow(t*t,h/2,y)};w(w.P+w.F*(!!j&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!y(28013)((function(){j.call({})}))),"Number",{toFixed:function toFixed(t){var h,y,w,j,B=T(this,V),N=A(t),H="",G=W;if(N<0||N>20)throw RangeError(V);if(B!=B)return"NaN";if(B<=-1e21||B>=1e21)return String(B);if(B<0&&(H="-",B=-B),B>1e-21)if(h=function(t){for(var h=0,y=t;y>=4096;)h+=12,y/=4096;for(;y>=2;)h+=1,y/=2;return h}(B*pow(2,69,1))-69,y=h<0?B*pow(2,-h,1):B/pow(2,h,1),y*=4503599627370496,(h=52-h)>0){for(multiply(0,y),w=N;w>=7;)multiply(1e7,0),w-=7;for(multiply(pow(10,w,1),0),w=h-1;w>=23;)divide(1<<23),w-=23;divide(1<<w),multiply(1,1),divide(2),G=numToString()}else multiply(0,y),multiply(1<<-h,0),G=numToString()+E.call(W,N);return G=N>0?H+((j=G.length)<=N?"0."+E.call(W,N-j)+G:G.slice(0,j-N)+"."+G.slice(j-N)):H+G}})},38256:function(t,h,y){var w=y(5968),A=y(28013),T=y(96270),E=1..toPrecision;w(w.P+w.F*(A((function(){return"1"!==E.call(1,void 0)}))||!A((function(){E.call({})}))),"Number",{toPrecision:function toPrecision(t){var h=T(this,"Number#toPrecision: incorrect invocation!");return void 0===t?E.call(h):E.call(h,t)}})},78922:function(t,h,y){var w=y(5968);w(w.S+w.F,"Object",{assign:y(8360)})},77325:function(t,h,y){var w=y(5968);w(w.S,"Object",{create:y(63262)})},69653:function(t,h,y){var w=y(5968);w(w.S+w.F*!y(87478),"Object",{defineProperties:y(39025)})},86783:function(t,h,y){var w=y(5968);w(w.S+w.F*!y(87478),"Object",{defineProperty:y(85201).f})},49472:function(t,h,y){var w=y(67228),A=y(57270).onFreeze;y(12783)("freeze",(function(t){return function freeze(h){return t&&w(h)?t(A(h)):h}}))},3457:function(t,h,y){var w=y(45831),A=y(30295).f;y(12783)("getOwnPropertyDescriptor",(function(){return function getOwnPropertyDescriptor(t,h){return A(w(t),h)}}))},20869:function(t,h,y){y(12783)("getOwnPropertyNames",(function(){return y(66251).f}))},71551:function(t,h,y){var w=y(78938),A=y(15497);y(12783)("getPrototypeOf",(function(){return function getPrototypeOf(t){return A(w(t))}}))},71747:function(t,h,y){var w=y(67228);y(12783)("isExtensible",(function(t){return function isExtensible(h){return!!w(h)&&(!t||t(h))}}))},18370:function(t,h,y){var w=y(67228);y(12783)("isFrozen",(function(t){return function isFrozen(h){return!w(h)||!!t&&t(h)}}))},46717:function(t,h,y){var w=y(67228);y(12783)("isSealed",(function(t){return function isSealed(h){return!w(h)||!!t&&t(h)}}))},61079:function(t,h,y){var w=y(5968);w(w.S,"Object",{is:y(2253)})},20103:function(t,h,y){var w=y(78938),A=y(54567);y(12783)("keys",(function(){return function keys(t){return A(w(t))}}))},59659:function(t,h,y){var w=y(67228),A=y(57270).onFreeze;y(12783)("preventExtensions",(function(t){return function preventExtensions(h){return t&&w(h)?t(A(h)):h}}))},41030:function(t,h,y){var w=y(67228),A=y(57270).onFreeze;y(12783)("seal",(function(t){return function seal(h){return t&&w(h)?t(A(h)):h}}))},16628:function(t,h,y){var w=y(5968);w(w.S,"Object",{setPrototypeOf:y(28930).set})},54858:function(t,h,y){var w=y(76774),A={};A[y(53581)("toStringTag")]="z",A+""!="[object z]"&&y(46740)(Object.prototype,"toString",(function toString(){return"[object "+w(this)+"]"}),!0)},27471:function(t,h,y){var w=y(5968),A=y(18820);w(w.G+w.F*(parseFloat!=A),{parseFloat:A})},91023:function(t,h,y){var w=y(5968),A=y(53974);w(w.G+w.F*(parseInt!=A),{parseInt:A})},57200:function(t,h,y){var w,A,T,E,j=y(28642),B=y(35337),N=y(31218),V=y(76774),W=y(5968),H=y(67228),G=y(94405),z=y(73197),$=y(24409),J=y(52195),X=y(85813).set,K=y(3516)(),ne=y(27711),ue=y(6800),pe=y(61193),me=y(67567),ge="Promise",we=B.TypeError,Ce=B.process,ke=Ce&&Ce.versions,Ie=ke&&ke.v8||"",Te=B[ge],Ee="process"==V(Ce),empty=function(){},Me=A=ne.f,Be=!!function(){try{var t=Te.resolve(1),h=(t.constructor={})[y(53581)("species")]=function(t){t(empty,empty)};return(Ee||"function"==typeof PromiseRejectionEvent)&&t.then(empty)instanceof h&&0!==Ie.indexOf("6.6")&&-1===pe.indexOf("Chrome/66")}catch(t){}}(),isThenable=function(t){var h;return!(!H(t)||"function"!=typeof(h=t.then))&&h},notify=function(t,h){if(!t._n){t._n=!0;var y=t._c;K((function(){for(var w=t._v,A=1==t._s,T=0,run=function(h){var y,T,E,j=A?h.ok:h.fail,B=h.resolve,N=h.reject,V=h.domain;try{j?(A||(2==t._h&&onHandleUnhandled(t),t._h=1),!0===j?y=w:(V&&V.enter(),y=j(w),V&&(V.exit(),E=!0)),y===h.promise?N(we("Promise-chain cycle")):(T=isThenable(y))?T.call(y,B,N):B(y)):N(w)}catch(t){V&&!E&&V.exit(),N(t)}};y.length>T;)run(y[T++]);t._c=[],t._n=!1,h&&!t._h&&onUnhandled(t)}))}},onUnhandled=function(t){X.call(B,(function(){var h,y,w,A=t._v,T=isUnhandled(t);if(T&&(h=ue((function(){Ee?Ce.emit("unhandledRejection",A,t):(y=B.onunhandledrejection)?y({promise:t,reason:A}):(w=B.console)&&w.error&&w.error("Unhandled promise rejection",A)})),t._h=Ee||isUnhandled(t)?2:1),t._a=void 0,T&&h.e)throw h.v}))},isUnhandled=function(t){return 1!==t._h&&0===(t._a||t._c).length},onHandleUnhandled=function(t){X.call(B,(function(){var h;Ee?Ce.emit("rejectionHandled",t):(h=B.onrejectionhandled)&&h({promise:t,reason:t._v})}))},$reject=function(t){var h=this;h._d||(h._d=!0,(h=h._w||h)._v=t,h._s=2,h._a||(h._a=h._c.slice()),notify(h,!0))},$resolve=function(t){var h,y=this;if(!y._d){y._d=!0,y=y._w||y;try{if(y===t)throw we("Promise can't be resolved itself");(h=isThenable(t))?K((function(){var w={_w:y,_d:!1};try{h.call(t,N($resolve,w,1),N($reject,w,1))}catch(t){$reject.call(w,t)}})):(y._v=t,y._s=1,notify(y,!1))}catch(t){$reject.call({_w:y,_d:!1},t)}}};Be||(Te=function Promise(t){z(this,Te,ge,"_h"),G(t),w.call(this);try{t(N($resolve,this,1),N($reject,this,1))}catch(t){$reject.call(this,t)}},(w=function Promise(t){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=y(81469)(Te.prototype,{then:function then(t,h){var y=Me(J(this,Te));return y.ok="function"!=typeof t||t,y.fail="function"==typeof h&&h,y.domain=Ee?Ce.domain:void 0,this._c.push(y),this._a&&this._a.push(y),this._s&&notify(this,!1),y.promise},catch:function(t){return this.then(void 0,t)}}),T=function(){var t=new w;this.promise=t,this.resolve=N($resolve,t,1),this.reject=N($reject,t,1)},ne.f=Me=function(t){return t===Te||t===E?new T(t):A(t)}),W(W.G+W.W+W.F*!Be,{Promise:Te}),y(41084)(Te,ge),y(15054)(ge),E=y(39031)[ge],W(W.S+W.F*!Be,ge,{reject:function reject(t){var h=Me(this);return(0,h.reject)(t),h.promise}}),W(W.S+W.F*(j||!Be),ge,{resolve:function resolve(t){return me(j&&this===E?Te:this,t)}}),W(W.S+W.F*!(Be&&y(62030)((function(t){Te.all(t).catch(empty)}))),ge,{all:function all(t){var h=this,y=Me(h),w=y.resolve,A=y.reject,T=ue((function(){var y=[],T=0,E=1;$(t,!1,(function(t){var j=T++,B=!1;y.push(void 0),E++,h.resolve(t).then((function(t){B||(B=!0,y[j]=t,--E||w(y))}),A)})),--E||w(y)}));return T.e&&A(T.v),y.promise},race:function race(t){var h=this,y=Me(h),w=y.reject,A=ue((function(){$(t,!1,(function(t){h.resolve(t).then(y.resolve,w)}))}));return A.e&&w(A.v),y.promise}})},90960:function(t,h,y){var w=y(5968),A=y(94405),T=y(86291),E=(y(35337).Reflect||{}).apply,j=Function.apply;w(w.S+w.F*!y(28013)((function(){E((function(){}))})),"Reflect",{apply:function apply(t,h,y){var w=A(t),B=T(y);return E?E(w,h,B):j.call(w,h,B)}})},9:function(t,h,y){var w=y(5968),A=y(63262),T=y(94405),E=y(86291),j=y(67228),B=y(28013),N=y(37807),V=(y(35337).Reflect||{}).construct,W=B((function(){function F(){}return!(V((function(){}),[],F)instanceof F)})),H=!B((function(){V((function(){}))}));w(w.S+w.F*(W||H),"Reflect",{construct:function construct(t,h){T(t),E(h);var y=arguments.length<3?t:T(arguments[2]);if(H&&!W)return V(t,h,y);if(t==y){switch(h.length){case 0:return new t;case 1:return new t(h[0]);case 2:return new t(h[0],h[1]);case 3:return new t(h[0],h[1],h[2]);case 4:return new t(h[0],h[1],h[2],h[3])}var w=[null];return w.push.apply(w,h),new(N.apply(t,w))}var B=y.prototype,G=A(j(B)?B:Object.prototype),z=Function.apply.call(t,G,h);return j(z)?z:G}})},52300:function(t,h,y){var w=y(85201),A=y(5968),T=y(86291),E=y(98493);A(A.S+A.F*y(28013)((function(){Reflect.defineProperty(w.f({},1,{value:1}),1,{value:2})})),"Reflect",{defineProperty:function defineProperty(t,h,y){T(t),h=E(h,!0),T(y);try{return w.f(t,h,y),!0}catch(t){return!1}}})},66090:function(t,h,y){var w=y(5968),A=y(30295).f,T=y(86291);w(w.S,"Reflect",{deleteProperty:function deleteProperty(t,h){var y=A(T(t),h);return!(y&&!y.configurable)&&delete t[h]}})},64867:function(t,h,y){var w=y(5968),A=y(86291),Enumerate=function(t){this._t=A(t),this._i=0;var h,y=this._k=[];for(h in t)y.push(h)};y(11295)(Enumerate,"Object",(function(){var t,h=this,y=h._k;do{if(h._i>=y.length)return{value:void 0,done:!0}}while(!((t=y[h._i++])in h._t));return{value:t,done:!1}})),w(w.S,"Reflect",{enumerate:function enumerate(t){return new Enumerate(t)}})},39118:function(t,h,y){var w=y(30295),A=y(5968),T=y(86291);A(A.S,"Reflect",{getOwnPropertyDescriptor:function getOwnPropertyDescriptor(t,h){return w.f(T(t),h)}})},16651:function(t,h,y){var w=y(5968),A=y(15497),T=y(86291);w(w.S,"Reflect",{getPrototypeOf:function getPrototypeOf(t){return A(T(t))}})},43837:function(t,h,y){var w=y(30295),A=y(15497),T=y(4036),E=y(5968),j=y(67228),B=y(86291);E(E.S,"Reflect",{get:function get(t,h){var y,E,N=arguments.length<3?t:arguments[2];return B(t)===N?t[h]:(y=w.f(t,h))?T(y,"value")?y.value:void 0!==y.get?y.get.call(N):void 0:j(E=A(t))?get(E,h,N):void 0}})},29398:function(t,h,y){var w=y(5968);w(w.S,"Reflect",{has:function has(t,h){return h in t}})},91290:function(t,h,y){var w=y(5968),A=y(86291),T=Object.isExtensible;w(w.S,"Reflect",{isExtensible:function isExtensible(t){return A(t),!T||T(t)}})},55858:function(t,h,y){var w=y(5968);w(w.S,"Reflect",{ownKeys:y(55693)})},64938:function(t,h,y){var w=y(5968),A=y(86291),T=Object.preventExtensions;w(w.S,"Reflect",{preventExtensions:function preventExtensions(t){A(t);try{return T&&T(t),!0}catch(t){return!1}}})},11356:function(t,h,y){var w=y(5968),A=y(28930);A&&w(w.S,"Reflect",{setPrototypeOf:function setPrototypeOf(t,h){A.check(t,h);try{return A.set(t,h),!0}catch(t){return!1}}})},53402:function(t,h,y){var w=y(85201),A=y(30295),T=y(15497),E=y(4036),j=y(5968),B=y(31046),N=y(86291),V=y(67228);j(j.S,"Reflect",{set:function set(t,h,y){var j,W,H=arguments.length<4?t:arguments[3],G=A.f(N(t),h);if(!G){if(V(W=T(t)))return set(W,h,y,H);G=B(0)}if(E(G,"value")){if(!1===G.writable||!V(H))return!1;if(j=A.f(H,h)){if(j.get||j.set||!1===j.writable)return!1;j.value=y,w.f(H,h,j)}else w.f(H,h,B(0,y));return!0}return void 0!==G.set&&(G.set.call(H,y),!0)}})},13346:function(t,h,y){var w=y(35337),A=y(17340),T=y(85201).f,E=y(89851).f,j=y(25772),B=y(55351),N=w.RegExp,V=N,W=N.prototype,H=/a/g,G=/a/g,z=new N(H)!==H;if(y(87478)&&(!z||y(28013)((function(){return G[y(53581)("match")]=!1,N(H)!=H||N(G)==G||"/a/i"!=N(H,"i")})))){N=function RegExp(t,h){var y=this instanceof N,w=j(t),T=void 0===h;return!y&&w&&t.constructor===N&&T?t:A(z?new V(w&&!T?t.source:t,h):V((w=t instanceof N)?t.source:t,w&&T?B.call(t):h),y?this:W,N)};for(var proxy=function(t){t in N||T(N,t,{configurable:!0,get:function(){return V[t]},set:function(h){V[t]=h}})},$=E(V),J=0;$.length>J;)proxy($[J++]);W.constructor=N,N.prototype=W,y(46740)(w,"RegExp",N)}y(15054)("RegExp")},17722:function(t,h,y){var w=y(7632);y(5968)({target:"RegExp",proto:!0,forced:w!==/./.exec},{exec:w})},58669:function(t,h,y){y(87478)&&"g"!=/./g.flags&&y(85201).f(RegExp.prototype,"flags",{configurable:!0,get:y(55351)})},8078:function(t,h,y){var w=y(86291),A=y(44142),T=y(28831),E=y(99592);y(26943)("match",1,(function(t,h,y,j){return[function match(y){var w=t(this),A=null==y?void 0:y[h];return void 0!==A?A.call(y,w):new RegExp(y)[h](String(w))},function(t){var h=j(y,t,this);if(h.done)return h.value;var B=w(t),N=String(this);if(!B.global)return E(B,N);var V=B.unicode;B.lastIndex=0;for(var W,H=[],G=0;null!==(W=E(B,N));){var z=String(W[0]);H[G]=z,""===z&&(B.lastIndex=T(N,A(B.lastIndex),V)),G++}return 0===G?null:H}]}))},26360:function(t,h,y){var w=y(86291),A=y(78938),T=y(44142),E=y(37596),j=y(28831),B=y(99592),N=Math.max,V=Math.min,W=Math.floor,H=/\$([$&`']|\d\d?|<[^>]*>)/g,G=/\$([$&`']|\d\d?)/g;y(26943)("replace",2,(function(t,h,y,z){return[function replace(w,A){var T=t(this),E=null==w?void 0:w[h];return void 0!==E?E.call(w,T,A):y.call(String(T),w,A)},function(t,h){var A=z(y,t,this,h);if(A.done)return A.value;var W=w(t),H=String(this),G="function"==typeof h;G||(h=String(h));var $=W.global;if($){var J=W.unicode;W.lastIndex=0}for(var X=[];;){var K=B(W,H);if(null===K)break;if(X.push(K),!$)break;""===String(K[0])&&(W.lastIndex=j(H,T(W.lastIndex),J))}for(var ne,ue="",pe=0,me=0;me<X.length;me++){K=X[me];for(var ge=String(K[0]),we=N(V(E(K.index),H.length),0),Ce=[],ke=1;ke<K.length;ke++)Ce.push(void 0===(ne=K[ke])?ne:String(ne));var Ie=K.groups;if(G){var Te=[ge].concat(Ce,we,H);void 0!==Ie&&Te.push(Ie);var Ee=String(h.apply(void 0,Te))}else Ee=getSubstitution(ge,H,we,Ce,Ie,h);we>=pe&&(ue+=H.slice(pe,we)+Ee,pe=we+ge.length)}return ue+H.slice(pe)}];function getSubstitution(t,h,w,T,E,j){var B=w+t.length,N=T.length,V=G;return void 0!==E&&(E=A(E),V=H),y.call(j,V,(function(y,A){var j;switch(A.charAt(0)){case"$":return"$";case"&":return t;case"`":return h.slice(0,w);case"'":return h.slice(B);case"<":j=E[A.slice(1,-1)];break;default:var V=+A;if(0===V)return y;if(V>N){var H=W(V/10);return 0===H?y:H<=N?void 0===T[H-1]?A.charAt(1):T[H-1]+A.charAt(1):y}j=T[V-1]}return void 0===j?"":j}))}}))},3483:function(t,h,y){var w=y(86291),A=y(2253),T=y(99592);y(26943)("search",1,(function(t,h,y,E){return[function search(y){var w=t(this),A=null==y?void 0:y[h];return void 0!==A?A.call(y,w):new RegExp(y)[h](String(w))},function(t){var h=E(y,t,this);if(h.done)return h.value;var j=w(t),B=String(this),N=j.lastIndex;A(N,0)||(j.lastIndex=0);var V=T(j,B);return A(j.lastIndex,N)||(j.lastIndex=N),null===V?-1:V.index}]}))},49988:function(t,h,y){var w=y(25772),A=y(86291),T=y(52195),E=y(28831),j=y(44142),B=y(99592),N=y(7632),V=y(28013),W=Math.min,H=[].push,G="split",z="length",$="lastIndex",J=4294967295,X=!V((function(){RegExp(J,"y")}));y(26943)("split",2,(function(t,h,y,V){var K;return K="c"=="abbc"[G](/(b)*/)[1]||4!="test"[G](/(?:)/,-1)[z]||2!="ab"[G](/(?:ab)*/)[z]||4!="."[G](/(.?)(.?)/)[z]||"."[G](/()()/)[z]>1||""[G](/.?/)[z]?function(t,h){var A=String(this);if(void 0===t&&0===h)return[];if(!w(t))return y.call(A,t,h);for(var T,E,j,B=[],V=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),W=0,G=void 0===h?J:h>>>0,X=new RegExp(t.source,V+"g");(T=N.call(X,A))&&!((E=X[$])>W&&(B.push(A.slice(W,T.index)),T[z]>1&&T.index<A[z]&&H.apply(B,T.slice(1)),j=T[0][z],W=E,B[z]>=G));)X[$]===T.index&&X[$]++;return W===A[z]?!j&&X.test("")||B.push(""):B.push(A.slice(W)),B[z]>G?B.slice(0,G):B}:"0"[G](void 0,0)[z]?function(t,h){return void 0===t&&0===h?[]:y.call(this,t,h)}:y,[function split(y,w){var A=t(this),T=null==y?void 0:y[h];return void 0!==T?T.call(y,A,w):K.call(String(A),y,w)},function(t,h){var w=V(K,t,this,h,K!==y);if(w.done)return w.value;var N=A(t),H=String(this),G=T(N,RegExp),z=N.unicode,$=(N.ignoreCase?"i":"")+(N.multiline?"m":"")+(N.unicode?"u":"")+(X?"y":"g"),ne=new G(X?N:"^(?:"+N.source+")",$),ue=void 0===h?J:h>>>0;if(0===ue)return[];if(0===H.length)return null===B(ne,H)?[H]:[];for(var pe=0,me=0,ge=[];me<H.length;){ne.lastIndex=X?me:0;var we,Ce=B(ne,X?H:H.slice(me));if(null===Ce||(we=W(j(ne.lastIndex+(X?0:me)),H.length))===pe)me=E(H,me,z);else{if(ge.push(H.slice(pe,me)),ge.length===ue)return ge;for(var ke=1;ke<=Ce.length-1;ke++)if(ge.push(Ce[ke]),ge.length===ue)return ge;me=pe=we}}return ge.push(H.slice(pe)),ge}]}))},47414:function(t,h,y){y(58669);var w=y(86291),A=y(55351),T=y(87478),E="toString",j=/./[E],define=function(t){y(46740)(RegExp.prototype,E,t,!0)};y(28013)((function(){return"/a/b"!=j.call({source:"a",flags:"b"})}))?define((function toString(){var t=w(this);return"/".concat(t.source,"/","flags"in t?t.flags:!T&&t instanceof RegExp?A.call(t):void 0)})):j.name!=E&&define((function toString(){return j.call(this)}))},178:function(t,h,y){var w=y(9775),A=y(65705);t.exports=y(23382)("Set",(function(t){return function Set(){return t(this,arguments.length>0?arguments[0]:void 0)}}),{add:function add(t){return w.def(A(this,"Set"),t=0===t?0:t,t)}},w)},9686:function(t,h,y){y(83541)("anchor",(function(t){return function anchor(h){return t(this,"a","name",h)}}))},53512:function(t,h,y){y(83541)("big",(function(t){return function big(){return t(this,"big","","")}}))},78928:function(t,h,y){y(83541)("blink",(function(t){return function blink(){return t(this,"blink","","")}}))},30590:function(t,h,y){y(83541)("bold",(function(t){return function bold(){return t(this,"b","","")}}))},22729:function(t,h,y){var w=y(5968),A=y(55185)(!1);w(w.P,"String",{codePointAt:function codePointAt(t){return A(this,t)}})},84347:function(t,h,y){var w=y(5968),A=y(44142),T=y(63022),E="endsWith",j=""[E];w(w.P+w.F*y(21264)(E),"String",{endsWith:function endsWith(t){var h=T(this,t,E),y=arguments.length>1?arguments[1]:void 0,w=A(h.length),B=void 0===y?w:Math.min(A(y),w),N=String(t);return j?j.call(h,N,B):h.slice(B-N.length,B)===N}})},26063:function(t,h,y){y(83541)("fixed",(function(t){return function fixed(){return t(this,"tt","","")}}))},49689:function(t,h,y){y(83541)("fontcolor",(function(t){return function fontcolor(h){return t(this,"font","color",h)}}))},13126:function(t,h,y){y(83541)("fontsize",(function(t){return function fontsize(h){return t(this,"font","size",h)}}))},73862:function(t,h,y){var w=y(5968),A=y(50527),T=String.fromCharCode,E=String.fromCodePoint;w(w.S+w.F*(!!E&&1!=E.length),"String",{fromCodePoint:function fromCodePoint(t){for(var h,y=[],w=arguments.length,E=0;w>E;){if(h=+arguments[E++],A(h,1114111)!==h)throw RangeError(h+" is not a valid code point");y.push(h<65536?T(h):T(55296+((h-=65536)>>10),h%1024+56320))}return y.join("")}})},16520:function(t,h,y){var w=y(5968),A=y(63022),T="includes";w(w.P+w.F*y(21264)(T),"String",{includes:function includes(t){return!!~A(this,t,T).indexOf(t,arguments.length>1?arguments[1]:void 0)}})},44278:function(t,h,y){y(83541)("italics",(function(t){return function italics(){return t(this,"i","","")}}))},65066:function(t,h,y){var w=y(55185)(!0);y(32755)(String,"String",(function(t){this._t=String(t),this._i=0}),(function(){var t,h=this._t,y=this._i;return y>=h.length?{value:void 0,done:!0}:(t=w(h,y),this._i+=t.length,{value:t,done:!1})}))},79803:function(t,h,y){y(83541)("link",(function(t){return function link(h){return t(this,"a","href",h)}}))},69969:function(t,h,y){var w=y(5968),A=y(45831),T=y(44142);w(w.S,"String",{raw:function raw(t){for(var h=A(t.raw),y=T(h.length),w=arguments.length,E=[],j=0;y>j;)E.push(String(h[j++])),j<w&&E.push(String(arguments[j]));return E.join("")}})},43445:function(t,h,y){var w=y(5968);w(w.P,"String",{repeat:y(69991)})},63176:function(t,h,y){y(83541)("small",(function(t){return function small(){return t(this,"small","","")}}))},35142:function(t,h,y){var w=y(5968),A=y(44142),T=y(63022),E="startsWith",j=""[E];w(w.P+w.F*y(21264)(E),"String",{startsWith:function startsWith(t){var h=T(this,t,E),y=A(Math.min(arguments.length>1?arguments[1]:void 0,h.length)),w=String(t);return j?j.call(h,w,y):h.slice(y,y+w.length)===w}})},38434:function(t,h,y){y(83541)("strike",(function(t){return function strike(){return t(this,"strike","","")}}))},55431:function(t,h,y){y(83541)("sub",(function(t){return function sub(){return t(this,"sub","","")}}))},72602:function(t,h,y){y(83541)("sup",(function(t){return function sup(){return t(this,"sup","","")}}))},27848:function(t,h,y){y(45393)("trim",(function(t){return function trim(){return t(this,3)}}))},10634:function(t,h,y){var w=y(35337),A=y(4036),T=y(87478),E=y(5968),j=y(46740),B=y(57270).KEY,N=y(28013),V=y(8059),W=y(41084),H=y(61027),G=y(53581),z=y(71493),$=y(77803),J=y(87123),X=y(18808),K=y(86291),ne=y(67228),ue=y(78938),pe=y(45831),me=y(98493),ge=y(31046),we=y(63262),Ce=y(66251),ke=y(30295),Ie=y(50430),Te=y(85201),Ee=y(54567),Me=ke.f,Be=Te.f,Ne=Ce.f,Ze=w.Symbol,et=w.JSON,tt=et&&et.stringify,rt="prototype",nt=G("_hidden"),it=G("toPrimitive"),at={}.propertyIsEnumerable,st=V("symbol-registry"),lt=V("symbols"),ct=V("op-symbols"),ht=Object[rt],vt="function"==typeof Ze&&!!Ie.f,gt=w.QObject,bt=!gt||!gt[rt]||!gt[rt].findChild,_t=T&&N((function(){return 7!=we(Be({},"a",{get:function(){return Be(this,"a",{value:7}).a}})).a}))?function(t,h,y){var w=Me(ht,h);w&&delete ht[h],Be(t,h,y),w&&t!==ht&&Be(ht,h,w)}:Be,wrap=function(t){var h=lt[t]=we(Ze[rt]);return h._k=t,h},St=vt&&"symbol"==typeof Ze.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof Ze},wt=function defineProperty(t,h,y){return t===ht&&wt(ct,h,y),K(t),h=me(h,!0),K(y),A(lt,h)?(y.enumerable?(A(t,nt)&&t[nt][h]&&(t[nt][h]=!1),y=we(y,{enumerable:ge(0,!1)})):(A(t,nt)||Be(t,nt,ge(1,{})),t[nt][h]=!0),_t(t,h,y)):Be(t,h,y)},Ct=function defineProperties(t,h){K(t);for(var y,w=J(h=pe(h)),A=0,T=w.length;T>A;)wt(t,y=w[A++],h[y]);return t},Pt=function propertyIsEnumerable(t){var h=at.call(this,t=me(t,!0));return!(this===ht&&A(lt,t)&&!A(ct,t))&&(!(h||!A(this,t)||!A(lt,t)||A(this,nt)&&this[nt][t])||h)},kt=function getOwnPropertyDescriptor(t,h){if(t=pe(t),h=me(h,!0),t!==ht||!A(lt,h)||A(ct,h)){var y=Me(t,h);return!y||!A(lt,h)||A(t,nt)&&t[nt][h]||(y.enumerable=!0),y}},xt=function getOwnPropertyNames(t){for(var h,y=Ne(pe(t)),w=[],T=0;y.length>T;)A(lt,h=y[T++])||h==nt||h==B||w.push(h);return w},At=function getOwnPropertySymbols(t){for(var h,y=t===ht,w=Ne(y?ct:pe(t)),T=[],E=0;w.length>E;)!A(lt,h=w[E++])||y&&!A(ht,h)||T.push(lt[h]);return T};vt||(Ze=function Symbol(){if(this instanceof Ze)throw TypeError("Symbol is not a constructor!");var t=H(arguments.length>0?arguments[0]:void 0),$set=function(h){this===ht&&$set.call(ct,h),A(this,nt)&&A(this[nt],t)&&(this[nt][t]=!1),_t(this,t,ge(1,h))};return T&&bt&&_t(ht,t,{configurable:!0,set:$set}),wrap(t)},j(Ze[rt],"toString",(function toString(){return this._k})),ke.f=kt,Te.f=wt,y(89851).f=Ce.f=xt,y(98950).f=Pt,Ie.f=At,T&&!y(28642)&&j(ht,"propertyIsEnumerable",Pt,!0),z.f=function(t){return wrap(G(t))}),E(E.G+E.W+E.F*!vt,{Symbol:Ze});for(var It="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),Tt=0;It.length>Tt;)G(It[Tt++]);for(var Ot=Ee(G.store),Et=0;Ot.length>Et;)$(Ot[Et++]);E(E.S+E.F*!vt,"Symbol",{for:function(t){return A(st,t+="")?st[t]:st[t]=Ze(t)},keyFor:function keyFor(t){if(!St(t))throw TypeError(t+" is not a symbol!");for(var h in st)if(st[h]===t)return h},useSetter:function(){bt=!0},useSimple:function(){bt=!1}}),E(E.S+E.F*!vt,"Object",{create:function create(t,h){return void 0===h?we(t):Ct(we(t),h)},defineProperty:wt,defineProperties:Ct,getOwnPropertyDescriptor:kt,getOwnPropertyNames:xt,getOwnPropertySymbols:At});var Ft=N((function(){Ie.f(1)}));E(E.S+E.F*Ft,"Object",{getOwnPropertySymbols:function getOwnPropertySymbols(t){return Ie.f(ue(t))}}),et&&E(E.S+E.F*(!vt||N((function(){var t=Ze();return"[null]"!=tt([t])||"{}"!=tt({a:t})||"{}"!=tt(Object(t))}))),"JSON",{stringify:function stringify(t){for(var h,y,w=[t],A=1;arguments.length>A;)w.push(arguments[A++]);if(y=h=w[1],(ne(h)||void 0!==t)&&!St(t))return X(h)||(h=function(t,h){if("function"==typeof y&&(h=y.call(this,t,h)),!St(h))return h}),w[1]=h,tt.apply(et,w)}}),Ze[rt][it]||y(61460)(Ze[rt],it,Ze[rt].valueOf),W(Ze,"Symbol"),W(Math,"Math",!0),W(w.JSON,"JSON",!0)},93900:function(t,h,y){var w=y(5968),A=y(47050),T=y(47952),E=y(86291),j=y(50527),B=y(44142),N=y(67228),V=y(35337).ArrayBuffer,W=y(52195),H=T.ArrayBuffer,G=T.DataView,z=A.ABV&&V.isView,$=H.prototype.slice,J=A.VIEW,X="ArrayBuffer";w(w.G+w.W+w.F*(V!==H),{ArrayBuffer:H}),w(w.S+w.F*!A.CONSTR,X,{isView:function isView(t){return z&&z(t)||N(t)&&J in t}}),w(w.P+w.U+w.F*y(28013)((function(){return!new H(2).slice(1,void 0).byteLength})),X,{slice:function slice(t,h){if(void 0!==$&&void 0===h)return $.call(E(this),t);for(var y=E(this).byteLength,w=j(t,y),A=j(void 0===h?y:h,y),T=new(W(this,H))(B(A-w)),N=new G(this),V=new G(T),z=0;w<A;)V.setUint8(z++,N.getUint8(w++));return T}}),y(15054)(X)},71580:function(t,h,y){var w=y(5968);w(w.G+w.W+w.F*!y(47050).ABV,{DataView:y(47952).DataView})},1994:function(t,h,y){y(17171)("Float32",4,(function(t){return function Float32Array(h,y,w){return t(this,h,y,w)}}))},23394:function(t,h,y){y(17171)("Float64",8,(function(t){return function Float64Array(h,y,w){return t(this,h,y,w)}}))},24707:function(t,h,y){y(17171)("Int16",2,(function(t){return function Int16Array(h,y,w){return t(this,h,y,w)}}))},65878:function(t,h,y){y(17171)("Int32",4,(function(t){return function Int32Array(h,y,w){return t(this,h,y,w)}}))},18466:function(t,h,y){y(17171)("Int8",1,(function(t){return function Int8Array(h,y,w){return t(this,h,y,w)}}))},49348:function(t,h,y){y(17171)("Uint16",2,(function(t){return function Uint16Array(h,y,w){return t(this,h,y,w)}}))},17960:function(t,h,y){y(17171)("Uint32",4,(function(t){return function Uint32Array(h,y,w){return t(this,h,y,w)}}))},52407:function(t,h,y){y(17171)("Uint8",1,(function(t){return function Uint8Array(h,y,w){return t(this,h,y,w)}}))},56502:function(t,h,y){y(17171)("Uint8",1,(function(t){return function Uint8ClampedArray(h,y,w){return t(this,h,y,w)}}),!0)},37562:function(t,h,y){var w,A=y(35337),T=y(8948)(0),E=y(46740),j=y(57270),B=y(8360),N=y(89856),V=y(67228),W=y(65705),H=y(65705),G=!A.ActiveXObject&&"ActiveXObject"in A,z="WeakMap",$=j.getWeak,J=Object.isExtensible,X=N.ufstore,wrapper=function(t){return function WeakMap(){return t(this,arguments.length>0?arguments[0]:void 0)}},K={get:function get(t){if(V(t)){var h=$(t);return!0===h?X(W(this,z)).get(t):h?h[this._i]:void 0}},set:function set(t,h){return N.def(W(this,z),t,h)}},ne=t.exports=y(23382)(z,wrapper,K,N,!0,!0);H&&G&&(B((w=N.getConstructor(wrapper,z)).prototype,K),j.NEED=!0,T(["delete","has","get","set"],(function(t){var h=ne.prototype,y=h[t];E(h,t,(function(h,A){if(V(h)&&!J(h)){this._f||(this._f=new w);var T=this._f[t](h,A);return"set"==t?this:T}return y.call(this,h,A)}))})))},54655:function(t,h,y){var w=y(89856),A=y(65705),T="WeakSet";y(23382)(T,(function(t){return function WeakSet(){return t(this,arguments.length>0?arguments[0]:void 0)}}),{add:function add(t){return w.def(A(this,T),t,!0)}},w,!1,!0)},47583:function(t,h,y){var w=y(5968),A=y(25796),T=y(78938),E=y(44142),j=y(94405),B=y(99773);w(w.P,"Array",{flatMap:function flatMap(t){var h,y,w=T(this);return j(t),h=E(w.length),y=B(w,0),A(y,w,w,h,0,1,t,arguments[1]),y}}),y(52451)("flatMap")},25879:function(t,h,y){var w=y(5968),A=y(83504)(!0);w(w.P,"Array",{includes:function includes(t){return A(this,t,arguments.length>1?arguments[1]:void 0)}}),y(52451)("includes")},63124:function(t,h,y){var w=y(5968),A=y(60784)(!0);w(w.S,"Object",{entries:function entries(t){return A(t)}})},1906:function(t,h,y){var w=y(5968),A=y(55693),T=y(45831),E=y(30295),j=y(29242);w(w.S,"Object",{getOwnPropertyDescriptors:function getOwnPropertyDescriptors(t){for(var h,y,w=T(t),B=E.f,N=A(w),V={},W=0;N.length>W;)void 0!==(y=B(w,h=N[W++]))&&j(V,h,y);return V}})},49072:function(t,h,y){var w=y(5968),A=y(60784)(!1);w(w.S,"Object",{values:function values(t){return A(t)}})},12093:function(t,h,y){var w=y(5968),A=y(39031),T=y(35337),E=y(52195),j=y(67567);w(w.P+w.R,"Promise",{finally:function(t){var h=E(this,A.Promise||T.Promise),y="function"==typeof t;return this.then(y?function(y){return j(h,t()).then((function(){return y}))}:t,y?function(y){return j(h,t()).then((function(){throw y}))}:t)}})},14260:function(t,h,y){var w=y(5968),A=y(28517),T=y(61193),E=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(T);w(w.P+w.F*E,"String",{padEnd:function padEnd(t){return A(this,t,arguments.length>1?arguments[1]:void 0,!1)}})},30733:function(t,h,y){var w=y(5968),A=y(28517),T=y(61193),E=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(T);w(w.P+w.F*E,"String",{padStart:function padStart(t){return A(this,t,arguments.length>1?arguments[1]:void 0,!0)}})},47963:function(t,h,y){y(45393)("trimLeft",(function(t){return function trimLeft(){return t(this,1)}}),"trimStart")},35696:function(t,h,y){y(45393)("trimRight",(function(t){return function trimRight(){return t(this,2)}}),"trimEnd")},30442:function(t,h,y){y(77803)("asyncIterator")},8036:function(t,h,y){for(var w=y(98678),A=y(54567),T=y(46740),E=y(35337),j=y(61460),B=y(32903),N=y(53581),V=N("iterator"),W=N("toStringTag"),H=B.Array,G={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},z=A(G),$=0;$<z.length;$++){var J,X=z[$],K=G[X],ne=E[X],ue=ne&&ne.prototype;if(ue&&(ue[V]||j(ue,V,H),ue[W]||j(ue,W,X),B[X]=H,K))for(J in w)ue[J]||T(ue,J,w[J],!0)}},4616:function(t,h,y){var w=y(5968),A=y(85813);w(w.G+w.B,{setImmediate:A.set,clearImmediate:A.clear})},43814:function(t,h,y){var w=y(35337),A=y(5968),T=y(61193),E=[].slice,j=/MSIE .\./.test(T),wrap=function(t){return function(h,y){var w=arguments.length>2,A=!!w&&E.call(arguments,2);return t(w?function(){("function"==typeof h?h:Function(h)).apply(this,A)}:h,y)}};A(A.G+A.B+A.F*j,{setTimeout:wrap(w.setTimeout),setInterval:wrap(w.setInterval)})},67991:function(t,h,y){y(43814),y(4616),y(8036),t.exports=y(39031)},25996:function(t,h,y){t.exports=y(45359)},97096:function(t,h,y){t.exports=y(12229)},66417:function(t,h,y){t.exports=y(64347)},27024:function(t,h,y){t.exports=y(37934)},31781:function(t,h,y){t.exports=y(98786)},55830:function(t,h,y){t.exports=y(76085)},8093:function(t,h,y){t.exports=y(43661)},82098:function(module,__unused_webpack_exports,__webpack_require__){function _extends(){return _extends=Object.assign||function(t){for(var h=1;h<arguments.length;h++){var y=arguments[h];for(var w in y)Object.prototype.hasOwnProperty.call(y,w)&&(t[w]=y[w])}return t},_extends.apply(this,arguments)}!function webpackUniversalModuleDefinition(t,h){module.exports=h()}(0,(function(){return(()=>{var __webpack_modules__=[,(t,h,y)=>{"use strict";function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}Object.defineProperty(h,"__esModule",{value:!0}),h.StatTimer=h.RenderingCancelledException=h.PixelsPerInch=h.PageViewport=h.PDFDateString=h.LinkTarget=h.DOMStandardFontDataFactory=h.DOMSVGFactory=h.DOMCanvasFactory=h.DOMCMapReaderFactory=void 0,h.addLinkAttributes=function addLinkAttributes(t){var h=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},y=h.url,w=h.target,T=h.rel,j=h.enabled,B=void 0===j||j;(0,A.assert)(y&&"string"==typeof y,'addLinkAttributes: A valid "url" parameter must provided.');var N=(0,A.removeNullCharacters)(y);B?t.href=t.title=N:(t.href="",t.title="Disabled: ".concat(N),t.onclick=function(){return!1});var V="";switch(w){case z.NONE:break;case z.SELF:V="_self";break;case z.BLANK:V="_blank";break;case z.PARENT:V="_parent";break;case z.TOP:V="_top"}t.target=V,t.rel="string"==typeof T?T:E},h.deprecated=function deprecated(t){console.log("Deprecated API usage: "+t)},h.getFilenameFromUrl=function getFilenameFromUrl(t){var h=t.indexOf("#"),y=t.indexOf("?"),w=Math.min(h>0?h:t.length,y>0?y:t.length);return t.substring(t.lastIndexOf("/",w)+1,w)},h.getPdfFilenameFromUrl=function getPdfFilenameFromUrl(t){var h=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"document.pdf";if("string"!=typeof t)return h;if(isDataScheme(t))return(0,A.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),h;var y=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,w=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/.exec(t),T=y.exec(w[1])||y.exec(w[2])||y.exec(w[3]);if(T&&(T=T[0]).includes("%"))try{T=y.exec(decodeURIComponent(T))[0]}catch(t){}return T||h},h.getXfaPageViewport=function getXfaPageViewport(t,h){var y=h.scale,w=void 0===y?1:y,A=h.rotation,T=void 0===A?0:A,E=t.attributes.style,j=E.width,B=E.height,N=[0,0,parseInt(j),parseInt(B)];return new H({viewBox:N,scale:w,rotation:T})},h.isDataScheme=isDataScheme,h.isPdfFile=function isPdfFile(t){return"string"==typeof t&&/\.pdf$/i.test(t)},h.isValidFetchUrl=isValidFetchUrl,h.loadScript=function loadScript(t){var h=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return new Promise((function(y,w){var A=document.createElement("script");A.src=t,A.onload=function(t){h&&A.remove(),y(t)},A.onerror=function(){w(new Error("Cannot load script at: ".concat(A.src)))},(document.head||document.documentElement).appendChild(A)}))};var w=function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}(y(2)),A=y(4),T=y(134);function _createForOfIteratorHelper(t,h){var y="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!y){if(Array.isArray(t)||(y=function _unsupportedIterableToArray(t,h){if(!t)return;if("string"==typeof t)return _arrayLikeToArray(t,h);var y=Object.prototype.toString.call(t).slice(8,-1);"Object"===y&&t.constructor&&(y=t.constructor.name);if("Map"===y||"Set"===y)return Array.from(t);if("Arguments"===y||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(y))return _arrayLikeToArray(t,h)}(t))||h&&t&&"number"==typeof t.length){y&&(t=y);var w=0,A=function F(){};return{s:A,n:function n(){return w>=t.length?{done:!0}:{done:!1,value:t[w++]}},e:function e(t){throw t},f:A}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var T,E=!0,j=!1;return{s:function s(){y=y.call(t)},n:function n(){var t=y.next();return E=t.done,t},e:function e(t){j=!0,T=t},f:function f(){try{E||null==y.return||y.return()}finally{if(j)throw T}}}}function _arrayLikeToArray(t,h){(null==h||h>t.length)&&(h=t.length);for(var y=0,w=new Array(h);y<h;y++)w[y]=t[y];return w}function asyncGeneratorStep(t,h,y,w,A,T,E){try{var j=t[T](E),B=j.value}catch(t){return void y(t)}j.done?h(B):Promise.resolve(B).then(w,A)}function _classCallCheck(t,h){if(!(t instanceof h))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,h){for(var y=0;y<h.length;y++){var w=h[y];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(t,(A=w.key,T=void 0,T=function _toPrimitive(t,h){if("object"!==_typeof(t)||null===t)return t;var y=t[Symbol.toPrimitive];if(void 0!==y){var w=y.call(t,h||"default");if("object"!==_typeof(w))return w;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===h?String:Number)(t)}(A,"string"),"symbol"===_typeof(T)?T:String(T)),w)}var A,T}function _createClass(t,h,y){return h&&_defineProperties(t.prototype,h),y&&_defineProperties(t,y),Object.defineProperty(t,"prototype",{writable:!1}),t}function _inherits(t,h){if("function"!=typeof h&&null!==h)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(h&&h.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),h&&_setPrototypeOf(t,h)}function _setPrototypeOf(t,h){return _setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(t,h){return t.__proto__=h,t},_setPrototypeOf(t,h)}function _createSuper(t){var h=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var y,w=_getPrototypeOf(t);if(h){var A=_getPrototypeOf(this).constructor;y=Reflect.construct(w,arguments,A)}else y=w.apply(this,arguments);return function _possibleConstructorReturn(t,h){if(h&&("object"===_typeof(h)||"function"==typeof h))return h;if(void 0!==h)throw new TypeError("Derived constructors may only return object or undefined");return function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,y)}}function _getPrototypeOf(t){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)},_getPrototypeOf(t)}var E="noopener noreferrer nofollow",j=Object.defineProperties({CSS:96,PDF:72},{PDF_TO_CSS_UNITS:{get:function(){return(0,A.shadow)(this,"PDF_TO_CSS_UNITS",this.CSS/this.PDF)},configurable:!0,enumerable:!0}});h.PixelsPerInch=j;var B=function(t){_inherits(DOMCanvasFactory,t);var h=_createSuper(DOMCanvasFactory);function DOMCanvasFactory(){var t,y=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).ownerDocument,w=void 0===y?globalThis.document:y;return _classCallCheck(this,DOMCanvasFactory),(t=h.call(this))._document=w,t}return _createClass(DOMCanvasFactory,[{key:"_createCanvas",value:function _createCanvas(t,h){var y=this._document.createElement("canvas");return y.width=t,y.height=h,y}}]),DOMCanvasFactory}(T.BaseCanvasFactory);function fetchData(t){return _fetchData.apply(this,arguments)}function _fetchData(){return _fetchData=function _asyncToGenerator(t){return function(){var h=this,y=arguments;return new Promise((function(w,A){var T=t.apply(h,y);function _next(t){asyncGeneratorStep(T,w,A,_next,_throw,"next",t)}function _throw(t){asyncGeneratorStep(T,w,A,_next,_throw,"throw",t)}_next(void 0)}))}}(w.default.mark((function _callee(t){var h,y,T=arguments;return w.default.wrap((function _callee$(w){for(;;)switch(w.prev=w.next){case 0:if(h=T.length>1&&void 0!==T[1]&&T[1],!isValidFetchUrl(t,document.baseURI)){w.next=21;break}return w.next=4,fetch(t);case 4:if((y=w.sent).ok){w.next=7;break}throw new Error(y.statusText);case 7:if(!h){w.next=15;break}return w.t1=Uint8Array,w.next=11,y.arrayBuffer();case 11:w.t2=w.sent,w.t0=new w.t1(w.t2),w.next=20;break;case 15:return w.t3=A.stringToBytes,w.next=18,y.text();case 18:w.t4=w.sent,w.t0=(0,w.t3)(w.t4);case 20:return w.abrupt("return",w.t0);case 21:return w.abrupt("return",new Promise((function(y,w){var T=new XMLHttpRequest;T.open("GET",t,!0),h&&(T.responseType="arraybuffer"),T.onreadystatechange=function(){if(T.readyState===XMLHttpRequest.DONE){var t;if(200===T.status||0===T.status)if(h&&T.response?t=new Uint8Array(T.response):!h&&T.responseText&&(t=(0,A.stringToBytes)(T.responseText)),t)return void y(t);w(new Error(T.statusText))}},T.send(null)})));case 22:case"end":return w.stop()}}),_callee)}))),_fetchData.apply(this,arguments)}h.DOMCanvasFactory=B;var N=function(t){_inherits(DOMCMapReaderFactory,t);var h=_createSuper(DOMCMapReaderFactory);function DOMCMapReaderFactory(){return _classCallCheck(this,DOMCMapReaderFactory),h.apply(this,arguments)}return _createClass(DOMCMapReaderFactory,[{key:"_fetchData",value:function _fetchData(t,h){return fetchData(t,this.isCompressed).then((function(t){return{cMapData:t,compressionType:h}}))}}]),DOMCMapReaderFactory}(T.BaseCMapReaderFactory);h.DOMCMapReaderFactory=N;var V=function(t){_inherits(DOMStandardFontDataFactory,t);var h=_createSuper(DOMStandardFontDataFactory);function DOMStandardFontDataFactory(){return _classCallCheck(this,DOMStandardFontDataFactory),h.apply(this,arguments)}return _createClass(DOMStandardFontDataFactory,[{key:"_fetchData",value:function _fetchData(t){return fetchData(t,!0)}}]),DOMStandardFontDataFactory}(T.BaseStandardFontDataFactory);h.DOMStandardFontDataFactory=V;var W=function(t){_inherits(DOMSVGFactory,t);var h=_createSuper(DOMSVGFactory);function DOMSVGFactory(){return _classCallCheck(this,DOMSVGFactory),h.apply(this,arguments)}return _createClass(DOMSVGFactory,[{key:"_createSVG",value:function _createSVG(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}}]),DOMSVGFactory}(T.BaseSVGFactory);h.DOMSVGFactory=W;var H=function(){function PageViewport(t){var h=t.viewBox,y=t.scale,w=t.rotation,A=t.offsetX,T=void 0===A?0:A,E=t.offsetY,j=void 0===E?0:E,B=t.dontFlip,N=void 0!==B&&B;_classCallCheck(this,PageViewport),this.viewBox=h,this.scale=y,this.rotation=w,this.offsetX=T,this.offsetY=j;var V,W,H,G,z,$,J,X,K=(h[2]+h[0])/2,ne=(h[3]+h[1])/2;switch((w%=360)<0&&(w+=360),w){case 180:V=-1,W=0,H=0,G=1;break;case 90:V=0,W=1,H=1,G=0;break;case 270:V=0,W=-1,H=-1,G=0;break;case 0:V=1,W=0,H=0,G=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}N&&(H=-H,G=-G),0===V?(z=Math.abs(ne-h[1])*y+T,$=Math.abs(K-h[0])*y+j,J=Math.abs(h[3]-h[1])*y,X=Math.abs(h[2]-h[0])*y):(z=Math.abs(K-h[0])*y+T,$=Math.abs(ne-h[1])*y+j,J=Math.abs(h[2]-h[0])*y,X=Math.abs(h[3]-h[1])*y),this.transform=[V*y,W*y,H*y,G*y,z-V*y*K-H*y*ne,$-W*y*K-G*y*ne],this.width=J,this.height=X}return _createClass(PageViewport,[{key:"clone",value:function clone(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},h=t.scale,y=void 0===h?this.scale:h,w=t.rotation,A=void 0===w?this.rotation:w,T=t.offsetX,E=void 0===T?this.offsetX:T,j=t.offsetY,B=void 0===j?this.offsetY:j,N=t.dontFlip,V=void 0!==N&&N;return new PageViewport({viewBox:this.viewBox.slice(),scale:y,rotation:A,offsetX:E,offsetY:B,dontFlip:V})}},{key:"convertToViewportPoint",value:function convertToViewportPoint(t,h){return A.Util.applyTransform([t,h],this.transform)}},{key:"convertToViewportRectangle",value:function convertToViewportRectangle(t){var h=A.Util.applyTransform([t[0],t[1]],this.transform),y=A.Util.applyTransform([t[2],t[3]],this.transform);return[h[0],h[1],y[0],y[1]]}},{key:"convertToPdfPoint",value:function convertToPdfPoint(t,h){return A.Util.applyInverseTransform([t,h],this.transform)}}]),PageViewport}();h.PageViewport=H;var G=function(t){_inherits(RenderingCancelledException,t);var h=_createSuper(RenderingCancelledException);function RenderingCancelledException(t,y){var w;return _classCallCheck(this,RenderingCancelledException),(w=h.call(this,t,"RenderingCancelledException")).type=y,w}return RenderingCancelledException}(A.BaseException);h.RenderingCancelledException=G;var z={NONE:0,SELF:1,BLANK:2,PARENT:3,TOP:4};function isDataScheme(t){for(var h=t.length,y=0;y<h&&""===t[y].trim();)y++;return"data:"===t.substring(y,y+5).toLowerCase()}h.LinkTarget=z;var $,J=function(){function StatTimer(){_classCallCheck(this,StatTimer),this.started=Object.create(null),this.times=[]}return _createClass(StatTimer,[{key:"time",value:function time(t){t in this.started&&(0,A.warn)("Timer is already running for ".concat(t)),this.started[t]=Date.now()}},{key:"timeEnd",value:function timeEnd(t){t in this.started||(0,A.warn)("Timer has not been started for ".concat(t)),this.times.push({name:t,start:this.started[t],end:Date.now()}),delete this.started[t]}},{key:"toString",value:function toString(){var t,h=[],y=0,w=_createForOfIteratorHelper(this.times);try{for(w.s();!(t=w.n()).done;){var A=t.value.name;A.length>y&&(y=A.length)}}catch(t){w.e(t)}finally{w.f()}var T,E=_createForOfIteratorHelper(this.times);try{for(E.s();!(T=E.n()).done;){var j=T.value,B=j.end-j.start;h.push("".concat(j.name.padEnd(y)," ").concat(B,"ms\n"))}}catch(t){E.e(t)}finally{E.f()}return h.join("")}}]),StatTimer}();function isValidFetchUrl(t,h){try{var y=(h?new URL(t,h):new URL(t)).protocol;return"http:"===y||"https:"===y}catch(t){return!1}}h.StatTimer=J;var X=function(){function PDFDateString(){_classCallCheck(this,PDFDateString)}return _createClass(PDFDateString,null,[{key:"toDateObject",value:function toDateObject(t){if(!t||!(0,A.isString)(t))return null;$||($=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));var h=$.exec(t);if(!h)return null;var y=parseInt(h[1],10),w=parseInt(h[2],10);w=w>=1&&w<=12?w-1:0;var T=parseInt(h[3],10);T=T>=1&&T<=31?T:1;var E=parseInt(h[4],10);E=E>=0&&E<=23?E:0;var j=parseInt(h[5],10);j=j>=0&&j<=59?j:0;var B=parseInt(h[6],10);B=B>=0&&B<=59?B:0;var N=h[7]||"Z",V=parseInt(h[8],10);V=V>=0&&V<=23?V:0;var W=parseInt(h[9],10)||0;return W=W>=0&&W<=59?W:0,"-"===N?(E+=V,j+=W):"+"===N&&(E-=V,j-=W),new Date(Date.UTC(y,w,T,E,j,B))}}]),PDFDateString}();h.PDFDateString=X},(t,h,y)=>{"use strict";t.exports=y(3)},(t,h,y)=>{"use strict";function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}var w=function(t){var h,y=Object.prototype,w=y.hasOwnProperty,A="function"==typeof Symbol?Symbol:{},T=A.iterator||"@@iterator",E=A.asyncIterator||"@@asyncIterator",j=A.toStringTag||"@@toStringTag";function define(t,h,y){return Object.defineProperty(t,h,{value:y,enumerable:!0,configurable:!0,writable:!0}),t[h]}try{define({},"")}catch(t){define=function define(t,h,y){return t[h]=y}}function wrap(t,h,y,w){var A=h&&h.prototype instanceof Generator?h:Generator,T=Object.create(A.prototype),E=new Context(w||[]);return T._invoke=function makeInvokeMethod(t,h,y){var w=B;return function invoke(A,T){if(w===V)throw new Error("Generator is already running");if(w===W){if("throw"===A)throw T;return doneResult()}for(y.method=A,y.arg=T;;){var E=y.delegate;if(E){var j=maybeInvokeDelegate(E,y);if(j){if(j===H)continue;return j}}if("next"===y.method)y.sent=y._sent=y.arg;else if("throw"===y.method){if(w===B)throw w=W,y.arg;y.dispatchException(y.arg)}else"return"===y.method&&y.abrupt("return",y.arg);w=V;var G=tryCatch(t,h,y);if("normal"===G.type){if(w=y.done?W:N,G.arg===H)continue;return{value:G.arg,done:y.done}}"throw"===G.type&&(w=W,y.method="throw",y.arg=G.arg)}}}(t,y,E),T}function tryCatch(t,h,y){try{return{type:"normal",arg:t.call(h,y)}}catch(t){return{type:"throw",arg:t}}}t.wrap=wrap;var B="suspendedStart",N="suspendedYield",V="executing",W="completed",H={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var G={};define(G,T,(function(){return this}));var z=Object.getPrototypeOf,$=z&&z(z(values([])));$&&$!==y&&w.call($,T)&&(G=$);var J=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(G);function defineIteratorMethods(t){["next","throw","return"].forEach((function(h){define(t,h,(function(t){return this._invoke(h,t)}))}))}function AsyncIterator(t,h){function invoke(y,A,T,E){var j=tryCatch(t[y],t,A);if("throw"!==j.type){var B=j.arg,N=B.value;return N&&"object"===_typeof(N)&&w.call(N,"__await")?h.resolve(N.__await).then((function(t){invoke("next",t,T,E)}),(function(t){invoke("throw",t,T,E)})):h.resolve(N).then((function(t){B.value=t,T(B)}),(function(t){return invoke("throw",t,T,E)}))}E(j.arg)}var y;this._invoke=function enqueue(t,w){function callInvokeWithMethodAndArg(){return new h((function(h,y){invoke(t,w,h,y)}))}return y=y?y.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}}function maybeInvokeDelegate(t,y){var w=t.iterator[y.method];if(w===h){if(y.delegate=null,"throw"===y.method){if(t.iterator.return&&(y.method="return",y.arg=h,maybeInvokeDelegate(t,y),"throw"===y.method))return H;y.method="throw",y.arg=new TypeError("The iterator does not provide a 'throw' method")}return H}var A=tryCatch(w,t.iterator,y.arg);if("throw"===A.type)return y.method="throw",y.arg=A.arg,y.delegate=null,H;var T=A.arg;return T?T.done?(y[t.resultName]=T.value,y.next=t.nextLoc,"return"!==y.method&&(y.method="next",y.arg=h),y.delegate=null,H):T:(y.method="throw",y.arg=new TypeError("iterator result is not an object"),y.delegate=null,H)}function pushTryEntry(t){var h={tryLoc:t[0]};1 in t&&(h.catchLoc=t[1]),2 in t&&(h.finallyLoc=t[2],h.afterLoc=t[3]),this.tryEntries.push(h)}function resetTryEntry(t){var h=t.completion||{};h.type="normal",delete h.arg,t.completion=h}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0)}function values(t){if(t){var y=t[T];if(y)return y.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var A=-1,E=function next(){for(;++A<t.length;)if(w.call(t,A))return next.value=t[A],next.done=!1,next;return next.value=h,next.done=!0,next};return E.next=E}}return{next:doneResult}}function doneResult(){return{value:h,done:!0}}return GeneratorFunction.prototype=GeneratorFunctionPrototype,define(J,"constructor",GeneratorFunctionPrototype),define(GeneratorFunctionPrototype,"constructor",GeneratorFunction),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,j,"GeneratorFunction"),t.isGeneratorFunction=function(t){var h="function"==typeof t&&t.constructor;return!!h&&(h===GeneratorFunction||"GeneratorFunction"===(h.displayName||h.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,define(t,j,"GeneratorFunction")),t.prototype=Object.create(J),t},t.awrap=function(t){return{__await:t}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,E,(function(){return this})),t.AsyncIterator=AsyncIterator,t.async=function(h,y,w,A,T){void 0===T&&(T=Promise);var E=new AsyncIterator(wrap(h,y,w,A),T);return t.isGeneratorFunction(y)?E:E.next().then((function(t){return t.done?t.value:E.next()}))},defineIteratorMethods(J),define(J,j,"Generator"),define(J,T,(function(){return this})),define(J,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var h=[];for(var y in t)h.push(y);return h.reverse(),function next(){for(;h.length;){var y=h.pop();if(y in t)return next.value=y,next.done=!1,next}return next.done=!0,next}},t.values=values,Context.prototype={constructor:Context,reset:function reset(t){if(this.prev=0,this.next=0,this.sent=this._sent=h,this.done=!1,this.delegate=null,this.method="next",this.arg=h,this.tryEntries.forEach(resetTryEntry),!t)for(var y in this)"t"===y.charAt(0)&&w.call(this,y)&&!isNaN(+y.slice(1))&&(this[y]=h)},stop:function stop(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function dispatchException(t){if(this.done)throw t;var y=this;function handle(w,A){return E.type="throw",E.arg=t,y.next=w,A&&(y.method="next",y.arg=h),!!A}for(var A=this.tryEntries.length-1;A>=0;--A){var T=this.tryEntries[A],E=T.completion;if("root"===T.tryLoc)return handle("end");if(T.tryLoc<=this.prev){var j=w.call(T,"catchLoc"),B=w.call(T,"finallyLoc");if(j&&B){if(this.prev<T.catchLoc)return handle(T.catchLoc,!0);if(this.prev<T.finallyLoc)return handle(T.finallyLoc)}else if(j){if(this.prev<T.catchLoc)return handle(T.catchLoc,!0)}else{if(!B)throw new Error("try statement without catch or finally");if(this.prev<T.finallyLoc)return handle(T.finallyLoc)}}}},abrupt:function abrupt(t,h){for(var y=this.tryEntries.length-1;y>=0;--y){var A=this.tryEntries[y];if(A.tryLoc<=this.prev&&w.call(A,"finallyLoc")&&this.prev<A.finallyLoc){var T=A;break}}T&&("break"===t||"continue"===t)&&T.tryLoc<=h&&h<=T.finallyLoc&&(T=null);var E=T?T.completion:{};return E.type=t,E.arg=h,T?(this.method="next",this.next=T.finallyLoc,H):this.complete(E)},complete:function complete(t,h){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&h&&(this.next=h),H},finish:function finish(t){for(var h=this.tryEntries.length-1;h>=0;--h){var y=this.tryEntries[h];if(y.finallyLoc===t)return this.complete(y.completion,y.afterLoc),resetTryEntry(y),H}},catch:function _catch(t){for(var h=this.tryEntries.length-1;h>=0;--h){var y=this.tryEntries[h];if(y.tryLoc===t){var w=y.completion;if("throw"===w.type){var A=w.arg;resetTryEntry(y)}return A}}throw new Error("illegal catch attempt")},delegateYield:function delegateYield(t,y,w){return this.delegate={iterator:values(t),resultName:y,nextLoc:w},"next"===this.method&&(this.arg=h),H}},t}("object"===_typeof(t=y.nmd(t))?t.exports:{});try{regeneratorRuntime=w}catch(t){"object"===("undefined"==typeof globalThis?"undefined":_typeof(globalThis))?globalThis.regeneratorRuntime=w:Function("r","regeneratorRuntime = r")(w)}},(t,h,y)=>{"use strict";function _defineProperties(t,h){for(var y=0;y<h.length;y++){var w=h[y];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(t,(A=w.key,T=void 0,T=function _toPrimitive(t,h){if("object"!==_typeof(t)||null===t)return t;var y=t[Symbol.toPrimitive];if(void 0!==y){var w=y.call(t,h||"default");if("object"!==_typeof(w))return w;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===h?String:Number)(t)}(A,"string"),"symbol"===_typeof(T)?T:String(T)),w)}var A,T}function _toConsumableArray(t){return function _arrayWithoutHoles(t){if(Array.isArray(t))return _arrayLikeToArray(t)}(t)||function _iterableToArray(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||_unsupportedIterableToArray(t)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _unsupportedIterableToArray(t,h){if(t){if("string"==typeof t)return _arrayLikeToArray(t,h);var y=Object.prototype.toString.call(t).slice(8,-1);return"Object"===y&&t.constructor&&(y=t.constructor.name),"Map"===y||"Set"===y?Array.from(t):"Arguments"===y||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(y)?_arrayLikeToArray(t,h):void 0}}function _arrayLikeToArray(t,h){(null==h||h>t.length)&&(h=t.length);for(var y=0,w=new Array(h);y<h;y++)w[y]=t[y];return w}function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _classCallCheck(t,h){if(!(t instanceof h))throw new TypeError("Cannot call a class as a function")}function _inherits(t,h){if("function"!=typeof h&&null!==h)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(h&&h.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),h&&_setPrototypeOf(t,h)}function _setPrototypeOf(t,h){return _setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(t,h){return t.__proto__=h,t},_setPrototypeOf(t,h)}function _createSuper(t){var h=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var y,w=_getPrototypeOf(t);if(h){var A=_getPrototypeOf(this).constructor;y=Reflect.construct(w,arguments,A)}else y=w.apply(this,arguments);return function _possibleConstructorReturn(t,h){if(h&&("object"===_typeof(h)||"function"==typeof h))return h;if(void 0!==h)throw new TypeError("Derived constructors may only return object or undefined");return function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,y)}}function _getPrototypeOf(t){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)},_getPrototypeOf(t)}Object.defineProperty(h,"__esModule",{value:!0}),h.VerbosityLevel=h.Util=h.UnknownErrorException=h.UnexpectedResponseException=h.UNSUPPORTED_FEATURES=h.TextRenderingMode=h.StreamType=h.RenderingIntentFlag=h.PermissionFlag=h.PasswordResponses=h.PasswordException=h.PageActionEventType=h.OPS=h.MissingPDFException=h.IsLittleEndianCached=h.IsEvalSupportedCached=h.InvalidPDFException=h.ImageKind=h.IDENTITY_MATRIX=h.FormatError=h.FontType=h.FONT_IDENTITY_MATRIX=h.DocumentActionEventType=h.CMapCompressionType=h.BaseException=h.AnnotationType=h.AnnotationStateModelType=h.AnnotationReviewState=h.AnnotationReplyType=h.AnnotationMode=h.AnnotationMarkedState=h.AnnotationFlag=h.AnnotationFieldFlag=h.AnnotationBorderStyleType=h.AnnotationActionEventType=h.AbortException=void 0,h.arrayByteLength=arrayByteLength,h.arraysToBytes=function arraysToBytes(t){var h=t.length;if(1===h&&t[0]instanceof Uint8Array)return t[0];for(var y=0,w=0;w<h;w++)y+=arrayByteLength(t[w]);for(var A=0,T=new Uint8Array(y),E=0;E<h;E++){var j=t[E];j instanceof Uint8Array||(j="string"==typeof j?stringToBytes(j):new Uint8Array(j));var B=j.byteLength;T.set(j,A),A+=B}return T},h.assert=assert,h.bytesToString=function bytesToString(t){assert(null!==t&&"object"===_typeof(t)&&void 0!==t.length,"Invalid argument for bytesToString");var h=t.length,y=8192;if(h<y)return String.fromCharCode.apply(null,t);for(var w=[],A=0;A<h;A+=y){var T=Math.min(A+y,h),E=t.subarray(A,T);w.push(String.fromCharCode.apply(null,E))}return w.join("")},h.createObjectURL=function createObjectURL(t){var h=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",y=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(URL.createObjectURL&&"undefined"!=typeof Blob&&!y)return URL.createObjectURL(new Blob([t],{type:h}));for(var w="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",A="data:".concat(h,";base64,"),T=0,E=t.length;T<E;T+=3){var j=255&t[T],B=255&t[T+1],N=255&t[T+2];A+=w[j>>2]+w[(3&j)<<4|B>>4]+w[T+1<E?(15&B)<<2|N>>6:64]+w[T+2<E?63&N:64]}return A},h.createPromiseCapability=function createPromiseCapability(){var t=Object.create(null),h=!1;return Object.defineProperty(t,"settled",{get:function get(){return h}}),t.promise=new Promise((function(y,w){t.resolve=function(t){h=!0,y(t)},t.reject=function(t){h=!0,w(t)}})),t},h.createValidAbsoluteUrl=function createValidAbsoluteUrl(t){var h=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,y=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(!t)return null;try{if(y&&"string"==typeof t){if(y.addDefaultProtocol&&t.startsWith("www.")){var w=t.match(/\./g);w&&w.length>=2&&(t="http://".concat(t))}if(y.tryConvertEncoding)try{t=stringToUTF8String(t)}catch(t){}}var A=h?new URL(t,h):new URL(t);if(function _isValidProtocol(t){if(!t)return!1;switch(t.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}(A))return A}catch(t){}return null},h.escapeString=function escapeString(t){return t.replace(/([()\\\n\r])/g,(function(t){return"\n"===t?"\\n":"\r"===t?"\\r":"\\".concat(t)}))},h.getModificationDate=function getModificationDate(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date;return[t.getUTCFullYear().toString(),(t.getUTCMonth()+1).toString().padStart(2,"0"),t.getUTCDate().toString().padStart(2,"0"),t.getUTCHours().toString().padStart(2,"0"),t.getUTCMinutes().toString().padStart(2,"0"),t.getUTCSeconds().toString().padStart(2,"0")].join("")},h.getVerbosityLevel=function getVerbosityLevel(){return A},h.info=function info(t){A>=w.INFOS&&console.log("Info: ".concat(t))},h.isArrayBuffer=function isArrayBuffer(t){return"object"===_typeof(t)&&null!==t&&void 0!==t.byteLength},h.isArrayEqual=function isArrayEqual(t,h){if(t.length!==h.length)return!1;for(var y=0,w=t.length;y<w;y++)if(t[y]!==h[y])return!1;return!0},h.isAscii=function isAscii(t){return/^[\x00-\x7F]*$/.test(t)},h.isBool=function isBool(t){return"boolean"==typeof t},h.isNum=function isNum(t){return"number"==typeof t},h.isSameOrigin=function isSameOrigin(t,h){var y;try{if(!(y=new URL(t)).origin||"null"===y.origin)return!1}catch(t){return!1}var w=new URL(h,y);return y.origin===w.origin},h.isString=function isString(t){return"string"==typeof t},h.objectFromMap=function objectFromMap(t){var h,y=Object.create(null),w=function _createForOfIteratorHelper(t,h){var y="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!y){if(Array.isArray(t)||(y=_unsupportedIterableToArray(t))||h&&t&&"number"==typeof t.length){y&&(t=y);var w=0,A=function F(){};return{s:A,n:function n(){return w>=t.length?{done:!0}:{done:!1,value:t[w++]}},e:function e(t){throw t},f:A}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var T,E=!0,j=!1;return{s:function s(){y=y.call(t)},n:function n(){var t=y.next();return E=t.done,t},e:function e(t){j=!0,T=t},f:function f(){try{E||null==y.return||y.return()}finally{if(j)throw T}}}}(t);try{for(w.s();!(h=w.n()).done;){var A=(j=h.value,B=2,function _arrayWithHoles(t){if(Array.isArray(t))return t}(j)||function _iterableToArrayLimit(t,h){var y=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=y){var w,A,T,E,j=[],B=!0,N=!1;try{if(T=(y=y.call(t)).next,0===h){if(Object(y)!==y)return;B=!1}else for(;!(B=(w=T.call(y)).done)&&(j.push(w.value),j.length!==h);B=!0);}catch(t){N=!0,A=t}finally{try{if(!B&&null!=y.return&&(E=y.return(),Object(E)!==E))return}finally{if(N)throw A}}return j}}(j,B)||_unsupportedIterableToArray(j,B)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),T=A[0],E=A[1];y[T]=E}}catch(t){w.e(t)}finally{w.f()}var j,B;return y},h.objectSize=function objectSize(t){return Object.keys(t).length},h.removeNullCharacters=function removeNullCharacters(t){var h=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if("string"!=typeof t)return warn("The argument for removeNullCharacters must be a string."),t;h&&(t=t.replace(z," "));return t.replace(G,"")},h.setVerbosityLevel=function setVerbosityLevel(t){Number.isInteger(t)&&(A=t)},h.shadow=shadow,h.string32=function string32(t){return String.fromCharCode(t>>24&255,t>>16&255,t>>8&255,255&t)},h.stringToBytes=stringToBytes,h.stringToPDFString=function stringToPDFString(t){var h=t.length,y=[];if("þ"===t[0]&&"ÿ"===t[1])for(var w=2;w<h;w+=2)y.push(String.fromCharCode(t.charCodeAt(w)<<8|t.charCodeAt(w+1)));else if("ÿ"===t[0]&&"þ"===t[1])for(var A=2;A<h;A+=2)y.push(String.fromCharCode(t.charCodeAt(A+1)<<8|t.charCodeAt(A)));else for(var T=0;T<h;++T){var E=ne[t.charCodeAt(T)];y.push(E?String.fromCharCode(E):t.charAt(T))}return y.join("")},h.stringToUTF16BEString=function stringToUTF16BEString(t){for(var h=["þÿ"],y=0,w=t.length;y<w;y++){var A=t.charCodeAt(y);h.push(String.fromCharCode(A>>8&255),String.fromCharCode(255&A))}return h.join("")},h.stringToUTF8String=stringToUTF8String,h.unreachable=unreachable,h.utf8StringToString=function utf8StringToString(t){return unescape(encodeURIComponent(t))},h.warn=warn,y(5);h.IDENTITY_MATRIX=[1,0,0,1,0,0];h.FONT_IDENTITY_MATRIX=[.001,0,0,.001,0,0];h.RenderingIntentFlag={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256};h.AnnotationMode={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3};h.PermissionFlag={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048};h.TextRenderingMode={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4};h.ImageKind={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3};h.AnnotationType={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26};h.AnnotationStateModelType={MARKED:"Marked",REVIEW:"Review"};h.AnnotationMarkedState={MARKED:"Marked",UNMARKED:"Unmarked"};h.AnnotationReviewState={ACCEPTED:"Accepted",REJECTED:"Rejected",CANCELLED:"Cancelled",COMPLETED:"Completed",NONE:"None"};h.AnnotationReplyType={GROUP:"Group",REPLY:"R"};h.AnnotationFlag={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512};h.AnnotationFieldFlag={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864};h.AnnotationBorderStyleType={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5};h.AnnotationActionEventType={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"};h.DocumentActionEventType={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"};h.PageActionEventType={O:"PageOpen",C:"PageClose"};h.StreamType={UNKNOWN:"UNKNOWN",FLATE:"FLATE",LZW:"LZW",DCT:"DCT",JPX:"JPX",JBIG:"JBIG",A85:"A85",AHX:"AHX",CCF:"CCF",RLX:"RLX"};h.FontType={UNKNOWN:"UNKNOWN",TYPE1:"TYPE1",TYPE1STANDARD:"TYPE1STANDARD",TYPE1C:"TYPE1C",CIDFONTTYPE0:"CIDFONTTYPE0",CIDFONTTYPE0C:"CIDFONTTYPE0C",TRUETYPE:"TRUETYPE",CIDFONTTYPE2:"CIDFONTTYPE2",TYPE3:"TYPE3",OPENTYPE:"OPENTYPE",TYPE0:"TYPE0",MMTYPE1:"MMTYPE1"};var w={ERRORS:0,WARNINGS:1,INFOS:5};h.VerbosityLevel=w;h.CMapCompressionType={NONE:0,BINARY:1,STREAM:2};h.OPS={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotations:78,endAnnotations:79,beginAnnotation:80,endAnnotation:81,paintJpegXObject:82,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91};h.UNSUPPORTED_FEATURES={unknown:"unknown",forms:"forms",javaScript:"javaScript",signatures:"signatures",smask:"smask",shadingPattern:"shadingPattern",font:"font",errorTilingPattern:"errorTilingPattern",errorExtGState:"errorExtGState",errorXObject:"errorXObject",errorFontLoadType3:"errorFontLoadType3",errorFontState:"errorFontState",errorFontMissing:"errorFontMissing",errorFontTranslate:"errorFontTranslate",errorColorSpace:"errorColorSpace",errorOperatorList:"errorOperatorList",errorFontToUnicode:"errorFontToUnicode",errorFontLoadNative:"errorFontLoadNative",errorFontBuildPath:"errorFontBuildPath",errorFontGetPath:"errorFontGetPath",errorMarkedContent:"errorMarkedContent",errorContentSubStream:"errorContentSubStream"};h.PasswordResponses={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};var A=w.WARNINGS;function warn(t){A>=w.WARNINGS&&console.log("Warning: ".concat(t))}function unreachable(t){throw new Error(t)}function assert(t,h){t||unreachable(h)}function shadow(t,h,y){return Object.defineProperty(t,h,{value:y,enumerable:!0,configurable:!0,writable:!1}),y}var T=function BaseExceptionClosure(){function BaseException(t,h){this.constructor===BaseException&&unreachable("Cannot initialize BaseException."),this.message=t,this.name=h}return BaseException.prototype=new Error,BaseException.constructor=BaseException,BaseException}();h.BaseException=T;var E=function(t){_inherits(PasswordException,t);var h=_createSuper(PasswordException);function PasswordException(t,y){var w;return _classCallCheck(this,PasswordException),(w=h.call(this,t,"PasswordException")).code=y,w}return PasswordException}(T);h.PasswordException=E;var j=function(t){_inherits(UnknownErrorException,t);var h=_createSuper(UnknownErrorException);function UnknownErrorException(t,y){var w;return _classCallCheck(this,UnknownErrorException),(w=h.call(this,t,"UnknownErrorException")).details=y,w}return UnknownErrorException}(T);h.UnknownErrorException=j;var B=function(t){_inherits(InvalidPDFException,t);var h=_createSuper(InvalidPDFException);function InvalidPDFException(t){return _classCallCheck(this,InvalidPDFException),h.call(this,t,"InvalidPDFException")}return InvalidPDFException}(T);h.InvalidPDFException=B;var N=function(t){_inherits(MissingPDFException,t);var h=_createSuper(MissingPDFException);function MissingPDFException(t){return _classCallCheck(this,MissingPDFException),h.call(this,t,"MissingPDFException")}return MissingPDFException}(T);h.MissingPDFException=N;var V=function(t){_inherits(UnexpectedResponseException,t);var h=_createSuper(UnexpectedResponseException);function UnexpectedResponseException(t,y){var w;return _classCallCheck(this,UnexpectedResponseException),(w=h.call(this,t,"UnexpectedResponseException")).status=y,w}return UnexpectedResponseException}(T);h.UnexpectedResponseException=V;var W=function(t){_inherits(FormatError,t);var h=_createSuper(FormatError);function FormatError(t){return _classCallCheck(this,FormatError),h.call(this,t,"FormatError")}return FormatError}(T);h.FormatError=W;var H=function(t){_inherits(AbortException,t);var h=_createSuper(AbortException);function AbortException(t){return _classCallCheck(this,AbortException),h.call(this,t,"AbortException")}return AbortException}(T);h.AbortException=H;var G=/\x00+/g,z=/[\x01-\x1F]/g;function stringToBytes(t){assert("string"==typeof t,"Invalid argument for stringToBytes");for(var h=t.length,y=new Uint8Array(h),w=0;w<h;++w)y[w]=255&t.charCodeAt(w);return y}function arrayByteLength(t){return void 0!==t.length?t.length:(assert(void 0!==t.byteLength,"arrayByteLength - invalid argument."),t.byteLength)}var $=Object.defineProperties({},{value:{get:function(){return shadow(this,"value",function isLittleEndian(){var t=new Uint8Array(4);return t[0]=1,1===new Uint32Array(t.buffer,0,1)[0]}())},configurable:!0,enumerable:!0}});h.IsLittleEndianCached=$;var J=Object.defineProperties({},{value:{get:function(){return shadow(this,"value",function isEvalSupported(){try{return new Function(""),!0}catch(t){return!1}}())},configurable:!0,enumerable:!0}});h.IsEvalSupportedCached=J;var X=_toConsumableArray(Array(256).keys()).map((function(t){return t.toString(16).padStart(2,"0")})),K=function(){function Util(){_classCallCheck(this,Util)}return function _createClass(t,h,y){return h&&_defineProperties(t.prototype,h),y&&_defineProperties(t,y),Object.defineProperty(t,"prototype",{writable:!1}),t}(Util,null,[{key:"makeHexColor",value:function makeHexColor(t,h,y){return"#".concat(X[t]).concat(X[h]).concat(X[y])}},{key:"transform",value:function transform(t,h){return[t[0]*h[0]+t[2]*h[1],t[1]*h[0]+t[3]*h[1],t[0]*h[2]+t[2]*h[3],t[1]*h[2]+t[3]*h[3],t[0]*h[4]+t[2]*h[5]+t[4],t[1]*h[4]+t[3]*h[5]+t[5]]}},{key:"applyTransform",value:function applyTransform(t,h){return[t[0]*h[0]+t[1]*h[2]+h[4],t[0]*h[1]+t[1]*h[3]+h[5]]}},{key:"applyInverseTransform",value:function applyInverseTransform(t,h){var y=h[0]*h[3]-h[1]*h[2];return[(t[0]*h[3]-t[1]*h[2]+h[2]*h[5]-h[4]*h[3])/y,(-t[0]*h[1]+t[1]*h[0]+h[4]*h[1]-h[5]*h[0])/y]}},{key:"getAxialAlignedBoundingBox",value:function getAxialAlignedBoundingBox(t,h){var y=Util.applyTransform(t,h),w=Util.applyTransform(t.slice(2,4),h),A=Util.applyTransform([t[0],t[3]],h),T=Util.applyTransform([t[2],t[1]],h);return[Math.min(y[0],w[0],A[0],T[0]),Math.min(y[1],w[1],A[1],T[1]),Math.max(y[0],w[0],A[0],T[0]),Math.max(y[1],w[1],A[1],T[1])]}},{key:"inverseTransform",value:function inverseTransform(t){var h=t[0]*t[3]-t[1]*t[2];return[t[3]/h,-t[1]/h,-t[2]/h,t[0]/h,(t[2]*t[5]-t[4]*t[3])/h,(t[4]*t[1]-t[5]*t[0])/h]}},{key:"apply3dTransform",value:function apply3dTransform(t,h){return[t[0]*h[0]+t[1]*h[1]+t[2]*h[2],t[3]*h[0]+t[4]*h[1]+t[5]*h[2],t[6]*h[0]+t[7]*h[1]+t[8]*h[2]]}},{key:"singularValueDecompose2dScale",value:function singularValueDecompose2dScale(t){var h=[t[0],t[2],t[1],t[3]],y=t[0]*h[0]+t[1]*h[2],w=t[0]*h[1]+t[1]*h[3],A=t[2]*h[0]+t[3]*h[2],T=t[2]*h[1]+t[3]*h[3],E=(y+T)/2,j=Math.sqrt(Math.pow(y+T,2)-4*(y*T-A*w))/2,B=E+j||1,N=E-j||1;return[Math.sqrt(B),Math.sqrt(N)]}},{key:"normalizeRect",value:function normalizeRect(t){var h=t.slice(0);return t[0]>t[2]&&(h[0]=t[2],h[2]=t[0]),t[1]>t[3]&&(h[1]=t[3],h[3]=t[1]),h}},{key:"intersect",value:function intersect(t,h){function compare(t,h){return t-h}var y=[t[0],t[2],h[0],h[2]].sort(compare),w=[t[1],t[3],h[1],h[3]].sort(compare),A=[];return t=Util.normalizeRect(t),h=Util.normalizeRect(h),y[0]===t[0]&&y[1]===h[0]||y[0]===h[0]&&y[1]===t[0]?(A[0]=y[1],A[2]=y[2],w[0]===t[1]&&w[1]===h[1]||w[0]===h[1]&&w[1]===t[1]?(A[1]=w[1],A[3]=w[2],A):null):null}},{key:"bezierBoundingBox",value:function bezierBoundingBox(t,h,y,w,A,T,E,j){for(var B,N,V,W,H,G,z,$,J=[],X=[[],[]],K=0;K<2;++K)if(0===K?(N=6*t-12*y+6*A,B=-3*t+9*y-9*A+3*E,V=3*y-3*t):(N=6*h-12*w+6*T,B=-3*h+9*w-9*T+3*j,V=3*w-3*h),Math.abs(B)<1e-12){if(Math.abs(N)<1e-12)continue;0<(W=-V/N)&&W<1&&J.push(W)}else z=N*N-4*V*B,$=Math.sqrt(z),z<0||(0<(H=(-N+$)/(2*B))&&H<1&&J.push(H),0<(G=(-N-$)/(2*B))&&G<1&&J.push(G));for(var ne,ue=J.length,pe=ue;ue--;)ne=1-(W=J[ue]),X[0][ue]=ne*ne*ne*t+3*ne*ne*W*y+3*ne*W*W*A+W*W*W*E,X[1][ue]=ne*ne*ne*h+3*ne*ne*W*w+3*ne*W*W*T+W*W*W*j;return X[0][pe]=t,X[1][pe]=h,X[0][pe+1]=E,X[1][pe+1]=j,X[0].length=X[1].length=pe+2,[Math.min.apply(Math,_toConsumableArray(X[0])),Math.min.apply(Math,_toConsumableArray(X[1])),Math.max.apply(Math,_toConsumableArray(X[0])),Math.max.apply(Math,_toConsumableArray(X[1]))]}}]),Util}();h.Util=K;var ne=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function stringToUTF8String(t){return decodeURIComponent(escape(t))}},(t,h,y)=>{"use strict";var w=y(6);"undefined"!=typeof globalThis&&globalThis._pdfjsCompatibilityChecked||("undefined"!=typeof globalThis&&globalThis.Math===Math||(globalThis=y(7)),globalThis._pdfjsCompatibilityChecked=!0,function checkNodeBtoa(){!globalThis.btoa&&w.isNodeJS&&(globalThis.btoa=function(t){return Buffer.from(t,"binary").toString("base64")})}(),function checkNodeAtob(){!globalThis.atob&&w.isNodeJS&&(globalThis.atob=function(t){return Buffer.from(t,"base64").toString("binary")})}(),function checkDOMMatrix(){!globalThis.DOMMatrix&&w.isNodeJS&&(globalThis.DOMMatrix=y(69))}(),function checkObjectFromEntries(){Object.fromEntries||y(70)}(),function checkPromise(){globalThis.Promise.allSettled||(globalThis.Promise=y(97))}(),function checkReadableStream(){!globalThis.ReadableStream&&w.isNodeJS&&(globalThis.ReadableStream=y(133).ReadableStream)}())},(t,h)=>{"use strict";function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}Object.defineProperty(h,"__esModule",{value:!0}),h.isNodeJS=void 0;var y=!("object"!==("undefined"==typeof process?"undefined":_typeof(process))||process+""!="[object process]"||process.versions.nw||process.versions.electron&&process.type&&"browser"!==process.type);h.isNodeJS=y},(t,h,y)=>{y(8),t.exports=y(10)},(t,h,y)=>{y(9)({global:!0},{globalThis:y(10)})},(t,h,y)=>{var w=y(10),A=y(11).f,T=y(47),E=y(50),j=y(41),B=y(57),N=y(68);t.exports=function(t,h){var y,V,W,H,G,z=t.target,$=t.global,J=t.stat;if(y=$?w:J?w[z]||j(z,{}):(w[z]||{}).prototype)for(V in h){if(H=h[V],W=t.noTargetGet?(G=A(y,V))&&G.value:y[V],!N($?V:z+(J?".":"#")+V,t.forced)&&void 0!==W){if(typeof H==typeof W)continue;B(H,W)}(t.sham||W&&W.sham)&&T(H,"sham",!0),E(y,V,H,t)}}},t=>{var check=function(t){return t&&t.Math==Math&&t};t.exports=check("object"==typeof globalThis&&globalThis)||check("object"==typeof window&&window)||check("object"==typeof self&&self)||check("object"==typeof __webpack_require__.g&&__webpack_require__.g)||function(){return this}()||Function("return this")()},(t,h,y)=>{var w=y(12),A=y(14),T=y(15),E=y(16),j=y(17),B=y(22),N=y(42),V=y(45),W=Object.getOwnPropertyDescriptor;h.f=w?W:function getOwnPropertyDescriptor(t,h){if(t=j(t),h=B(h),V)try{return W(t,h)}catch(t){}if(N(t,h))return E(!A(T.f,t,h),t[h])}},(t,h,y)=>{var w=y(13);t.exports=!w((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},t=>{t.exports=function(t){try{return!!t()}catch(t){return!0}}},t=>{var h=Function.prototype.call;t.exports=h.bind?h.bind(h):function(){return h.apply(h,arguments)}},(t,h)=>{"use strict";var y={}.propertyIsEnumerable,w=Object.getOwnPropertyDescriptor,A=w&&!y.call({1:2},1);h.f=A?function propertyIsEnumerable(t){var h=w(this,t);return!!h&&h.enumerable}:y},t=>{t.exports=function(t,h){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:h}}},(t,h,y)=>{var w=y(18),A=y(21);t.exports=function(t){return w(A(t))}},(t,h,y)=>{var w=y(10),A=y(19),T=y(13),E=y(20),j=w.Object,B=A("".split);t.exports=T((function(){return!j("z").propertyIsEnumerable(0)}))?function(t){return"String"==E(t)?B(t,""):j(t)}:j},t=>{var h=Function.prototype,y=h.bind,w=h.call,A=y&&y.bind(w);t.exports=y?function(t){return t&&A(w,t)}:function(t){return t&&function(){return w.apply(t,arguments)}}},(t,h,y)=>{var w=y(19),A=w({}.toString),T=w("".slice);t.exports=function(t){return T(A(t),8,-1)}},(t,h,y)=>{var w=y(10).TypeError;t.exports=function(t){if(null==t)throw w("Can't call method on "+t);return t}},(t,h,y)=>{var w=y(23),A=y(26);t.exports=function(t){var h=w(t,"string");return A(h)?h:h+""}},(t,h,y)=>{var w=y(10),A=y(14),T=y(24),E=y(26),j=y(33),B=y(36),N=y(37),V=w.TypeError,W=N("toPrimitive");t.exports=function(t,h){if(!T(t)||E(t))return t;var y,w=j(t,W);if(w){if(void 0===h&&(h="default"),y=A(w,t,h),!T(y)||E(y))return y;throw V("Can't convert object to primitive value")}return void 0===h&&(h="number"),B(t,h)}},(t,h,y)=>{var w=y(25);t.exports=function(t){return"object"==typeof t?null!==t:w(t)}},t=>{t.exports=function(t){return"function"==typeof t}},(t,h,y)=>{var w=y(10),A=y(27),T=y(25),E=y(28),j=y(29),B=w.Object;t.exports=j?function(t){return"symbol"==typeof t}:function(t){var h=A("Symbol");return T(h)&&E(h.prototype,B(t))}},(t,h,y)=>{var w=y(10),A=y(25);t.exports=function(t,h){return arguments.length<2?(y=w[t],A(y)?y:void 0):w[t]&&w[t][h];var y}},(t,h,y)=>{var w=y(19);t.exports=w({}.isPrototypeOf)},(t,h,y)=>{var w=y(30);t.exports=w&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},(t,h,y)=>{var w=y(31),A=y(13);t.exports=!!Object.getOwnPropertySymbols&&!A((function(){var t=Symbol();return!String(t)||!(Object(t)instanceof Symbol)||!Symbol.sham&&w&&w<41}))},(t,h,y)=>{var w,A,T=y(10),E=y(32),j=T.process,B=T.Deno,N=j&&j.versions||B&&B.version,V=N&&N.v8;V&&(A=(w=V.split("."))[0]>0&&w[0]<4?1:+(w[0]+w[1])),!A&&E&&(!(w=E.match(/Edge\/(\d+)/))||w[1]>=74)&&(w=E.match(/Chrome\/(\d+)/))&&(A=+w[1]),t.exports=A},(t,h,y)=>{var w=y(27);t.exports=w("navigator","userAgent")||""},(t,h,y)=>{var w=y(34);t.exports=function(t,h){var y=t[h];return null==y?void 0:w(y)}},(t,h,y)=>{var w=y(10),A=y(25),T=y(35),E=w.TypeError;t.exports=function(t){if(A(t))return t;throw E(T(t)+" is not a function")}},(t,h,y)=>{var w=y(10).String;t.exports=function(t){try{return w(t)}catch(t){return"Object"}}},(t,h,y)=>{var w=y(10),A=y(14),T=y(25),E=y(24),j=w.TypeError;t.exports=function(t,h){var y,w;if("string"===h&&T(y=t.toString)&&!E(w=A(y,t)))return w;if(T(y=t.valueOf)&&!E(w=A(y,t)))return w;if("string"!==h&&T(y=t.toString)&&!E(w=A(y,t)))return w;throw j("Can't convert object to primitive value")}},(t,h,y)=>{var w=y(10),A=y(38),T=y(42),E=y(44),j=y(30),B=y(29),N=A("wks"),V=w.Symbol,W=V&&V.for,H=B?V:V&&V.withoutSetter||E;t.exports=function(t){if(!T(N,t)||!j&&"string"!=typeof N[t]){var h="Symbol."+t;j&&T(V,t)?N[t]=V[t]:N[t]=B&&W?W(h):H(h)}return N[t]}},(t,h,y)=>{var w=y(39),A=y(40);(t.exports=function(t,h){return A[t]||(A[t]=void 0!==h?h:{})})("versions",[]).push({version:"3.19.1",mode:w?"pure":"global",copyright:"© 2021 Denis Pushkarev (zloirock.ru)"})},t=>{t.exports=!1},(t,h,y)=>{var w=y(10),A=y(41),T="__core-js_shared__",E=w[T]||A(T,{});t.exports=E},(t,h,y)=>{var w=y(10),A=Object.defineProperty;t.exports=function(t,h){try{A(w,t,{value:h,configurable:!0,writable:!0})}catch(y){w[t]=h}return h}},(t,h,y)=>{var w=y(19),A=y(43),T=w({}.hasOwnProperty);t.exports=Object.hasOwn||function hasOwn(t,h){return T(A(t),h)}},(t,h,y)=>{var w=y(10),A=y(21),T=w.Object;t.exports=function(t){return T(A(t))}},(t,h,y)=>{var w=y(19),A=0,T=Math.random(),E=w(1..toString);t.exports=function(t){return"Symbol("+(void 0===t?"":t)+")_"+E(++A+T,36)}},(t,h,y)=>{var w=y(12),A=y(13),T=y(46);t.exports=!w&&!A((function(){return 7!=Object.defineProperty(T("div"),"a",{get:function(){return 7}}).a}))},(t,h,y)=>{var w=y(10),A=y(24),T=w.document,E=A(T)&&A(T.createElement);t.exports=function(t){return E?T.createElement(t):{}}},(t,h,y)=>{var w=y(12),A=y(48),T=y(16);t.exports=w?function(t,h,y){return A.f(t,h,T(1,y))}:function(t,h,y){return t[h]=y,t}},(t,h,y)=>{var w=y(10),A=y(12),T=y(45),E=y(49),j=y(22),B=w.TypeError,N=Object.defineProperty;h.f=A?N:function defineProperty(t,h,y){if(E(t),h=j(h),E(y),T)try{return N(t,h,y)}catch(t){}if("get"in y||"set"in y)throw B("Accessors not supported");return"value"in y&&(t[h]=y.value),t}},(t,h,y)=>{var w=y(10),A=y(24),T=w.String,E=w.TypeError;t.exports=function(t){if(A(t))return t;throw E(T(t)+" is not an object")}},(t,h,y)=>{var w=y(10),A=y(25),T=y(42),E=y(47),j=y(41),B=y(51),N=y(52),V=y(56).CONFIGURABLE,W=N.get,H=N.enforce,G=String(String).split("String");(t.exports=function(t,h,y,B){var N,W=!!B&&!!B.unsafe,z=!!B&&!!B.enumerable,$=!!B&&!!B.noTargetGet,J=B&&void 0!==B.name?B.name:h;A(y)&&("Symbol("===String(J).slice(0,7)&&(J="["+String(J).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),(!T(y,"name")||V&&y.name!==J)&&E(y,"name",J),(N=H(y)).source||(N.source=G.join("string"==typeof J?J:""))),t!==w?(W?!$&&t[h]&&(z=!0):delete t[h],z?t[h]=y:E(t,h,y)):z?t[h]=y:j(h,y)})(Function.prototype,"toString",(function toString(){return A(this)&&W(this).source||B(this)}))},(t,h,y)=>{var w=y(19),A=y(25),T=y(40),E=w(Function.toString);A(T.inspectSource)||(T.inspectSource=function(t){return E(t)}),t.exports=T.inspectSource},(t,h,y)=>{var w,A,T,E=y(53),j=y(10),B=y(19),N=y(24),V=y(47),W=y(42),H=y(40),G=y(54),z=y(55),$="Object already initialized",J=j.TypeError,X=j.WeakMap;if(E||H.state){var K=H.state||(H.state=new X),ne=B(K.get),ue=B(K.has),pe=B(K.set);w=function(t,h){if(ue(K,t))throw new J($);return h.facade=t,pe(K,t,h),h},A=function(t){return ne(K,t)||{}},T=function(t){return ue(K,t)}}else{var me=G("state");z[me]=!0,w=function(t,h){if(W(t,me))throw new J($);return h.facade=t,V(t,me,h),h},A=function(t){return W(t,me)?t[me]:{}},T=function(t){return W(t,me)}}t.exports={set:w,get:A,has:T,enforce:function(t){return T(t)?A(t):w(t,{})},getterFor:function(t){return function(h){var y;if(!N(h)||(y=A(h)).type!==t)throw J("Incompatible receiver, "+t+" required");return y}}}},(t,h,y)=>{var w=y(10),A=y(25),T=y(51),E=w.WeakMap;t.exports=A(E)&&/native code/.test(T(E))},(t,h,y)=>{var w=y(38),A=y(44),T=w("keys");t.exports=function(t){return T[t]||(T[t]=A(t))}},t=>{t.exports={}},(t,h,y)=>{var w=y(12),A=y(42),T=Function.prototype,E=w&&Object.getOwnPropertyDescriptor,j=A(T,"name"),B=j&&"something"===function something(){}.name,N=j&&(!w||w&&E(T,"name").configurable);t.exports={EXISTS:j,PROPER:B,CONFIGURABLE:N}},(t,h,y)=>{var w=y(42),A=y(58),T=y(11),E=y(48);t.exports=function(t,h){for(var y=A(h),j=E.f,B=T.f,N=0;N<y.length;N++){var V=y[N];w(t,V)||j(t,V,B(h,V))}}},(t,h,y)=>{var w=y(27),A=y(19),T=y(59),E=y(67),j=y(49),B=A([].concat);t.exports=w("Reflect","ownKeys")||function ownKeys(t){var h=T.f(j(t)),y=E.f;return y?B(h,y(t)):h}},(t,h,y)=>{var w=y(60),A=y(66).concat("length","prototype");h.f=Object.getOwnPropertyNames||function getOwnPropertyNames(t){return w(t,A)}},(t,h,y)=>{var w=y(19),A=y(42),T=y(17),E=y(61).indexOf,j=y(55),B=w([].push);t.exports=function(t,h){var y,w=T(t),N=0,V=[];for(y in w)!A(j,y)&&A(w,y)&&B(V,y);for(;h.length>N;)A(w,y=h[N++])&&(~E(V,y)||B(V,y));return V}},(t,h,y)=>{var w=y(17),A=y(62),T=y(64),createMethod=function(t){return function(h,y,E){var j,B=w(h),N=T(B),V=A(E,N);if(t&&y!=y){for(;N>V;)if((j=B[V++])!=j)return!0}else for(;N>V;V++)if((t||V in B)&&B[V]===y)return t||V||0;return!t&&-1}};t.exports={includes:createMethod(!0),indexOf:createMethod(!1)}},(t,h,y)=>{var w=y(63),A=Math.max,T=Math.min;t.exports=function(t,h){var y=w(t);return y<0?A(y+h,0):T(y,h)}},t=>{var h=Math.ceil,y=Math.floor;t.exports=function(t){var w=+t;return w!=w||0===w?0:(w>0?y:h)(w)}},(t,h,y)=>{var w=y(65);t.exports=function(t){return w(t.length)}},(t,h,y)=>{var w=y(63),A=Math.min;t.exports=function(t){return t>0?A(w(t),9007199254740991):0}},t=>{t.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},(t,h)=>{h.f=Object.getOwnPropertySymbols},(t,h,y)=>{var w=y(13),A=y(25),T=/#|\.prototype\./,isForced=function(t,h){var y=j[E(t)];return y==N||y!=B&&(A(h)?w(h):!!h)},E=isForced.normalize=function(t){return String(t).replace(T,".").toLowerCase()},j=isForced.data={},B=isForced.NATIVE="N",N=isForced.POLYFILL="P";t.exports=isForced},(t,h,y)=>{"use strict";var w,A,T;function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}T=function(){var t=function CSSMatrix(){for(var t=[],h=arguments.length;h--;)t[h]=arguments[h];return this.setIdentity(),t&&t.length&&this.setMatrixValue(t)},h={isIdentity:{configurable:!0},is2D:{configurable:!0}};h.isIdentity.get=function(){var t=this;return 1===t.m11&&0===t.m12&&0===t.m13&&0===t.m14&&0===t.m21&&1===t.m22&&0===t.m23&&0===t.m24&&0===t.m31&&0===t.m32&&1===t.m33&&0===t.m34&&0===t.m41&&0===t.m42&&0===t.m43&&1===t.m44},h.isIdentity.set=function(t){this.isIdentity=t},h.is2D.get=function(){var t=this;return 0===t.m31&&0===t.m32&&1===t.m33&&0===t.m34&&0===t.m43&&1===t.m44},h.is2D.set=function(t){this.is2D=t},Object.defineProperties(t.prototype,h);var y=t.prototype;function Translate(h,y,w){var A=new t;return A.m41=h,A.e=h,A.m42=y,A.f=y,A.m43=w,A}function Rotate(h,y,w){var A=new t,T=h*Math.PI/180,E=y*Math.PI/180,j=w*Math.PI/180,B=Math.cos(T),N=-Math.sin(T),V=Math.cos(E),W=-Math.sin(E),H=Math.cos(j),G=-Math.sin(j),z=V*H,$=-V*G;A.m11=z,A.a=z,A.m12=$,A.b=$,A.m13=W;var J=N*W*H+B*G;A.m21=J,A.c=J;var X=B*H-N*W*G;return A.m22=X,A.d=X,A.m23=-N*V,A.m31=N*G-B*W*H,A.m32=N*H+B*W*G,A.m33=B*V,A}function RotateAxisAngle(h,y,w,A){var T=new t,E=A*Math.PI/360,j=Math.sin(E),B=Math.cos(E),N=j*j,V=Math.sqrt(h*h+y*y+w*w),W=0,H=0,G=1;0!==V&&(W=h/V,H=y/V,G=w/V);var z=W*W,$=H*H,J=G*G,X=1-2*($+J)*N;T.m11=X,T.a=X;var K=2*(h*y*N+w*j*B);T.m12=K,T.b=K,T.m13=2*(h*w*N-y*j*B);var ne=2*(y*h*N-w*j*B);T.m21=ne,T.c=ne;var ue=1-2*(J+z)*N;return T.m22=ue,T.d=ue,T.m23=2*(y*w*N+h*j*B),T.m31=2*(w*h*N+y*j*B),T.m32=2*(w*y*N-h*j*B),T.m33=1-2*(z+$)*N,T.m14=0,T.m24=0,T.m34=0,T.m41=0,T.e=0,T.m42=0,T.f=0,T.m43=0,T.m44=1,T}function Scale(h,y,w){var A=new t;return A.m11=h,A.a=h,A.m22=y,A.d=y,A.m33=w,A}function SkewX(h){var y=h*Math.PI/180,w=new t,A=Math.tan(y);return w.m21=A,w.c=A,w}function SkewY(h){var y=h*Math.PI/180,w=new t,A=Math.tan(y);return w.m12=A,w.b=A,w}function Multiply(h,y){var w=y.m11*h.m11+y.m12*h.m21+y.m13*h.m31+y.m14*h.m41,A=y.m11*h.m12+y.m12*h.m22+y.m13*h.m32+y.m14*h.m42,T=y.m11*h.m13+y.m12*h.m23+y.m13*h.m33+y.m14*h.m43,E=y.m11*h.m14+y.m12*h.m24+y.m13*h.m34+y.m14*h.m44,j=y.m21*h.m11+y.m22*h.m21+y.m23*h.m31+y.m24*h.m41,B=y.m21*h.m12+y.m22*h.m22+y.m23*h.m32+y.m24*h.m42,N=y.m21*h.m13+y.m22*h.m23+y.m23*h.m33+y.m24*h.m43,V=y.m21*h.m14+y.m22*h.m24+y.m23*h.m34+y.m24*h.m44,W=y.m31*h.m11+y.m32*h.m21+y.m33*h.m31+y.m34*h.m41,H=y.m31*h.m12+y.m32*h.m22+y.m33*h.m32+y.m34*h.m42,G=y.m31*h.m13+y.m32*h.m23+y.m33*h.m33+y.m34*h.m43,z=y.m31*h.m14+y.m32*h.m24+y.m33*h.m34+y.m34*h.m44,$=y.m41*h.m11+y.m42*h.m21+y.m43*h.m31+y.m44*h.m41,J=y.m41*h.m12+y.m42*h.m22+y.m43*h.m32+y.m44*h.m42,X=y.m41*h.m13+y.m42*h.m23+y.m43*h.m33+y.m44*h.m43,K=y.m41*h.m14+y.m42*h.m24+y.m43*h.m34+y.m44*h.m44;return new t([w,j,W,$,A,B,H,J,T,N,G,X,E,V,z,K])}function feedFromArray(t,h){var y=Array.from(h);if(16===y.length){var w=y[0],A=y[1],T=y[2],E=y[3],j=y[4],B=y[5],N=y[6],V=y[7],W=y[8],H=y[9],G=y[10],z=y[11],$=y[12],J=y[13],X=y[14],K=y[15];t.m11=w,t.a=w,t.m21=A,t.c=A,t.m31=T,t.m41=E,t.e=E,t.m12=j,t.b=j,t.m22=B,t.d=B,t.m32=N,t.m42=V,t.f=V,t.m13=W,t.m23=H,t.m33=G,t.m43=z,t.m14=$,t.m24=J,t.m34=X,t.m44=K}else{if(6!==y.length)throw new TypeError("CSSMatrix: expecting a 6/16 values Array");var ne=y[0],ue=y[1],pe=y[2],me=y[3],ge=y[4],we=y[5];t.m11=ne,t.a=ne,t.m12=ue,t.b=ue,t.m21=pe,t.c=pe,t.m22=me,t.d=me,t.m14=ge,t.e=ge,t.m24=we,t.f=we}return t}return y.setMatrixValue=function setMatrixValue(h){var y=this;if(!h||!h.length)return y;if(h.length&&"string"==typeof h[0]&&h[0].length){var w,A,T=String(h[0]).trim();if("none"===T)return y;if(w=T.slice(0,T.indexOf("(")),A=T.slice("matrix"===w?7:9,-1).split(",").map((function(t){return Math.abs(t)<1e-6?0:+t})),!([6,16].indexOf(A.length)>-1))throw new TypeError("CSSMatrix: expecting valid CSS matrix() / matrix3d() syntax");feedFromArray(y,A)}else h[0]instanceof t?feedFromArray(y,h[0].toArray()):Array.isArray(h[0])?feedFromArray(y,h[0]):Array.isArray(h)&&feedFromArray(y,h);return y},y.toString=function toString(){return(this.is2D?"matrix":"matrix3d")+"("+this.toArray(1).join(",")+")"},y.toArray=function toArray(t){var h=this;return h.is2D?[h.a,h.b,h.c,h.d,h.e,h.f]:t?[h.m11,h.m12,h.m13,h.m14,h.m21,h.m22,h.m23,h.m24,h.m31,h.m32,h.m33,h.m34,h.m41,h.m42,h.m43,h.m44]:[h.m11,h.m21,h.m31,h.m41,h.m12,h.m22,h.m32,h.m42,h.m13,h.m23,h.m33,h.m43,h.m14,h.m24,h.m34,h.m44]},y.multiply=function multiply(t){return Multiply(this,t)},y.translate=function translate(t,h,y){var w=h,A=y;return null==A&&(A=0),null==w&&(w=0),Multiply(this,Translate(t,w,A))},y.scale=function scale(t,h,y){var w=h,A=y;return null==w&&(w=t),null==A&&(A=t),Multiply(this,Scale(t,w,A))},y.rotate=function rotate(t,h,y){var w=t,A=h,T=y;return null==A&&(A=0),null==T&&(T=w,w=0),Multiply(this,Rotate(w,A,T))},y.rotateAxisAngle=function rotateAxisAngle(t,h,y,w){if(4!==arguments.length)throw new TypeError("CSSMatrix: expecting 4 values");return Multiply(this,RotateAxisAngle(t,h,y,w))},y.skewX=function skewX(t){return Multiply(this,SkewX(t))},y.skewY=function skewY(t){return Multiply(this,SkewY(t))},y.setIdentity=function setIdentity(){return feedFromArray(this,[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])},y.transformPoint=function transformPoint(t){var h=Translate(t.x,t.y,t.z);return h.m44=t.w||1,{x:(h=this.multiply(h)).m41,y:h.m42,z:h.m43,w:h.m44}},y.transform=function transform(t){var h=this,y=h.m11*t.x+h.m12*t.y+h.m13*t.z+h.m14*t.w,w=h.m21*t.x+h.m22*t.y+h.m23*t.z+h.m24*t.w,A=h.m31*t.x+h.m32*t.y+h.m33*t.z+h.m34*t.w,T=h.m41*t.x+h.m42*t.y+h.m43*t.z+h.m44*t.w;return{x:y/T,y:w/T,z:A/T,w:T}},t.Translate=Translate,t.Rotate=Rotate,t.RotateAxisAngle=RotateAxisAngle,t.Scale=Scale,t.SkewX=SkewX,t.SkewY=SkewY,t.Multiply=Multiply,t.fromMatrix=function fromMatrix(h){return new t([h.m11,h.m21,h.m31,h.m41,h.m12,h.m22,h.m32,h.m42,h.m13,h.m23,h.m33,h.m43,h.m14,h.m24,h.m34,h.m44])},t.fromArray=function fromArray(h){return feedFromArray(new t,h)},t.feedFromArray=feedFromArray,t},"object"===_typeof(h)?t.exports=T():void 0===(A="function"==typeof(w=T)?w.call(h,y,h,t):w)||(t.exports=A)},(t,h,y)=>{y(71),y(86);var w=y(96);t.exports=w.Object.fromEntries},(t,h,y)=>{"use strict";var w=y(17),A=y(72),T=y(77),E=y(52),j=y(78),B="Array Iterator",N=E.set,V=E.getterFor(B);t.exports=j(Array,"Array",(function(t,h){N(this,{type:B,target:w(t),index:0,kind:h})}),(function(){var t=V(this),h=t.target,y=t.kind,w=t.index++;return!h||w>=h.length?(t.target=void 0,{value:void 0,done:!0}):"keys"==y?{value:w,done:!1}:"values"==y?{value:h[w],done:!1}:{value:[w,h[w]],done:!1}}),"values"),T.Arguments=T.Array,A("keys"),A("values"),A("entries")},(t,h,y)=>{var w=y(37),A=y(73),T=y(48),E=w("unscopables"),j=Array.prototype;null==j[E]&&T.f(j,E,{configurable:!0,value:A(null)}),t.exports=function(t){j[E][t]=!0}},(t,h,y)=>{var w,A=y(49),T=y(74),E=y(66),j=y(55),B=y(76),N=y(46),V=y(54),W="prototype",H="script",G=V("IE_PROTO"),EmptyConstructor=function(){},scriptTag=function(t){return"<"+H+">"+t+"</"+H+">"},NullProtoObjectViaActiveX=function(t){t.write(scriptTag("")),t.close();var h=t.parentWindow.Object;return t=null,h},NullProtoObject=function(){try{w=new ActiveXObject("htmlfile")}catch(t){}var t,h,y;NullProtoObject="undefined"!=typeof document?document.domain&&w?NullProtoObjectViaActiveX(w):(h=N("iframe"),y="java"+H+":",h.style.display="none",B.appendChild(h),h.src=String(y),(t=h.contentWindow.document).open(),t.write(scriptTag("document.F=Object")),t.close(),t.F):NullProtoObjectViaActiveX(w);for(var A=E.length;A--;)delete NullProtoObject[W][E[A]];return NullProtoObject()};j[G]=!0,t.exports=Object.create||function create(t,h){var y;return null!==t?(EmptyConstructor[W]=A(t),y=new EmptyConstructor,EmptyConstructor[W]=null,y[G]=t):y=NullProtoObject(),void 0===h?y:T(y,h)}},(t,h,y)=>{var w=y(12),A=y(48),T=y(49),E=y(17),j=y(75);t.exports=w?Object.defineProperties:function defineProperties(t,h){T(t);for(var y,w=E(h),B=j(h),N=B.length,V=0;N>V;)A.f(t,y=B[V++],w[y]);return t}},(t,h,y)=>{var w=y(60),A=y(66);t.exports=Object.keys||function keys(t){return w(t,A)}},(t,h,y)=>{var w=y(27);t.exports=w("document","documentElement")},t=>{t.exports={}},(t,h,y)=>{"use strict";var w=y(9),A=y(14),T=y(39),E=y(56),j=y(25),B=y(79),N=y(81),V=y(84),W=y(83),H=y(47),G=y(50),z=y(37),$=y(77),J=y(80),X=E.PROPER,K=E.CONFIGURABLE,ne=J.IteratorPrototype,ue=J.BUGGY_SAFARI_ITERATORS,pe=z("iterator"),me="keys",ge="values",we="entries",returnThis=function(){return this};t.exports=function(t,h,y,E,z,J,Ce){B(y,h,E);var ke,Ie,Te,getIterationMethod=function(t){if(t===z&&Ze)return Ze;if(!ue&&t in Be)return Be[t];switch(t){case me:return function keys(){return new y(this,t)};case ge:return function values(){return new y(this,t)};case we:return function entries(){return new y(this,t)}}return function(){return new y(this)}},Ee=h+" Iterator",Me=!1,Be=t.prototype,Ne=Be[pe]||Be["@@iterator"]||z&&Be[z],Ze=!ue&&Ne||getIterationMethod(z),et="Array"==h&&Be.entries||Ne;if(et&&(ke=N(et.call(new t)))!==Object.prototype&&ke.next&&(T||N(ke)===ne||(V?V(ke,ne):j(ke[pe])||G(ke,pe,returnThis)),W(ke,Ee,!0,!0),T&&($[Ee]=returnThis)),X&&z==ge&&Ne&&Ne.name!==ge&&(!T&&K?H(Be,"name",ge):(Me=!0,Ze=function values(){return A(Ne,this)})),z)if(Ie={values:getIterationMethod(ge),keys:J?Ze:getIterationMethod(me),entries:getIterationMethod(we)},Ce)for(Te in Ie)(ue||Me||!(Te in Be))&&G(Be,Te,Ie[Te]);else w({target:h,proto:!0,forced:ue||Me},Ie);return T&&!Ce||Be[pe]===Ze||G(Be,pe,Ze,{name:z}),$[h]=Ze,Ie}},(t,h,y)=>{"use strict";var w=y(80).IteratorPrototype,A=y(73),T=y(16),E=y(83),j=y(77),returnThis=function(){return this};t.exports=function(t,h,y){var B=h+" Iterator";return t.prototype=A(w,{next:T(1,y)}),E(t,B,!1,!0),j[B]=returnThis,t}},(t,h,y)=>{"use strict";var w,A,T,E=y(13),j=y(25),B=y(73),N=y(81),V=y(50),W=y(37),H=y(39),G=W("iterator"),z=!1;[].keys&&("next"in(T=[].keys())?(A=N(N(T)))!==Object.prototype&&(w=A):z=!0),null==w||E((function(){var t={};return w[G].call(t)!==t}))?w={}:H&&(w=B(w)),j(w[G])||V(w,G,(function(){return this})),t.exports={IteratorPrototype:w,BUGGY_SAFARI_ITERATORS:z}},(t,h,y)=>{var w=y(10),A=y(42),T=y(25),E=y(43),j=y(54),B=y(82),N=j("IE_PROTO"),V=w.Object,W=V.prototype;t.exports=B?V.getPrototypeOf:function(t){var h=E(t);if(A(h,N))return h[N];var y=h.constructor;return T(y)&&h instanceof y?y.prototype:h instanceof V?W:null}},(t,h,y)=>{var w=y(13);t.exports=!w((function(){function F(){}return F.prototype.constructor=null,Object.getPrototypeOf(new F)!==F.prototype}))},(t,h,y)=>{var w=y(48).f,A=y(42),T=y(37)("toStringTag");t.exports=function(t,h,y){t&&!A(t=y?t:t.prototype,T)&&w(t,T,{configurable:!0,value:h})}},(t,h,y)=>{var w=y(19),A=y(49),T=y(85);t.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var t,h=!1,y={};try{(t=w(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(y,[]),h=y instanceof Array}catch(t){}return function setPrototypeOf(y,w){return A(y),T(w),h?t(y,w):y.__proto__=w,y}}():void 0)},(t,h,y)=>{var w=y(10),A=y(25),T=w.String,E=w.TypeError;t.exports=function(t){if("object"==typeof t||A(t))return t;throw E("Can't set "+T(t)+" as a prototype")}},(t,h,y)=>{var w=y(9),A=y(87),T=y(95);w({target:"Object",stat:!0},{fromEntries:function fromEntries(t){var h={};return A(t,(function(t,y){T(h,t,y)}),{AS_ENTRIES:!0}),h}})},(t,h,y)=>{var w=y(10),A=y(88),T=y(14),E=y(49),j=y(35),B=y(89),N=y(64),V=y(28),W=y(90),H=y(91),G=y(94),z=w.TypeError,Result=function(t,h){this.stopped=t,this.result=h},$=Result.prototype;t.exports=function(t,h,y){var w,J,X,K,ne,ue,pe,me=y&&y.that,ge=!(!y||!y.AS_ENTRIES),we=!(!y||!y.IS_ITERATOR),Ce=!(!y||!y.INTERRUPTED),ke=A(h,me),stop=function(t){return w&&G(w,"normal",t),new Result(!0,t)},callFn=function(t){return ge?(E(t),Ce?ke(t[0],t[1],stop):ke(t[0],t[1])):Ce?ke(t,stop):ke(t)};if(we)w=t;else{if(!(J=H(t)))throw z(j(t)+" is not iterable");if(B(J)){for(X=0,K=N(t);K>X;X++)if((ne=callFn(t[X]))&&V($,ne))return ne;return new Result(!1)}w=W(t,J)}for(ue=w.next;!(pe=T(ue,w)).done;){try{ne=callFn(pe.value)}catch(t){G(w,"throw",t)}if("object"==typeof ne&&ne&&V($,ne))return ne}return new Result(!1)}},(t,h,y)=>{var w=y(19),A=y(34),T=w(w.bind);t.exports=function(t,h){return A(t),void 0===h?t:T?T(t,h):function(){return t.apply(h,arguments)}}},(t,h,y)=>{var w=y(37),A=y(77),T=w("iterator"),E=Array.prototype;t.exports=function(t){return void 0!==t&&(A.Array===t||E[T]===t)}},(t,h,y)=>{var w=y(10),A=y(14),T=y(34),E=y(49),j=y(35),B=y(91),N=w.TypeError;t.exports=function(t,h){var y=arguments.length<2?B(t):h;if(T(y))return E(A(y,t));throw N(j(t)+" is not iterable")}},(t,h,y)=>{var w=y(92),A=y(33),T=y(77),E=y(37)("iterator");t.exports=function(t){if(null!=t)return A(t,E)||A(t,"@@iterator")||T[w(t)]}},(t,h,y)=>{var w=y(10),A=y(93),T=y(25),E=y(20),j=y(37)("toStringTag"),B=w.Object,N="Arguments"==E(function(){return arguments}());t.exports=A?E:function(t){var h,y,w;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(y=function(t,h){try{return t[h]}catch(t){}}(h=B(t),j))?y:N?E(h):"Object"==(w=E(h))&&T(h.callee)?"Arguments":w}},(t,h,y)=>{var w={};w[y(37)("toStringTag")]="z",t.exports="[object z]"===String(w)},(t,h,y)=>{var w=y(14),A=y(49),T=y(33);t.exports=function(t,h,y){var E,j;A(t);try{if(!(E=T(t,"return"))){if("throw"===h)throw y;return y}E=w(E,t)}catch(t){j=!0,E=t}if("throw"===h)throw y;if(j)throw E;return A(E),y}},(t,h,y)=>{"use strict";var w=y(22),A=y(48),T=y(16);t.exports=function(t,h,y){var E=w(h);E in t?A.f(t,E,T(0,y)):t[E]=y}},(t,h,y)=>{var w=y(10);t.exports=w},(t,h,y)=>{y(98),y(71),y(105),y(107),y(128),y(129),y(130),y(131);var w=y(96);t.exports=w.Promise},(t,h,y)=>{"use strict";var w=y(9),A=y(10),T=y(28),E=y(81),j=y(84),B=y(57),N=y(73),V=y(47),W=y(16),H=y(99),G=y(101),z=y(87),$=y(102),J=y(37),X=y(104),K=J("toStringTag"),ne=A.Error,ue=[].push,pe=function AggregateError(t,h){var y,w=arguments.length>2?arguments[2]:void 0,A=T(me,this);j?y=j(new ne(void 0),A?E(this):me):(y=A?this:N(me),V(y,K,"Error")),V(y,"message",$(h,"")),X&&V(y,"stack",H(y.stack,1)),G(y,w);var B=[];return z(t,ue,{that:B}),V(y,"errors",B),y};j?j(pe,ne):B(pe,ne);var me=pe.prototype=N(ne.prototype,{constructor:W(1,pe),message:W(1,""),name:W(1,"AggregateError")});w({global:!0},{AggregateError:pe})},(t,h,y)=>{var w=y(19),A=y(100),T=w("".replace),E=w("".split),j=w([].join),B=String(Error("zxcasd").stack),N=/\n\s*at [^:]*:[^\n]*/,V=N.test(B),W=/@[^\n]*\n/.test(B)&&!/zxcasd/.test(B);t.exports=function(t,h){if("string"!=typeof t)return t;if(V)for(;h--;)t=T(t,N,"");else if(W)return j(A(E(t,"\n"),h),"\n");return t}},(t,h,y)=>{var w=y(19);t.exports=w([].slice)},(t,h,y)=>{var w=y(24),A=y(47);t.exports=function(t,h){w(h)&&"cause"in h&&A(t,"cause",h.cause)}},(t,h,y)=>{var w=y(103);t.exports=function(t,h){return void 0===t?arguments.length<2?"":h:w(t)}},(t,h,y)=>{var w=y(10),A=y(92),T=w.String;t.exports=function(t){if("Symbol"===A(t))throw TypeError("Cannot convert a Symbol value to a string");return T(t)}},(t,h,y)=>{var w=y(13),A=y(16);t.exports=!w((function(){var t=Error("a");return!("stack"in t)||(Object.defineProperty(t,"stack",A(1,7)),7!==t.stack)}))},(t,h,y)=>{var w=y(93),A=y(50),T=y(106);w||A(Object.prototype,"toString",T,{unsafe:!0})},(t,h,y)=>{"use strict";var w=y(93),A=y(92);t.exports=w?{}.toString:function toString(){return"[object "+A(this)+"]"}},(t,h,y)=>{"use strict";var w,A,T,E,j=y(9),B=y(39),N=y(10),V=y(27),W=y(14),H=y(108),G=y(50),z=y(109),$=y(84),J=y(83),X=y(110),K=y(34),ne=y(25),ue=y(24),pe=y(111),me=y(51),ge=y(87),we=y(112),Ce=y(113),ke=y(116).set,Ie=y(120),Te=y(123),Ee=y(125),Me=y(124),Be=y(126),Ne=y(52),Ze=y(68),et=y(37),tt=y(127),rt=y(119),nt=y(31),it=et("species"),at="Promise",st=Ne.get,lt=Ne.set,ct=Ne.getterFor(at),ht=H&&H.prototype,vt=H,gt=ht,bt=N.TypeError,_t=N.document,St=N.process,wt=Me.f,Ct=wt,Pt=!!(_t&&_t.createEvent&&N.dispatchEvent),kt=ne(N.PromiseRejectionEvent),xt="unhandledrejection",At=!1,It=Ze(at,(function(){var t=me(vt),h=t!==String(vt);if(!h&&66===nt)return!0;if(B&&!gt.finally)return!0;if(nt>=51&&/native code/.test(t))return!1;var y=new vt((function(t){t(1)})),FakePromise=function(t){t((function(){}),(function(){}))};return(y.constructor={})[it]=FakePromise,!(At=y.then((function(){}))instanceof FakePromise)||!h&&tt&&!kt})),Tt=It||!we((function(t){vt.all(t).catch((function(){}))})),isThenable=function(t){var h;return!(!ue(t)||!ne(h=t.then))&&h},notify=function(t,h){if(!t.notified){t.notified=!0;var y=t.reactions;Ie((function(){for(var w=t.value,A=1==t.state,T=0;y.length>T;){var E,j,B,N=y[T++],V=A?N.ok:N.fail,H=N.resolve,G=N.reject,z=N.domain;try{V?(A||(2===t.rejection&&onHandleUnhandled(t),t.rejection=1),!0===V?E=w:(z&&z.enter(),E=V(w),z&&(z.exit(),B=!0)),E===N.promise?G(bt("Promise-chain cycle")):(j=isThenable(E))?W(j,E,H,G):H(E)):G(w)}catch(t){z&&!B&&z.exit(),G(t)}}t.reactions=[],t.notified=!1,h&&!t.rejection&&onUnhandled(t)}))}},dispatchEvent=function(t,h,y){var w,A;Pt?((w=_t.createEvent("Event")).promise=h,w.reason=y,w.initEvent(t,!1,!0),N.dispatchEvent(w)):w={promise:h,reason:y},!kt&&(A=N["on"+t])?A(w):t===xt&&Ee("Unhandled promise rejection",y)},onUnhandled=function(t){W(ke,N,(function(){var h,y=t.facade,w=t.value;if(isUnhandled(t)&&(h=Be((function(){rt?St.emit("unhandledRejection",w,y):dispatchEvent(xt,y,w)})),t.rejection=rt||isUnhandled(t)?2:1,h.error))throw h.value}))},isUnhandled=function(t){return 1!==t.rejection&&!t.parent},onHandleUnhandled=function(t){W(ke,N,(function(){var h=t.facade;rt?St.emit("rejectionHandled",h):dispatchEvent("rejectionhandled",h,t.value)}))},bind=function(t,h,y){return function(w){t(h,w,y)}},internalReject=function(t,h,y){t.done||(t.done=!0,y&&(t=y),t.value=h,t.state=2,notify(t,!0))},internalResolve=function(t,h,y){if(!t.done){t.done=!0,y&&(t=y);try{if(t.facade===h)throw bt("Promise can't be resolved itself");var w=isThenable(h);w?Ie((function(){var y={done:!1};try{W(w,h,bind(internalResolve,y,t),bind(internalReject,y,t))}catch(h){internalReject(y,h,t)}})):(t.value=h,t.state=1,notify(t,!1))}catch(h){internalReject({done:!1},h,t)}}};if(It&&(gt=(vt=function Promise(t){pe(this,gt),K(t),W(w,this);var h=st(this);try{t(bind(internalResolve,h),bind(internalReject,h))}catch(t){internalReject(h,t)}}).prototype,(w=function Promise(t){lt(this,{type:at,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=z(gt,{then:function then(t,h){var y=ct(this),w=y.reactions,A=wt(Ce(this,vt));return A.ok=!ne(t)||t,A.fail=ne(h)&&h,A.domain=rt?St.domain:void 0,y.parent=!0,w[w.length]=A,0!=y.state&&notify(y,!1),A.promise},catch:function(t){return this.then(void 0,t)}}),A=function(){var t=new w,h=st(t);this.promise=t,this.resolve=bind(internalResolve,h),this.reject=bind(internalReject,h)},Me.f=wt=function(t){return t===vt||t===T?new A(t):Ct(t)},!B&&ne(H)&&ht!==Object.prototype)){E=ht.then,At||(G(ht,"then",(function then(t,h){var y=this;return new vt((function(t,h){W(E,y,t,h)})).then(t,h)}),{unsafe:!0}),G(ht,"catch",gt.catch,{unsafe:!0}));try{delete ht.constructor}catch(t){}$&&$(ht,gt)}j({global:!0,wrap:!0,forced:It},{Promise:vt}),J(vt,at,!1,!0),X(at),T=V(at),j({target:at,stat:!0,forced:It},{reject:function reject(t){var h=wt(this);return W(h.reject,void 0,t),h.promise}}),j({target:at,stat:!0,forced:B||It},{resolve:function resolve(t){return Te(B&&this===T?vt:this,t)}}),j({target:at,stat:!0,forced:Tt},{all:function all(t){var h=this,y=wt(h),w=y.resolve,A=y.reject,T=Be((function(){var y=K(h.resolve),T=[],E=0,j=1;ge(t,(function(t){var B=E++,N=!1;j++,W(y,h,t).then((function(t){N||(N=!0,T[B]=t,--j||w(T))}),A)})),--j||w(T)}));return T.error&&A(T.value),y.promise},race:function race(t){var h=this,y=wt(h),w=y.reject,A=Be((function(){var A=K(h.resolve);ge(t,(function(t){W(A,h,t).then(y.resolve,w)}))}));return A.error&&w(A.value),y.promise}})},(t,h,y)=>{var w=y(10);t.exports=w.Promise},(t,h,y)=>{var w=y(50);t.exports=function(t,h,y){for(var A in h)w(t,A,h[A],y);return t}},(t,h,y)=>{"use strict";var w=y(27),A=y(48),T=y(37),E=y(12),j=T("species");t.exports=function(t){var h=w(t),y=A.f;E&&h&&!h[j]&&y(h,j,{configurable:!0,get:function(){return this}})}},(t,h,y)=>{var w=y(10),A=y(28),T=w.TypeError;t.exports=function(t,h){if(A(h,t))return t;throw T("Incorrect invocation")}},(t,h,y)=>{var w=y(37)("iterator"),A=!1;try{var T=0,E={next:function(){return{done:!!T++}},return:function(){A=!0}};E[w]=function(){return this},Array.from(E,(function(){throw 2}))}catch(t){}t.exports=function(t,h){if(!h&&!A)return!1;var y=!1;try{var T={};T[w]=function(){return{next:function(){return{done:y=!0}}}},t(T)}catch(t){}return y}},(t,h,y)=>{var w=y(49),A=y(114),T=y(37)("species");t.exports=function(t,h){var y,E=w(t).constructor;return void 0===E||null==(y=w(E)[T])?h:A(y)}},(t,h,y)=>{var w=y(10),A=y(115),T=y(35),E=w.TypeError;t.exports=function(t){if(A(t))return t;throw E(T(t)+" is not a constructor")}},(t,h,y)=>{var w=y(19),A=y(13),T=y(25),E=y(92),j=y(27),B=y(51),noop=function(){},N=[],V=j("Reflect","construct"),W=/^\s*(?:class|function)\b/,H=w(W.exec),G=!W.exec(noop),isConstructorModern=function(t){if(!T(t))return!1;try{return V(noop,N,t),!0}catch(t){return!1}};t.exports=!V||A((function(){var t;return isConstructorModern(isConstructorModern.call)||!isConstructorModern(Object)||!isConstructorModern((function(){t=!0}))||t}))?function(t){if(!T(t))return!1;switch(E(t)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}return G||!!H(W,B(t))}:isConstructorModern},(t,h,y)=>{var w,A,T,E,j=y(10),B=y(117),N=y(88),V=y(25),W=y(42),H=y(13),G=y(76),z=y(100),$=y(46),J=y(118),X=y(119),K=j.setImmediate,ne=j.clearImmediate,ue=j.process,pe=j.Dispatch,me=j.Function,ge=j.MessageChannel,we=j.String,Ce=0,ke={},Ie="onreadystatechange";try{w=j.location}catch(t){}var run=function(t){if(W(ke,t)){var h=ke[t];delete ke[t],h()}},runner=function(t){return function(){run(t)}},listener=function(t){run(t.data)},post=function(t){j.postMessage(we(t),w.protocol+"//"+w.host)};K&&ne||(K=function setImmediate(t){var h=z(arguments,1);return ke[++Ce]=function(){B(V(t)?t:me(t),void 0,h)},A(Ce),Ce},ne=function clearImmediate(t){delete ke[t]},X?A=function(t){ue.nextTick(runner(t))}:pe&&pe.now?A=function(t){pe.now(runner(t))}:ge&&!J?(E=(T=new ge).port2,T.port1.onmessage=listener,A=N(E.postMessage,E)):j.addEventListener&&V(j.postMessage)&&!j.importScripts&&w&&"file:"!==w.protocol&&!H(post)?(A=post,j.addEventListener("message",listener,!1)):A=Ie in $("script")?function(t){G.appendChild($("script"))[Ie]=function(){G.removeChild(this),run(t)}}:function(t){setTimeout(runner(t),0)}),t.exports={set:K,clear:ne}},t=>{var h=Function.prototype,y=h.apply,w=h.bind,A=h.call;t.exports="object"==typeof Reflect&&Reflect.apply||(w?A.bind(y):function(){return A.apply(y,arguments)})},(t,h,y)=>{var w=y(32);t.exports=/(?:ipad|iphone|ipod).*applewebkit/i.test(w)},(t,h,y)=>{var w=y(20),A=y(10);t.exports="process"==w(A.process)},(t,h,y)=>{var w,A,T,E,j,B,N,V,W=y(10),H=y(88),G=y(11).f,z=y(116).set,$=y(118),J=y(121),X=y(122),K=y(119),ne=W.MutationObserver||W.WebKitMutationObserver,ue=W.document,pe=W.process,me=W.Promise,ge=G(W,"queueMicrotask"),we=ge&&ge.value;we||(w=function(){var t,h;for(K&&(t=pe.domain)&&t.exit();A;){h=A.fn,A=A.next;try{h()}catch(t){throw A?E():T=void 0,t}}T=void 0,t&&t.enter()},$||K||X||!ne||!ue?!J&&me&&me.resolve?((N=me.resolve(void 0)).constructor=me,V=H(N.then,N),E=function(){V(w)}):K?E=function(){pe.nextTick(w)}:(z=H(z,W),E=function(){z(w)}):(j=!0,B=ue.createTextNode(""),new ne(w).observe(B,{characterData:!0}),E=function(){B.data=j=!j})),t.exports=we||function(t){var h={fn:t,next:void 0};T&&(T.next=h),A||(A=h,E()),T=h}},(t,h,y)=>{var w=y(32),A=y(10);t.exports=/ipad|iphone|ipod/i.test(w)&&void 0!==A.Pebble},(t,h,y)=>{var w=y(32);t.exports=/web0s(?!.*chrome)/i.test(w)},(t,h,y)=>{var w=y(49),A=y(24),T=y(124);t.exports=function(t,h){if(w(t),A(h)&&h.constructor===t)return h;var y=T.f(t);return(0,y.resolve)(h),y.promise}},(t,h,y)=>{"use strict";var w=y(34),PromiseCapability=function(t){var h,y;this.promise=new t((function(t,w){if(void 0!==h||void 0!==y)throw TypeError("Bad Promise constructor");h=t,y=w})),this.resolve=w(h),this.reject=w(y)};t.exports.f=function(t){return new PromiseCapability(t)}},(t,h,y)=>{var w=y(10);t.exports=function(t,h){var y=w.console;y&&y.error&&(1==arguments.length?y.error(t):y.error(t,h))}},t=>{t.exports=function(t){try{return{error:!1,value:t()}}catch(t){return{error:!0,value:t}}}},t=>{t.exports="object"==typeof window},(t,h,y)=>{"use strict";var w=y(9),A=y(14),T=y(34),E=y(124),j=y(126),B=y(87);w({target:"Promise",stat:!0},{allSettled:function allSettled(t){var h=this,y=E.f(h),w=y.resolve,N=y.reject,V=j((function(){var y=T(h.resolve),E=[],j=0,N=1;B(t,(function(t){var T=j++,B=!1;N++,A(y,h,t).then((function(t){B||(B=!0,E[T]={status:"fulfilled",value:t},--N||w(E))}),(function(t){B||(B=!0,E[T]={status:"rejected",reason:t},--N||w(E))}))})),--N||w(E)}));return V.error&&N(V.value),y.promise}})},(t,h,y)=>{"use strict";var w=y(9),A=y(34),T=y(27),E=y(14),j=y(124),B=y(126),N=y(87),V="No one promise resolved";w({target:"Promise",stat:!0},{any:function any(t){var h=this,y=T("AggregateError"),w=j.f(h),W=w.resolve,H=w.reject,G=B((function(){var w=A(h.resolve),T=[],j=0,B=1,G=!1;N(t,(function(t){var A=j++,N=!1;B++,E(w,h,t).then((function(t){N||G||(G=!0,W(t))}),(function(t){N||G||(N=!0,T[A]=t,--B||H(new y(T,V)))}))})),--B||H(new y(T,V))}));return G.error&&H(G.value),w.promise}})},(t,h,y)=>{"use strict";var w=y(9),A=y(39),T=y(108),E=y(13),j=y(27),B=y(25),N=y(113),V=y(123),W=y(50);if(w({target:"Promise",proto:!0,real:!0,forced:!!T&&E((function(){T.prototype.finally.call({then:function(){}},(function(){}))}))},{finally:function(t){var h=N(this,j("Promise")),y=B(t);return this.then(y?function(y){return V(h,t()).then((function(){return y}))}:t,y?function(y){return V(h,t()).then((function(){throw y}))}:t)}}),!A&&B(T)){var H=j("Promise").prototype.finally;T.prototype.finally!==H&&W(T.prototype,"finally",H,{unsafe:!0})}},(t,h,y)=>{"use strict";var w=y(132).charAt,A=y(103),T=y(52),E=y(78),j="String Iterator",B=T.set,N=T.getterFor(j);E(String,"String",(function(t){B(this,{type:j,string:A(t),index:0})}),(function next(){var t,h=N(this),y=h.string,A=h.index;return A>=y.length?{value:void 0,done:!0}:(t=w(y,A),h.index+=t.length,{value:t,done:!1})}))},(t,h,y)=>{var w=y(19),A=y(63),T=y(103),E=y(21),j=w("".charAt),B=w("".charCodeAt),N=w("".slice),createMethod=function(t){return function(h,y){var w,V,W=T(E(h)),H=A(y),G=W.length;return H<0||H>=G?t?"":void 0:(w=B(W,H))<55296||w>56319||H+1===G||(V=B(W,H+1))<56320||V>57343?t?j(W,H):w:t?N(W,H,H+2):V-56320+(w-55296<<10)+65536}};t.exports={codeAt:createMethod(!1),charAt:createMethod(!0)}},function(t,h){!function(t){"use strict";var h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?Symbol:function(t){return"Symbol("+t+")"};function noop(){}function getGlobals(){return"undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==__webpack_require__.g?__webpack_require__.g:void 0}var y=getGlobals();function typeIsObject(t){return"object"==typeof t&&null!==t||"function"==typeof t}var w=noop,A=Promise,T=Promise.prototype.then,E=Promise.resolve.bind(A),j=Promise.reject.bind(A);function newPromise(t){return new A(t)}function promiseResolvedWith(t){return E(t)}function promiseRejectedWith(t){return j(t)}function PerformPromiseThen(t,h,y){return T.call(t,h,y)}function uponPromise(t,h,y){PerformPromiseThen(PerformPromiseThen(t,h,y),void 0,w)}function uponFulfillment(t,h){uponPromise(t,h)}function uponRejection(t,h){uponPromise(t,void 0,h)}function transformPromiseWith(t,h,y){return PerformPromiseThen(t,h,y)}function setPromiseIsHandledToTrue(t){PerformPromiseThen(t,void 0,w)}var B=function(){var t=y&&y.queueMicrotask;if("function"==typeof t)return t;var h=promiseResolvedWith(void 0);return function(t){return PerformPromiseThen(h,t)}}();function reflectCall(t,h,y){if("function"!=typeof t)throw new TypeError("Argument is not a function");return Function.prototype.apply.call(t,h,y)}function promiseCall(t,h,y){try{return promiseResolvedWith(reflectCall(t,h,y))}catch(t){return promiseRejectedWith(t)}}var N=16384,V=function(){function SimpleQueue(){this._cursor=0,this._size=0,this._front={_elements:[],_next:void 0},this._back=this._front,this._cursor=0,this._size=0}return Object.defineProperty(SimpleQueue.prototype,"length",{get:function(){return this._size},enumerable:!1,configurable:!0}),SimpleQueue.prototype.push=function(t){var h=this._back,y=h;h._elements.length===N-1&&(y={_elements:[],_next:void 0}),h._elements.push(t),y!==h&&(this._back=y,h._next=y),++this._size},SimpleQueue.prototype.shift=function(){var t=this._front,h=t,y=this._cursor,w=y+1,A=t._elements,T=A[y];return w===N&&(h=t._next,w=0),--this._size,this._cursor=w,t!==h&&(this._front=h),A[y]=void 0,T},SimpleQueue.prototype.forEach=function(t){for(var h=this._cursor,y=this._front,w=y._elements;!(h===w.length&&void 0===y._next||h===w.length&&(h=0,0===(w=(y=y._next)._elements).length));)t(w[h]),++h},SimpleQueue.prototype.peek=function(){var t=this._front,h=this._cursor;return t._elements[h]},SimpleQueue}();function ReadableStreamReaderGenericInitialize(t,h){t._ownerReadableStream=h,h._reader=t,"readable"===h._state?defaultReaderClosedPromiseInitialize(t):"closed"===h._state?defaultReaderClosedPromiseInitializeAsResolved(t):defaultReaderClosedPromiseInitializeAsRejected(t,h._storedError)}function ReadableStreamReaderGenericCancel(t,h){return ReadableStreamCancel(t._ownerReadableStream,h)}function ReadableStreamReaderGenericRelease(t){"readable"===t._ownerReadableStream._state?defaultReaderClosedPromiseReject(t,new TypeError("Reader was released and can no longer be used to monitor the stream's closedness")):defaultReaderClosedPromiseResetToRejected(t,new TypeError("Reader was released and can no longer be used to monitor the stream's closedness")),t._ownerReadableStream._reader=void 0,t._ownerReadableStream=void 0}function readerLockException(t){return new TypeError("Cannot "+t+" a stream using a released reader")}function defaultReaderClosedPromiseInitialize(t){t._closedPromise=newPromise((function(h,y){t._closedPromise_resolve=h,t._closedPromise_reject=y}))}function defaultReaderClosedPromiseInitializeAsRejected(t,h){defaultReaderClosedPromiseInitialize(t),defaultReaderClosedPromiseReject(t,h)}function defaultReaderClosedPromiseInitializeAsResolved(t){defaultReaderClosedPromiseInitialize(t),defaultReaderClosedPromiseResolve(t)}function defaultReaderClosedPromiseReject(t,h){void 0!==t._closedPromise_reject&&(setPromiseIsHandledToTrue(t._closedPromise),t._closedPromise_reject(h),t._closedPromise_resolve=void 0,t._closedPromise_reject=void 0)}function defaultReaderClosedPromiseResetToRejected(t,h){defaultReaderClosedPromiseInitializeAsRejected(t,h)}function defaultReaderClosedPromiseResolve(t){void 0!==t._closedPromise_resolve&&(t._closedPromise_resolve(void 0),t._closedPromise_resolve=void 0,t._closedPromise_reject=void 0)}var W=h("[[AbortSteps]]"),H=h("[[ErrorSteps]]"),G=h("[[CancelSteps]]"),z=h("[[PullSteps]]"),$=Number.isFinite||function(t){return"number"==typeof t&&isFinite(t)},J=Math.trunc||function(t){return t<0?Math.ceil(t):Math.floor(t)};function isDictionary(t){return"object"==typeof t||"function"==typeof t}function assertDictionary(t,h){if(void 0!==t&&!isDictionary(t))throw new TypeError(h+" is not an object.")}function assertFunction(t,h){if("function"!=typeof t)throw new TypeError(h+" is not a function.")}function isObject(t){return"object"==typeof t&&null!==t||"function"==typeof t}function assertObject(t,h){if(!isObject(t))throw new TypeError(h+" is not an object.")}function assertRequiredArgument(t,h,y){if(void 0===t)throw new TypeError("Parameter "+h+" is required in '"+y+"'.")}function assertRequiredField(t,h,y){if(void 0===t)throw new TypeError(h+" is required in '"+y+"'.")}function convertUnrestrictedDouble(t){return Number(t)}function censorNegativeZero(t){return 0===t?0:t}function integerPart(t){return censorNegativeZero(J(t))}function convertUnsignedLongLongWithEnforceRange(t,h){var y=0,w=Number.MAX_SAFE_INTEGER,A=Number(t);if(A=censorNegativeZero(A),!$(A))throw new TypeError(h+" is not a finite number");if((A=integerPart(A))<y||A>w)throw new TypeError(h+" is outside the accepted range of "+y+" to "+w+", inclusive");return $(A)&&0!==A?A:0}function assertReadableStream(t,h){if(!IsReadableStream(t))throw new TypeError(h+" is not a ReadableStream.")}function AcquireReadableStreamDefaultReader(t){return new ne(t)}function ReadableStreamAddReadRequest(t,h){t._reader._readRequests.push(h)}function ReadableStreamFulfillReadRequest(t,h,y){var w=t._reader._readRequests.shift();y?w._closeSteps():w._chunkSteps(h)}function ReadableStreamGetNumReadRequests(t){return t._reader._readRequests.length}function ReadableStreamHasDefaultReader(t){var h=t._reader;return void 0!==h&&!!IsReadableStreamDefaultReader(h)}var X,K,ne=function(){function ReadableStreamDefaultReader(t){if(assertRequiredArgument(t,1,"ReadableStreamDefaultReader"),assertReadableStream(t,"First parameter"),IsReadableStreamLocked(t))throw new TypeError("This stream has already been locked for exclusive reading by another reader");ReadableStreamReaderGenericInitialize(this,t),this._readRequests=new V}return Object.defineProperty(ReadableStreamDefaultReader.prototype,"closed",{get:function(){return IsReadableStreamDefaultReader(this)?this._closedPromise:promiseRejectedWith(defaultReaderBrandCheckException("closed"))},enumerable:!1,configurable:!0}),ReadableStreamDefaultReader.prototype.cancel=function(t){return void 0===t&&(t=void 0),IsReadableStreamDefaultReader(this)?void 0===this._ownerReadableStream?promiseRejectedWith(readerLockException("cancel")):ReadableStreamReaderGenericCancel(this,t):promiseRejectedWith(defaultReaderBrandCheckException("cancel"))},ReadableStreamDefaultReader.prototype.read=function(){if(!IsReadableStreamDefaultReader(this))return promiseRejectedWith(defaultReaderBrandCheckException("read"));if(void 0===this._ownerReadableStream)return promiseRejectedWith(readerLockException("read from"));var t,h,y=newPromise((function(y,w){t=y,h=w}));return ReadableStreamDefaultReaderRead(this,{_chunkSteps:function(h){return t({value:h,done:!1})},_closeSteps:function(){return t({value:void 0,done:!0})},_errorSteps:function(t){return h(t)}}),y},ReadableStreamDefaultReader.prototype.releaseLock=function(){if(!IsReadableStreamDefaultReader(this))throw defaultReaderBrandCheckException("releaseLock");if(void 0!==this._ownerReadableStream){if(this._readRequests.length>0)throw new TypeError("Tried to release a reader lock when that reader has pending read() calls un-settled");ReadableStreamReaderGenericRelease(this)}},ReadableStreamDefaultReader}();function IsReadableStreamDefaultReader(t){return!!typeIsObject(t)&&!!Object.prototype.hasOwnProperty.call(t,"_readRequests")&&t instanceof ne}function ReadableStreamDefaultReaderRead(t,h){var y=t._ownerReadableStream;y._disturbed=!0,"closed"===y._state?h._closeSteps():"errored"===y._state?h._errorSteps(y._storedError):y._readableStreamController[z](h)}function defaultReaderBrandCheckException(t){return new TypeError("ReadableStreamDefaultReader.prototype."+t+" can only be used on a ReadableStreamDefaultReader")}Object.defineProperties(ne.prototype,{cancel:{enumerable:!0},read:{enumerable:!0},releaseLock:{enumerable:!0},closed:{enumerable:!0}}),"symbol"==typeof h.toStringTag&&Object.defineProperty(ne.prototype,h.toStringTag,{value:"ReadableStreamDefaultReader",configurable:!0}),"symbol"==typeof h.asyncIterator&&((X={})[h.asyncIterator]=function(){return this},K=X,Object.defineProperty(K,h.asyncIterator,{enumerable:!1}));var ue=function(){function ReadableStreamAsyncIteratorImpl(t,h){this._ongoingPromise=void 0,this._isFinished=!1,this._reader=t,this._preventCancel=h}return ReadableStreamAsyncIteratorImpl.prototype.next=function(){var t=this,nextSteps=function(){return t._nextSteps()};return this._ongoingPromise=this._ongoingPromise?transformPromiseWith(this._ongoingPromise,nextSteps,nextSteps):nextSteps(),this._ongoingPromise},ReadableStreamAsyncIteratorImpl.prototype.return=function(t){var h=this,returnSteps=function(){return h._returnSteps(t)};return this._ongoingPromise?transformPromiseWith(this._ongoingPromise,returnSteps,returnSteps):returnSteps()},ReadableStreamAsyncIteratorImpl.prototype._nextSteps=function(){var t=this;if(this._isFinished)return Promise.resolve({value:void 0,done:!0});var h,y,w=this._reader;if(void 0===w._ownerReadableStream)return promiseRejectedWith(readerLockException("iterate"));var A=newPromise((function(t,w){h=t,y=w}));return ReadableStreamDefaultReaderRead(w,{_chunkSteps:function(y){t._ongoingPromise=void 0,B((function(){return h({value:y,done:!1})}))},_closeSteps:function(){t._ongoingPromise=void 0,t._isFinished=!0,ReadableStreamReaderGenericRelease(w),h({value:void 0,done:!0})},_errorSteps:function(h){t._ongoingPromise=void 0,t._isFinished=!0,ReadableStreamReaderGenericRelease(w),y(h)}}),A},ReadableStreamAsyncIteratorImpl.prototype._returnSteps=function(t){if(this._isFinished)return Promise.resolve({value:t,done:!0});this._isFinished=!0;var h=this._reader;if(void 0===h._ownerReadableStream)return promiseRejectedWith(readerLockException("finish iterating"));if(!this._preventCancel){var y=ReadableStreamReaderGenericCancel(h,t);return ReadableStreamReaderGenericRelease(h),transformPromiseWith(y,(function(){return{value:t,done:!0}}))}return ReadableStreamReaderGenericRelease(h),promiseResolvedWith({value:t,done:!0})},ReadableStreamAsyncIteratorImpl}(),pe={next:function(){return IsReadableStreamAsyncIterator(this)?this._asyncIteratorImpl.next():promiseRejectedWith(streamAsyncIteratorBrandCheckException("next"))},return:function(t){return IsReadableStreamAsyncIterator(this)?this._asyncIteratorImpl.return(t):promiseRejectedWith(streamAsyncIteratorBrandCheckException("return"))}};function AcquireReadableStreamAsyncIterator(t,h){var y=AcquireReadableStreamDefaultReader(t),w=new ue(y,h),A=Object.create(pe);return A._asyncIteratorImpl=w,A}function IsReadableStreamAsyncIterator(t){if(!typeIsObject(t))return!1;if(!Object.prototype.hasOwnProperty.call(t,"_asyncIteratorImpl"))return!1;try{return t._asyncIteratorImpl instanceof ue}catch(t){return!1}}function streamAsyncIteratorBrandCheckException(t){return new TypeError("ReadableStreamAsyncIterator."+t+" can only be used on a ReadableSteamAsyncIterator")}void 0!==K&&Object.setPrototypeOf(pe,K);var me=Number.isNaN||function(t){return t!=t};function CreateArrayFromList(t){return t.slice()}function CopyDataBlockBytes(t,h,y,w,A){new Uint8Array(t).set(new Uint8Array(y,w,A),h)}function TransferArrayBuffer(t){return t}function IsDetachedBuffer(t){return!1}function ArrayBufferSlice(t,h,y){if(t.slice)return t.slice(h,y);var w=y-h,A=new ArrayBuffer(w);return CopyDataBlockBytes(A,0,t,h,w),A}function IsNonNegativeNumber(t){return!("number"!=typeof t||me(t)||t<0)}function CloneAsUint8Array(t){var h=ArrayBufferSlice(t.buffer,t.byteOffset,t.byteOffset+t.byteLength);return new Uint8Array(h)}function DequeueValue(t){var h=t._queue.shift();return t._queueTotalSize-=h.size,t._queueTotalSize<0&&(t._queueTotalSize=0),h.value}function EnqueueValueWithSize(t,h,y){if(!IsNonNegativeNumber(y)||y===1/0)throw new RangeError("Size must be a finite, non-NaN, non-negative number.");t._queue.push({value:h,size:y}),t._queueTotalSize+=y}function PeekQueueValue(t){return t._queue.peek().value}function ResetQueue(t){t._queue=new V,t._queueTotalSize=0}var ge=function(){function ReadableStreamBYOBRequest(){throw new TypeError("Illegal constructor")}return Object.defineProperty(ReadableStreamBYOBRequest.prototype,"view",{get:function(){if(!IsReadableStreamBYOBRequest(this))throw byobRequestBrandCheckException("view");return this._view},enumerable:!1,configurable:!0}),ReadableStreamBYOBRequest.prototype.respond=function(t){if(!IsReadableStreamBYOBRequest(this))throw byobRequestBrandCheckException("respond");if(assertRequiredArgument(t,1,"respond"),t=convertUnsignedLongLongWithEnforceRange(t,"First parameter"),void 0===this._associatedReadableByteStreamController)throw new TypeError("This BYOB request has been invalidated");IsDetachedBuffer(this._view.buffer),ReadableByteStreamControllerRespond(this._associatedReadableByteStreamController,t)},ReadableStreamBYOBRequest.prototype.respondWithNewView=function(t){if(!IsReadableStreamBYOBRequest(this))throw byobRequestBrandCheckException("respondWithNewView");if(assertRequiredArgument(t,1,"respondWithNewView"),!ArrayBuffer.isView(t))throw new TypeError("You can only respond with array buffer views");if(void 0===this._associatedReadableByteStreamController)throw new TypeError("This BYOB request has been invalidated");IsDetachedBuffer(t.buffer),ReadableByteStreamControllerRespondWithNewView(this._associatedReadableByteStreamController,t)},ReadableStreamBYOBRequest}();Object.defineProperties(ge.prototype,{respond:{enumerable:!0},respondWithNewView:{enumerable:!0},view:{enumerable:!0}}),"symbol"==typeof h.toStringTag&&Object.defineProperty(ge.prototype,h.toStringTag,{value:"ReadableStreamBYOBRequest",configurable:!0});var we=function(){function ReadableByteStreamController(){throw new TypeError("Illegal constructor")}return Object.defineProperty(ReadableByteStreamController.prototype,"byobRequest",{get:function(){if(!IsReadableByteStreamController(this))throw byteStreamControllerBrandCheckException("byobRequest");return ReadableByteStreamControllerGetBYOBRequest(this)},enumerable:!1,configurable:!0}),Object.defineProperty(ReadableByteStreamController.prototype,"desiredSize",{get:function(){if(!IsReadableByteStreamController(this))throw byteStreamControllerBrandCheckException("desiredSize");return ReadableByteStreamControllerGetDesiredSize(this)},enumerable:!1,configurable:!0}),ReadableByteStreamController.prototype.close=function(){if(!IsReadableByteStreamController(this))throw byteStreamControllerBrandCheckException("close");if(this._closeRequested)throw new TypeError("The stream has already been closed; do not close it again!");var t=this._controlledReadableByteStream._state;if("readable"!==t)throw new TypeError("The stream (in "+t+" state) is not in the readable state and cannot be closed");ReadableByteStreamControllerClose(this)},ReadableByteStreamController.prototype.enqueue=function(t){if(!IsReadableByteStreamController(this))throw byteStreamControllerBrandCheckException("enqueue");if(assertRequiredArgument(t,1,"enqueue"),!ArrayBuffer.isView(t))throw new TypeError("chunk must be an array buffer view");if(0===t.byteLength)throw new TypeError("chunk must have non-zero byteLength");if(0===t.buffer.byteLength)throw new TypeError("chunk's buffer must have non-zero byteLength");if(this._closeRequested)throw new TypeError("stream is closed or draining");var h=this._controlledReadableByteStream._state;if("readable"!==h)throw new TypeError("The stream (in "+h+" state) is not in the readable state and cannot be enqueued to");ReadableByteStreamControllerEnqueue(this,t)},ReadableByteStreamController.prototype.error=function(t){if(void 0===t&&(t=void 0),!IsReadableByteStreamController(this))throw byteStreamControllerBrandCheckException("error");ReadableByteStreamControllerError(this,t)},ReadableByteStreamController.prototype[G]=function(t){ReadableByteStreamControllerClearPendingPullIntos(this),ResetQueue(this);var h=this._cancelAlgorithm(t);return ReadableByteStreamControllerClearAlgorithms(this),h},ReadableByteStreamController.prototype[z]=function(t){var h=this._controlledReadableByteStream;if(this._queueTotalSize>0){var y=this._queue.shift();this._queueTotalSize-=y.byteLength,ReadableByteStreamControllerHandleQueueDrain(this);var w=new Uint8Array(y.buffer,y.byteOffset,y.byteLength);t._chunkSteps(w)}else{var A=this._autoAllocateChunkSize;if(void 0!==A){var T=void 0;try{T=new ArrayBuffer(A)}catch(h){return void t._errorSteps(h)}var E={buffer:T,bufferByteLength:A,byteOffset:0,byteLength:A,bytesFilled:0,elementSize:1,viewConstructor:Uint8Array,readerType:"default"};this._pendingPullIntos.push(E)}ReadableStreamAddReadRequest(h,t),ReadableByteStreamControllerCallPullIfNeeded(this)}},ReadableByteStreamController}();function IsReadableByteStreamController(t){return!!typeIsObject(t)&&!!Object.prototype.hasOwnProperty.call(t,"_controlledReadableByteStream")&&t instanceof we}function IsReadableStreamBYOBRequest(t){return!!typeIsObject(t)&&!!Object.prototype.hasOwnProperty.call(t,"_associatedReadableByteStreamController")&&t instanceof ge}function ReadableByteStreamControllerCallPullIfNeeded(t){ReadableByteStreamControllerShouldCallPull(t)&&(t._pulling?t._pullAgain=!0:(t._pulling=!0,uponPromise(t._pullAlgorithm(),(function(){t._pulling=!1,t._pullAgain&&(t._pullAgain=!1,ReadableByteStreamControllerCallPullIfNeeded(t))}),(function(h){ReadableByteStreamControllerError(t,h)}))))}function ReadableByteStreamControllerClearPendingPullIntos(t){ReadableByteStreamControllerInvalidateBYOBRequest(t),t._pendingPullIntos=new V}function ReadableByteStreamControllerCommitPullIntoDescriptor(t,h){var y=!1;"closed"===t._state&&(y=!0);var w=ReadableByteStreamControllerConvertPullIntoDescriptor(h);"default"===h.readerType?ReadableStreamFulfillReadRequest(t,w,y):ReadableStreamFulfillReadIntoRequest(t,w,y)}function ReadableByteStreamControllerConvertPullIntoDescriptor(t){var h=t.bytesFilled,y=t.elementSize;return new t.viewConstructor(t.buffer,t.byteOffset,h/y)}function ReadableByteStreamControllerEnqueueChunkToQueue(t,h,y,w){t._queue.push({buffer:h,byteOffset:y,byteLength:w}),t._queueTotalSize+=w}function ReadableByteStreamControllerFillPullIntoDescriptorFromQueue(t,h){var y=h.elementSize,w=h.bytesFilled-h.bytesFilled%y,A=Math.min(t._queueTotalSize,h.byteLength-h.bytesFilled),T=h.bytesFilled+A,E=T-T%y,j=A,B=!1;E>w&&(j=E-h.bytesFilled,B=!0);for(var N=t._queue;j>0;){var V=N.peek(),W=Math.min(j,V.byteLength),H=h.byteOffset+h.bytesFilled;CopyDataBlockBytes(h.buffer,H,V.buffer,V.byteOffset,W),V.byteLength===W?N.shift():(V.byteOffset+=W,V.byteLength-=W),t._queueTotalSize-=W,ReadableByteStreamControllerFillHeadPullIntoDescriptor(t,W,h),j-=W}return B}function ReadableByteStreamControllerFillHeadPullIntoDescriptor(t,h,y){y.bytesFilled+=h}function ReadableByteStreamControllerHandleQueueDrain(t){0===t._queueTotalSize&&t._closeRequested?(ReadableByteStreamControllerClearAlgorithms(t),ReadableStreamClose(t._controlledReadableByteStream)):ReadableByteStreamControllerCallPullIfNeeded(t)}function ReadableByteStreamControllerInvalidateBYOBRequest(t){null!==t._byobRequest&&(t._byobRequest._associatedReadableByteStreamController=void 0,t._byobRequest._view=null,t._byobRequest=null)}function ReadableByteStreamControllerProcessPullIntoDescriptorsUsingQueue(t){for(;t._pendingPullIntos.length>0;){if(0===t._queueTotalSize)return;var h=t._pendingPullIntos.peek();ReadableByteStreamControllerFillPullIntoDescriptorFromQueue(t,h)&&(ReadableByteStreamControllerShiftPendingPullInto(t),ReadableByteStreamControllerCommitPullIntoDescriptor(t._controlledReadableByteStream,h))}}function ReadableByteStreamControllerPullInto(t,h,y){var w=t._controlledReadableByteStream,A=1;h.constructor!==DataView&&(A=h.constructor.BYTES_PER_ELEMENT);var T=h.constructor,E=TransferArrayBuffer(h.buffer),j={buffer:E,bufferByteLength:E.byteLength,byteOffset:h.byteOffset,byteLength:h.byteLength,bytesFilled:0,elementSize:A,viewConstructor:T,readerType:"byob"};if(t._pendingPullIntos.length>0)return t._pendingPullIntos.push(j),void ReadableStreamAddReadIntoRequest(w,y);if("closed"!==w._state){if(t._queueTotalSize>0){if(ReadableByteStreamControllerFillPullIntoDescriptorFromQueue(t,j)){var B=ReadableByteStreamControllerConvertPullIntoDescriptor(j);return ReadableByteStreamControllerHandleQueueDrain(t),void y._chunkSteps(B)}if(t._closeRequested){var N=new TypeError("Insufficient bytes to fill elements in the given buffer");return ReadableByteStreamControllerError(t,N),void y._errorSteps(N)}}t._pendingPullIntos.push(j),ReadableStreamAddReadIntoRequest(w,y),ReadableByteStreamControllerCallPullIfNeeded(t)}else{var V=new T(j.buffer,j.byteOffset,0);y._closeSteps(V)}}function ReadableByteStreamControllerRespondInClosedState(t,h){var y=t._controlledReadableByteStream;if(ReadableStreamHasBYOBReader(y))for(;ReadableStreamGetNumReadIntoRequests(y)>0;)ReadableByteStreamControllerCommitPullIntoDescriptor(y,ReadableByteStreamControllerShiftPendingPullInto(t))}function ReadableByteStreamControllerRespondInReadableState(t,h,y){if(ReadableByteStreamControllerFillHeadPullIntoDescriptor(t,h,y),!(y.bytesFilled<y.elementSize)){ReadableByteStreamControllerShiftPendingPullInto(t);var w=y.bytesFilled%y.elementSize;if(w>0){var A=y.byteOffset+y.bytesFilled,T=ArrayBufferSlice(y.buffer,A-w,A);ReadableByteStreamControllerEnqueueChunkToQueue(t,T,0,T.byteLength)}y.bytesFilled-=w,ReadableByteStreamControllerCommitPullIntoDescriptor(t._controlledReadableByteStream,y),ReadableByteStreamControllerProcessPullIntoDescriptorsUsingQueue(t)}}function ReadableByteStreamControllerRespondInternal(t,h){var y=t._pendingPullIntos.peek();ReadableByteStreamControllerInvalidateBYOBRequest(t),"closed"===t._controlledReadableByteStream._state?ReadableByteStreamControllerRespondInClosedState(t):ReadableByteStreamControllerRespondInReadableState(t,h,y),ReadableByteStreamControllerCallPullIfNeeded(t)}function ReadableByteStreamControllerShiftPendingPullInto(t){return t._pendingPullIntos.shift()}function ReadableByteStreamControllerShouldCallPull(t){var h=t._controlledReadableByteStream;return"readable"===h._state&&!t._closeRequested&&!!t._started&&(!!(ReadableStreamHasDefaultReader(h)&&ReadableStreamGetNumReadRequests(h)>0)||!!(ReadableStreamHasBYOBReader(h)&&ReadableStreamGetNumReadIntoRequests(h)>0)||ReadableByteStreamControllerGetDesiredSize(t)>0)}function ReadableByteStreamControllerClearAlgorithms(t){t._pullAlgorithm=void 0,t._cancelAlgorithm=void 0}function ReadableByteStreamControllerClose(t){var h=t._controlledReadableByteStream;if(!t._closeRequested&&"readable"===h._state)if(t._queueTotalSize>0)t._closeRequested=!0;else{if(t._pendingPullIntos.length>0&&t._pendingPullIntos.peek().bytesFilled>0){var y=new TypeError("Insufficient bytes to fill elements in the given buffer");throw ReadableByteStreamControllerError(t,y),y}ReadableByteStreamControllerClearAlgorithms(t),ReadableStreamClose(h)}}function ReadableByteStreamControllerEnqueue(t,h){var y=t._controlledReadableByteStream;if(!t._closeRequested&&"readable"===y._state){var w=h.buffer,A=h.byteOffset,T=h.byteLength,E=TransferArrayBuffer(w);if(t._pendingPullIntos.length>0){var j=t._pendingPullIntos.peek();IsDetachedBuffer(j.buffer),j.buffer=TransferArrayBuffer(j.buffer)}ReadableByteStreamControllerInvalidateBYOBRequest(t),ReadableStreamHasDefaultReader(y)?0===ReadableStreamGetNumReadRequests(y)?ReadableByteStreamControllerEnqueueChunkToQueue(t,E,A,T):(t._pendingPullIntos.length>0&&ReadableByteStreamControllerShiftPendingPullInto(t),ReadableStreamFulfillReadRequest(y,new Uint8Array(E,A,T),!1)):ReadableStreamHasBYOBReader(y)?(ReadableByteStreamControllerEnqueueChunkToQueue(t,E,A,T),ReadableByteStreamControllerProcessPullIntoDescriptorsUsingQueue(t)):ReadableByteStreamControllerEnqueueChunkToQueue(t,E,A,T),ReadableByteStreamControllerCallPullIfNeeded(t)}}function ReadableByteStreamControllerError(t,h){var y=t._controlledReadableByteStream;"readable"===y._state&&(ReadableByteStreamControllerClearPendingPullIntos(t),ResetQueue(t),ReadableByteStreamControllerClearAlgorithms(t),ReadableStreamError(y,h))}function ReadableByteStreamControllerGetBYOBRequest(t){if(null===t._byobRequest&&t._pendingPullIntos.length>0){var h=t._pendingPullIntos.peek(),y=new Uint8Array(h.buffer,h.byteOffset+h.bytesFilled,h.byteLength-h.bytesFilled),w=Object.create(ge.prototype);SetUpReadableStreamBYOBRequest(w,t,y),t._byobRequest=w}return t._byobRequest}function ReadableByteStreamControllerGetDesiredSize(t){var h=t._controlledReadableByteStream._state;return"errored"===h?null:"closed"===h?0:t._strategyHWM-t._queueTotalSize}function ReadableByteStreamControllerRespond(t,h){var y=t._pendingPullIntos.peek();if("closed"===t._controlledReadableByteStream._state){if(0!==h)throw new TypeError("bytesWritten must be 0 when calling respond() on a closed stream")}else{if(0===h)throw new TypeError("bytesWritten must be greater than 0 when calling respond() on a readable stream");if(y.bytesFilled+h>y.byteLength)throw new RangeError("bytesWritten out of range")}y.buffer=TransferArrayBuffer(y.buffer),ReadableByteStreamControllerRespondInternal(t,h)}function ReadableByteStreamControllerRespondWithNewView(t,h){var y=t._pendingPullIntos.peek();if("closed"===t._controlledReadableByteStream._state){if(0!==h.byteLength)throw new TypeError("The view's length must be 0 when calling respondWithNewView() on a closed stream")}else if(0===h.byteLength)throw new TypeError("The view's length must be greater than 0 when calling respondWithNewView() on a readable stream");if(y.byteOffset+y.bytesFilled!==h.byteOffset)throw new RangeError("The region specified by view does not match byobRequest");if(y.bufferByteLength!==h.buffer.byteLength)throw new RangeError("The buffer of view has different capacity than byobRequest");if(y.bytesFilled+h.byteLength>y.byteLength)throw new RangeError("The region specified by view is larger than byobRequest");var w=h.byteLength;y.buffer=TransferArrayBuffer(h.buffer),ReadableByteStreamControllerRespondInternal(t,w)}function SetUpReadableByteStreamController(t,h,y,w,A,T,E){h._controlledReadableByteStream=t,h._pullAgain=!1,h._pulling=!1,h._byobRequest=null,h._queue=h._queueTotalSize=void 0,ResetQueue(h),h._closeRequested=!1,h._started=!1,h._strategyHWM=T,h._pullAlgorithm=w,h._cancelAlgorithm=A,h._autoAllocateChunkSize=E,h._pendingPullIntos=new V,t._readableStreamController=h,uponPromise(promiseResolvedWith(y()),(function(){h._started=!0,ReadableByteStreamControllerCallPullIfNeeded(h)}),(function(t){ReadableByteStreamControllerError(h,t)}))}function SetUpReadableByteStreamControllerFromUnderlyingSource(t,h,y){var w=Object.create(we.prototype),startAlgorithm=function(){},pullAlgorithm=function(){return promiseResolvedWith(void 0)},cancelAlgorithm=function(){return promiseResolvedWith(void 0)};void 0!==h.start&&(startAlgorithm=function(){return h.start(w)}),void 0!==h.pull&&(pullAlgorithm=function(){return h.pull(w)}),void 0!==h.cancel&&(cancelAlgorithm=function(t){return h.cancel(t)});var A=h.autoAllocateChunkSize;if(0===A)throw new TypeError("autoAllocateChunkSize must be greater than 0");SetUpReadableByteStreamController(t,w,startAlgorithm,pullAlgorithm,cancelAlgorithm,y,A)}function SetUpReadableStreamBYOBRequest(t,h,y){t._associatedReadableByteStreamController=h,t._view=y}function byobRequestBrandCheckException(t){return new TypeError("ReadableStreamBYOBRequest.prototype."+t+" can only be used on a ReadableStreamBYOBRequest")}function byteStreamControllerBrandCheckException(t){return new TypeError("ReadableByteStreamController.prototype."+t+" can only be used on a ReadableByteStreamController")}function AcquireReadableStreamBYOBReader(t){return new Ce(t)}function ReadableStreamAddReadIntoRequest(t,h){t._reader._readIntoRequests.push(h)}function ReadableStreamFulfillReadIntoRequest(t,h,y){var w=t._reader._readIntoRequests.shift();y?w._closeSteps(h):w._chunkSteps(h)}function ReadableStreamGetNumReadIntoRequests(t){return t._reader._readIntoRequests.length}function ReadableStreamHasBYOBReader(t){var h=t._reader;return void 0!==h&&!!IsReadableStreamBYOBReader(h)}Object.defineProperties(we.prototype,{close:{enumerable:!0},enqueue:{enumerable:!0},error:{enumerable:!0},byobRequest:{enumerable:!0},desiredSize:{enumerable:!0}}),"symbol"==typeof h.toStringTag&&Object.defineProperty(we.prototype,h.toStringTag,{value:"ReadableByteStreamController",configurable:!0});var Ce=function(){function ReadableStreamBYOBReader(t){if(assertRequiredArgument(t,1,"ReadableStreamBYOBReader"),assertReadableStream(t,"First parameter"),IsReadableStreamLocked(t))throw new TypeError("This stream has already been locked for exclusive reading by another reader");if(!IsReadableByteStreamController(t._readableStreamController))throw new TypeError("Cannot construct a ReadableStreamBYOBReader for a stream not constructed with a byte source");ReadableStreamReaderGenericInitialize(this,t),this._readIntoRequests=new V}return Object.defineProperty(ReadableStreamBYOBReader.prototype,"closed",{get:function(){return IsReadableStreamBYOBReader(this)?this._closedPromise:promiseRejectedWith(byobReaderBrandCheckException("closed"))},enumerable:!1,configurable:!0}),ReadableStreamBYOBReader.prototype.cancel=function(t){return void 0===t&&(t=void 0),IsReadableStreamBYOBReader(this)?void 0===this._ownerReadableStream?promiseRejectedWith(readerLockException("cancel")):ReadableStreamReaderGenericCancel(this,t):promiseRejectedWith(byobReaderBrandCheckException("cancel"))},ReadableStreamBYOBReader.prototype.read=function(t){if(!IsReadableStreamBYOBReader(this))return promiseRejectedWith(byobReaderBrandCheckException("read"));if(!ArrayBuffer.isView(t))return promiseRejectedWith(new TypeError("view must be an array buffer view"));if(0===t.byteLength)return promiseRejectedWith(new TypeError("view must have non-zero byteLength"));if(0===t.buffer.byteLength)return promiseRejectedWith(new TypeError("view's buffer must have non-zero byteLength"));if(IsDetachedBuffer(t.buffer),void 0===this._ownerReadableStream)return promiseRejectedWith(readerLockException("read from"));var h,y,w=newPromise((function(t,w){h=t,y=w}));return ReadableStreamBYOBReaderRead(this,t,{_chunkSteps:function(t){return h({value:t,done:!1})},_closeSteps:function(t){return h({value:t,done:!0})},_errorSteps:function(t){return y(t)}}),w},ReadableStreamBYOBReader.prototype.releaseLock=function(){if(!IsReadableStreamBYOBReader(this))throw byobReaderBrandCheckException("releaseLock");if(void 0!==this._ownerReadableStream){if(this._readIntoRequests.length>0)throw new TypeError("Tried to release a reader lock when that reader has pending read() calls un-settled");ReadableStreamReaderGenericRelease(this)}},ReadableStreamBYOBReader}();function IsReadableStreamBYOBReader(t){return!!typeIsObject(t)&&!!Object.prototype.hasOwnProperty.call(t,"_readIntoRequests")&&t instanceof Ce}function ReadableStreamBYOBReaderRead(t,h,y){var w=t._ownerReadableStream;w._disturbed=!0,"errored"===w._state?y._errorSteps(w._storedError):ReadableByteStreamControllerPullInto(w._readableStreamController,h,y)}function byobReaderBrandCheckException(t){return new TypeError("ReadableStreamBYOBReader.prototype."+t+" can only be used on a ReadableStreamBYOBReader")}function ExtractHighWaterMark(t,h){var y=t.highWaterMark;if(void 0===y)return h;if(me(y)||y<0)throw new RangeError("Invalid highWaterMark");return y}function ExtractSizeAlgorithm(t){var h=t.size;return h||function(){return 1}}function convertQueuingStrategy(t,h){assertDictionary(t,h);var y=null==t?void 0:t.highWaterMark,w=null==t?void 0:t.size;return{highWaterMark:void 0===y?void 0:convertUnrestrictedDouble(y),size:void 0===w?void 0:convertQueuingStrategySize(w,h+" has member 'size' that")}}function convertQueuingStrategySize(t,h){return assertFunction(t,h),function(h){return convertUnrestrictedDouble(t(h))}}function convertUnderlyingSink(t,h){assertDictionary(t,h);var y=null==t?void 0:t.abort,w=null==t?void 0:t.close,A=null==t?void 0:t.start,T=null==t?void 0:t.type,E=null==t?void 0:t.write;return{abort:void 0===y?void 0:convertUnderlyingSinkAbortCallback(y,t,h+" has member 'abort' that"),close:void 0===w?void 0:convertUnderlyingSinkCloseCallback(w,t,h+" has member 'close' that"),start:void 0===A?void 0:convertUnderlyingSinkStartCallback(A,t,h+" has member 'start' that"),write:void 0===E?void 0:convertUnderlyingSinkWriteCallback(E,t,h+" has member 'write' that"),type:T}}function convertUnderlyingSinkAbortCallback(t,h,y){return assertFunction(t,y),function(y){return promiseCall(t,h,[y])}}function convertUnderlyingSinkCloseCallback(t,h,y){return assertFunction(t,y),function(){return promiseCall(t,h,[])}}function convertUnderlyingSinkStartCallback(t,h,y){return assertFunction(t,y),function(y){return reflectCall(t,h,[y])}}function convertUnderlyingSinkWriteCallback(t,h,y){return assertFunction(t,y),function(y,w){return promiseCall(t,h,[y,w])}}function assertWritableStream(t,h){if(!IsWritableStream(t))throw new TypeError(h+" is not a WritableStream.")}function isAbortSignal(t){if("object"!=typeof t||null===t)return!1;try{return"boolean"==typeof t.aborted}catch(t){return!1}}Object.defineProperties(Ce.prototype,{cancel:{enumerable:!0},read:{enumerable:!0},releaseLock:{enumerable:!0},closed:{enumerable:!0}}),"symbol"==typeof h.toStringTag&&Object.defineProperty(Ce.prototype,h.toStringTag,{value:"ReadableStreamBYOBReader",configurable:!0});var ke="function"==typeof AbortController;function createAbortController(){if(ke)return new AbortController}var Ie=function(){function WritableStream(t,h){void 0===t&&(t={}),void 0===h&&(h={}),void 0===t?t=null:assertObject(t,"First parameter");var y=convertQueuingStrategy(h,"Second parameter"),w=convertUnderlyingSink(t,"First parameter");if(InitializeWritableStream(this),void 0!==w.type)throw new RangeError("Invalid type is specified");var A=ExtractSizeAlgorithm(y);SetUpWritableStreamDefaultControllerFromUnderlyingSink(this,w,ExtractHighWaterMark(y,1),A)}return Object.defineProperty(WritableStream.prototype,"locked",{get:function(){if(!IsWritableStream(this))throw streamBrandCheckException$2("locked");return IsWritableStreamLocked(this)},enumerable:!1,configurable:!0}),WritableStream.prototype.abort=function(t){return void 0===t&&(t=void 0),IsWritableStream(this)?IsWritableStreamLocked(this)?promiseRejectedWith(new TypeError("Cannot abort a stream that already has a writer")):WritableStreamAbort(this,t):promiseRejectedWith(streamBrandCheckException$2("abort"))},WritableStream.prototype.close=function(){return IsWritableStream(this)?IsWritableStreamLocked(this)?promiseRejectedWith(new TypeError("Cannot close a stream that already has a writer")):WritableStreamCloseQueuedOrInFlight(this)?promiseRejectedWith(new TypeError("Cannot close an already-closing stream")):WritableStreamClose(this):promiseRejectedWith(streamBrandCheckException$2("close"))},WritableStream.prototype.getWriter=function(){if(!IsWritableStream(this))throw streamBrandCheckException$2("getWriter");return AcquireWritableStreamDefaultWriter(this)},WritableStream}();function AcquireWritableStreamDefaultWriter(t){return new Te(t)}function CreateWritableStream(t,h,y,w,A,T){void 0===A&&(A=1),void 0===T&&(T=function(){return 1});var E=Object.create(Ie.prototype);return InitializeWritableStream(E),SetUpWritableStreamDefaultController(E,Object.create(Me.prototype),t,h,y,w,A,T),E}function InitializeWritableStream(t){t._state="writable",t._storedError=void 0,t._writer=void 0,t._writableStreamController=void 0,t._writeRequests=new V,t._inFlightWriteRequest=void 0,t._closeRequest=void 0,t._inFlightCloseRequest=void 0,t._pendingAbortRequest=void 0,t._backpressure=!1}function IsWritableStream(t){return!!typeIsObject(t)&&!!Object.prototype.hasOwnProperty.call(t,"_writableStreamController")&&t instanceof Ie}function IsWritableStreamLocked(t){return void 0!==t._writer}function WritableStreamAbort(t,h){var y;if("closed"===t._state||"errored"===t._state)return promiseResolvedWith(void 0);t._writableStreamController._abortReason=h,null===(y=t._writableStreamController._abortController)||void 0===y||y.abort();var w=t._state;if("closed"===w||"errored"===w)return promiseResolvedWith(void 0);if(void 0!==t._pendingAbortRequest)return t._pendingAbortRequest._promise;var A=!1;"erroring"===w&&(A=!0,h=void 0);var T=newPromise((function(y,w){t._pendingAbortRequest={_promise:void 0,_resolve:y,_reject:w,_reason:h,_wasAlreadyErroring:A}}));return t._pendingAbortRequest._promise=T,A||WritableStreamStartErroring(t,h),T}function WritableStreamClose(t){var h=t._state;if("closed"===h||"errored"===h)return promiseRejectedWith(new TypeError("The stream (in "+h+" state) is not in the writable state and cannot be closed"));var y=newPromise((function(h,y){var w={_resolve:h,_reject:y};t._closeRequest=w})),w=t._writer;return void 0!==w&&t._backpressure&&"writable"===h&&defaultWriterReadyPromiseResolve(w),WritableStreamDefaultControllerClose(t._writableStreamController),y}function WritableStreamAddWriteRequest(t){return newPromise((function(h,y){var w={_resolve:h,_reject:y};t._writeRequests.push(w)}))}function WritableStreamDealWithRejection(t,h){"writable"!==t._state?WritableStreamFinishErroring(t):WritableStreamStartErroring(t,h)}function WritableStreamStartErroring(t,h){var y=t._writableStreamController;t._state="erroring",t._storedError=h;var w=t._writer;void 0!==w&&WritableStreamDefaultWriterEnsureReadyPromiseRejected(w,h),!WritableStreamHasOperationMarkedInFlight(t)&&y._started&&WritableStreamFinishErroring(t)}function WritableStreamFinishErroring(t){t._state="errored",t._writableStreamController[H]();var h=t._storedError;if(t._writeRequests.forEach((function(t){t._reject(h)})),t._writeRequests=new V,void 0!==t._pendingAbortRequest){var y=t._pendingAbortRequest;if(t._pendingAbortRequest=void 0,y._wasAlreadyErroring)return y._reject(h),void WritableStreamRejectCloseAndClosedPromiseIfNeeded(t);uponPromise(t._writableStreamController[W](y._reason),(function(){y._resolve(),WritableStreamRejectCloseAndClosedPromiseIfNeeded(t)}),(function(h){y._reject(h),WritableStreamRejectCloseAndClosedPromiseIfNeeded(t)}))}else WritableStreamRejectCloseAndClosedPromiseIfNeeded(t)}function WritableStreamFinishInFlightWrite(t){t._inFlightWriteRequest._resolve(void 0),t._inFlightWriteRequest=void 0}function WritableStreamFinishInFlightWriteWithError(t,h){t._inFlightWriteRequest._reject(h),t._inFlightWriteRequest=void 0,WritableStreamDealWithRejection(t,h)}function WritableStreamFinishInFlightClose(t){t._inFlightCloseRequest._resolve(void 0),t._inFlightCloseRequest=void 0,"erroring"===t._state&&(t._storedError=void 0,void 0!==t._pendingAbortRequest&&(t._pendingAbortRequest._resolve(),t._pendingAbortRequest=void 0)),t._state="closed";var h=t._writer;void 0!==h&&defaultWriterClosedPromiseResolve(h)}function WritableStreamFinishInFlightCloseWithError(t,h){t._inFlightCloseRequest._reject(h),t._inFlightCloseRequest=void 0,void 0!==t._pendingAbortRequest&&(t._pendingAbortRequest._reject(h),t._pendingAbortRequest=void 0),WritableStreamDealWithRejection(t,h)}function WritableStreamCloseQueuedOrInFlight(t){return void 0!==t._closeRequest||void 0!==t._inFlightCloseRequest}function WritableStreamHasOperationMarkedInFlight(t){return void 0!==t._inFlightWriteRequest||void 0!==t._inFlightCloseRequest}function WritableStreamMarkCloseRequestInFlight(t){t._inFlightCloseRequest=t._closeRequest,t._closeRequest=void 0}function WritableStreamMarkFirstWriteRequestInFlight(t){t._inFlightWriteRequest=t._writeRequests.shift()}function WritableStreamRejectCloseAndClosedPromiseIfNeeded(t){void 0!==t._closeRequest&&(t._closeRequest._reject(t._storedError),t._closeRequest=void 0);var h=t._writer;void 0!==h&&defaultWriterClosedPromiseReject(h,t._storedError)}function WritableStreamUpdateBackpressure(t,h){var y=t._writer;void 0!==y&&h!==t._backpressure&&(h?defaultWriterReadyPromiseReset(y):defaultWriterReadyPromiseResolve(y)),t._backpressure=h}Object.defineProperties(Ie.prototype,{abort:{enumerable:!0},close:{enumerable:!0},getWriter:{enumerable:!0},locked:{enumerable:!0}}),"symbol"==typeof h.toStringTag&&Object.defineProperty(Ie.prototype,h.toStringTag,{value:"WritableStream",configurable:!0});var Te=function(){function WritableStreamDefaultWriter(t){if(assertRequiredArgument(t,1,"WritableStreamDefaultWriter"),assertWritableStream(t,"First parameter"),IsWritableStreamLocked(t))throw new TypeError("This stream has already been locked for exclusive writing by another writer");this._ownerWritableStream=t,t._writer=this;var h=t._state;if("writable"===h)!WritableStreamCloseQueuedOrInFlight(t)&&t._backpressure?defaultWriterReadyPromiseInitialize(this):defaultWriterReadyPromiseInitializeAsResolved(this),defaultWriterClosedPromiseInitialize(this);else if("erroring"===h)defaultWriterReadyPromiseInitializeAsRejected(this,t._storedError),defaultWriterClosedPromiseInitialize(this);else if("closed"===h)defaultWriterReadyPromiseInitializeAsResolved(this),defaultWriterClosedPromiseInitializeAsResolved(this);else{var y=t._storedError;defaultWriterReadyPromiseInitializeAsRejected(this,y),defaultWriterClosedPromiseInitializeAsRejected(this,y)}}return Object.defineProperty(WritableStreamDefaultWriter.prototype,"closed",{get:function(){return IsWritableStreamDefaultWriter(this)?this._closedPromise:promiseRejectedWith(defaultWriterBrandCheckException("closed"))},enumerable:!1,configurable:!0}),Object.defineProperty(WritableStreamDefaultWriter.prototype,"desiredSize",{get:function(){if(!IsWritableStreamDefaultWriter(this))throw defaultWriterBrandCheckException("desiredSize");if(void 0===this._ownerWritableStream)throw defaultWriterLockException("desiredSize");return WritableStreamDefaultWriterGetDesiredSize(this)},enumerable:!1,configurable:!0}),Object.defineProperty(WritableStreamDefaultWriter.prototype,"ready",{get:function(){return IsWritableStreamDefaultWriter(this)?this._readyPromise:promiseRejectedWith(defaultWriterBrandCheckException("ready"))},enumerable:!1,configurable:!0}),WritableStreamDefaultWriter.prototype.abort=function(t){return void 0===t&&(t=void 0),IsWritableStreamDefaultWriter(this)?void 0===this._ownerWritableStream?promiseRejectedWith(defaultWriterLockException("abort")):WritableStreamDefaultWriterAbort(this,t):promiseRejectedWith(defaultWriterBrandCheckException("abort"))},WritableStreamDefaultWriter.prototype.close=function(){if(!IsWritableStreamDefaultWriter(this))return promiseRejectedWith(defaultWriterBrandCheckException("close"));var t=this._ownerWritableStream;return void 0===t?promiseRejectedWith(defaultWriterLockException("close")):WritableStreamCloseQueuedOrInFlight(t)?promiseRejectedWith(new TypeError("Cannot close an already-closing stream")):WritableStreamDefaultWriterClose(this)},WritableStreamDefaultWriter.prototype.releaseLock=function(){if(!IsWritableStreamDefaultWriter(this))throw defaultWriterBrandCheckException("releaseLock");void 0!==this._ownerWritableStream&&WritableStreamDefaultWriterRelease(this)},WritableStreamDefaultWriter.prototype.write=function(t){return void 0===t&&(t=void 0),IsWritableStreamDefaultWriter(this)?void 0===this._ownerWritableStream?promiseRejectedWith(defaultWriterLockException("write to")):WritableStreamDefaultWriterWrite(this,t):promiseRejectedWith(defaultWriterBrandCheckException("write"))},WritableStreamDefaultWriter}();function IsWritableStreamDefaultWriter(t){return!!typeIsObject(t)&&!!Object.prototype.hasOwnProperty.call(t,"_ownerWritableStream")&&t instanceof Te}function WritableStreamDefaultWriterAbort(t,h){return WritableStreamAbort(t._ownerWritableStream,h)}function WritableStreamDefaultWriterClose(t){return WritableStreamClose(t._ownerWritableStream)}function WritableStreamDefaultWriterCloseWithErrorPropagation(t){var h=t._ownerWritableStream,y=h._state;return WritableStreamCloseQueuedOrInFlight(h)||"closed"===y?promiseResolvedWith(void 0):"errored"===y?promiseRejectedWith(h._storedError):WritableStreamDefaultWriterClose(t)}function WritableStreamDefaultWriterEnsureClosedPromiseRejected(t,h){"pending"===t._closedPromiseState?defaultWriterClosedPromiseReject(t,h):defaultWriterClosedPromiseResetToRejected(t,h)}function WritableStreamDefaultWriterEnsureReadyPromiseRejected(t,h){"pending"===t._readyPromiseState?defaultWriterReadyPromiseReject(t,h):defaultWriterReadyPromiseResetToRejected(t,h)}function WritableStreamDefaultWriterGetDesiredSize(t){var h=t._ownerWritableStream,y=h._state;return"errored"===y||"erroring"===y?null:"closed"===y?0:WritableStreamDefaultControllerGetDesiredSize(h._writableStreamController)}function WritableStreamDefaultWriterRelease(t){var h=t._ownerWritableStream,y=new TypeError("Writer was released and can no longer be used to monitor the stream's closedness");WritableStreamDefaultWriterEnsureReadyPromiseRejected(t,y),WritableStreamDefaultWriterEnsureClosedPromiseRejected(t,y),h._writer=void 0,t._ownerWritableStream=void 0}function WritableStreamDefaultWriterWrite(t,h){var y=t._ownerWritableStream,w=y._writableStreamController,A=WritableStreamDefaultControllerGetChunkSize(w,h);if(y!==t._ownerWritableStream)return promiseRejectedWith(defaultWriterLockException("write to"));var T=y._state;if("errored"===T)return promiseRejectedWith(y._storedError);if(WritableStreamCloseQueuedOrInFlight(y)||"closed"===T)return promiseRejectedWith(new TypeError("The stream is closing or closed and cannot be written to"));if("erroring"===T)return promiseRejectedWith(y._storedError);var E=WritableStreamAddWriteRequest(y);return WritableStreamDefaultControllerWrite(w,h,A),E}Object.defineProperties(Te.prototype,{abort:{enumerable:!0},close:{enumerable:!0},releaseLock:{enumerable:!0},write:{enumerable:!0},closed:{enumerable:!0},desiredSize:{enumerable:!0},ready:{enumerable:!0}}),"symbol"==typeof h.toStringTag&&Object.defineProperty(Te.prototype,h.toStringTag,{value:"WritableStreamDefaultWriter",configurable:!0});var Ee={},Me=function(){function WritableStreamDefaultController(){throw new TypeError("Illegal constructor")}return Object.defineProperty(WritableStreamDefaultController.prototype,"abortReason",{get:function(){if(!IsWritableStreamDefaultController(this))throw defaultControllerBrandCheckException$2("abortReason");return this._abortReason},enumerable:!1,configurable:!0}),Object.defineProperty(WritableStreamDefaultController.prototype,"signal",{get:function(){if(!IsWritableStreamDefaultController(this))throw defaultControllerBrandCheckException$2("signal");if(void 0===this._abortController)throw new TypeError("WritableStreamDefaultController.prototype.signal is not supported");return this._abortController.signal},enumerable:!1,configurable:!0}),WritableStreamDefaultController.prototype.error=function(t){if(void 0===t&&(t=void 0),!IsWritableStreamDefaultController(this))throw defaultControllerBrandCheckException$2("error");"writable"===this._controlledWritableStream._state&&WritableStreamDefaultControllerError(this,t)},WritableStreamDefaultController.prototype[W]=function(t){var h=this._abortAlgorithm(t);return WritableStreamDefaultControllerClearAlgorithms(this),h},WritableStreamDefaultController.prototype[H]=function(){ResetQueue(this)},WritableStreamDefaultController}();function IsWritableStreamDefaultController(t){return!!typeIsObject(t)&&!!Object.prototype.hasOwnProperty.call(t,"_controlledWritableStream")&&t instanceof Me}function SetUpWritableStreamDefaultController(t,h,y,w,A,T,E,j){h._controlledWritableStream=t,t._writableStreamController=h,h._queue=void 0,h._queueTotalSize=void 0,ResetQueue(h),h._abortReason=void 0,h._abortController=createAbortController(),h._started=!1,h._strategySizeAlgorithm=j,h._strategyHWM=E,h._writeAlgorithm=w,h._closeAlgorithm=A,h._abortAlgorithm=T;var B=WritableStreamDefaultControllerGetBackpressure(h);WritableStreamUpdateBackpressure(t,B),uponPromise(promiseResolvedWith(y()),(function(){h._started=!0,WritableStreamDefaultControllerAdvanceQueueIfNeeded(h)}),(function(y){h._started=!0,WritableStreamDealWithRejection(t,y)}))}function SetUpWritableStreamDefaultControllerFromUnderlyingSink(t,h,y,w){var A=Object.create(Me.prototype),startAlgorithm=function(){},writeAlgorithm=function(){return promiseResolvedWith(void 0)},closeAlgorithm=function(){return promiseResolvedWith(void 0)},abortAlgorithm=function(){return promiseResolvedWith(void 0)};void 0!==h.start&&(startAlgorithm=function(){return h.start(A)}),void 0!==h.write&&(writeAlgorithm=function(t){return h.write(t,A)}),void 0!==h.close&&(closeAlgorithm=function(){return h.close()}),void 0!==h.abort&&(abortAlgorithm=function(t){return h.abort(t)}),SetUpWritableStreamDefaultController(t,A,startAlgorithm,writeAlgorithm,closeAlgorithm,abortAlgorithm,y,w)}function WritableStreamDefaultControllerClearAlgorithms(t){t._writeAlgorithm=void 0,t._closeAlgorithm=void 0,t._abortAlgorithm=void 0,t._strategySizeAlgorithm=void 0}function WritableStreamDefaultControllerClose(t){EnqueueValueWithSize(t,Ee,0),WritableStreamDefaultControllerAdvanceQueueIfNeeded(t)}function WritableStreamDefaultControllerGetChunkSize(t,h){try{return t._strategySizeAlgorithm(h)}catch(h){return WritableStreamDefaultControllerErrorIfNeeded(t,h),1}}function WritableStreamDefaultControllerGetDesiredSize(t){return t._strategyHWM-t._queueTotalSize}function WritableStreamDefaultControllerWrite(t,h,y){try{EnqueueValueWithSize(t,h,y)}catch(h){return void WritableStreamDefaultControllerErrorIfNeeded(t,h)}var w=t._controlledWritableStream;WritableStreamCloseQueuedOrInFlight(w)||"writable"!==w._state||WritableStreamUpdateBackpressure(w,WritableStreamDefaultControllerGetBackpressure(t)),WritableStreamDefaultControllerAdvanceQueueIfNeeded(t)}function WritableStreamDefaultControllerAdvanceQueueIfNeeded(t){var h=t._controlledWritableStream;if(t._started&&void 0===h._inFlightWriteRequest)if("erroring"!==h._state){if(0!==t._queue.length){var y=PeekQueueValue(t);y===Ee?WritableStreamDefaultControllerProcessClose(t):WritableStreamDefaultControllerProcessWrite(t,y)}}else WritableStreamFinishErroring(h)}function WritableStreamDefaultControllerErrorIfNeeded(t,h){"writable"===t._controlledWritableStream._state&&WritableStreamDefaultControllerError(t,h)}function WritableStreamDefaultControllerProcessClose(t){var h=t._controlledWritableStream;WritableStreamMarkCloseRequestInFlight(h),DequeueValue(t);var y=t._closeAlgorithm();WritableStreamDefaultControllerClearAlgorithms(t),uponPromise(y,(function(){WritableStreamFinishInFlightClose(h)}),(function(t){WritableStreamFinishInFlightCloseWithError(h,t)}))}function WritableStreamDefaultControllerProcessWrite(t,h){var y=t._controlledWritableStream;WritableStreamMarkFirstWriteRequestInFlight(y),uponPromise(t._writeAlgorithm(h),(function(){WritableStreamFinishInFlightWrite(y);var h=y._state;if(DequeueValue(t),!WritableStreamCloseQueuedOrInFlight(y)&&"writable"===h){var w=WritableStreamDefaultControllerGetBackpressure(t);WritableStreamUpdateBackpressure(y,w)}WritableStreamDefaultControllerAdvanceQueueIfNeeded(t)}),(function(h){"writable"===y._state&&WritableStreamDefaultControllerClearAlgorithms(t),WritableStreamFinishInFlightWriteWithError(y,h)}))}function WritableStreamDefaultControllerGetBackpressure(t){return WritableStreamDefaultControllerGetDesiredSize(t)<=0}function WritableStreamDefaultControllerError(t,h){var y=t._controlledWritableStream;WritableStreamDefaultControllerClearAlgorithms(t),WritableStreamStartErroring(y,h)}function streamBrandCheckException$2(t){return new TypeError("WritableStream.prototype."+t+" can only be used on a WritableStream")}function defaultControllerBrandCheckException$2(t){return new TypeError("WritableStreamDefaultController.prototype."+t+" can only be used on a WritableStreamDefaultController")}function defaultWriterBrandCheckException(t){return new TypeError("WritableStreamDefaultWriter.prototype."+t+" can only be used on a WritableStreamDefaultWriter")}function defaultWriterLockException(t){return new TypeError("Cannot "+t+" a stream using a released writer")}function defaultWriterClosedPromiseInitialize(t){t._closedPromise=newPromise((function(h,y){t._closedPromise_resolve=h,t._closedPromise_reject=y,t._closedPromiseState="pending"}))}function defaultWriterClosedPromiseInitializeAsRejected(t,h){defaultWriterClosedPromiseInitialize(t),defaultWriterClosedPromiseReject(t,h)}function defaultWriterClosedPromiseInitializeAsResolved(t){defaultWriterClosedPromiseInitialize(t),defaultWriterClosedPromiseResolve(t)}function defaultWriterClosedPromiseReject(t,h){void 0!==t._closedPromise_reject&&(setPromiseIsHandledToTrue(t._closedPromise),t._closedPromise_reject(h),t._closedPromise_resolve=void 0,t._closedPromise_reject=void 0,t._closedPromiseState="rejected")}function defaultWriterClosedPromiseResetToRejected(t,h){defaultWriterClosedPromiseInitializeAsRejected(t,h)}function defaultWriterClosedPromiseResolve(t){void 0!==t._closedPromise_resolve&&(t._closedPromise_resolve(void 0),t._closedPromise_resolve=void 0,t._closedPromise_reject=void 0,t._closedPromiseState="resolved")}function defaultWriterReadyPromiseInitialize(t){t._readyPromise=newPromise((function(h,y){t._readyPromise_resolve=h,t._readyPromise_reject=y})),t._readyPromiseState="pending"}function defaultWriterReadyPromiseInitializeAsRejected(t,h){defaultWriterReadyPromiseInitialize(t),defaultWriterReadyPromiseReject(t,h)}function defaultWriterReadyPromiseInitializeAsResolved(t){defaultWriterReadyPromiseInitialize(t),defaultWriterReadyPromiseResolve(t)}function defaultWriterReadyPromiseReject(t,h){void 0!==t._readyPromise_reject&&(setPromiseIsHandledToTrue(t._readyPromise),t._readyPromise_reject(h),t._readyPromise_resolve=void 0,t._readyPromise_reject=void 0,t._readyPromiseState="rejected")}function defaultWriterReadyPromiseReset(t){defaultWriterReadyPromiseInitialize(t)}function defaultWriterReadyPromiseResetToRejected(t,h){defaultWriterReadyPromiseInitializeAsRejected(t,h)}function defaultWriterReadyPromiseResolve(t){void 0!==t._readyPromise_resolve&&(t._readyPromise_resolve(void 0),t._readyPromise_resolve=void 0,t._readyPromise_reject=void 0,t._readyPromiseState="fulfilled")}Object.defineProperties(Me.prototype,{abortReason:{enumerable:!0},signal:{enumerable:!0},error:{enumerable:!0}}),"symbol"==typeof h.toStringTag&&Object.defineProperty(Me.prototype,h.toStringTag,{value:"WritableStreamDefaultController",configurable:!0});var Be="undefined"!=typeof DOMException?DOMException:void 0;function isDOMExceptionConstructor(t){if("function"!=typeof t&&"object"!=typeof t)return!1;try{return new t,!0}catch(t){return!1}}function createDOMExceptionPolyfill(){var t=function DOMException(t,h){this.message=t||"",this.name=h||"Error",Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)};return t.prototype=Object.create(Error.prototype),Object.defineProperty(t.prototype,"constructor",{value:t,writable:!0,configurable:!0}),t}var Ne=isDOMExceptionConstructor(Be)?Be:createDOMExceptionPolyfill();function ReadableStreamPipeTo(t,h,y,w,A,T){var E=AcquireReadableStreamDefaultReader(t),j=AcquireWritableStreamDefaultWriter(h);t._disturbed=!0;var B=!1,N=promiseResolvedWith(void 0);return newPromise((function(V,W){var H;if(void 0!==T){if(H=function(){var y=new Ne("Aborted","AbortError"),T=[];w||T.push((function(){return"writable"===h._state?WritableStreamAbort(h,y):promiseResolvedWith(void 0)})),A||T.push((function(){return"readable"===t._state?ReadableStreamCancel(t,y):promiseResolvedWith(void 0)})),shutdownWithAction((function(){return Promise.all(T.map((function(t){return t()})))}),!0,y)},T.aborted)return void H();T.addEventListener("abort",H)}function pipeLoop(){return newPromise((function(t,h){function next(y){y?t():PerformPromiseThen(pipeStep(),next,h)}next(!1)}))}function pipeStep(){return B?promiseResolvedWith(!0):PerformPromiseThen(j._readyPromise,(function(){return newPromise((function(t,h){ReadableStreamDefaultReaderRead(E,{_chunkSteps:function(h){N=PerformPromiseThen(WritableStreamDefaultWriterWrite(j,h),void 0,noop),t(!1)},_closeSteps:function(){return t(!0)},_errorSteps:h})}))}))}if(isOrBecomesErrored(t,E._closedPromise,(function(t){w?shutdown(!0,t):shutdownWithAction((function(){return WritableStreamAbort(h,t)}),!0,t)})),isOrBecomesErrored(h,j._closedPromise,(function(h){A?shutdown(!0,h):shutdownWithAction((function(){return ReadableStreamCancel(t,h)}),!0,h)})),isOrBecomesClosed(t,E._closedPromise,(function(){y?shutdown():shutdownWithAction((function(){return WritableStreamDefaultWriterCloseWithErrorPropagation(j)}))})),WritableStreamCloseQueuedOrInFlight(h)||"closed"===h._state){var G=new TypeError("the destination writable stream closed before all data could be piped to it");A?shutdown(!0,G):shutdownWithAction((function(){return ReadableStreamCancel(t,G)}),!0,G)}function waitForWritesToFinish(){var t=N;return PerformPromiseThen(N,(function(){return t!==N?waitForWritesToFinish():void 0}))}function isOrBecomesErrored(t,h,y){"errored"===t._state?y(t._storedError):uponRejection(h,y)}function isOrBecomesClosed(t,h,y){"closed"===t._state?y():uponFulfillment(h,y)}function shutdownWithAction(t,y,w){function doTheRest(){uponPromise(t(),(function(){return finalize(y,w)}),(function(t){return finalize(!0,t)}))}B||(B=!0,"writable"!==h._state||WritableStreamCloseQueuedOrInFlight(h)?doTheRest():uponFulfillment(waitForWritesToFinish(),doTheRest))}function shutdown(t,y){B||(B=!0,"writable"!==h._state||WritableStreamCloseQueuedOrInFlight(h)?finalize(t,y):uponFulfillment(waitForWritesToFinish(),(function(){return finalize(t,y)})))}function finalize(t,h){WritableStreamDefaultWriterRelease(j),ReadableStreamReaderGenericRelease(E),void 0!==T&&T.removeEventListener("abort",H),t?W(h):V(void 0)}setPromiseIsHandledToTrue(pipeLoop())}))}var Ze=function(){function ReadableStreamDefaultController(){throw new TypeError("Illegal constructor")}return Object.defineProperty(ReadableStreamDefaultController.prototype,"desiredSize",{get:function(){if(!IsReadableStreamDefaultController(this))throw defaultControllerBrandCheckException$1("desiredSize");return ReadableStreamDefaultControllerGetDesiredSize(this)},enumerable:!1,configurable:!0}),ReadableStreamDefaultController.prototype.close=function(){if(!IsReadableStreamDefaultController(this))throw defaultControllerBrandCheckException$1("close");if(!ReadableStreamDefaultControllerCanCloseOrEnqueue(this))throw new TypeError("The stream is not in a state that permits close");ReadableStreamDefaultControllerClose(this)},ReadableStreamDefaultController.prototype.enqueue=function(t){if(void 0===t&&(t=void 0),!IsReadableStreamDefaultController(this))throw defaultControllerBrandCheckException$1("enqueue");if(!ReadableStreamDefaultControllerCanCloseOrEnqueue(this))throw new TypeError("The stream is not in a state that permits enqueue");return ReadableStreamDefaultControllerEnqueue(this,t)},ReadableStreamDefaultController.prototype.error=function(t){if(void 0===t&&(t=void 0),!IsReadableStreamDefaultController(this))throw defaultControllerBrandCheckException$1("error");ReadableStreamDefaultControllerError(this,t)},ReadableStreamDefaultController.prototype[G]=function(t){ResetQueue(this);var h=this._cancelAlgorithm(t);return ReadableStreamDefaultControllerClearAlgorithms(this),h},ReadableStreamDefaultController.prototype[z]=function(t){var h=this._controlledReadableStream;if(this._queue.length>0){var y=DequeueValue(this);this._closeRequested&&0===this._queue.length?(ReadableStreamDefaultControllerClearAlgorithms(this),ReadableStreamClose(h)):ReadableStreamDefaultControllerCallPullIfNeeded(this),t._chunkSteps(y)}else ReadableStreamAddReadRequest(h,t),ReadableStreamDefaultControllerCallPullIfNeeded(this)},ReadableStreamDefaultController}();function IsReadableStreamDefaultController(t){return!!typeIsObject(t)&&!!Object.prototype.hasOwnProperty.call(t,"_controlledReadableStream")&&t instanceof Ze}function ReadableStreamDefaultControllerCallPullIfNeeded(t){ReadableStreamDefaultControllerShouldCallPull(t)&&(t._pulling?t._pullAgain=!0:(t._pulling=!0,uponPromise(t._pullAlgorithm(),(function(){t._pulling=!1,t._pullAgain&&(t._pullAgain=!1,ReadableStreamDefaultControllerCallPullIfNeeded(t))}),(function(h){ReadableStreamDefaultControllerError(t,h)}))))}function ReadableStreamDefaultControllerShouldCallPull(t){var h=t._controlledReadableStream;return!!ReadableStreamDefaultControllerCanCloseOrEnqueue(t)&&!!t._started&&(!!(IsReadableStreamLocked(h)&&ReadableStreamGetNumReadRequests(h)>0)||ReadableStreamDefaultControllerGetDesiredSize(t)>0)}function ReadableStreamDefaultControllerClearAlgorithms(t){t._pullAlgorithm=void 0,t._cancelAlgorithm=void 0,t._strategySizeAlgorithm=void 0}function ReadableStreamDefaultControllerClose(t){if(ReadableStreamDefaultControllerCanCloseOrEnqueue(t)){var h=t._controlledReadableStream;t._closeRequested=!0,0===t._queue.length&&(ReadableStreamDefaultControllerClearAlgorithms(t),ReadableStreamClose(h))}}function ReadableStreamDefaultControllerEnqueue(t,h){if(ReadableStreamDefaultControllerCanCloseOrEnqueue(t)){var y=t._controlledReadableStream;if(IsReadableStreamLocked(y)&&ReadableStreamGetNumReadRequests(y)>0)ReadableStreamFulfillReadRequest(y,h,!1);else{var w=void 0;try{w=t._strategySizeAlgorithm(h)}catch(h){throw ReadableStreamDefaultControllerError(t,h),h}try{EnqueueValueWithSize(t,h,w)}catch(h){throw ReadableStreamDefaultControllerError(t,h),h}}ReadableStreamDefaultControllerCallPullIfNeeded(t)}}function ReadableStreamDefaultControllerError(t,h){var y=t._controlledReadableStream;"readable"===y._state&&(ResetQueue(t),ReadableStreamDefaultControllerClearAlgorithms(t),ReadableStreamError(y,h))}function ReadableStreamDefaultControllerGetDesiredSize(t){var h=t._controlledReadableStream._state;return"errored"===h?null:"closed"===h?0:t._strategyHWM-t._queueTotalSize}function ReadableStreamDefaultControllerHasBackpressure(t){return!ReadableStreamDefaultControllerShouldCallPull(t)}function ReadableStreamDefaultControllerCanCloseOrEnqueue(t){var h=t._controlledReadableStream._state;return!t._closeRequested&&"readable"===h}function SetUpReadableStreamDefaultController(t,h,y,w,A,T,E){h._controlledReadableStream=t,h._queue=void 0,h._queueTotalSize=void 0,ResetQueue(h),h._started=!1,h._closeRequested=!1,h._pullAgain=!1,h._pulling=!1,h._strategySizeAlgorithm=E,h._strategyHWM=T,h._pullAlgorithm=w,h._cancelAlgorithm=A,t._readableStreamController=h,uponPromise(promiseResolvedWith(y()),(function(){h._started=!0,ReadableStreamDefaultControllerCallPullIfNeeded(h)}),(function(t){ReadableStreamDefaultControllerError(h,t)}))}function SetUpReadableStreamDefaultControllerFromUnderlyingSource(t,h,y,w){var A=Object.create(Ze.prototype),startAlgorithm=function(){},pullAlgorithm=function(){return promiseResolvedWith(void 0)},cancelAlgorithm=function(){return promiseResolvedWith(void 0)};void 0!==h.start&&(startAlgorithm=function(){return h.start(A)}),void 0!==h.pull&&(pullAlgorithm=function(){return h.pull(A)}),void 0!==h.cancel&&(cancelAlgorithm=function(t){return h.cancel(t)}),SetUpReadableStreamDefaultController(t,A,startAlgorithm,pullAlgorithm,cancelAlgorithm,y,w)}function defaultControllerBrandCheckException$1(t){return new TypeError("ReadableStreamDefaultController.prototype."+t+" can only be used on a ReadableStreamDefaultController")}function ReadableStreamTee(t,h){return IsReadableByteStreamController(t._readableStreamController)?ReadableByteStreamTee(t):ReadableStreamDefaultTee(t)}function ReadableStreamDefaultTee(t,h){var y,w,A,T,E,j=AcquireReadableStreamDefaultReader(t),N=!1,V=!1,W=!1,H=!1,G=newPromise((function(t){E=t}));function pullAlgorithm(){return N?(V=!0,promiseResolvedWith(void 0)):(N=!0,ReadableStreamDefaultReaderRead(j,{_chunkSteps:function(t){B((function(){V=!1;var h=t,y=t;W||ReadableStreamDefaultControllerEnqueue(A._readableStreamController,h),H||ReadableStreamDefaultControllerEnqueue(T._readableStreamController,y),N=!1,V&&pullAlgorithm()}))},_closeSteps:function(){N=!1,W||ReadableStreamDefaultControllerClose(A._readableStreamController),H||ReadableStreamDefaultControllerClose(T._readableStreamController),W&&H||E(void 0)},_errorSteps:function(){N=!1}}),promiseResolvedWith(void 0))}function cancel1Algorithm(h){if(W=!0,y=h,H){var A=CreateArrayFromList([y,w]),T=ReadableStreamCancel(t,A);E(T)}return G}function cancel2Algorithm(h){if(H=!0,w=h,W){var A=CreateArrayFromList([y,w]),T=ReadableStreamCancel(t,A);E(T)}return G}function startAlgorithm(){}return A=CreateReadableStream(startAlgorithm,pullAlgorithm,cancel1Algorithm),T=CreateReadableStream(startAlgorithm,pullAlgorithm,cancel2Algorithm),uponRejection(j._closedPromise,(function(t){ReadableStreamDefaultControllerError(A._readableStreamController,t),ReadableStreamDefaultControllerError(T._readableStreamController,t),W&&H||E(void 0)})),[A,T]}function ReadableByteStreamTee(t){var h,y,w,A,T,E=AcquireReadableStreamDefaultReader(t),j=!1,N=!1,V=!1,W=!1,H=!1,G=newPromise((function(t){T=t}));function forwardReaderError(t){uponRejection(t._closedPromise,(function(h){t===E&&(ReadableByteStreamControllerError(w._readableStreamController,h),ReadableByteStreamControllerError(A._readableStreamController,h),W&&H||T(void 0))}))}function pullWithDefaultReader(){IsReadableStreamBYOBReader(E)&&(ReadableStreamReaderGenericRelease(E),forwardReaderError(E=AcquireReadableStreamDefaultReader(t))),ReadableStreamDefaultReaderRead(E,{_chunkSteps:function(h){B((function(){N=!1,V=!1;var y=h,E=h;if(!W&&!H)try{E=CloneAsUint8Array(h)}catch(h){return ReadableByteStreamControllerError(w._readableStreamController,h),ReadableByteStreamControllerError(A._readableStreamController,h),void T(ReadableStreamCancel(t,h))}W||ReadableByteStreamControllerEnqueue(w._readableStreamController,y),H||ReadableByteStreamControllerEnqueue(A._readableStreamController,E),j=!1,N?pull1Algorithm():V&&pull2Algorithm()}))},_closeSteps:function(){j=!1,W||ReadableByteStreamControllerClose(w._readableStreamController),H||ReadableByteStreamControllerClose(A._readableStreamController),w._readableStreamController._pendingPullIntos.length>0&&ReadableByteStreamControllerRespond(w._readableStreamController,0),A._readableStreamController._pendingPullIntos.length>0&&ReadableByteStreamControllerRespond(A._readableStreamController,0),W&&H||T(void 0)},_errorSteps:function(){j=!1}})}function pullWithBYOBReader(h,y){IsReadableStreamDefaultReader(E)&&(ReadableStreamReaderGenericRelease(E),forwardReaderError(E=AcquireReadableStreamBYOBReader(t)));var G=y?A:w,z=y?w:A;ReadableStreamBYOBReaderRead(E,h,{_chunkSteps:function(h){B((function(){N=!1,V=!1;var w=y?H:W;if(y?W:H)w||ReadableByteStreamControllerRespondWithNewView(G._readableStreamController,h);else{var A=void 0;try{A=CloneAsUint8Array(h)}catch(h){return ReadableByteStreamControllerError(G._readableStreamController,h),ReadableByteStreamControllerError(z._readableStreamController,h),void T(ReadableStreamCancel(t,h))}w||ReadableByteStreamControllerRespondWithNewView(G._readableStreamController,h),ReadableByteStreamControllerEnqueue(z._readableStreamController,A)}j=!1,N?pull1Algorithm():V&&pull2Algorithm()}))},_closeSteps:function(t){j=!1;var h=y?H:W,w=y?W:H;h||ReadableByteStreamControllerClose(G._readableStreamController),w||ReadableByteStreamControllerClose(z._readableStreamController),void 0!==t&&(h||ReadableByteStreamControllerRespondWithNewView(G._readableStreamController,t),!w&&z._readableStreamController._pendingPullIntos.length>0&&ReadableByteStreamControllerRespond(z._readableStreamController,0)),h&&w||T(void 0)},_errorSteps:function(){j=!1}})}function pull1Algorithm(){if(j)return N=!0,promiseResolvedWith(void 0);j=!0;var t=ReadableByteStreamControllerGetBYOBRequest(w._readableStreamController);return null===t?pullWithDefaultReader():pullWithBYOBReader(t._view,!1),promiseResolvedWith(void 0)}function pull2Algorithm(){if(j)return V=!0,promiseResolvedWith(void 0);j=!0;var t=ReadableByteStreamControllerGetBYOBRequest(A._readableStreamController);return null===t?pullWithDefaultReader():pullWithBYOBReader(t._view,!0),promiseResolvedWith(void 0)}function cancel1Algorithm(w){if(W=!0,h=w,H){var A=CreateArrayFromList([h,y]),E=ReadableStreamCancel(t,A);T(E)}return G}function cancel2Algorithm(w){if(H=!0,y=w,W){var A=CreateArrayFromList([h,y]),E=ReadableStreamCancel(t,A);T(E)}return G}function startAlgorithm(){}return w=CreateReadableByteStream(startAlgorithm,pull1Algorithm,cancel1Algorithm),A=CreateReadableByteStream(startAlgorithm,pull2Algorithm,cancel2Algorithm),forwardReaderError(E),[w,A]}function convertUnderlyingDefaultOrByteSource(t,h){assertDictionary(t,h);var y=t,w=null==y?void 0:y.autoAllocateChunkSize,A=null==y?void 0:y.cancel,T=null==y?void 0:y.pull,E=null==y?void 0:y.start,j=null==y?void 0:y.type;return{autoAllocateChunkSize:void 0===w?void 0:convertUnsignedLongLongWithEnforceRange(w,h+" has member 'autoAllocateChunkSize' that"),cancel:void 0===A?void 0:convertUnderlyingSourceCancelCallback(A,y,h+" has member 'cancel' that"),pull:void 0===T?void 0:convertUnderlyingSourcePullCallback(T,y,h+" has member 'pull' that"),start:void 0===E?void 0:convertUnderlyingSourceStartCallback(E,y,h+" has member 'start' that"),type:void 0===j?void 0:convertReadableStreamType(j,h+" has member 'type' that")}}function convertUnderlyingSourceCancelCallback(t,h,y){return assertFunction(t,y),function(y){return promiseCall(t,h,[y])}}function convertUnderlyingSourcePullCallback(t,h,y){return assertFunction(t,y),function(y){return promiseCall(t,h,[y])}}function convertUnderlyingSourceStartCallback(t,h,y){return assertFunction(t,y),function(y){return reflectCall(t,h,[y])}}function convertReadableStreamType(t,h){if("bytes"!=(t=""+t))throw new TypeError(h+" '"+t+"' is not a valid enumeration value for ReadableStreamType");return t}function convertReaderOptions(t,h){assertDictionary(t,h);var y=null==t?void 0:t.mode;return{mode:void 0===y?void 0:convertReadableStreamReaderMode(y,h+" has member 'mode' that")}}function convertReadableStreamReaderMode(t,h){if("byob"!=(t=""+t))throw new TypeError(h+" '"+t+"' is not a valid enumeration value for ReadableStreamReaderMode");return t}function convertIteratorOptions(t,h){assertDictionary(t,h);var y=null==t?void 0:t.preventCancel;return{preventCancel:Boolean(y)}}function convertPipeOptions(t,h){assertDictionary(t,h);var y=null==t?void 0:t.preventAbort,w=null==t?void 0:t.preventCancel,A=null==t?void 0:t.preventClose,T=null==t?void 0:t.signal;return void 0!==T&&assertAbortSignal(T,h+" has member 'signal' that"),{preventAbort:Boolean(y),preventCancel:Boolean(w),preventClose:Boolean(A),signal:T}}function assertAbortSignal(t,h){if(!isAbortSignal(t))throw new TypeError(h+" is not an AbortSignal.")}function convertReadableWritablePair(t,h){assertDictionary(t,h);var y=null==t?void 0:t.readable;assertRequiredField(y,"readable","ReadableWritablePair"),assertReadableStream(y,h+" has member 'readable' that");var w=null==t?void 0:t.writable;return assertRequiredField(w,"writable","ReadableWritablePair"),assertWritableStream(w,h+" has member 'writable' that"),{readable:y,writable:w}}Object.defineProperties(Ze.prototype,{close:{enumerable:!0},enqueue:{enumerable:!0},error:{enumerable:!0},desiredSize:{enumerable:!0}}),"symbol"==typeof h.toStringTag&&Object.defineProperty(Ze.prototype,h.toStringTag,{value:"ReadableStreamDefaultController",configurable:!0});var et=function(){function ReadableStream(t,h){void 0===t&&(t={}),void 0===h&&(h={}),void 0===t?t=null:assertObject(t,"First parameter");var y=convertQueuingStrategy(h,"Second parameter"),w=convertUnderlyingDefaultOrByteSource(t,"First parameter");if(InitializeReadableStream(this),"bytes"===w.type){if(void 0!==y.size)throw new RangeError("The strategy for a byte stream cannot have a size function");SetUpReadableByteStreamControllerFromUnderlyingSource(this,w,ExtractHighWaterMark(y,0))}else{var A=ExtractSizeAlgorithm(y);SetUpReadableStreamDefaultControllerFromUnderlyingSource(this,w,ExtractHighWaterMark(y,1),A)}}return Object.defineProperty(ReadableStream.prototype,"locked",{get:function(){if(!IsReadableStream(this))throw streamBrandCheckException$1("locked");return IsReadableStreamLocked(this)},enumerable:!1,configurable:!0}),ReadableStream.prototype.cancel=function(t){return void 0===t&&(t=void 0),IsReadableStream(this)?IsReadableStreamLocked(this)?promiseRejectedWith(new TypeError("Cannot cancel a stream that already has a reader")):ReadableStreamCancel(this,t):promiseRejectedWith(streamBrandCheckException$1("cancel"))},ReadableStream.prototype.getReader=function(t){if(void 0===t&&(t=void 0),!IsReadableStream(this))throw streamBrandCheckException$1("getReader");return void 0===convertReaderOptions(t,"First parameter").mode?AcquireReadableStreamDefaultReader(this):AcquireReadableStreamBYOBReader(this)},ReadableStream.prototype.pipeThrough=function(t,h){if(void 0===h&&(h={}),!IsReadableStream(this))throw streamBrandCheckException$1("pipeThrough");assertRequiredArgument(t,1,"pipeThrough");var y=convertReadableWritablePair(t,"First parameter"),w=convertPipeOptions(h,"Second parameter");if(IsReadableStreamLocked(this))throw new TypeError("ReadableStream.prototype.pipeThrough cannot be used on a locked ReadableStream");if(IsWritableStreamLocked(y.writable))throw new TypeError("ReadableStream.prototype.pipeThrough cannot be used on a locked WritableStream");return setPromiseIsHandledToTrue(ReadableStreamPipeTo(this,y.writable,w.preventClose,w.preventAbort,w.preventCancel,w.signal)),y.readable},ReadableStream.prototype.pipeTo=function(t,h){if(void 0===h&&(h={}),!IsReadableStream(this))return promiseRejectedWith(streamBrandCheckException$1("pipeTo"));if(void 0===t)return promiseRejectedWith("Parameter 1 is required in 'pipeTo'.");if(!IsWritableStream(t))return promiseRejectedWith(new TypeError("ReadableStream.prototype.pipeTo's first argument must be a WritableStream"));var y;try{y=convertPipeOptions(h,"Second parameter")}catch(t){return promiseRejectedWith(t)}return IsReadableStreamLocked(this)?promiseRejectedWith(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked ReadableStream")):IsWritableStreamLocked(t)?promiseRejectedWith(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked WritableStream")):ReadableStreamPipeTo(this,t,y.preventClose,y.preventAbort,y.preventCancel,y.signal)},ReadableStream.prototype.tee=function(){if(!IsReadableStream(this))throw streamBrandCheckException$1("tee");return CreateArrayFromList(ReadableStreamTee(this))},ReadableStream.prototype.values=function(t){if(void 0===t&&(t=void 0),!IsReadableStream(this))throw streamBrandCheckException$1("values");return AcquireReadableStreamAsyncIterator(this,convertIteratorOptions(t,"First parameter").preventCancel)},ReadableStream}();function CreateReadableStream(t,h,y,w,A){void 0===w&&(w=1),void 0===A&&(A=function(){return 1});var T=Object.create(et.prototype);return InitializeReadableStream(T),SetUpReadableStreamDefaultController(T,Object.create(Ze.prototype),t,h,y,w,A),T}function CreateReadableByteStream(t,h,y){var w=Object.create(et.prototype);return InitializeReadableStream(w),SetUpReadableByteStreamController(w,Object.create(we.prototype),t,h,y,0,void 0),w}function InitializeReadableStream(t){t._state="readable",t._reader=void 0,t._storedError=void 0,t._disturbed=!1}function IsReadableStream(t){return!!typeIsObject(t)&&!!Object.prototype.hasOwnProperty.call(t,"_readableStreamController")&&t instanceof et}function IsReadableStreamLocked(t){return void 0!==t._reader}function ReadableStreamCancel(t,h){if(t._disturbed=!0,"closed"===t._state)return promiseResolvedWith(void 0);if("errored"===t._state)return promiseRejectedWith(t._storedError);ReadableStreamClose(t);var y=t._reader;return void 0!==y&&IsReadableStreamBYOBReader(y)&&(y._readIntoRequests.forEach((function(t){t._closeSteps(void 0)})),y._readIntoRequests=new V),transformPromiseWith(t._readableStreamController[G](h),noop)}function ReadableStreamClose(t){t._state="closed";var h=t._reader;void 0!==h&&(defaultReaderClosedPromiseResolve(h),IsReadableStreamDefaultReader(h)&&(h._readRequests.forEach((function(t){t._closeSteps()})),h._readRequests=new V))}function ReadableStreamError(t,h){t._state="errored",t._storedError=h;var y=t._reader;void 0!==y&&(defaultReaderClosedPromiseReject(y,h),IsReadableStreamDefaultReader(y)?(y._readRequests.forEach((function(t){t._errorSteps(h)})),y._readRequests=new V):(y._readIntoRequests.forEach((function(t){t._errorSteps(h)})),y._readIntoRequests=new V))}function streamBrandCheckException$1(t){return new TypeError("ReadableStream.prototype."+t+" can only be used on a ReadableStream")}function convertQueuingStrategyInit(t,h){assertDictionary(t,h);var y=null==t?void 0:t.highWaterMark;return assertRequiredField(y,"highWaterMark","QueuingStrategyInit"),{highWaterMark:convertUnrestrictedDouble(y)}}Object.defineProperties(et.prototype,{cancel:{enumerable:!0},getReader:{enumerable:!0},pipeThrough:{enumerable:!0},pipeTo:{enumerable:!0},tee:{enumerable:!0},values:{enumerable:!0},locked:{enumerable:!0}}),"symbol"==typeof h.toStringTag&&Object.defineProperty(et.prototype,h.toStringTag,{value:"ReadableStream",configurable:!0}),"symbol"==typeof h.asyncIterator&&Object.defineProperty(et.prototype,h.asyncIterator,{value:et.prototype.values,writable:!0,configurable:!0});var byteLengthSizeFunction=function(t){return t.byteLength};Object.defineProperty(byteLengthSizeFunction,"name",{value:"size",configurable:!0});var tt=function(){function ByteLengthQueuingStrategy(t){assertRequiredArgument(t,1,"ByteLengthQueuingStrategy"),t=convertQueuingStrategyInit(t,"First parameter"),this._byteLengthQueuingStrategyHighWaterMark=t.highWaterMark}return Object.defineProperty(ByteLengthQueuingStrategy.prototype,"highWaterMark",{get:function(){if(!IsByteLengthQueuingStrategy(this))throw byteLengthBrandCheckException("highWaterMark");return this._byteLengthQueuingStrategyHighWaterMark},enumerable:!1,configurable:!0}),Object.defineProperty(ByteLengthQueuingStrategy.prototype,"size",{get:function(){if(!IsByteLengthQueuingStrategy(this))throw byteLengthBrandCheckException("size");return byteLengthSizeFunction},enumerable:!1,configurable:!0}),ByteLengthQueuingStrategy}();function byteLengthBrandCheckException(t){return new TypeError("ByteLengthQueuingStrategy.prototype."+t+" can only be used on a ByteLengthQueuingStrategy")}function IsByteLengthQueuingStrategy(t){return!!typeIsObject(t)&&!!Object.prototype.hasOwnProperty.call(t,"_byteLengthQueuingStrategyHighWaterMark")&&t instanceof tt}Object.defineProperties(tt.prototype,{highWaterMark:{enumerable:!0},size:{enumerable:!0}}),"symbol"==typeof h.toStringTag&&Object.defineProperty(tt.prototype,h.toStringTag,{value:"ByteLengthQueuingStrategy",configurable:!0});var countSizeFunction=function(){return 1};Object.defineProperty(countSizeFunction,"name",{value:"size",configurable:!0});var rt=function(){function CountQueuingStrategy(t){assertRequiredArgument(t,1,"CountQueuingStrategy"),t=convertQueuingStrategyInit(t,"First parameter"),this._countQueuingStrategyHighWaterMark=t.highWaterMark}return Object.defineProperty(CountQueuingStrategy.prototype,"highWaterMark",{get:function(){if(!IsCountQueuingStrategy(this))throw countBrandCheckException("highWaterMark");return this._countQueuingStrategyHighWaterMark},enumerable:!1,configurable:!0}),Object.defineProperty(CountQueuingStrategy.prototype,"size",{get:function(){if(!IsCountQueuingStrategy(this))throw countBrandCheckException("size");return countSizeFunction},enumerable:!1,configurable:!0}),CountQueuingStrategy}();function countBrandCheckException(t){return new TypeError("CountQueuingStrategy.prototype."+t+" can only be used on a CountQueuingStrategy")}function IsCountQueuingStrategy(t){return!!typeIsObject(t)&&!!Object.prototype.hasOwnProperty.call(t,"_countQueuingStrategyHighWaterMark")&&t instanceof rt}function convertTransformer(t,h){assertDictionary(t,h);var y=null==t?void 0:t.flush,w=null==t?void 0:t.readableType,A=null==t?void 0:t.start,T=null==t?void 0:t.transform,E=null==t?void 0:t.writableType;return{flush:void 0===y?void 0:convertTransformerFlushCallback(y,t,h+" has member 'flush' that"),readableType:w,start:void 0===A?void 0:convertTransformerStartCallback(A,t,h+" has member 'start' that"),transform:void 0===T?void 0:convertTransformerTransformCallback(T,t,h+" has member 'transform' that"),writableType:E}}function convertTransformerFlushCallback(t,h,y){return assertFunction(t,y),function(y){return promiseCall(t,h,[y])}}function convertTransformerStartCallback(t,h,y){return assertFunction(t,y),function(y){return reflectCall(t,h,[y])}}function convertTransformerTransformCallback(t,h,y){return assertFunction(t,y),function(y,w){return promiseCall(t,h,[y,w])}}Object.defineProperties(rt.prototype,{highWaterMark:{enumerable:!0},size:{enumerable:!0}}),"symbol"==typeof h.toStringTag&&Object.defineProperty(rt.prototype,h.toStringTag,{value:"CountQueuingStrategy",configurable:!0});var nt=function(){function TransformStream(t,h,y){void 0===t&&(t={}),void 0===h&&(h={}),void 0===y&&(y={}),void 0===t&&(t=null);var w=convertQueuingStrategy(h,"Second parameter"),A=convertQueuingStrategy(y,"Third parameter"),T=convertTransformer(t,"First parameter");if(void 0!==T.readableType)throw new RangeError("Invalid readableType specified");if(void 0!==T.writableType)throw new RangeError("Invalid writableType specified");var E,j=ExtractHighWaterMark(A,0),B=ExtractSizeAlgorithm(A),N=ExtractHighWaterMark(w,1),V=ExtractSizeAlgorithm(w);InitializeTransformStream(this,newPromise((function(t){E=t})),N,V,j,B),SetUpTransformStreamDefaultControllerFromTransformer(this,T),void 0!==T.start?E(T.start(this._transformStreamController)):E(void 0)}return Object.defineProperty(TransformStream.prototype,"readable",{get:function(){if(!IsTransformStream(this))throw streamBrandCheckException("readable");return this._readable},enumerable:!1,configurable:!0}),Object.defineProperty(TransformStream.prototype,"writable",{get:function(){if(!IsTransformStream(this))throw streamBrandCheckException("writable");return this._writable},enumerable:!1,configurable:!0}),TransformStream}();function InitializeTransformStream(t,h,y,w,A,T){function startAlgorithm(){return h}function writeAlgorithm(h){return TransformStreamDefaultSinkWriteAlgorithm(t,h)}function abortAlgorithm(h){return TransformStreamDefaultSinkAbortAlgorithm(t,h)}function closeAlgorithm(){return TransformStreamDefaultSinkCloseAlgorithm(t)}function pullAlgorithm(){return TransformStreamDefaultSourcePullAlgorithm(t)}function cancelAlgorithm(h){return TransformStreamErrorWritableAndUnblockWrite(t,h),promiseResolvedWith(void 0)}t._writable=CreateWritableStream(startAlgorithm,writeAlgorithm,closeAlgorithm,abortAlgorithm,y,w),t._readable=CreateReadableStream(startAlgorithm,pullAlgorithm,cancelAlgorithm,A,T),t._backpressure=void 0,t._backpressureChangePromise=void 0,t._backpressureChangePromise_resolve=void 0,TransformStreamSetBackpressure(t,!0),t._transformStreamController=void 0}function IsTransformStream(t){return!!typeIsObject(t)&&!!Object.prototype.hasOwnProperty.call(t,"_transformStreamController")&&t instanceof nt}function TransformStreamError(t,h){ReadableStreamDefaultControllerError(t._readable._readableStreamController,h),TransformStreamErrorWritableAndUnblockWrite(t,h)}function TransformStreamErrorWritableAndUnblockWrite(t,h){TransformStreamDefaultControllerClearAlgorithms(t._transformStreamController),WritableStreamDefaultControllerErrorIfNeeded(t._writable._writableStreamController,h),t._backpressure&&TransformStreamSetBackpressure(t,!1)}function TransformStreamSetBackpressure(t,h){void 0!==t._backpressureChangePromise&&t._backpressureChangePromise_resolve(),t._backpressureChangePromise=newPromise((function(h){t._backpressureChangePromise_resolve=h})),t._backpressure=h}Object.defineProperties(nt.prototype,{readable:{enumerable:!0},writable:{enumerable:!0}}),"symbol"==typeof h.toStringTag&&Object.defineProperty(nt.prototype,h.toStringTag,{value:"TransformStream",configurable:!0});var it=function(){function TransformStreamDefaultController(){throw new TypeError("Illegal constructor")}return Object.defineProperty(TransformStreamDefaultController.prototype,"desiredSize",{get:function(){if(!IsTransformStreamDefaultController(this))throw defaultControllerBrandCheckException("desiredSize");return ReadableStreamDefaultControllerGetDesiredSize(this._controlledTransformStream._readable._readableStreamController)},enumerable:!1,configurable:!0}),TransformStreamDefaultController.prototype.enqueue=function(t){if(void 0===t&&(t=void 0),!IsTransformStreamDefaultController(this))throw defaultControllerBrandCheckException("enqueue");TransformStreamDefaultControllerEnqueue(this,t)},TransformStreamDefaultController.prototype.error=function(t){if(void 0===t&&(t=void 0),!IsTransformStreamDefaultController(this))throw defaultControllerBrandCheckException("error");TransformStreamDefaultControllerError(this,t)},TransformStreamDefaultController.prototype.terminate=function(){if(!IsTransformStreamDefaultController(this))throw defaultControllerBrandCheckException("terminate");TransformStreamDefaultControllerTerminate(this)},TransformStreamDefaultController}();function IsTransformStreamDefaultController(t){return!!typeIsObject(t)&&!!Object.prototype.hasOwnProperty.call(t,"_controlledTransformStream")&&t instanceof it}function SetUpTransformStreamDefaultController(t,h,y,w){h._controlledTransformStream=t,t._transformStreamController=h,h._transformAlgorithm=y,h._flushAlgorithm=w}function SetUpTransformStreamDefaultControllerFromTransformer(t,h){var y=Object.create(it.prototype),transformAlgorithm=function(t){try{return TransformStreamDefaultControllerEnqueue(y,t),promiseResolvedWith(void 0)}catch(t){return promiseRejectedWith(t)}},flushAlgorithm=function(){return promiseResolvedWith(void 0)};void 0!==h.transform&&(transformAlgorithm=function(t){return h.transform(t,y)}),void 0!==h.flush&&(flushAlgorithm=function(){return h.flush(y)}),SetUpTransformStreamDefaultController(t,y,transformAlgorithm,flushAlgorithm)}function TransformStreamDefaultControllerClearAlgorithms(t){t._transformAlgorithm=void 0,t._flushAlgorithm=void 0}function TransformStreamDefaultControllerEnqueue(t,h){var y=t._controlledTransformStream,w=y._readable._readableStreamController;if(!ReadableStreamDefaultControllerCanCloseOrEnqueue(w))throw new TypeError("Readable side is not in a state that permits enqueue");try{ReadableStreamDefaultControllerEnqueue(w,h)}catch(t){throw TransformStreamErrorWritableAndUnblockWrite(y,t),y._readable._storedError}ReadableStreamDefaultControllerHasBackpressure(w)!==y._backpressure&&TransformStreamSetBackpressure(y,!0)}function TransformStreamDefaultControllerError(t,h){TransformStreamError(t._controlledTransformStream,h)}function TransformStreamDefaultControllerPerformTransform(t,h){return transformPromiseWith(t._transformAlgorithm(h),void 0,(function(h){throw TransformStreamError(t._controlledTransformStream,h),h}))}function TransformStreamDefaultControllerTerminate(t){var h=t._controlledTransformStream;ReadableStreamDefaultControllerClose(h._readable._readableStreamController),TransformStreamErrorWritableAndUnblockWrite(h,new TypeError("TransformStream terminated"))}function TransformStreamDefaultSinkWriteAlgorithm(t,h){var y=t._transformStreamController;return t._backpressure?transformPromiseWith(t._backpressureChangePromise,(function(){var w=t._writable;if("erroring"===w._state)throw w._storedError;return TransformStreamDefaultControllerPerformTransform(y,h)})):TransformStreamDefaultControllerPerformTransform(y,h)}function TransformStreamDefaultSinkAbortAlgorithm(t,h){return TransformStreamError(t,h),promiseResolvedWith(void 0)}function TransformStreamDefaultSinkCloseAlgorithm(t){var h=t._readable,y=t._transformStreamController,w=y._flushAlgorithm();return TransformStreamDefaultControllerClearAlgorithms(y),transformPromiseWith(w,(function(){if("errored"===h._state)throw h._storedError;ReadableStreamDefaultControllerClose(h._readableStreamController)}),(function(y){throw TransformStreamError(t,y),h._storedError}))}function TransformStreamDefaultSourcePullAlgorithm(t){return TransformStreamSetBackpressure(t,!1),t._backpressureChangePromise}function defaultControllerBrandCheckException(t){return new TypeError("TransformStreamDefaultController.prototype."+t+" can only be used on a TransformStreamDefaultController")}function streamBrandCheckException(t){return new TypeError("TransformStream.prototype."+t+" can only be used on a TransformStream")}Object.defineProperties(it.prototype,{enqueue:{enumerable:!0},error:{enumerable:!0},terminate:{enumerable:!0},desiredSize:{enumerable:!0}}),"symbol"==typeof h.toStringTag&&Object.defineProperty(it.prototype,h.toStringTag,{value:"TransformStreamDefaultController",configurable:!0}),t.ByteLengthQueuingStrategy=tt,t.CountQueuingStrategy=rt,t.ReadableByteStreamController=we,t.ReadableStream=et,t.ReadableStreamBYOBReader=Ce,t.ReadableStreamBYOBRequest=ge,t.ReadableStreamDefaultController=Ze,t.ReadableStreamDefaultReader=ne,t.TransformStream=nt,t.TransformStreamDefaultController=it,t.WritableStream=Ie,t.WritableStreamDefaultController=Me,t.WritableStreamDefaultWriter=Te,Object.defineProperty(t,"__esModule",{value:!0})}(h)},(t,h,y)=>{"use strict";Object.defineProperty(h,"__esModule",{value:!0}),h.BaseStandardFontDataFactory=h.BaseSVGFactory=h.BaseCanvasFactory=h.BaseCMapReaderFactory=void 0;var w=function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}(y(2)),A=y(4);function asyncGeneratorStep(t,h,y,w,A,T,E){try{var j=t[T](E),B=j.value}catch(t){return void y(t)}j.done?h(B):Promise.resolve(B).then(w,A)}function _asyncToGenerator(t){return function(){var h=this,y=arguments;return new Promise((function(w,A){var T=t.apply(h,y);function _next(t){asyncGeneratorStep(T,w,A,_next,_throw,"next",t)}function _throw(t){asyncGeneratorStep(T,w,A,_next,_throw,"throw",t)}_next(void 0)}))}}function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _classCallCheck(t,h){if(!(t instanceof h))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,h){for(var y=0;y<h.length;y++){var w=h[y];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(t,(A=w.key,T=void 0,T=function _toPrimitive(t,h){if("object"!==_typeof(t)||null===t)return t;var y=t[Symbol.toPrimitive];if(void 0!==y){var w=y.call(t,h||"default");if("object"!==_typeof(w))return w;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===h?String:Number)(t)}(A,"string"),"symbol"===_typeof(T)?T:String(T)),w)}var A,T}function _createClass(t,h,y){return h&&_defineProperties(t.prototype,h),y&&_defineProperties(t,y),Object.defineProperty(t,"prototype",{writable:!1}),t}var T=function(){function BaseCanvasFactory(){_classCallCheck(this,BaseCanvasFactory),this.constructor===BaseCanvasFactory&&(0,A.unreachable)("Cannot initialize BaseCanvasFactory.")}return _createClass(BaseCanvasFactory,[{key:"create",value:function create(t,h){if(t<=0||h<=0)throw new Error("Invalid canvas size");var y=this._createCanvas(t,h);return{canvas:y,context:y.getContext("2d")}}},{key:"reset",value:function reset(t,h,y){if(!t.canvas)throw new Error("Canvas is not specified");if(h<=0||y<=0)throw new Error("Invalid canvas size");t.canvas.width=h,t.canvas.height=y}},{key:"destroy",value:function destroy(t){if(!t.canvas)throw new Error("Canvas is not specified");t.canvas.width=0,t.canvas.height=0,t.canvas=null,t.context=null}},{key:"_createCanvas",value:function _createCanvas(t,h){(0,A.unreachable)("Abstract method `_createCanvas` called.")}}]),BaseCanvasFactory}();h.BaseCanvasFactory=T;var E=function(){function BaseCMapReaderFactory(t){var h=t.baseUrl,y=void 0===h?null:h,w=t.isCompressed,T=void 0!==w&&w;_classCallCheck(this,BaseCMapReaderFactory),this.constructor===BaseCMapReaderFactory&&(0,A.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=y,this.isCompressed=T}var t;return _createClass(BaseCMapReaderFactory,[{key:"fetch",value:(t=_asyncToGenerator(w.default.mark((function _callee(t){var h,y,T,E=this;return w.default.wrap((function _callee$(w){for(;;)switch(w.prev=w.next){case 0:if(h=t.name,this.baseUrl){w.next=3;break}throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');case 3:if(h){w.next=5;break}throw new Error("CMap name must be specified.");case 5:return y=this.baseUrl+h+(this.isCompressed?".bcmap":""),T=this.isCompressed?A.CMapCompressionType.BINARY:A.CMapCompressionType.NONE,w.abrupt("return",this._fetchData(y,T).catch((function(t){throw new Error("Unable to load ".concat(E.isCompressed?"binary ":"","CMap at: ").concat(y))})));case 8:case"end":return w.stop()}}),_callee,this)}))),function fetch(h){return t.apply(this,arguments)})},{key:"_fetchData",value:function _fetchData(t,h){(0,A.unreachable)("Abstract method `_fetchData` called.")}}]),BaseCMapReaderFactory}();h.BaseCMapReaderFactory=E;var j=function(){function BaseStandardFontDataFactory(t){var h=t.baseUrl,y=void 0===h?null:h;_classCallCheck(this,BaseStandardFontDataFactory),this.constructor===BaseStandardFontDataFactory&&(0,A.unreachable)("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=y}var t;return _createClass(BaseStandardFontDataFactory,[{key:"fetch",value:(t=_asyncToGenerator(w.default.mark((function _callee2(t){var h,y;return w.default.wrap((function _callee2$(w){for(;;)switch(w.prev=w.next){case 0:if(h=t.filename,this.baseUrl){w.next=3;break}throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');case 3:if(h){w.next=5;break}throw new Error("Font filename must be specified.");case 5:return y="".concat(this.baseUrl).concat(h),w.abrupt("return",this._fetchData(y).catch((function(t){throw new Error("Unable to load font data at: ".concat(y))})));case 7:case"end":return w.stop()}}),_callee2,this)}))),function fetch(h){return t.apply(this,arguments)})},{key:"_fetchData",value:function _fetchData(t){(0,A.unreachable)("Abstract method `_fetchData` called.")}}]),BaseStandardFontDataFactory}();h.BaseStandardFontDataFactory=j;var B=function(){function BaseSVGFactory(){_classCallCheck(this,BaseSVGFactory),this.constructor===BaseSVGFactory&&(0,A.unreachable)("Cannot initialize BaseSVGFactory.")}return _createClass(BaseSVGFactory,[{key:"create",value:function create(t,h){if(t<=0||h<=0)throw new Error("Invalid SVG dimensions");var y=this._createSVG("svg:svg");return y.setAttribute("version","1.1"),y.setAttribute("width","".concat(t,"px")),y.setAttribute("height","".concat(h,"px")),y.setAttribute("preserveAspectRatio","none"),y.setAttribute("viewBox","0 0 ".concat(t," ").concat(h)),y}},{key:"createElement",value:function createElement(t){if("string"!=typeof t)throw new Error("Invalid SVG element type");return this._createSVG(t)}},{key:"_createSVG",value:function _createSVG(t){(0,A.unreachable)("Abstract method `_createSVG` called.")}}]),BaseSVGFactory}();h.BaseSVGFactory=B},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.build=exports.RenderTask=exports.PDFWorker=exports.PDFPageProxy=exports.PDFDocumentProxy=exports.PDFDocumentLoadingTask=exports.PDFDataRangeTransport=exports.LoopbackPort=exports.DefaultStandardFontDataFactory=exports.DefaultCanvasFactory=exports.DefaultCMapReaderFactory=void 0,exports.getDocument=getDocument,exports.setPDFNetworkStreamFactory=setPDFNetworkStreamFactory,exports.version=void 0;var _regenerator=_interopRequireDefault(__w_pdfjs_require__(2)),_util=__w_pdfjs_require__(4),_display_utils=__w_pdfjs_require__(1),_font_loader=__w_pdfjs_require__(136),_node_utils=__w_pdfjs_require__(137),_annotation_storage=__w_pdfjs_require__(138),_canvas=__w_pdfjs_require__(139),_worker_options=__w_pdfjs_require__(141),_is_node=__w_pdfjs_require__(6),_message_handler=__w_pdfjs_require__(142),_metadata=__w_pdfjs_require__(143),_optional_content_config=__w_pdfjs_require__(144),_transport_stream=__w_pdfjs_require__(145),_xfa_text=__w_pdfjs_require__(146);function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function _toConsumableArray(t){return _arrayWithoutHoles(t)||_iterableToArray(t)||_unsupportedIterableToArray(t)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArray(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function _arrayWithoutHoles(t){if(Array.isArray(t))return _arrayLikeToArray(t)}function _createForOfIteratorHelper(t,h){var y="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!y){if(Array.isArray(t)||(y=_unsupportedIterableToArray(t))||h&&t&&"number"==typeof t.length){y&&(t=y);var w=0,A=function F(){};return{s:A,n:function n(){return w>=t.length?{done:!0}:{done:!1,value:t[w++]}},e:function e(t){throw t},f:A}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var T,E=!0,j=!1;return{s:function s(){y=y.call(t)},n:function n(){var t=y.next();return E=t.done,t},e:function e(t){j=!0,T=t},f:function f(){try{E||null==y.return||y.return()}finally{if(j)throw T}}}}function _classCallCheck(t,h){if(!(t instanceof h))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,h){for(var y=0;y<h.length;y++){var w=h[y];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(t,_toPropertyKey(w.key),w)}}function _createClass(t,h,y){return h&&_defineProperties(t.prototype,h),y&&_defineProperties(t,y),Object.defineProperty(t,"prototype",{writable:!1}),t}function _toPropertyKey(t){var h=_toPrimitive(t,"string");return"symbol"===_typeof(h)?h:String(h)}function _toPrimitive(t,h){if("object"!==_typeof(t)||null===t)return t;var y=t[Symbol.toPrimitive];if(void 0!==y){var w=y.call(t,h||"default");if("object"!==_typeof(w))return w;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===h?String:Number)(t)}function asyncGeneratorStep(t,h,y,w,A,T,E){try{var j=t[T](E),B=j.value}catch(t){return void y(t)}j.done?h(B):Promise.resolve(B).then(w,A)}function _asyncToGenerator(t){return function(){var h=this,y=arguments;return new Promise((function(w,A){var T=t.apply(h,y);function _next(t){asyncGeneratorStep(T,w,A,_next,_throw,"next",t)}function _throw(t){asyncGeneratorStep(T,w,A,_next,_throw,"throw",t)}_next(void 0)}))}}function _slicedToArray(t,h){return _arrayWithHoles(t)||_iterableToArrayLimit(t,h)||_unsupportedIterableToArray(t,h)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(t,h){if(t){if("string"==typeof t)return _arrayLikeToArray(t,h);var y=Object.prototype.toString.call(t).slice(8,-1);return"Object"===y&&t.constructor&&(y=t.constructor.name),"Map"===y||"Set"===y?Array.from(t):"Arguments"===y||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(y)?_arrayLikeToArray(t,h):void 0}}function _arrayLikeToArray(t,h){(null==h||h>t.length)&&(h=t.length);for(var y=0,w=new Array(h);y<h;y++)w[y]=t[y];return w}function _iterableToArrayLimit(t,h){var y=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=y){var w,A,T,E,j=[],B=!0,N=!1;try{if(T=(y=y.call(t)).next,0===h){if(Object(y)!==y)return;B=!1}else for(;!(B=(w=T.call(y)).done)&&(j.push(w.value),j.length!==h);B=!0);}catch(t){N=!0,A=t}finally{try{if(!B&&null!=y.return&&(E=y.return(),Object(E)!==E))return}finally{if(N)throw A}}return j}}function _arrayWithHoles(t){if(Array.isArray(t))return t}function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}var DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100,DefaultCanvasFactory=_is_node.isNodeJS?_node_utils.NodeCanvasFactory:_display_utils.DOMCanvasFactory;exports.DefaultCanvasFactory=DefaultCanvasFactory;var DefaultCMapReaderFactory=_is_node.isNodeJS?_node_utils.NodeCMapReaderFactory:_display_utils.DOMCMapReaderFactory;exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory;var DefaultStandardFontDataFactory=_is_node.isNodeJS?_node_utils.NodeStandardFontDataFactory:_display_utils.DOMStandardFontDataFactory,createPDFNetworkStream;function setPDFNetworkStreamFactory(t){createPDFNetworkStream=t}function getDocument(t){var h,y=new PDFDocumentLoadingTask;if("string"==typeof t||t instanceof URL)h={url:t};else if((0,_util.isArrayBuffer)(t))h={data:t};else if(t instanceof PDFDataRangeTransport)h={range:t};else{if("object"!==_typeof(t))throw new Error("Invalid parameter in getDocument, need either string, URL, Uint8Array, or parameter object.");if(!t.url&&!t.data&&!t.range)throw new Error("Invalid parameter object: need either .data, .range or .url");h=t}var w=Object.create(null),A=null,T=null;for(var E in h){var j=h[E];switch(E){case"url":if("undefined"!=typeof window)try{w[E]=new URL(j,window.location).href;continue}catch(t){(0,_util.warn)('Cannot create valid URL: "'.concat(t,'".'))}else if("string"==typeof j||j instanceof URL){w[E]=j.toString();continue}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.");case"range":A=j;continue;case"worker":T=j;continue;case"data":if(_is_node.isNodeJS&&"undefined"!=typeof Buffer&&j instanceof Buffer)w[E]=new Uint8Array(j);else{if(j instanceof Uint8Array)break;if("string"==typeof j)w[E]=(0,_util.stringToBytes)(j);else if("object"!==_typeof(j)||null===j||isNaN(j.length)){if(!(0,_util.isArrayBuffer)(j))throw new Error("Invalid PDF binary data: either typed array, string, or array-like object is expected in the data property.");w[E]=new Uint8Array(j)}else w[E]=new Uint8Array(j)}continue}w[E]=j}if(w.rangeChunkSize=w.rangeChunkSize||DEFAULT_RANGE_CHUNK_SIZE,w.CMapReaderFactory=w.CMapReaderFactory||DefaultCMapReaderFactory,w.StandardFontDataFactory=w.StandardFontDataFactory||DefaultStandardFontDataFactory,w.ignoreErrors=!0!==w.stopAtErrors,w.fontExtraProperties=!0===w.fontExtraProperties,w.pdfBug=!0===w.pdfBug,w.enableXfa=!0===w.enableXfa,("string"!=typeof w.docBaseUrl||(0,_display_utils.isDataScheme)(w.docBaseUrl))&&(w.docBaseUrl=null),Number.isInteger(w.maxImageSize)||(w.maxImageSize=-1),"boolean"!=typeof w.useWorkerFetch&&(w.useWorkerFetch=w.CMapReaderFactory===_display_utils.DOMCMapReaderFactory&&w.StandardFontDataFactory===_display_utils.DOMStandardFontDataFactory),"boolean"!=typeof w.isEvalSupported&&(w.isEvalSupported=!0),"boolean"!=typeof w.disableFontFace&&(w.disableFontFace=_is_node.isNodeJS),"boolean"!=typeof w.useSystemFonts&&(w.useSystemFonts=!_is_node.isNodeJS&&!w.disableFontFace),void 0===w.ownerDocument&&(w.ownerDocument=globalThis.document),"boolean"!=typeof w.disableRange&&(w.disableRange=!1),"boolean"!=typeof w.disableStream&&(w.disableStream=!1),"boolean"!=typeof w.disableAutoFetch&&(w.disableAutoFetch=!1),(0,_util.setVerbosityLevel)(w.verbosity),!T){var B={verbosity:w.verbosity,port:_worker_options.GlobalWorkerOptions.workerPort};T=B.port?PDFWorker.fromPort(B):new PDFWorker(B),y._worker=T}var N=y.docId;return T.promise.then((function(){if(y.destroyed)throw new Error("Loading aborted");var t=_fetchDocument(T,w,A,N),h=new Promise((function(t){var h;A?h=new _transport_stream.PDFDataTransportStream({length:w.length,initialData:w.initialData,progressiveDone:w.progressiveDone,contentDispositionFilename:w.contentDispositionFilename,disableRange:w.disableRange,disableStream:w.disableStream},A):w.data||(h=createPDFNetworkStream({url:w.url,length:w.length,httpHeaders:w.httpHeaders,withCredentials:w.withCredentials,rangeChunkSize:w.rangeChunkSize,disableRange:w.disableRange,disableStream:w.disableStream})),t(h)}));return Promise.all([t,h]).then((function(t){var h=_slicedToArray(t,2),A=h[0],E=h[1];if(y.destroyed)throw new Error("Loading aborted");var j=new _message_handler.MessageHandler(N,A,T.port);j.postMessageTransfers=T.postMessageTransfers;var B=new WorkerTransport(j,y,E,w);y._transport=B,j.send("Ready",null)}))})).catch(y._capability.reject),y}function _fetchDocument(t,h,y,w){return _fetchDocument2.apply(this,arguments)}function _fetchDocument2(){return(_fetchDocument2=_asyncToGenerator(_regenerator.default.mark((function _callee6(t,h,y,w){var A;return _regenerator.default.wrap((function _callee6$(T){for(;;)switch(T.prev=T.next){case 0:if(!t.destroyed){T.next=2;break}throw new Error("Worker was destroyed");case 2:return y&&(h.length=y.length,h.initialData=y.initialData,h.progressiveDone=y.progressiveDone,h.contentDispositionFilename=y.contentDispositionFilename),T.next=5,t.messageHandler.sendWithPromise("GetDocRequest",{docId:w,apiVersion:"2.12.223",source:{data:h.data,url:h.url,password:h.password,disableAutoFetch:h.disableAutoFetch,rangeChunkSize:h.rangeChunkSize,length:h.length},maxImageSize:h.maxImageSize,disableFontFace:h.disableFontFace,postMessageTransfers:t.postMessageTransfers,docBaseUrl:h.docBaseUrl,ignoreErrors:h.ignoreErrors,isEvalSupported:h.isEvalSupported,fontExtraProperties:h.fontExtraProperties,enableXfa:h.enableXfa,useSystemFonts:h.useSystemFonts,cMapUrl:h.useWorkerFetch?h.cMapUrl:null,standardFontDataUrl:h.useWorkerFetch?h.standardFontDataUrl:null});case 5:if(A=T.sent,!t.destroyed){T.next=8;break}throw new Error("Worker was destroyed");case 8:return T.abrupt("return",A);case 9:case"end":return T.stop()}}),_callee6)})))).apply(this,arguments)}exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory;var PDFDocumentLoadingTask=function(){function PDFDocumentLoadingTask(){_classCallCheck(this,PDFDocumentLoadingTask),this._capability=(0,_util.createPromiseCapability)(),this._transport=null,this._worker=null,this.docId="d".concat(PDFDocumentLoadingTask.idCounters.doc++),this.destroyed=!1,this.onPassword=null,this.onProgress=null,this.onUnsupportedFeature=null}var t;return _createClass(PDFDocumentLoadingTask,[{key:"promise",get:function get(){return this._capability.promise}},{key:"destroy",value:(t=_asyncToGenerator(_regenerator.default.mark((function _callee(){var t;return _regenerator.default.wrap((function _callee$(h){for(;;)switch(h.prev=h.next){case 0:return this.destroyed=!0,h.next=3,null===(t=this._transport)||void 0===t?void 0:t.destroy();case 3:this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null);case 5:case"end":return h.stop()}}),_callee,this)}))),function destroy(){return t.apply(this,arguments)})}],[{key:"idCounters",get:function get(){return(0,_util.shadow)(this,"idCounters",{doc:0})}}]),PDFDocumentLoadingTask}();exports.PDFDocumentLoadingTask=PDFDocumentLoadingTask;var PDFDataRangeTransport=function(){function PDFDataRangeTransport(t,h){var y=arguments.length>2&&void 0!==arguments[2]&&arguments[2],w=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;_classCallCheck(this,PDFDataRangeTransport),this.length=t,this.initialData=h,this.progressiveDone=y,this.contentDispositionFilename=w,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=(0,_util.createPromiseCapability)()}return _createClass(PDFDataRangeTransport,[{key:"addRangeListener",value:function addRangeListener(t){this._rangeListeners.push(t)}},{key:"addProgressListener",value:function addProgressListener(t){this._progressListeners.push(t)}},{key:"addProgressiveReadListener",value:function addProgressiveReadListener(t){this._progressiveReadListeners.push(t)}},{key:"addProgressiveDoneListener",value:function addProgressiveDoneListener(t){this._progressiveDoneListeners.push(t)}},{key:"onDataRange",value:function onDataRange(t,h){var y,w=_createForOfIteratorHelper(this._rangeListeners);try{for(w.s();!(y=w.n()).done;){(0,y.value)(t,h)}}catch(t){w.e(t)}finally{w.f()}}},{key:"onDataProgress",value:function onDataProgress(t,h){var y=this;this._readyCapability.promise.then((function(){var w,A=_createForOfIteratorHelper(y._progressListeners);try{for(A.s();!(w=A.n()).done;){(0,w.value)(t,h)}}catch(t){A.e(t)}finally{A.f()}}))}},{key:"onDataProgressiveRead",value:function onDataProgressiveRead(t){var h=this;this._readyCapability.promise.then((function(){var y,w=_createForOfIteratorHelper(h._progressiveReadListeners);try{for(w.s();!(y=w.n()).done;){(0,y.value)(t)}}catch(t){w.e(t)}finally{w.f()}}))}},{key:"onDataProgressiveDone",value:function onDataProgressiveDone(){var t=this;this._readyCapability.promise.then((function(){var h,y=_createForOfIteratorHelper(t._progressiveDoneListeners);try{for(y.s();!(h=y.n()).done;){(0,h.value)()}}catch(t){y.e(t)}finally{y.f()}}))}},{key:"transportReady",value:function transportReady(){this._readyCapability.resolve()}},{key:"requestDataRange",value:function requestDataRange(t,h){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}},{key:"abort",value:function abort(){}}]),PDFDataRangeTransport}();exports.PDFDataRangeTransport=PDFDataRangeTransport;var PDFDocumentProxy=function(){function PDFDocumentProxy(t,h){_classCallCheck(this,PDFDocumentProxy),this._pdfInfo=t,this._transport=h,Object.defineProperty(this,"fingerprint",{get:function get(){return(0,_display_utils.deprecated)("`PDFDocumentProxy.fingerprint`, please use `PDFDocumentProxy.fingerprints` instead."),this.fingerprints[0]}})}return _createClass(PDFDocumentProxy,[{key:"annotationStorage",get:function get(){return this._transport.annotationStorage}},{key:"numPages",get:function get(){return this._pdfInfo.numPages}},{key:"fingerprints",get:function get(){return this._pdfInfo.fingerprints}},{key:"isPureXfa",get:function get(){return!!this._transport._htmlForXfa}},{key:"allXfaHtml",get:function get(){return this._transport._htmlForXfa}},{key:"getPage",value:function getPage(t){return this._transport.getPage(t)}},{key:"getPageIndex",value:function getPageIndex(t){return this._transport.getPageIndex(t)}},{key:"getDestinations",value:function getDestinations(){return this._transport.getDestinations()}},{key:"getDestination",value:function getDestination(t){return this._transport.getDestination(t)}},{key:"getPageLabels",value:function getPageLabels(){return this._transport.getPageLabels()}},{key:"getPageLayout",value:function getPageLayout(){return this._transport.getPageLayout()}},{key:"getPageMode",value:function getPageMode(){return this._transport.getPageMode()}},{key:"getViewerPreferences",value:function getViewerPreferences(){return this._transport.getViewerPreferences()}},{key:"getOpenAction",value:function getOpenAction(){return this._transport.getOpenAction()}},{key:"getAttachments",value:function getAttachments(){return this._transport.getAttachments()}},{key:"getJavaScript",value:function getJavaScript(){return this._transport.getJavaScript()}},{key:"getJSActions",value:function getJSActions(){return this._transport.getDocJSActions()}},{key:"getOutline",value:function getOutline(){return this._transport.getOutline()}},{key:"getOptionalContentConfig",value:function getOptionalContentConfig(){return this._transport.getOptionalContentConfig()}},{key:"getPermissions",value:function getPermissions(){return this._transport.getPermissions()}},{key:"getMetadata",value:function getMetadata(){return this._transport.getMetadata()}},{key:"getMarkInfo",value:function getMarkInfo(){return this._transport.getMarkInfo()}},{key:"getData",value:function getData(){return this._transport.getData()}},{key:"getDownloadInfo",value:function getDownloadInfo(){return this._transport.downloadInfoCapability.promise}},{key:"getStats",value:function getStats(){return this._transport.getStats()}},{key:"cleanup",value:function cleanup(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this._transport.startCleanup(t||this.isPureXfa)}},{key:"destroy",value:function destroy(){return this.loadingTask.destroy()}},{key:"loadingParams",get:function get(){return this._transport.loadingParams}},{key:"loadingTask",get:function get(){return this._transport.loadingTask}},{key:"saveDocument",value:function saveDocument(){return this._transport.annotationStorage.size<=0&&(0,_display_utils.deprecated)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead."),this._transport.saveDocument()}},{key:"getFieldObjects",value:function getFieldObjects(){return this._transport.getFieldObjects()}},{key:"hasJSActions",value:function hasJSActions(){return this._transport.hasJSActions()}},{key:"getCalculationOrderIds",value:function getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}]),PDFDocumentProxy}();exports.PDFDocumentProxy=PDFDocumentProxy;var PDFPageProxy=function(){function PDFPageProxy(t,h,y,w){var A=arguments.length>4&&void 0!==arguments[4]&&arguments[4];_classCallCheck(this,PDFPageProxy),this._pageIndex=t,this._pageInfo=h,this._ownerDocument=w,this._transport=y,this._stats=A?new _display_utils.StatTimer:null,this._pdfBug=A,this.commonObjs=y.commonObjs,this.objs=new PDFObjects,this.cleanupAfterRender=!1,this.pendingCleanup=!1,this._intentStates=new Map,this._annotationPromises=new Map,this.destroyed=!1}var t;return _createClass(PDFPageProxy,[{key:"pageNumber",get:function get(){return this._pageIndex+1}},{key:"rotate",get:function get(){return this._pageInfo.rotate}},{key:"ref",get:function get(){return this._pageInfo.ref}},{key:"userUnit",get:function get(){return this._pageInfo.userUnit}},{key:"view",get:function get(){return this._pageInfo.view}},{key:"getViewport",value:function getViewport(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},h=t.scale,y=t.rotation,w=void 0===y?this.rotate:y,A=t.offsetX,T=void 0===A?0:A,E=t.offsetY,j=void 0===E?0:E,B=t.dontFlip,N=void 0!==B&&B;return new _display_utils.PageViewport({viewBox:this.view,scale:h,rotation:w,offsetX:T,offsetY:j,dontFlip:N})}},{key:"getAnnotations",value:function getAnnotations(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).intent,h=void 0===t?"display":t,y=this._transport.getRenderingIntent(h),w=this._annotationPromises.get(y.cacheKey);return w||(w=this._transport.getAnnotations(this._pageIndex,y.renderingIntent),this._annotationPromises.set(y.cacheKey,w),w=w.then((function(t){var h,y=_createForOfIteratorHelper(t);try{var w=function _loop(){var t=h.value;void 0!==t.titleObj&&Object.defineProperty(t,"title",{get:function get(){return(0,_display_utils.deprecated)("`title`-property on annotation, please use `titleObj` instead."),t.titleObj.str}}),void 0!==t.contentsObj&&Object.defineProperty(t,"contents",{get:function get(){return(0,_display_utils.deprecated)("`contents`-property on annotation, please use `contentsObj` instead."),t.contentsObj.str}})};for(y.s();!(h=y.n()).done;)w()}catch(t){y.e(t)}finally{y.f()}return t}))),w}},{key:"getJSActions",value:function getJSActions(){return this._jsActionsPromise||(this._jsActionsPromise=this._transport.getPageJSActions(this._pageIndex))}},{key:"getXfa",value:(t=_asyncToGenerator(_regenerator.default.mark((function _callee2(){var t;return _regenerator.default.wrap((function _callee2$(h){for(;;)switch(h.prev=h.next){case 0:return h.abrupt("return",(null===(t=this._transport._htmlForXfa)||void 0===t?void 0:t.children[this._pageIndex])||null);case 1:case"end":return h.stop()}}),_callee2,this)}))),function getXfa(){return t.apply(this,arguments)})},{key:"render",value:function render(t){var h,y,w,A=this,T=t.canvasContext,E=t.viewport,j=t.intent,B=void 0===j?"display":j,N=t.annotationMode,V=void 0===N?_util.AnnotationMode.ENABLE:N,W=t.transform,H=void 0===W?null:W,G=t.imageLayer,z=void 0===G?null:G,$=t.canvasFactory,J=void 0===$?null:$,X=t.background,K=void 0===X?null:X,ne=t.optionalContentConfigPromise,ue=void 0===ne?null:ne,pe=t.annotationCanvasMap,me=void 0===pe?null:pe;void 0!==(null===(h=arguments[0])||void 0===h?void 0:h.renderInteractiveForms)&&((0,_display_utils.deprecated)("render no longer accepts the `renderInteractiveForms`-option, please use the `annotationMode`-option instead."),!0===arguments[0].renderInteractiveForms&&V===_util.AnnotationMode.ENABLE&&(V=_util.AnnotationMode.ENABLE_FORMS)),void 0!==(null===(y=arguments[0])||void 0===y?void 0:y.includeAnnotationStorage)&&((0,_display_utils.deprecated)("render no longer accepts the `includeAnnotationStorage`-option, please use the `annotationMode`-option instead."),!0===arguments[0].includeAnnotationStorage&&V===_util.AnnotationMode.ENABLE&&(V=_util.AnnotationMode.ENABLE_STORAGE)),this._stats&&this._stats.time("Overall");var ge=this._transport.getRenderingIntent(B,V);this.pendingCleanup=!1,ue||(ue=this._transport.getOptionalContentConfig());var we=this._intentStates.get(ge.cacheKey);we||(we=Object.create(null),this._intentStates.set(ge.cacheKey,we)),we.streamReaderCancelTimeout&&(clearTimeout(we.streamReaderCancelTimeout),we.streamReaderCancelTimeout=null);var Ce=J||new DefaultCanvasFactory({ownerDocument:this._ownerDocument}),ke=!!(ge.renderingIntent&_util.RenderingIntentFlag.PRINT);we.displayReadyCapability||(we.displayReadyCapability=(0,_util.createPromiseCapability)(),we.operatorList={fnArray:[],argsArray:[],lastChunk:!1},this._stats&&this._stats.time("Page Request"),this._pumpOperatorList(ge));var Ie=function complete(t){we.renderTasks.delete(Te),(A.cleanupAfterRender||ke)&&(A.pendingCleanup=!0),A._tryCleanup(),t?(Te.capability.reject(t),A._abortOperatorList({intentState:we,reason:t instanceof Error?t:new Error(t)})):Te.capability.resolve(),A._stats&&(A._stats.timeEnd("Rendering"),A._stats.timeEnd("Overall"))},Te=new InternalRenderTask({callback:Ie,params:{canvasContext:T,viewport:E,transform:H,imageLayer:z,background:K},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:me,operatorList:we.operatorList,pageIndex:this._pageIndex,canvasFactory:Ce,useRequestAnimationFrame:!ke,pdfBug:this._pdfBug});((w=we).renderTasks||(w.renderTasks=new Set)).add(Te);var Ee=Te.task;return Promise.all([we.displayReadyCapability.promise,ue]).then((function(t){var h=_slicedToArray(t,2),y=h[0],w=h[1];A.pendingCleanup?Ie():(A._stats&&A._stats.time("Rendering"),Te.initializeGraphics({transparency:y,optionalContentConfig:w}),Te.operatorListChanged())})).catch(Ie),Ee}},{key:"getOperatorList",value:function getOperatorList(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},h=t.intent,y=void 0===h?"display":h,w=t.annotationMode,A=void 0===w?_util.AnnotationMode.ENABLE:w;var T,E,j=this._transport.getRenderingIntent(y,A,!0),B=this._intentStates.get(j.cacheKey);(B||(B=Object.create(null),this._intentStates.set(j.cacheKey,B)),B.opListReadCapability)||((T=Object.create(null)).operatorListChanged=function operatorListChanged(){B.operatorList.lastChunk&&(B.opListReadCapability.resolve(B.operatorList),B.renderTasks.delete(T))},B.opListReadCapability=(0,_util.createPromiseCapability)(),((E=B).renderTasks||(E.renderTasks=new Set)).add(T),B.operatorList={fnArray:[],argsArray:[],lastChunk:!1},this._stats&&this._stats.time("Page Request"),this._pumpOperatorList(j));return B.opListReadCapability.promise}},{key:"streamTextContent",value:function streamTextContent(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},h=t.normalizeWhitespace,y=void 0!==h&&h,w=t.disableCombineTextItems,A=void 0!==w&&w,T=t.includeMarkedContent,E=void 0!==T&&T;return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,normalizeWhitespace:!0===y,combineTextItems:!0!==A,includeMarkedContent:!0===E},{highWaterMark:100,size:function size(t){return t.items.length}})}},{key:"getTextContent",value:function getTextContent(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._transport._htmlForXfa)return this.getXfa().then((function(t){return _xfa_text.XfaText.textContent(t)}));var h=this.streamTextContent(t);return new Promise((function(t,y){var w=h.getReader(),A={items:[],styles:Object.create(null)};!function pump(){w.read().then((function(h){var y,w=h.value;h.done?t(A):(_extends(A.styles,w.styles),(y=A.items).push.apply(y,_toConsumableArray(w.items)),pump())}),y)}()}))}},{key:"getStructTree",value:function getStructTree(){return this._structTreePromise||(this._structTreePromise=this._transport.getStructTree(this._pageIndex))}},{key:"_destroy",value:function _destroy(){this.destroyed=!0,this._transport.pageCache[this._pageIndex]=null;var t,h=[],y=_createForOfIteratorHelper(this._intentStates.values());try{for(y.s();!(t=y.n()).done;){var w=t.value;if(this._abortOperatorList({intentState:w,reason:new Error("Page was destroyed."),force:!0}),!w.opListReadCapability){var A,T=_createForOfIteratorHelper(w.renderTasks);try{for(T.s();!(A=T.n()).done;){var E=A.value;h.push(E.completed),E.cancel()}}catch(t){T.e(t)}finally{T.f()}}}}catch(t){y.e(t)}finally{y.f()}return this.objs.clear(),this._annotationPromises.clear(),this._jsActionsPromise=null,this._structTreePromise=null,this.pendingCleanup=!1,Promise.all(h)}},{key:"cleanup",value:function cleanup(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.pendingCleanup=!0,this._tryCleanup(t)}},{key:"_tryCleanup",value:function _tryCleanup(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.pendingCleanup)return!1;var h,y=_createForOfIteratorHelper(this._intentStates.values());try{for(y.s();!(h=y.n()).done;){var w=h.value,A=w.renderTasks,T=w.operatorList;if(A.size>0||!T.lastChunk)return!1}}catch(t){y.e(t)}finally{y.f()}return this._intentStates.clear(),this.objs.clear(),this._annotationPromises.clear(),this._jsActionsPromise=null,this._structTreePromise=null,t&&this._stats&&(this._stats=new _display_utils.StatTimer),this.pendingCleanup=!1,!0}},{key:"_startRenderPage",value:function _startRenderPage(t,h){var y=this._intentStates.get(h);y&&(this._stats&&this._stats.timeEnd("Page Request"),y.displayReadyCapability&&y.displayReadyCapability.resolve(t))}},{key:"_renderPageChunk",value:function _renderPageChunk(t,h){for(var y=0,w=t.length;y<w;y++)h.operatorList.fnArray.push(t.fnArray[y]),h.operatorList.argsArray.push(t.argsArray[y]);h.operatorList.lastChunk=t.lastChunk;var A,T=_createForOfIteratorHelper(h.renderTasks);try{for(T.s();!(A=T.n()).done;){A.value.operatorListChanged()}}catch(t){T.e(t)}finally{T.f()}t.lastChunk&&this._tryCleanup()}},{key:"_pumpOperatorList",value:function _pumpOperatorList(t){var h=this,y=t.renderingIntent,w=t.cacheKey,A=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:y,cacheKey:w,annotationStorage:y&_util.RenderingIntentFlag.ANNOTATIONS_STORAGE?this._transport.annotationStorage.serializable:null}).getReader(),T=this._intentStates.get(w);T.streamReader=A;!function pump(){A.read().then((function(t){var y=t.value;t.done?T.streamReader=null:h._transport.destroyed||(h._renderPageChunk(y,T),pump())}),(function(t){if(T.streamReader=null,!h._transport.destroyed){if(T.operatorList){T.operatorList.lastChunk=!0;var y,w=_createForOfIteratorHelper(T.renderTasks);try{for(w.s();!(y=w.n()).done;){y.value.operatorListChanged()}}catch(t){w.e(t)}finally{w.f()}h._tryCleanup()}if(T.displayReadyCapability)T.displayReadyCapability.reject(t);else{if(!T.opListReadCapability)throw t;T.opListReadCapability.reject(t)}}}))}()}},{key:"_abortOperatorList",value:function _abortOperatorList(t){var h=this,y=t.intentState,w=t.reason,A=t.force,T=void 0!==A&&A;if(y.streamReader){if(!T){if(y.renderTasks.size>0)return;if(w instanceof _display_utils.RenderingCancelledException)return void(y.streamReaderCancelTimeout=setTimeout((function(){h._abortOperatorList({intentState:y,reason:w,force:!0}),y.streamReaderCancelTimeout=null}),RENDERING_CANCELLED_TIMEOUT))}if(y.streamReader.cancel(new _util.AbortException(w.message)).catch((function(){})),y.streamReader=null,!this._transport.destroyed){var E,j=_createForOfIteratorHelper(this._intentStates);try{for(j.s();!(E=j.n()).done;){var B=_slicedToArray(E.value,2),N=B[0];if(B[1]===y){this._intentStates.delete(N);break}}}catch(t){j.e(t)}finally{j.f()}this.cleanup()}}}},{key:"stats",get:function get(){return this._stats}}]),PDFPageProxy}();exports.PDFPageProxy=PDFPageProxy;var LoopbackPort=function(){function LoopbackPort(){_classCallCheck(this,LoopbackPort),this._listeners=[],this._deferred=Promise.resolve()}return _createClass(LoopbackPort,[{key:"postMessage",value:function postMessage(t,h){var y=this;var w={data:function cloneValue(t){if(globalThis.structuredClone)return globalThis.structuredClone(t,h);var y=new WeakMap;return function fallbackCloneValue(t){if("function"==typeof t||"symbol"===_typeof(t)||t instanceof URL)throw new Error("LoopbackPort.postMessage - cannot clone: ".concat(null==t?void 0:t.toString()));if("object"!==_typeof(t)||null===t)return t;if(y.has(t))return y.get(t);var w,A;if((w=t.buffer)&&(0,_util.isArrayBuffer)(w))return A=null!=h&&h.includes(w)?new t.constructor(w,t.byteOffset,t.byteLength):new t.constructor(t),y.set(t,A),A;if(t instanceof Map){A=new Map,y.set(t,A);var T,E=_createForOfIteratorHelper(t);try{for(E.s();!(T=E.n()).done;){var j=_slicedToArray(T.value,2),B=j[0],N=j[1];A.set(B,fallbackCloneValue(N))}}catch(t){E.e(t)}finally{E.f()}return A}if(t instanceof Set){A=new Set,y.set(t,A);var V,W=_createForOfIteratorHelper(t);try{for(W.s();!(V=W.n()).done;){var H=V.value;A.add(fallbackCloneValue(H))}}catch(t){W.e(t)}finally{W.f()}return A}for(var G in A=Array.isArray(t)?[]:Object.create(null),y.set(t,A),t){for(var z,$=void 0,J=t;!($=Object.getOwnPropertyDescriptor(J,G));)J=Object.getPrototypeOf(J);void 0!==$.value&&(("function"!=typeof $.value||null!==(z=t.hasOwnProperty)&&void 0!==z&&z.call(t,G))&&(A[G]=fallbackCloneValue($.value)))}return A}(t)}(t)};this._deferred.then((function(){var t,h=_createForOfIteratorHelper(y._listeners);try{for(h.s();!(t=h.n()).done;){t.value.call(y,w)}}catch(t){h.e(t)}finally{h.f()}}))}},{key:"addEventListener",value:function addEventListener(t,h){this._listeners.push(h)}},{key:"removeEventListener",value:function removeEventListener(t,h){var y=this._listeners.indexOf(h);this._listeners.splice(y,1)}},{key:"terminate",value:function terminate(){this._listeners.length=0}}]),LoopbackPort}();exports.LoopbackPort=LoopbackPort;var PDFWorkerUtil={isWorkerDisabled:!1,fallbackWorkerSrc:null,fakeWorkerId:0};if(_is_node.isNodeJS)PDFWorkerUtil.isWorkerDisabled=!0,PDFWorkerUtil.fallbackWorkerSrc="./pdf.worker.js";else if("object"===("undefined"==typeof document?"undefined":_typeof(document))){var _document,_document$currentScri,pdfjsFilePath=null===(_document=document)||void 0===_document||null===(_document$currentScri=_document.currentScript)||void 0===_document$currentScri?void 0:_document$currentScri.src;pdfjsFilePath&&(PDFWorkerUtil.fallbackWorkerSrc=pdfjsFilePath.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}PDFWorkerUtil.createCDNWrapper=function(t){var h='importScripts("'.concat(t,'");');return URL.createObjectURL(new Blob([h]))};var PDFWorker=function(){function PDFWorker(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},h=t.name,y=void 0===h?null:h,w=t.port,A=void 0===w?null:w,T=t.verbosity,E=void 0===T?(0,_util.getVerbosityLevel)():T;if(_classCallCheck(this,PDFWorker),A&&PDFWorker._workerPorts.has(A))throw new Error("Cannot use more than one PDFWorker per port.");if(this.name=y,this.destroyed=!1,this.postMessageTransfers=!0,this.verbosity=E,this._readyCapability=(0,_util.createPromiseCapability)(),this._port=null,this._webWorker=null,this._messageHandler=null,A)return PDFWorker._workerPorts.set(A,this),void this._initializeFromPort(A);this._initialize()}return _createClass(PDFWorker,[{key:"promise",get:function get(){return this._readyCapability.promise}},{key:"port",get:function get(){return this._port}},{key:"messageHandler",get:function get(){return this._messageHandler}},{key:"_initializeFromPort",value:function _initializeFromPort(t){this._port=t,this._messageHandler=new _message_handler.MessageHandler("main","worker",t),this._messageHandler.on("ready",(function(){})),this._readyCapability.resolve()}},{key:"_initialize",value:function _initialize(){var t=this;if("undefined"!=typeof Worker&&!PDFWorkerUtil.isWorkerDisabled&&!PDFWorker._mainThreadWorkerMessageHandler){var h=PDFWorker.workerSrc;try{(0,_util.isSameOrigin)(window.location.href,h)||(h=PDFWorkerUtil.createCDNWrapper(new URL(h,window.location).href));var y=new Worker(h),w=new _message_handler.MessageHandler("main","worker",y),A=function terminateEarly(){y.removeEventListener("error",T),w.destroy(),y.terminate(),t.destroyed?t._readyCapability.reject(new Error("Worker was destroyed")):t._setupFakeWorker()},T=function onWorkerError(){t._webWorker||A()};y.addEventListener("error",T),w.on("test",(function(h){y.removeEventListener("error",T),t.destroyed?A():h?(t._messageHandler=w,t._port=y,t._webWorker=y,h.supportTransfers||(t.postMessageTransfers=!1),t._readyCapability.resolve(),w.send("configure",{verbosity:t.verbosity})):(t._setupFakeWorker(),w.destroy(),y.terminate())})),w.on("ready",(function(h){if(y.removeEventListener("error",T),t.destroyed)A();else try{E()}catch(h){t._setupFakeWorker()}}));var E=function sendTest(){var h=new Uint8Array([t.postMessageTransfers?255:0]);try{w.send("test",h,[h.buffer])}catch(t){(0,_util.warn)("Cannot use postMessage transfers."),h[0]=0,w.send("test",h)}};return void E()}catch(t){(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}},{key:"_setupFakeWorker",value:function _setupFakeWorker(){var t=this;PDFWorkerUtil.isWorkerDisabled||((0,_util.warn)("Setting up fake worker."),PDFWorkerUtil.isWorkerDisabled=!0),PDFWorker._setupFakeWorkerGlobal.then((function(h){if(t.destroyed)t._readyCapability.reject(new Error("Worker was destroyed"));else{var y=new LoopbackPort;t._port=y;var w="fake".concat(PDFWorkerUtil.fakeWorkerId++),A=new _message_handler.MessageHandler(w+"_worker",w,y);h.setup(A,y);var T=new _message_handler.MessageHandler(w,w+"_worker",y);t._messageHandler=T,t._readyCapability.resolve(),T.send("configure",{verbosity:t.verbosity})}})).catch((function(h){t._readyCapability.reject(new Error('Setting up fake worker failed: "'.concat(h.message,'".')))}))}},{key:"destroy",value:function destroy(){this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),PDFWorker._workerPorts.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}}],[{key:"_workerPorts",get:function get(){return(0,_util.shadow)(this,"_workerPorts",new WeakMap)}},{key:"fromPort",value:function fromPort(t){if(null==t||!t.port)throw new Error("PDFWorker.fromPort - invalid method signature.");return this._workerPorts.has(t.port)?this._workerPorts.get(t.port):new PDFWorker(t)}},{key:"workerSrc",get:function get(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc;if(null!==PDFWorkerUtil.fallbackWorkerSrc)return _is_node.isNodeJS||(0,_display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.'),PDFWorkerUtil.fallbackWorkerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}},{key:"_mainThreadWorkerMessageHandler",get:function get(){try{var t;return(null===(t=globalThis.pdfjsWorker)||void 0===t?void 0:t.WorkerMessageHandler)||null}catch(t){return null}}},{key:"_setupFakeWorkerGlobal",get:function get(){var _this10=this,loader=function(){var _ref15=_asyncToGenerator(_regenerator.default.mark((function _callee3(){var mainWorkerMessageHandler,worker;return _regenerator.default.wrap((function _callee3$(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:if(mainWorkerMessageHandler=_this10._mainThreadWorkerMessageHandler,!mainWorkerMessageHandler){_context3.next=3;break}return _context3.abrupt("return",mainWorkerMessageHandler);case 3:if(!_is_node.isNodeJS){_context3.next=6;break}return worker=eval("require")(_this10.workerSrc),_context3.abrupt("return",worker.WorkerMessageHandler);case 6:return _context3.next=8,(0,_display_utils.loadScript)(_this10.workerSrc);case 8:return _context3.abrupt("return",window.pdfjsWorker.WorkerMessageHandler);case 9:case"end":return _context3.stop()}}),_callee3)})));return function loader(){return _ref15.apply(this,arguments)}}();return(0,_util.shadow)(this,"_setupFakeWorkerGlobal",loader())}}]),PDFWorker}();exports.PDFWorker=PDFWorker,PDFWorker.getWorkerSrc=function(){return(0,_display_utils.deprecated)("`PDFWorker.getWorkerSrc()`, please use `PDFWorker.workerSrc` instead."),this.workerSrc};var WorkerTransport=function(){function WorkerTransport(t,h,y,w){_classCallCheck(this,WorkerTransport),this.messageHandler=t,this.loadingTask=h,this.commonObjs=new PDFObjects,this.fontLoader=new _font_loader.FontLoader({docId:h.docId,onUnsupportedFeature:this._onUnsupportedFeature.bind(this),ownerDocument:w.ownerDocument,styleElement:w.styleElement}),this._params=w,w.useWorkerFetch||(this.CMapReaderFactory=new w.CMapReaderFactory({baseUrl:w.cMapUrl,isCompressed:w.cMapPacked}),this.StandardFontDataFactory=new w.StandardFontDataFactory({baseUrl:w.standardFontDataUrl})),this.destroyed=!1,this.destroyCapability=null,this._passwordCapability=null,this._networkStream=y,this._fullReader=null,this._lastProgress=null,this.pageCache=[],this.pagePromises=[],this.downloadInfoCapability=(0,_util.createPromiseCapability)(),this.setupMessageHandler()}var t;return _createClass(WorkerTransport,[{key:"annotationStorage",get:function get(){return(0,_util.shadow)(this,"annotationStorage",new _annotation_storage.AnnotationStorage)}},{key:"getRenderingIntent",value:function getRenderingIntent(t){var h=arguments.length>1&&void 0!==arguments[1]?arguments[1]:_util.AnnotationMode.ENABLE,y=arguments.length>2&&void 0!==arguments[2]&&arguments[2],w=_util.RenderingIntentFlag.DISPLAY,A="";switch(t){case"any":w=_util.RenderingIntentFlag.ANY;break;case"display":break;case"print":w=_util.RenderingIntentFlag.PRINT;break;default:(0,_util.warn)("getRenderingIntent - invalid intent: ".concat(t))}switch(h){case _util.AnnotationMode.DISABLE:w+=_util.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case _util.AnnotationMode.ENABLE:break;case _util.AnnotationMode.ENABLE_FORMS:w+=_util.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case _util.AnnotationMode.ENABLE_STORAGE:w+=_util.RenderingIntentFlag.ANNOTATIONS_STORAGE,A=this.annotationStorage.lastModified;break;default:(0,_util.warn)("getRenderingIntent - invalid annotationMode: ".concat(h))}return y&&(w+=_util.RenderingIntentFlag.OPLIST),{renderingIntent:w,cacheKey:"".concat(w,"_").concat(A)}}},{key:"destroy",value:function destroy(){var t=this;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=(0,_util.createPromiseCapability)(),this._passwordCapability&&this._passwordCapability.reject(new Error("Worker was destroyed during onPassword callback"));var h,y=[],w=_createForOfIteratorHelper(this.pageCache);try{for(w.s();!(h=w.n()).done;){var A=h.value;A&&y.push(A._destroy())}}catch(t){w.e(t)}finally{w.f()}this.pageCache.length=0,this.pagePromises.length=0,this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();var T=this.messageHandler.sendWithPromise("Terminate",null);return y.push(T),Promise.all(y).then((function(){t.commonObjs.clear(),t.fontLoader.clear(),t._getFieldObjectsPromise=null,t._hasJSActionsPromise=null,t._networkStream&&t._networkStream.cancelAllRequests(new _util.AbortException("Worker was terminated.")),t.messageHandler&&(t.messageHandler.destroy(),t.messageHandler=null),t.destroyCapability.resolve()}),this.destroyCapability.reject),this.destroyCapability.promise}},{key:"setupMessageHandler",value:function setupMessageHandler(){var t=this,h=this.messageHandler,y=this.loadingTask;h.on("GetReader",(function(h,y){(0,_util.assert)(t._networkStream,"GetReader - no `IPDFStream` instance available."),t._fullReader=t._networkStream.getFullReader(),t._fullReader.onProgress=function(h){t._lastProgress={loaded:h.loaded,total:h.total}},y.onPull=function(){t._fullReader.read().then((function(t){var h=t.value;t.done?y.close():((0,_util.assert)((0,_util.isArrayBuffer)(h),"GetReader - expected an ArrayBuffer."),y.enqueue(new Uint8Array(h),1,[h]))})).catch((function(t){y.error(t)}))},y.onCancel=function(h){t._fullReader.cancel(h),y.ready.catch((function(h){if(!t.destroyed)throw h}))}})),h.on("ReaderHeadersReady",(function(h){var w=(0,_util.createPromiseCapability)(),A=t._fullReader;return A.headersReady.then((function(){if(!A.isStreamingSupported||!A.isRangeSupported){var h;if(t._lastProgress)null===(h=y.onProgress)||void 0===h||h.call(y,t._lastProgress);A.onProgress=function(t){var h;null===(h=y.onProgress)||void 0===h||h.call(y,{loaded:t.loaded,total:t.total})}}w.resolve({isStreamingSupported:A.isStreamingSupported,isRangeSupported:A.isRangeSupported,contentLength:A.contentLength})}),w.reject),w.promise})),h.on("GetRangeReader",(function(h,y){(0,_util.assert)(t._networkStream,"GetRangeReader - no `IPDFStream` instance available.");var w=t._networkStream.getRangeReader(h.begin,h.end);w?(y.onPull=function(){w.read().then((function(t){var h=t.value;t.done?y.close():((0,_util.assert)((0,_util.isArrayBuffer)(h),"GetRangeReader - expected an ArrayBuffer."),y.enqueue(new Uint8Array(h),1,[h]))})).catch((function(t){y.error(t)}))},y.onCancel=function(h){w.cancel(h),y.ready.catch((function(h){if(!t.destroyed)throw h}))}):y.close()})),h.on("GetDoc",(function(h){var w=h.pdfInfo;t._numPages=w.numPages,t._htmlForXfa=w.htmlForXfa,delete w.htmlForXfa,y._capability.resolve(new PDFDocumentProxy(w,t))})),h.on("DocException",(function(t){var h;switch(t.name){case"PasswordException":h=new _util.PasswordException(t.message,t.code);break;case"InvalidPDFException":h=new _util.InvalidPDFException(t.message);break;case"MissingPDFException":h=new _util.MissingPDFException(t.message);break;case"UnexpectedResponseException":h=new _util.UnexpectedResponseException(t.message,t.status);break;case"UnknownErrorException":h=new _util.UnknownErrorException(t.message,t.details);break;default:(0,_util.unreachable)("DocException - expected a valid Error.")}y._capability.reject(h)})),h.on("PasswordRequest",(function(h){if(t._passwordCapability=(0,_util.createPromiseCapability)(),y.onPassword){try{y.onPassword((function updatePassword(h){t._passwordCapability.resolve({password:h})}),h.code)}catch(h){t._passwordCapability.reject(h)}}else t._passwordCapability.reject(new _util.PasswordException(h.message,h.code));return t._passwordCapability.promise})),h.on("DataLoaded",(function(h){var w;null===(w=y.onProgress)||void 0===w||w.call(y,{loaded:h.length,total:h.length}),t.downloadInfoCapability.resolve(h)})),h.on("StartRenderPage",(function(h){t.destroyed||t.pageCache[h.pageIndex]._startRenderPage(h.transparency,h.cacheKey)})),h.on("commonobj",(function(y){var w;if(!t.destroyed){var A=_slicedToArray(y,3),T=A[0],E=A[1],j=A[2];if(!t.commonObjs.has(T))switch(E){case"Font":var B=t._params;if("error"in j){var N=j.error;(0,_util.warn)("Error during font loading: ".concat(N)),t.commonObjs.resolve(T,N);break}var V=null;B.pdfBug&&null!==(w=globalThis.FontInspector)&&void 0!==w&&w.enabled&&(V={registerFont:function registerFont(t,h){globalThis.FontInspector.fontAdded(t,h)}});var W=new _font_loader.FontFaceObject(j,{isEvalSupported:B.isEvalSupported,disableFontFace:B.disableFontFace,ignoreErrors:B.ignoreErrors,onUnsupportedFeature:t._onUnsupportedFeature.bind(t),fontRegistry:V});t.fontLoader.bind(W).catch((function(t){return h.sendWithPromise("FontFallback",{id:T})})).finally((function(){!B.fontExtraProperties&&W.data&&(W.data=null),t.commonObjs.resolve(T,W)}));break;case"FontPath":case"Image":t.commonObjs.resolve(T,j);break;default:throw new Error("Got unknown common object type ".concat(E))}}})),h.on("obj",(function(h){var y;if(!t.destroyed){var w=_slicedToArray(h,4),A=w[0],T=w[1],E=w[2],j=w[3],B=t.pageCache[T];if(!B.objs.has(A))switch(E){case"Image":B.objs.resolve(A,j);(null==j||null===(y=j.data)||void 0===y?void 0:y.length)>8e6&&(B.cleanupAfterRender=!0);break;case"Pattern":B.objs.resolve(A,j);break;default:throw new Error("Got unknown object type ".concat(E))}}})),h.on("DocProgress",(function(h){var w;t.destroyed||null===(w=y.onProgress)||void 0===w||w.call(y,{loaded:h.loaded,total:h.total})})),h.on("UnsupportedFeature",this._onUnsupportedFeature.bind(this)),h.on("FetchBuiltInCMap",(function(h){return t.destroyed?Promise.reject(new Error("Worker was destroyed.")):t.CMapReaderFactory?t.CMapReaderFactory.fetch(h):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))})),h.on("FetchStandardFontData",(function(h){return t.destroyed?Promise.reject(new Error("Worker was destroyed.")):t.StandardFontDataFactory?t.StandardFontDataFactory.fetch(h):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter."))}))}},{key:"_onUnsupportedFeature",value:function _onUnsupportedFeature(t){var h,y,w=t.featureId;this.destroyed||null===(h=(y=this.loadingTask).onUnsupportedFeature)||void 0===h||h.call(y,w)}},{key:"getData",value:function getData(){return this.messageHandler.sendWithPromise("GetData",null)}},{key:"getPage",value:function getPage(t){var h=this;if(!Number.isInteger(t)||t<=0||t>this._numPages)return Promise.reject(new Error("Invalid page request"));var y=t-1;if(y in this.pagePromises)return this.pagePromises[y];var w=this.messageHandler.sendWithPromise("GetPage",{pageIndex:y}).then((function(t){if(h.destroyed)throw new Error("Transport destroyed");var w=new PDFPageProxy(y,t,h,h._params.ownerDocument,h._params.pdfBug);return h.pageCache[y]=w,w}));return this.pagePromises[y]=w,w}},{key:"getPageIndex",value:function getPageIndex(t){return this.messageHandler.sendWithPromise("GetPageIndex",{ref:t})}},{key:"getAnnotations",value:function getAnnotations(t,h){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:t,intent:h})}},{key:"saveDocument",value:function saveDocument(){var t,h,y=this;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:this.annotationStorage.serializable,filename:null!==(t=null===(h=this._fullReader)||void 0===h?void 0:h.filename)&&void 0!==t?t:null}).finally((function(){y.annotationStorage.resetModified()}))}},{key:"getFieldObjects",value:function getFieldObjects(){return this._getFieldObjectsPromise||(this._getFieldObjectsPromise=this.messageHandler.sendWithPromise("GetFieldObjects",null))}},{key:"hasJSActions",value:function hasJSActions(){return this._hasJSActionsPromise||(this._hasJSActionsPromise=this.messageHandler.sendWithPromise("HasJSActions",null))}},{key:"getCalculationOrderIds",value:function getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}},{key:"getDestinations",value:function getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}},{key:"getDestination",value:function getDestination(t){return"string"!=typeof t?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:t})}},{key:"getPageLabels",value:function getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}},{key:"getPageLayout",value:function getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}},{key:"getPageMode",value:function getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}},{key:"getViewerPreferences",value:function getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}},{key:"getOpenAction",value:function getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}},{key:"getAttachments",value:function getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}},{key:"getJavaScript",value:function getJavaScript(){return this.messageHandler.sendWithPromise("GetJavaScript",null)}},{key:"getDocJSActions",value:function getDocJSActions(){return this.messageHandler.sendWithPromise("GetDocJSActions",null)}},{key:"getPageJSActions",value:function getPageJSActions(t){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:t})}},{key:"getStructTree",value:function getStructTree(t){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:t})}},{key:"getOutline",value:function getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}},{key:"getOptionalContentConfig",value:function getOptionalContentConfig(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then((function(t){return new _optional_content_config.OptionalContentConfig(t)}))}},{key:"getPermissions",value:function getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}},{key:"getMetadata",value:function getMetadata(){var t=this;return this.messageHandler.sendWithPromise("GetMetadata",null).then((function(h){var y,w,A,T;return{info:h[0],metadata:h[1]?new _metadata.Metadata(h[1]):null,contentDispositionFilename:null!==(y=null===(w=t._fullReader)||void 0===w?void 0:w.filename)&&void 0!==y?y:null,contentLength:null!==(A=null===(T=t._fullReader)||void 0===T?void 0:T.contentLength)&&void 0!==A?A:null}}))}},{key:"getMarkInfo",value:function getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}},{key:"getStats",value:function getStats(){return this.messageHandler.sendWithPromise("GetStats",null)}},{key:"startCleanup",value:(t=_asyncToGenerator(_regenerator.default.mark((function _callee4(){var t,h,y,w,A=arguments;return _regenerator.default.wrap((function _callee4$(T){for(;;)switch(T.prev=T.next){case 0:return t=A.length>0&&void 0!==A[0]&&A[0],T.next=3,this.messageHandler.sendWithPromise("Cleanup",null);case 3:if(!this.destroyed){T.next=5;break}return T.abrupt("return");case 5:h=0,y=this.pageCache.length;case 6:if(!(h<y)){T.next=16;break}if(w=this.pageCache[h]){T.next=10;break}return T.abrupt("continue",13);case 10:if(w.cleanup()){T.next=13;break}throw new Error("startCleanup: Page ".concat(h+1," is currently rendering."));case 13:h++,T.next=6;break;case 16:this.commonObjs.clear(),t||this.fontLoader.clear(),this._getFieldObjectsPromise=null,this._hasJSActionsPromise=null;case 20:case"end":return T.stop()}}),_callee4,this)}))),function startCleanup(){return t.apply(this,arguments)})},{key:"loadingParams",get:function get(){var t=this._params;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:t.disableAutoFetch,enableXfa:t.enableXfa})}}]),WorkerTransport}(),PDFObjects=function(){function PDFObjects(){_classCallCheck(this,PDFObjects),this._objs=Object.create(null)}return _createClass(PDFObjects,[{key:"_ensureObj",value:function _ensureObj(t){return this._objs[t]?this._objs[t]:this._objs[t]={capability:(0,_util.createPromiseCapability)(),data:null,resolved:!1}}},{key:"get",value:function get(t){var h=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(h)return this._ensureObj(t).capability.promise.then(h),null;var y=this._objs[t];if(!y||!y.resolved)throw new Error("Requesting object that isn't resolved yet ".concat(t,"."));return y.data}},{key:"has",value:function has(t){var h=this._objs[t];return(null==h?void 0:h.resolved)||!1}},{key:"resolve",value:function resolve(t,h){var y=this._ensureObj(t);y.resolved=!0,y.data=h,y.capability.resolve(h)}},{key:"clear",value:function clear(){this._objs=Object.create(null)}}]),PDFObjects}(),RenderTask=function(){function RenderTask(t){_classCallCheck(this,RenderTask),this._internalRenderTask=t,this.onContinue=null}return _createClass(RenderTask,[{key:"promise",get:function get(){return this._internalRenderTask.capability.promise}},{key:"cancel",value:function cancel(){this._internalRenderTask.cancel()}}]),RenderTask}();exports.RenderTask=RenderTask;var InternalRenderTask=function(){function InternalRenderTask(t){var h=t.callback,y=t.params,w=t.objs,A=t.commonObjs,T=t.annotationCanvasMap,E=t.operatorList,j=t.pageIndex,B=t.canvasFactory,N=t.useRequestAnimationFrame,V=void 0!==N&&N,W=t.pdfBug,H=void 0!==W&&W;_classCallCheck(this,InternalRenderTask),this.callback=h,this.params=y,this.objs=w,this.commonObjs=A,this.annotationCanvasMap=T,this.operatorListIdx=null,this.operatorList=E,this._pageIndex=j,this.canvasFactory=B,this._pdfBug=H,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=!0===V&&"undefined"!=typeof window,this.cancelled=!1,this.capability=(0,_util.createPromiseCapability)(),this.task=new RenderTask(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=y.canvasContext.canvas}var t;return _createClass(InternalRenderTask,[{key:"completed",get:function get(){return this.capability.promise.catch((function(){}))}},{key:"initializeGraphics",value:function initializeGraphics(t){var h,y=t.transparency,w=void 0!==y&&y,A=t.optionalContentConfig;if(!this.cancelled){if(this._canvas){if(InternalRenderTask.canvasInUse.has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");InternalRenderTask.canvasInUse.add(this._canvas)}this._pdfBug&&null!==(h=globalThis.StepperManager)&&void 0!==h&&h.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());var T=this.params,E=T.canvasContext,j=T.viewport,B=T.transform,N=T.imageLayer,V=T.background;this.gfx=new _canvas.CanvasGraphics(E,this.commonObjs,this.objs,this.canvasFactory,N,A,this.annotationCanvasMap),this.gfx.beginDrawing({transform:B,viewport:j,transparency:w,background:V}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback&&this.graphicsReadyCallback()}}},{key:"cancel",value:function cancel(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.running=!1,this.cancelled=!0,this.gfx&&this.gfx.endDrawing(),this._canvas&&InternalRenderTask.canvasInUse.delete(this._canvas),this.callback(t||new _display_utils.RenderingCancelledException("Rendering cancelled, page ".concat(this._pageIndex+1),"canvas"))}},{key:"operatorListChanged",value:function operatorListChanged(){this.graphicsReady?(this.stepper&&this.stepper.updateOperatorList(this.operatorList),this.running||this._continue()):this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound)}},{key:"_continue",value:function _continue(){this.running=!0,this.cancelled||(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}},{key:"_scheduleNext",value:function _scheduleNext(){var t=this;this._useRequestAnimationFrame?window.requestAnimationFrame((function(){t._nextBound().catch(t._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}},{key:"_next",value:(t=_asyncToGenerator(_regenerator.default.mark((function _callee5(){return _regenerator.default.wrap((function _callee5$(t){for(;;)switch(t.prev=t.next){case 0:if(!this.cancelled){t.next=2;break}return t.abrupt("return");case 2:this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),this._canvas&&InternalRenderTask.canvasInUse.delete(this._canvas),this.callback()));case 4:case"end":return t.stop()}}),_callee5,this)}))),function _next(){return t.apply(this,arguments)})}],[{key:"canvasInUse",get:function get(){return(0,_util.shadow)(this,"canvasInUse",new WeakSet)}}]),InternalRenderTask}(),version="2.12.223";exports.version=version;var build="3320678e0";exports.build=build},(t,h,y)=>{"use strict";Object.defineProperty(h,"__esModule",{value:!0}),h.FontLoader=h.FontFaceObject=void 0;var w=function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}(y(2)),A=y(4);function _setPrototypeOf(t,h){return _setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(t,h){return t.__proto__=h,t},_setPrototypeOf(t,h)}function _createSuper(t){var h=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var y,w=_getPrototypeOf(t);if(h){var A=_getPrototypeOf(this).constructor;y=Reflect.construct(w,arguments,A)}else y=w.apply(this,arguments);return function _possibleConstructorReturn(t,h){if(h&&("object"===_typeof(h)||"function"==typeof h))return h;if(void 0!==h)throw new TypeError("Derived constructors may only return object or undefined");return function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,y)}}function _getPrototypeOf(t){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)},_getPrototypeOf(t)}function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function asyncGeneratorStep(t,h,y,w,A,T,E){try{var j=t[T](E),B=j.value}catch(t){return void y(t)}j.done?h(B):Promise.resolve(B).then(w,A)}function _createForOfIteratorHelper(t,h){var y="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!y){if(Array.isArray(t)||(y=function _unsupportedIterableToArray(t,h){if(!t)return;if("string"==typeof t)return _arrayLikeToArray(t,h);var y=Object.prototype.toString.call(t).slice(8,-1);"Object"===y&&t.constructor&&(y=t.constructor.name);if("Map"===y||"Set"===y)return Array.from(t);if("Arguments"===y||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(y))return _arrayLikeToArray(t,h)}(t))||h&&t&&"number"==typeof t.length){y&&(t=y);var w=0,A=function F(){};return{s:A,n:function n(){return w>=t.length?{done:!0}:{done:!1,value:t[w++]}},e:function e(t){throw t},f:A}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var T,E=!0,j=!1;return{s:function s(){y=y.call(t)},n:function n(){var t=y.next();return E=t.done,t},e:function e(t){j=!0,T=t},f:function f(){try{E||null==y.return||y.return()}finally{if(j)throw T}}}}function _arrayLikeToArray(t,h){(null==h||h>t.length)&&(h=t.length);for(var y=0,w=new Array(h);y<h;y++)w[y]=t[y];return w}function _classCallCheck(t,h){if(!(t instanceof h))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,h){for(var y=0;y<h.length;y++){var w=h[y];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(t,(A=w.key,T=void 0,T=function _toPrimitive(t,h){if("object"!==_typeof(t)||null===t)return t;var y=t[Symbol.toPrimitive];if(void 0!==y){var w=y.call(t,h||"default");if("object"!==_typeof(w))return w;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===h?String:Number)(t)}(A,"string"),"symbol"===_typeof(T)?T:String(T)),w)}var A,T}function _createClass(t,h,y){return h&&_defineProperties(t.prototype,h),y&&_defineProperties(t,y),Object.defineProperty(t,"prototype",{writable:!1}),t}var T,E=function(){function BaseFontLoader(t){var h=t.docId,y=t.onUnsupportedFeature,w=t.ownerDocument,T=void 0===w?globalThis.document:w;t.styleElement;_classCallCheck(this,BaseFontLoader),this.constructor===BaseFontLoader&&(0,A.unreachable)("Cannot initialize BaseFontLoader."),this.docId=h,this._onUnsupportedFeature=y,this._document=T,this.nativeFontFaces=[],this.styleElement=null}var t;return _createClass(BaseFontLoader,[{key:"addNativeFontFace",value:function addNativeFontFace(t){this.nativeFontFaces.push(t),this._document.fonts.add(t)}},{key:"insertRule",value:function insertRule(t){var h=this.styleElement;h||((h=this.styleElement=this._document.createElement("style")).id="PDFJS_FONT_STYLE_TAG_".concat(this.docId),this._document.documentElement.getElementsByTagName("head")[0].appendChild(h));var y=h.sheet;y.insertRule(t,y.cssRules.length)}},{key:"clear",value:function clear(){var t,h=_createForOfIteratorHelper(this.nativeFontFaces);try{for(h.s();!(t=h.n()).done;){var y=t.value;this._document.fonts.delete(y)}}catch(t){h.e(t)}finally{h.f()}this.nativeFontFaces.length=0,this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}},{key:"bind",value:(t=function _asyncToGenerator(t){return function(){var h=this,y=arguments;return new Promise((function(w,A){var T=t.apply(h,y);function _next(t){asyncGeneratorStep(T,w,A,_next,_throw,"next",t)}function _throw(t){asyncGeneratorStep(T,w,A,_next,_throw,"throw",t)}_next(void 0)}))}}(w.default.mark((function _callee(t){var h,y,T=this;return w.default.wrap((function _callee$(w){for(;;)switch(w.prev=w.next){case 0:if(!t.attached&&!t.missingFile){w.next=2;break}return w.abrupt("return");case 2:if(t.attached=!0,!this.isFontLoadingAPISupported){w.next=19;break}if(!(h=t.createNativeFontFace())){w.next=18;break}return this.addNativeFontFace(h),w.prev=7,w.next=10,h.loaded;case 10:w.next=18;break;case 12:throw w.prev=12,w.t0=w.catch(7),this._onUnsupportedFeature({featureId:A.UNSUPPORTED_FEATURES.errorFontLoadNative}),(0,A.warn)("Failed to load font '".concat(h.family,"': '").concat(w.t0,"'.")),t.disableFontFace=!0,w.t0;case 18:return w.abrupt("return");case 19:if(!(y=t.createFontFaceRule())){w.next=26;break}if(this.insertRule(y),!this.isSyncFontLoadingSupported){w.next=24;break}return w.abrupt("return");case 24:return w.next=26,new Promise((function(h){var w=T._queueLoadingCallback(h);T._prepareFontLoadEvent([y],[t],w)}));case 26:case"end":return w.stop()}}),_callee,this,[[7,12]])}))),function bind(h){return t.apply(this,arguments)})},{key:"_queueLoadingCallback",value:function _queueLoadingCallback(t){(0,A.unreachable)("Abstract method `_queueLoadingCallback`.")}},{key:"isFontLoadingAPISupported",get:function get(){var t,h=!(null===(t=this._document)||void 0===t||!t.fonts);return(0,A.shadow)(this,"isFontLoadingAPISupported",h)}},{key:"isSyncFontLoadingSupported",get:function get(){(0,A.unreachable)("Abstract method `isSyncFontLoadingSupported`.")}},{key:"_loadTestFont",get:function get(){(0,A.unreachable)("Abstract method `_loadTestFont`.")}},{key:"_prepareFontLoadEvent",value:function _prepareFontLoadEvent(t,h,y){(0,A.unreachable)("Abstract method `_prepareFontLoadEvent`.")}}]),BaseFontLoader}();h.FontLoader=T,h.FontLoader=T=function(t){!function _inherits(t,h){if("function"!=typeof h&&null!==h)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(h&&h.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),h&&_setPrototypeOf(t,h)}(GenericFontLoader,t);var h=_createSuper(GenericFontLoader);function GenericFontLoader(t){var y;return _classCallCheck(this,GenericFontLoader),(y=h.call(this,t)).loadingContext={requests:[],nextRequestId:0},y.loadTestFontId=0,y}return _createClass(GenericFontLoader,[{key:"isSyncFontLoadingSupported",get:function get(){var t=!1;if("undefined"==typeof navigator)t=!0;else{var h=/Mozilla\/5.0.*?rv:(\d+).*? Gecko/.exec(navigator.userAgent);(null==h?void 0:h[1])>=14&&(t=!0)}return(0,A.shadow)(this,"isSyncFontLoadingSupported",t)}},{key:"_queueLoadingCallback",value:function _queueLoadingCallback(t){var h=this.loadingContext,y={id:"pdfjs-font-loading-".concat(h.nextRequestId++),done:!1,complete:function completeRequest(){for((0,A.assert)(!y.done,"completeRequest() cannot be called twice."),y.done=!0;h.requests.length>0&&h.requests[0].done;){var t=h.requests.shift();setTimeout(t.callback,0)}},callback:t};return h.requests.push(y),y}},{key:"_loadTestFont",get:function get(){return(0,A.shadow)(this,"_loadTestFont",function getLoadTestFont(){return atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==")}())}},{key:"_prepareFontLoadEvent",value:function _prepareFontLoadEvent(t,h,y){function int32(t,h){return t.charCodeAt(h)<<24|t.charCodeAt(h+1)<<16|t.charCodeAt(h+2)<<8|255&t.charCodeAt(h+3)}function spliceString(t,h,y,w){return t.substring(0,h)+w+t.substring(h+y)}var w,T,E=this._document.createElement("canvas");E.width=1,E.height=1;var j=E.getContext("2d"),B=0;var N="lt".concat(Date.now()).concat(this.loadTestFontId++),V=this._loadTestFont,W=1482184792,H=int32(V=spliceString(V,976,N.length,N),16);for(w=0,T=N.length-3;w<T;w+=4)H=H-W+int32(N,w)|0;w<N.length&&(H=H-W+int32(N+"XXX",w)|0),V=spliceString(V,16,4,(0,A.string32)(H));var G="url(data:font/opentype;base64,".concat(btoa(V),");"),z='@font-face {font-family:"'.concat(N,'";src:').concat(G,"}");this.insertRule(z);var $,J=[],X=_createForOfIteratorHelper(h);try{for(X.s();!($=X.n()).done;){var K=$.value;J.push(K.loadedName)}}catch(t){X.e(t)}finally{X.f()}J.push(N);var ne=this._document.createElement("div");ne.style.visibility="hidden",ne.style.width=ne.style.height="10px",ne.style.position="absolute",ne.style.top=ne.style.left="0px";for(var ue=0,pe=J;ue<pe.length;ue++){var me=pe[ue],ge=this._document.createElement("span");ge.textContent="Hi",ge.style.fontFamily=me,ne.appendChild(ge)}this._document.body.appendChild(ne),function isFontReady(t,h){if(++B>30)return(0,A.warn)("Load test font never loaded."),void h();j.font="30px "+t,j.fillText(".",0,20),j.getImageData(0,0,1,1).data[3]>0?h():setTimeout(isFontReady.bind(null,t,h))}(N,(function(){ne.remove(),y.complete()}))}}]),GenericFontLoader}(E);var j=function(){function FontFaceObject(t,h){var y=h.isEvalSupported,w=void 0===y||y,A=h.disableFontFace,T=void 0!==A&&A,E=h.ignoreErrors,j=void 0!==E&&E,B=h.onUnsupportedFeature,N=h.fontRegistry,V=void 0===N?null:N;for(var W in _classCallCheck(this,FontFaceObject),this.compiledGlyphs=Object.create(null),t)this[W]=t[W];this.isEvalSupported=!1!==w,this.disableFontFace=!0===T,this.ignoreErrors=!0===j,this._onUnsupportedFeature=B,this.fontRegistry=V}return _createClass(FontFaceObject,[{key:"createNativeFontFace",value:function createNativeFontFace(){if(!this.data||this.disableFontFace)return null;var t;if(this.cssFontInfo){var h={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(h.style="oblique ".concat(this.cssFontInfo.italicAngle,"deg")),t=new FontFace(this.cssFontInfo.fontFamily,this.data,h)}else t=new FontFace(this.loadedName,this.data,{});return this.fontRegistry&&this.fontRegistry.registerFont(this),t}},{key:"createFontFaceRule",value:function createFontFaceRule(){if(!this.data||this.disableFontFace)return null;var t,h=(0,A.bytesToString)(this.data),y="url(data:".concat(this.mimetype,";base64,").concat(btoa(h),");");if(this.cssFontInfo){var w="font-weight: ".concat(this.cssFontInfo.fontWeight,";");this.cssFontInfo.italicAngle&&(w+="font-style: oblique ".concat(this.cssFontInfo.italicAngle,"deg;")),t='@font-face {font-family:"'.concat(this.cssFontInfo.fontFamily,'";').concat(w,"src:").concat(y,"}")}else t='@font-face {font-family:"'.concat(this.loadedName,'";src:').concat(y,"}");return this.fontRegistry&&this.fontRegistry.registerFont(this,y),t}},{key:"getPathGenerator",value:function getPathGenerator(t,h){if(void 0!==this.compiledGlyphs[h])return this.compiledGlyphs[h];var y;try{y=t.get(this.loadedName+"_path_"+h)}catch(t){if(!this.ignoreErrors)throw t;return this._onUnsupportedFeature({featureId:A.UNSUPPORTED_FEATURES.errorFontGetPath}),(0,A.warn)('getPathGenerator - ignoring character: "'.concat(t,'".')),this.compiledGlyphs[h]=function(t,h){}}if(this.isEvalSupported&&A.IsEvalSupportedCached.value){var w,T=[],E=_createForOfIteratorHelper(y);try{for(E.s();!(w=E.n()).done;){var j=w.value,B=void 0!==j.args?j.args.join(","):"";T.push("c.",j.cmd,"(",B,");\n")}}catch(t){E.e(t)}finally{E.f()}return this.compiledGlyphs[h]=new Function("c","size",T.join(""))}return this.compiledGlyphs[h]=function(t,h){var w,A=_createForOfIteratorHelper(y);try{for(A.s();!(w=A.n()).done;){var T=w.value;"scale"===T.cmd&&(T.args=[h,-h]),t[T.cmd].apply(t,T.args)}}catch(t){A.e(t)}finally{A.f()}}}}]),FontFaceObject}();h.FontFaceObject=j},(t,h,y)=>{"use strict";function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}Object.defineProperty(h,"__esModule",{value:!0}),h.NodeStandardFontDataFactory=h.NodeCanvasFactory=h.NodeCMapReaderFactory=void 0;var w=y(134),A=y(6),T=y(4);function _defineProperties(t,h){for(var y=0;y<h.length;y++){var w=h[y];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(t,(A=w.key,T=void 0,T=function _toPrimitive(t,h){if("object"!==_typeof(t)||null===t)return t;var y=t[Symbol.toPrimitive];if(void 0!==y){var w=y.call(t,h||"default");if("object"!==_typeof(w))return w;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===h?String:Number)(t)}(A,"string"),"symbol"===_typeof(T)?T:String(T)),w)}var A,T}function _createClass(t,h,y){return h&&_defineProperties(t.prototype,h),y&&_defineProperties(t,y),Object.defineProperty(t,"prototype",{writable:!1}),t}function _inherits(t,h){if("function"!=typeof h&&null!==h)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(h&&h.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),h&&_setPrototypeOf(t,h)}function _setPrototypeOf(t,h){return _setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(t,h){return t.__proto__=h,t},_setPrototypeOf(t,h)}function _createSuper(t){var h=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var y,w=_getPrototypeOf(t);if(h){var A=_getPrototypeOf(this).constructor;y=Reflect.construct(w,arguments,A)}else y=w.apply(this,arguments);return function _possibleConstructorReturn(t,h){if(h&&("object"===_typeof(h)||"function"==typeof h))return h;if(void 0!==h)throw new TypeError("Derived constructors may only return object or undefined");return function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,y)}}function _getPrototypeOf(t){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)},_getPrototypeOf(t)}function _classCallCheck(t,h){if(!(t instanceof h))throw new TypeError("Cannot call a class as a function")}var E=function NodeCanvasFactory(){_classCallCheck(this,NodeCanvasFactory),(0,T.unreachable)("Not implemented: NodeCanvasFactory")};h.NodeCanvasFactory=E;var j=function NodeCMapReaderFactory(){_classCallCheck(this,NodeCMapReaderFactory),(0,T.unreachable)("Not implemented: NodeCMapReaderFactory")};h.NodeCMapReaderFactory=j;var B=function NodeStandardFontDataFactory(){_classCallCheck(this,NodeStandardFontDataFactory),(0,T.unreachable)("Not implemented: NodeStandardFontDataFactory")};if(h.NodeStandardFontDataFactory=B,A.isNodeJS){var N=function fetchData(t){return new Promise((function(h,y){__webpack_require__(48340).readFile(t,(function(t,w){!t&&w?h(new Uint8Array(w)):y(new Error(t))}))}))};h.NodeCanvasFactory=E=function(t){_inherits(NodeCanvasFactory,t);var h=_createSuper(NodeCanvasFactory);function NodeCanvasFactory(){return _classCallCheck(this,NodeCanvasFactory),h.apply(this,arguments)}return _createClass(NodeCanvasFactory,[{key:"_createCanvas",value:function _createCanvas(t,h){return __webpack_require__(6971).createCanvas(t,h)}}]),NodeCanvasFactory}(w.BaseCanvasFactory),h.NodeCMapReaderFactory=j=function(t){_inherits(NodeCMapReaderFactory,t);var h=_createSuper(NodeCMapReaderFactory);function NodeCMapReaderFactory(){return _classCallCheck(this,NodeCMapReaderFactory),h.apply(this,arguments)}return _createClass(NodeCMapReaderFactory,[{key:"_fetchData",value:function _fetchData(t,h){return N(t).then((function(t){return{cMapData:t,compressionType:h}}))}}]),NodeCMapReaderFactory}(w.BaseCMapReaderFactory),h.NodeStandardFontDataFactory=B=function(t){_inherits(NodeStandardFontDataFactory,t);var h=_createSuper(NodeStandardFontDataFactory);function NodeStandardFontDataFactory(){return _classCallCheck(this,NodeStandardFontDataFactory),h.apply(this,arguments)}return _createClass(NodeStandardFontDataFactory,[{key:"_fetchData",value:function _fetchData(t){return N(t)}}]),NodeStandardFontDataFactory}(w.BaseStandardFontDataFactory)}},(t,h,y)=>{"use strict";Object.defineProperty(h,"__esModule",{value:!0}),h.AnnotationStorage=void 0;var w=y(4);function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _slicedToArray(t,h){return function _arrayWithHoles(t){if(Array.isArray(t))return t}(t)||function _iterableToArrayLimit(t,h){var y=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=y){var w,A,T,E,j=[],B=!0,N=!1;try{if(T=(y=y.call(t)).next,0===h){if(Object(y)!==y)return;B=!1}else for(;!(B=(w=T.call(y)).done)&&(j.push(w.value),j.length!==h);B=!0);}catch(t){N=!0,A=t}finally{try{if(!B&&null!=y.return&&(E=y.return(),Object(E)!==E))return}finally{if(N)throw A}}return j}}(t,h)||function _unsupportedIterableToArray(t,h){if(!t)return;if("string"==typeof t)return _arrayLikeToArray(t,h);var y=Object.prototype.toString.call(t).slice(8,-1);"Object"===y&&t.constructor&&(y=t.constructor.name);if("Map"===y||"Set"===y)return Array.from(t);if("Arguments"===y||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(y))return _arrayLikeToArray(t,h)}(t,h)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(t,h){(null==h||h>t.length)&&(h=t.length);for(var y=0,w=new Array(h);y<h;y++)w[y]=t[y];return w}function _defineProperties(t,h){for(var y=0;y<h.length;y++){var w=h[y];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(t,(A=w.key,T=void 0,T=function _toPrimitive(t,h){if("object"!==_typeof(t)||null===t)return t;var y=t[Symbol.toPrimitive];if(void 0!==y){var w=y.call(t,h||"default");if("object"!==_typeof(w))return w;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===h?String:Number)(t)}(A,"string"),"symbol"===_typeof(T)?T:String(T)),w)}var A,T}var A=function(){function AnnotationStorage(){!function _classCallCheck(t,h){if(!(t instanceof h))throw new TypeError("Cannot call a class as a function")}(this,AnnotationStorage),this._storage=new Map,this._timeStamp=Date.now(),this._modified=!1,this.onSetModified=null,this.onResetModified=null}return function _createClass(t,h,y){return h&&_defineProperties(t.prototype,h),y&&_defineProperties(t,y),Object.defineProperty(t,"prototype",{writable:!1}),t}(AnnotationStorage,[{key:"getValue",value:function getValue(t,h){var y=this._storage.get(t);return void 0===y?h:_extends(h,y)}},{key:"setValue",value:function setValue(t,h){var y=this._storage.get(t),w=!1;if(void 0!==y)for(var A=0,T=Object.entries(h);A<T.length;A++){var E=_slicedToArray(T[A],2),j=E[0],B=E[1];y[j]!==B&&(w=!0,y[j]=B)}else w=!0,this._storage.set(t,h);w&&(this._timeStamp=Date.now(),this._setModified())}},{key:"getAll",value:function getAll(){return this._storage.size>0?(0,w.objectFromMap)(this._storage):null}},{key:"size",get:function get(){return this._storage.size}},{key:"_setModified",value:function _setModified(){this._modified||(this._modified=!0,"function"==typeof this.onSetModified&&this.onSetModified())}},{key:"resetModified",value:function resetModified(){this._modified&&(this._modified=!1,"function"==typeof this.onResetModified&&this.onResetModified())}},{key:"serializable",get:function get(){return this._storage.size>0?this._storage:null}},{key:"lastModified",get:function get(){return this._timeStamp.toString()}}]),AnnotationStorage}();h.AnnotationStorage=A},(t,h,y)=>{"use strict";Object.defineProperty(h,"__esModule",{value:!0}),h.CanvasGraphics=void 0;var w=y(4),A=y(140),T=y(1);function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _createForOfIteratorHelper(t,h){var y="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!y){if(Array.isArray(t)||(y=_unsupportedIterableToArray(t))||h&&t&&"number"==typeof t.length){y&&(t=y);var w=0,A=function F(){};return{s:A,n:function n(){return w>=t.length?{done:!0}:{done:!1,value:t[w++]}},e:function e(t){throw t},f:A}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var T,E=!0,j=!1;return{s:function s(){y=y.call(t)},n:function n(){var t=y.next();return E=t.done,t},e:function e(t){j=!0,T=t},f:function f(){try{E||null==y.return||y.return()}finally{if(j)throw T}}}}function _classCallCheck(t,h){if(!(t instanceof h))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,h){for(var y=0;y<h.length;y++){var w=h[y];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(t,(A=w.key,T=void 0,T=function _toPrimitive(t,h){if("object"!==_typeof(t)||null===t)return t;var y=t[Symbol.toPrimitive];if(void 0!==y){var w=y.call(t,h||"default");if("object"!==_typeof(w))return w;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===h?String:Number)(t)}(A,"string"),"symbol"===_typeof(T)?T:String(T)),w)}var A,T}function _createClass(t,h,y){return h&&_defineProperties(t.prototype,h),y&&_defineProperties(t,y),Object.defineProperty(t,"prototype",{writable:!1}),t}function _slicedToArray(t,h){return function _arrayWithHoles(t){if(Array.isArray(t))return t}(t)||function _iterableToArrayLimit(t,h){var y=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=y){var w,A,T,E,j=[],B=!0,N=!1;try{if(T=(y=y.call(t)).next,0===h){if(Object(y)!==y)return;B=!1}else for(;!(B=(w=T.call(y)).done)&&(j.push(w.value),j.length!==h);B=!0);}catch(t){N=!0,A=t}finally{try{if(!B&&null!=y.return&&(E=y.return(),Object(E)!==E))return}finally{if(N)throw A}}return j}}(t,h)||_unsupportedIterableToArray(t,h)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _unsupportedIterableToArray(t,h){if(t){if("string"==typeof t)return _arrayLikeToArray(t,h);var y=Object.prototype.toString.call(t).slice(8,-1);return"Object"===y&&t.constructor&&(y=t.constructor.name),"Map"===y||"Set"===y?Array.from(t):"Arguments"===y||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(y)?_arrayLikeToArray(t,h):void 0}}function _arrayLikeToArray(t,h){(null==h||h>t.length)&&(h=t.length);for(var y=0,w=new Array(h);y<h;y++)w[y]=t[y];return w}var E=4096,j=16;function addContextCurrentTransform(t){if(!t.mozCurrentTransform){t._originalSave=t.save,t._originalRestore=t.restore,t._originalRotate=t.rotate,t._originalScale=t.scale,t._originalTranslate=t.translate,t._originalTransform=t.transform,t._originalSetTransform=t.setTransform,t._originalResetTransform=t.resetTransform,t._transformMatrix=t._transformMatrix||[1,0,0,1,0,0],t._transformStack=[];try{var h=Object.getOwnPropertyDescriptor(Object.getPrototypeOf(t),"lineWidth");t._setLineWidth=h.set,t._getLineWidth=h.get,Object.defineProperty(t,"lineWidth",{set:function setLineWidth(t){this._setLineWidth(1.000001*t)},get:function getLineWidth(){return this._getLineWidth()}})}catch(t){}Object.defineProperty(t,"mozCurrentTransform",{get:function getCurrentTransform(){return this._transformMatrix}}),Object.defineProperty(t,"mozCurrentTransformInverse",{get:function getCurrentTransformInverse(){var t=_slicedToArray(this._transformMatrix,6),h=t[0],y=t[1],w=t[2],A=t[3],T=t[4],E=t[5],j=h*A-y*w,B=y*w-h*A;return[A/j,y/B,w/B,h/j,(A*T-w*E)/B,(y*T-h*E)/j]}}),t.save=function ctxSave(){var t=this._transformMatrix;this._transformStack.push(t),this._transformMatrix=t.slice(0,6),this._originalSave()},t.restore=function ctxRestore(){var t=this._transformStack.pop();t&&(this._transformMatrix=t,this._originalRestore())},t.translate=function ctxTranslate(t,h){var y=this._transformMatrix;y[4]=y[0]*t+y[2]*h+y[4],y[5]=y[1]*t+y[3]*h+y[5],this._originalTranslate(t,h)},t.scale=function ctxScale(t,h){var y=this._transformMatrix;y[0]*=t,y[1]*=t,y[2]*=h,y[3]*=h,this._originalScale(t,h)},t.transform=function ctxTransform(h,y,w,A,T,E){var j=this._transformMatrix;this._transformMatrix=[j[0]*h+j[2]*y,j[1]*h+j[3]*y,j[0]*w+j[2]*A,j[1]*w+j[3]*A,j[0]*T+j[2]*E+j[4],j[1]*T+j[3]*E+j[5]],t._originalTransform(h,y,w,A,T,E)},t.setTransform=function ctxSetTransform(h,y,w,A,T,E){this._transformMatrix=[h,y,w,A,T,E],t._originalSetTransform(h,y,w,A,T,E)},t.resetTransform=function ctxResetTransform(){this._transformMatrix=[1,0,0,1,0,0],t._originalResetTransform()},t.rotate=function ctxRotate(t){var h=Math.cos(t),y=Math.sin(t),w=this._transformMatrix;this._transformMatrix=[w[0]*h+w[2]*y,w[1]*h+w[3]*y,w[0]*-y+w[2]*h,w[1]*-y+w[3]*h,w[4],w[5]],this._originalRotate(t)}}}var B=function(){function CachedCanvases(t){_classCallCheck(this,CachedCanvases),this.canvasFactory=t,this.cache=Object.create(null)}return _createClass(CachedCanvases,[{key:"getCanvas",value:function getCanvas(t,h,y,w){var A;return void 0!==this.cache[t]?(A=this.cache[t],this.canvasFactory.reset(A,h,y),A.context.setTransform(1,0,0,1,0,0)):(A=this.canvasFactory.create(h,y),this.cache[t]=A),w&&addContextCurrentTransform(A.context),A}},{key:"clear",value:function clear(){for(var t in this.cache){var h=this.cache[t];this.canvasFactory.destroy(h),delete this.cache[t]}}}]),CachedCanvases}();var N=function(){function CanvasExtraState(t,h){_classCallCheck(this,CanvasExtraState),this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=w.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=w.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=w.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps=null,this.startNewPathAndClipBox([0,0,t,h])}return _createClass(CanvasExtraState,[{key:"clone",value:function clone(){var clone=Object.create(this);return clone.clipBox=this.clipBox.slice(),clone}},{key:"setCurrentPoint",value:function setCurrentPoint(t,h){this.x=t,this.y=h}},{key:"updatePathMinMax",value:function updatePathMinMax(t,h,y){var A=_slicedToArray(w.Util.applyTransform([h,y],t),2);h=A[0],y=A[1],this.minX=Math.min(this.minX,h),this.minY=Math.min(this.minY,y),this.maxX=Math.max(this.maxX,h),this.maxY=Math.max(this.maxY,y)}},{key:"updateCurvePathMinMax",value:function updateCurvePathMinMax(t,h,y,A,T,E,j,B,N){var V=w.Util.bezierBoundingBox(h,y,A,T,E,j,B,N);this.updatePathMinMax(t,V[0],V[1]),this.updatePathMinMax(t,V[2],V[3])}},{key:"getPathBoundingBox",value:function getPathBoundingBox(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:A.PathType.FILL,h=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,y=[this.minX,this.minY,this.maxX,this.maxY];if(t===A.PathType.STROKE){h||(0,w.unreachable)("Stroke bounding box must include transform.");var T=w.Util.singularValueDecompose2dScale(h),E=T[0]*this.lineWidth/2,j=T[1]*this.lineWidth/2;y[0]-=E,y[1]-=j,y[2]+=E,y[3]+=j}return y}},{key:"updateClipFromPath",value:function updateClipFromPath(){var t=w.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(t||[0,0,0,0])}},{key:"startNewPathAndClipBox",value:function startNewPathAndClipBox(t){this.clipBox=t,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}},{key:"getClippedPathBoundingBox",value:function getClippedPathBoundingBox(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:A.PathType.FILL,h=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return w.Util.intersect(this.clipBox,this.getPathBoundingBox(t,h))}}]),CanvasExtraState}();function putBinaryImageData(t,h){var y=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if("undefined"!=typeof ImageData&&h instanceof ImageData)t.putImageData(h,0,0);else{var A,T,E,B,N,V,W,H,G,z=h.height,$=h.width,J=z%j,X=(z-J)/j,K=0===J?X:X+1,ne=t.createImageData($,j),ue=0,pe=h.data,me=ne.data;if(y)switch(y.length){case 1:V=y[0],W=y[0],H=y[0],G=y[0];break;case 4:V=y[0],W=y[1],H=y[2],G=y[3]}if(h.kind===w.ImageKind.GRAYSCALE_1BPP){var ge=pe.byteLength,we=new Uint32Array(me.buffer,0,me.byteLength>>2),Ce=we.length,ke=$+7>>3,Ie=4294967295,Te=w.IsLittleEndianCached.value?4278190080:255;if(G&&255===G[0]&&0===G[255]){var Ee=[Te,Ie];Ie=Ee[0],Te=Ee[1]}for(T=0;T<K;T++){for(B=T<X?j:J,A=0,E=0;E<B;E++){for(var Me=ge-ue,Be=0,Ne=Me>ke?$:8*Me-7,Ze=-8&Ne,et=0,tt=0;Be<Ze;Be+=8)tt=pe[ue++],we[A++]=128&tt?Ie:Te,we[A++]=64&tt?Ie:Te,we[A++]=32&tt?Ie:Te,we[A++]=16&tt?Ie:Te,we[A++]=8&tt?Ie:Te,we[A++]=4&tt?Ie:Te,we[A++]=2&tt?Ie:Te,we[A++]=1&tt?Ie:Te;for(;Be<Ne;Be++)0===et&&(tt=pe[ue++],et=128),we[A++]=tt&et?Ie:Te,et>>=1}for(;A<Ce;)we[A++]=0;t.putImageData(ne,0,T*j)}}else if(h.kind===w.ImageKind.RGBA_32BPP){var rt=!!(V||W||H);for(E=0,N=$*j*4,T=0;T<X;T++){if(me.set(pe.subarray(ue,ue+N)),ue+=N,rt)for(var nt=0;nt<N;nt+=4)V&&(me[nt+0]=V[me[nt+0]]),W&&(me[nt+1]=W[me[nt+1]]),H&&(me[nt+2]=H[me[nt+2]]);t.putImageData(ne,0,E),E+=j}if(T<K){if(N=$*J*4,me.set(pe.subarray(ue,ue+N)),rt)for(var it=0;it<N;it+=4)V&&(me[it+0]=V[me[it+0]]),W&&(me[it+1]=W[me[it+1]]),H&&(me[it+2]=H[me[it+2]]);t.putImageData(ne,0,E)}}else{if(h.kind!==w.ImageKind.RGB_24BPP)throw new Error("bad image kind: ".concat(h.kind));var at=!!(V||W||H);for(N=$*(B=j),T=0;T<K;T++){for(T>=X&&(N=$*(B=J)),A=0,E=N;E--;)me[A++]=pe[ue++],me[A++]=pe[ue++],me[A++]=pe[ue++],me[A++]=255;if(at)for(var st=0;st<A;st+=4)V&&(me[st+0]=V[me[st+0]]),W&&(me[st+1]=W[me[st+1]]),H&&(me[st+2]=H[me[st+2]]);t.putImageData(ne,0,T*j)}}}}function putBinaryImageMask(t,h){for(var y=h.height,w=h.width,A=y%j,T=(y-A)/j,E=0===A?T:T+1,B=t.createImageData(w,j),N=0,V=h.data,W=B.data,H=0;H<E;H++){for(var G=H<T?j:A,z=3,$=0;$<G;$++)for(var J=void 0,X=0,K=0;K<w;K++)X||(J=V[N++],X=128),W[z]=J&X?0:255,z+=4,X>>=1;t.putImageData(B,0,H*j)}}function copyCtxState(t,h){for(var y=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font"],w=0,A=y.length;w<A;w++){var T=y[w];void 0!==t[T]&&(h[T]=t[T])}void 0!==t.setLineDash&&(h.setLineDash(t.getLineDash()),h.lineDashOffset=t.lineDashOffset)}function resetCtxToDefault(t){t.strokeStyle="#000000",t.fillStyle="#000000",t.fillRule="nonzero",t.globalAlpha=1,t.lineWidth=1,t.lineCap="butt",t.lineJoin="miter",t.miterLimit=10,t.globalCompositeOperation="source-over",t.font="10px sans-serif",void 0!==t.setLineDash&&(t.setLineDash([]),t.lineDashOffset=0)}function composeSMaskBackdrop(t,h,y,w){for(var A=t.length,T=3;T<A;T+=4){var E=t[T];if(0===E)t[T-3]=h,t[T-2]=y,t[T-1]=w;else if(E<255){var j=255-E;t[T-3]=t[T-3]*E+h*j>>8,t[T-2]=t[T-2]*E+y*j>>8,t[T-1]=t[T-1]*E+w*j>>8}}}function composeSMaskAlpha(t,h,y){for(var w=t.length,A=3;A<w;A+=4){var T=y?y[t[A]]:t[A];h[A]=h[A]*T*.00392156862745098|0}}function composeSMaskLuminosity(t,h,y){for(var w=t.length,A=3;A<w;A+=4){var T=77*t[A-3]+152*t[A-2]+28*t[A-1];h[A]=y?h[A]*y[T>>8]>>8:h[A]*T>>16}}function composeSMask(t,h,y,w){var A=w[0],T=w[1],E=w[2]-A,j=w[3]-T;0!==E&&0!==j&&(!function genericComposeSMask(t,h,y,w,A,T,E,j,B,N,V){var W,H=!!T,G=H?T[0]:0,z=H?T[1]:0,$=H?T[2]:0;W="Luminosity"===A?composeSMaskLuminosity:composeSMaskAlpha;for(var J=Math.min(w,Math.ceil(1048576/y)),X=0;X<w;X+=J){var K=Math.min(J,w-X),ne=t.getImageData(j-N,X+(B-V),y,K),ue=h.getImageData(j,X+B,y,K);H&&composeSMaskBackdrop(ne.data,G,z,$),W(ne.data,ue.data,E),h.putImageData(ue,j,X+B)}}(h.context,y,E,j,h.subtype,h.backdrop,h.transferMap,A,T,h.offsetX,h.offsetY),t.save(),t.globalAlpha=1,t.globalCompositeOperation="source-over",t.setTransform(1,0,0,1,0,0),t.drawImage(y.canvas,0,0),t.restore())}function getImageSmoothingEnabled(t,h){var y=w.Util.singularValueDecompose2dScale(t);y[0]=Math.fround(y[0]),y[1]=Math.fround(y[1]);var A=Math.fround((globalThis.devicePixelRatio||1)*T.PixelsPerInch.PDF_TO_CSS_UNITS);return void 0!==h?h:y[0]<=A||y[1]<=A}var V=["butt","round","square"],W=["miter","round","bevel"],H={},G={},z=function(){function CanvasGraphics(t,h,y,w,A,T,E){_classCallCheck(this,CanvasGraphics),this.ctx=t,this.current=new N(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=h,this.objs=y,this.canvasFactory=w,this.imageLayer=A,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=[],this.optionalContentConfig=T,this.cachedCanvases=new B(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=E,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,t&&addContextCurrentTransform(t),this._cachedGetSinglePixelWidth=null}return _createClass(CanvasGraphics,[{key:"beginDrawing",value:function beginDrawing(t){var h=t.transform,y=t.viewport,w=t.transparency,A=void 0!==w&&w,T=t.background,E=void 0===T?null:T,j=this.ctx.canvas.width,B=this.ctx.canvas.height;if(this.ctx.save(),this.ctx.fillStyle=E||"rgb(255, 255, 255)",this.ctx.fillRect(0,0,j,B),this.ctx.restore(),A){var N=this.cachedCanvases.getCanvas("transparent",j,B,!0);this.compositeCtx=this.ctx,this.transparentCanvas=N.canvas,this.ctx=N.context,this.ctx.save(),this.ctx.transform.apply(this.ctx,this.compositeCtx.mozCurrentTransform)}this.ctx.save(),resetCtxToDefault(this.ctx),h&&(this.ctx.transform.apply(this.ctx,h),this.outputScaleX=h[0],this.outputScaleY=h[0]),this.ctx.transform.apply(this.ctx,y.transform),this.viewportScale=y.scale,this.baseTransform=this.ctx.mozCurrentTransform.slice(),this._combinedScaleFactor=Math.hypot(this.baseTransform[0],this.baseTransform[2]),this.imageLayer&&this.imageLayer.beginLayout()}},{key:"executeOperatorList",value:function executeOperatorList(t,h,y,A){var T=t.argsArray,E=t.fnArray,j=h||0,B=T.length;if(B===j)return j;for(var N,V=B-j>10&&"function"==typeof y,W=V?Date.now()+15:0,H=0,G=this.commonObjs,z=this.objs;;){if(void 0!==A&&j===A.nextBreakPoint)return A.breakIt(j,y),j;if((N=E[j])!==w.OPS.dependency)this[N].apply(this,T[j]);else{var $,J=_createForOfIteratorHelper(T[j]);try{for(J.s();!($=J.n()).done;){var X=$.value,K=X.startsWith("g_")?G:z;if(!K.has(X))return K.get(X,y),j}}catch(t){J.e(t)}finally{J.f()}}if(++j===B)return j;if(V&&++H>10){if(Date.now()>W)return y(),j;H=0}}}},{key:"endDrawing",value:function endDrawing(){for(;this.stateStack.length||null!==this.current.activeSMask;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null),this.cachedCanvases.clear(),this.cachedPatterns.clear(),this.imageLayer&&this.imageLayer.endLayout()}},{key:"_scaleImage",value:function _scaleImage(t,h){for(var y,w,A=t.width,T=t.height,E=Math.max(Math.hypot(h[0],h[1]),1),j=Math.max(Math.hypot(h[2],h[3]),1),B=A,N=T,V="prescale1";E>2&&B>1||j>2&&N>1;){var W=B,H=N;E>2&&B>1&&(E/=B/(W=Math.ceil(B/2))),j>2&&N>1&&(j/=N/(H=Math.ceil(N/2))),(w=(y=this.cachedCanvases.getCanvas(V,W,H)).context).clearRect(0,0,W,H),w.drawImage(t,0,0,B,N,0,0,W,H),t=y.canvas,B=W,N=H,V="prescale1"===V?"prescale2":"prescale1"}return{img:t,paintWidth:B,paintHeight:N}}},{key:"_createMaskCanvas",value:function _createMaskCanvas(t){var h=this.ctx,y=t.width,T=t.height,E=this.current.fillColor,j=this.current.patternFill,B=this.cachedCanvases.getCanvas("maskCanvas",y,T);putBinaryImageMask(B.context,t);var N=h.mozCurrentTransform,V=w.Util.transform(N,[1/y,0,0,-1/T,0,0]);V=w.Util.transform(V,[1,0,0,1,0,-T]);var W=w.Util.applyTransform([0,0],V),H=w.Util.applyTransform([y,T],V),G=w.Util.normalizeRect([W[0],W[1],H[0],H[1]]),z=Math.ceil(G[2]-G[0]),$=Math.ceil(G[3]-G[1]),J=this.cachedCanvases.getCanvas("fillCanvas",z,$,!0),X=J.context,K=Math.min(W[0],H[0]),ne=Math.min(W[1],H[1]);X.translate(-K,-ne),X.transform.apply(X,V);var ue=this._scaleImage(B.canvas,X.mozCurrentTransformInverse);X.imageSmoothingEnabled=getImageSmoothingEnabled(X.mozCurrentTransform,t.interpolate),X.drawImage(ue.img,0,0,ue.img.width,ue.img.height,0,0,y,T),X.globalCompositeOperation="source-in";var pe=w.Util.transform(X.mozCurrentTransformInverse,[1,0,0,1,-K,-ne]);return X.fillStyle=j?E.getPattern(h,this,pe,A.PathType.FILL):E,X.fillRect(0,0,y,T),{canvas:J.canvas,offsetX:Math.round(K),offsetY:Math.round(ne)}}},{key:"setLineWidth",value:function setLineWidth(t){this.current.lineWidth=t,this.ctx.lineWidth=t}},{key:"setLineCap",value:function setLineCap(t){this.ctx.lineCap=V[t]}},{key:"setLineJoin",value:function setLineJoin(t){this.ctx.lineJoin=W[t]}},{key:"setMiterLimit",value:function setMiterLimit(t){this.ctx.miterLimit=t}},{key:"setDash",value:function setDash(t,h){var y=this.ctx;void 0!==y.setLineDash&&(y.setLineDash(t),y.lineDashOffset=h)}},{key:"setRenderingIntent",value:function setRenderingIntent(t){}},{key:"setFlatness",value:function setFlatness(t){}},{key:"setGState",value:function setGState(t){for(var h=0,y=t.length;h<y;h++){var w=t[h],A=w[0],T=w[1];switch(A){case"LW":this.setLineWidth(T);break;case"LC":this.setLineCap(T);break;case"LJ":this.setLineJoin(T);break;case"ML":this.setMiterLimit(T);break;case"D":this.setDash(T[0],T[1]);break;case"RI":this.setRenderingIntent(T);break;case"FL":this.setFlatness(T);break;case"Font":this.setFont(T[0],T[1]);break;case"CA":this.current.strokeAlpha=w[1];break;case"ca":this.current.fillAlpha=w[1],this.ctx.globalAlpha=w[1];break;case"BM":this.ctx.globalCompositeOperation=T;break;case"SMask":this.current.activeSMask=T?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.current.transferMaps=T}}}},{key:"checkSMaskState",value:function checkSMaskState(){var t=!!this.suspendedCtx;this.current.activeSMask&&!t?this.beginSMaskMode():!this.current.activeSMask&&t&&this.endSMaskMode()}},{key:"beginSMaskMode",value:function beginSMaskMode(){if(this.suspendedCtx)throw new Error("beginSMaskMode called while already in smask mode");var t=this.ctx.canvas.width,h=this.ctx.canvas.height,y="smaskGroupAt"+this.groupLevel,w=this.cachedCanvases.getCanvas(y,t,h,!0);this.suspendedCtx=this.ctx,this.ctx=w.context;var A=this.ctx;A.setTransform.apply(A,this.suspendedCtx.mozCurrentTransform),copyCtxState(this.suspendedCtx,A),function mirrorContextOperations(t,h){if(t._removeMirroring)throw new Error("Context is already forwarding operations.");t.__originalSave=t.save,t.__originalRestore=t.restore,t.__originalRotate=t.rotate,t.__originalScale=t.scale,t.__originalTranslate=t.translate,t.__originalTransform=t.transform,t.__originalSetTransform=t.setTransform,t.__originalResetTransform=t.resetTransform,t.__originalClip=t.clip,t.__originalMoveTo=t.moveTo,t.__originalLineTo=t.lineTo,t.__originalBezierCurveTo=t.bezierCurveTo,t.__originalRect=t.rect,t.__originalClosePath=t.closePath,t.__originalBeginPath=t.beginPath,t._removeMirroring=function(){t.save=t.__originalSave,t.restore=t.__originalRestore,t.rotate=t.__originalRotate,t.scale=t.__originalScale,t.translate=t.__originalTranslate,t.transform=t.__originalTransform,t.setTransform=t.__originalSetTransform,t.resetTransform=t.__originalResetTransform,t.clip=t.__originalClip,t.moveTo=t.__originalMoveTo,t.lineTo=t.__originalLineTo,t.bezierCurveTo=t.__originalBezierCurveTo,t.rect=t.__originalRect,t.closePath=t.__originalClosePath,t.beginPath=t.__originalBeginPath,delete t._removeMirroring},t.save=function ctxSave(){h.save(),this.__originalSave()},t.restore=function ctxRestore(){h.restore(),this.__originalRestore()},t.translate=function ctxTranslate(t,y){h.translate(t,y),this.__originalTranslate(t,y)},t.scale=function ctxScale(t,y){h.scale(t,y),this.__originalScale(t,y)},t.transform=function ctxTransform(t,y,w,A,T,E){h.transform(t,y,w,A,T,E),this.__originalTransform(t,y,w,A,T,E)},t.setTransform=function ctxSetTransform(t,y,w,A,T,E){h.setTransform(t,y,w,A,T,E),this.__originalSetTransform(t,y,w,A,T,E)},t.resetTransform=function ctxResetTransform(){h.resetTransform(),this.__originalResetTransform()},t.rotate=function ctxRotate(t){h.rotate(t),this.__originalRotate(t)},t.clip=function ctxRotate(t){h.clip(t),this.__originalClip(t)},t.moveTo=function(t,y){h.moveTo(t,y),this.__originalMoveTo(t,y)},t.lineTo=function(t,y){h.lineTo(t,y),this.__originalLineTo(t,y)},t.bezierCurveTo=function(t,y,w,A,T,E){h.bezierCurveTo(t,y,w,A,T,E),this.__originalBezierCurveTo(t,y,w,A,T,E)},t.rect=function(t,y,w,A){h.rect(t,y,w,A),this.__originalRect(t,y,w,A)},t.closePath=function(){h.closePath(),this.__originalClosePath()},t.beginPath=function(){h.beginPath(),this.__originalBeginPath()}}(A,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}},{key:"endSMaskMode",value:function endSMaskMode(){if(!this.suspendedCtx)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),copyCtxState(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.current.activeSMask=null,this.suspendedCtx=null}},{key:"compose",value:function compose(t){if(this.current.activeSMask){t?(t[0]=Math.floor(t[0]),t[1]=Math.floor(t[1]),t[2]=Math.ceil(t[2]),t[3]=Math.ceil(t[3])):t=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];var h=this.current.activeSMask;composeSMask(this.suspendedCtx,h,this.ctx,t),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}}},{key:"save",value:function save(){this.ctx.save();var t=this.current;this.stateStack.push(t),this.current=t.clone()}},{key:"restore",value:function restore(){0===this.stateStack.length&&this.current.activeSMask&&this.endSMaskMode(),0!==this.stateStack.length&&(this.current=this.stateStack.pop(),this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedGetSinglePixelWidth=null)}},{key:"transform",value:function transform(t,h,y,w,A,T){this.ctx.transform(t,h,y,w,A,T),this._cachedGetSinglePixelWidth=null}},{key:"constructPath",value:function constructPath(t,h){for(var y,A,T=this.ctx,E=this.current,j=E.x,B=E.y,N=0,V=0,W=t.length;N<W;N++)switch(0|t[N]){case w.OPS.rectangle:j=h[V++],B=h[V++];var H=h[V++],G=h[V++],z=j+H,$=B+G;T.moveTo(j,B),0===H||0===G?T.lineTo(z,$):(T.lineTo(z,B),T.lineTo(z,$),T.lineTo(j,$)),E.updatePathMinMax(T.mozCurrentTransform,j,B),E.updatePathMinMax(T.mozCurrentTransform,z,$),T.closePath();break;case w.OPS.moveTo:j=h[V++],B=h[V++],T.moveTo(j,B),E.updatePathMinMax(T.mozCurrentTransform,j,B);break;case w.OPS.lineTo:j=h[V++],B=h[V++],T.lineTo(j,B),E.updatePathMinMax(T.mozCurrentTransform,j,B);break;case w.OPS.curveTo:y=j,A=B,j=h[V+4],B=h[V+5],T.bezierCurveTo(h[V],h[V+1],h[V+2],h[V+3],j,B),E.updateCurvePathMinMax(T.mozCurrentTransform,y,A,h[V],h[V+1],h[V+2],h[V+3],j,B),V+=6;break;case w.OPS.curveTo2:y=j,A=B,T.bezierCurveTo(j,B,h[V],h[V+1],h[V+2],h[V+3]),E.updateCurvePathMinMax(T.mozCurrentTransform,y,A,j,B,h[V],h[V+1],h[V+2],h[V+3]),j=h[V+2],B=h[V+3],V+=4;break;case w.OPS.curveTo3:y=j,A=B,j=h[V+2],B=h[V+3],T.bezierCurveTo(h[V],h[V+1],j,B,j,B),E.updateCurvePathMinMax(T.mozCurrentTransform,y,A,h[V],h[V+1],j,B,j,B),V+=4;break;case w.OPS.closePath:T.closePath()}E.setCurrentPoint(j,B)}},{key:"closePath",value:function closePath(){this.ctx.closePath()}},{key:"stroke",value:function stroke(t){t=void 0===t||t;var h=this.ctx,y=this.current.strokeColor;if(h.globalAlpha=this.current.strokeAlpha,this.contentVisible)if("object"===_typeof(y)&&null!=y&&y.getPattern){var w=this.getSinglePixelWidth();h.save(),h.strokeStyle=y.getPattern(h,this,h.mozCurrentTransformInverse,A.PathType.STROKE),h.lineWidth=Math.max(w,this.current.lineWidth),h.stroke(),h.restore()}else{var T=this.getSinglePixelWidth();T<0&&-T>=this.current.lineWidth?(h.save(),h.resetTransform(),h.lineWidth=Math.round(this._combinedScaleFactor),h.stroke(),h.restore()):(h.lineWidth=Math.max(T,this.current.lineWidth),h.stroke())}t&&this.consumePath(this.current.getClippedPathBoundingBox()),h.globalAlpha=this.current.fillAlpha}},{key:"closeStroke",value:function closeStroke(){this.closePath(),this.stroke()}},{key:"fill",value:function fill(t){t=void 0===t||t;var h=this.ctx,y=this.current.fillColor,w=!1;this.current.patternFill&&(h.save(),h.fillStyle=y.getPattern(h,this,h.mozCurrentTransformInverse,A.PathType.FILL),w=!0);var T=this.current.getClippedPathBoundingBox();this.contentVisible&&null!==T&&(this.pendingEOFill?(h.fill("evenodd"),this.pendingEOFill=!1):h.fill()),w&&h.restore(),t&&this.consumePath(T)}},{key:"eoFill",value:function eoFill(){this.pendingEOFill=!0,this.fill()}},{key:"fillStroke",value:function fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}},{key:"eoFillStroke",value:function eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}},{key:"closeFillStroke",value:function closeFillStroke(){this.closePath(),this.fillStroke()}},{key:"closeEOFillStroke",value:function closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}},{key:"endPath",value:function endPath(){this.consumePath()}},{key:"clip",value:function clip(){this.pendingClip=H}},{key:"eoClip",value:function eoClip(){this.pendingClip=G}},{key:"beginText",value:function beginText(){this.current.textMatrix=w.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}},{key:"endText",value:function endText(){var t=this.pendingTextPaths,h=this.ctx;if(void 0!==t){h.save(),h.beginPath();for(var y=0;y<t.length;y++){var w=t[y];h.setTransform.apply(h,w.transform),h.translate(w.x,w.y),w.addToPath(h,w.fontSize)}h.restore(),h.clip(),h.beginPath(),delete this.pendingTextPaths}else h.beginPath()}},{key:"setCharSpacing",value:function setCharSpacing(t){this.current.charSpacing=t}},{key:"setWordSpacing",value:function setWordSpacing(t){this.current.wordSpacing=t}},{key:"setHScale",value:function setHScale(t){this.current.textHScale=t/100}},{key:"setLeading",value:function setLeading(t){this.current.leading=-t}},{key:"setFont",value:function setFont(t,h){var y=this.commonObjs.get(t),A=this.current;if(!y)throw new Error("Can't find font for ".concat(t));if(A.fontMatrix=y.fontMatrix||w.FONT_IDENTITY_MATRIX,0!==A.fontMatrix[0]&&0!==A.fontMatrix[3]||(0,w.warn)("Invalid font matrix for font "+t),h<0?(h=-h,A.fontDirection=-1):A.fontDirection=1,this.current.font=y,this.current.fontSize=h,!y.isType3Font){var T=y.loadedName||"sans-serif",E="normal";y.black?E="900":y.bold&&(E="bold");var j=y.italic?"italic":"normal",B='"'.concat(T,'", ').concat(y.fallbackName),N=h;h<16?N=16:h>100&&(N=100),this.current.fontSizeScale=h/N,this.ctx.font="".concat(j," ").concat(E," ").concat(N,"px ").concat(B)}}},{key:"setTextRenderingMode",value:function setTextRenderingMode(t){this.current.textRenderingMode=t}},{key:"setTextRise",value:function setTextRise(t){this.current.textRise=t}},{key:"moveText",value:function moveText(t,h){this.current.x=this.current.lineX+=t,this.current.y=this.current.lineY+=h}},{key:"setLeadingMoveText",value:function setLeadingMoveText(t,h){this.setLeading(-h),this.moveText(t,h)}},{key:"setTextMatrix",value:function setTextMatrix(t,h,y,w,A,T){this.current.textMatrix=[t,h,y,w,A,T],this.current.textMatrixScale=Math.hypot(t,h),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}},{key:"nextLine",value:function nextLine(){this.moveText(0,this.current.leading)}},{key:"paintChar",value:function paintChar(t,h,y,A,T){var E,j=this.ctx,B=this.current,N=B.font,V=B.textRenderingMode,W=B.fontSize/B.fontSizeScale,H=V&w.TextRenderingMode.FILL_STROKE_MASK,G=!!(V&w.TextRenderingMode.ADD_TO_PATH_FLAG),z=B.patternFill&&!N.missingFile;((N.disableFontFace||G||z)&&(E=N.getPathGenerator(this.commonObjs,t)),N.disableFontFace||z?(j.save(),j.translate(h,y),j.beginPath(),E(j,W),A&&j.setTransform.apply(j,A),H!==w.TextRenderingMode.FILL&&H!==w.TextRenderingMode.FILL_STROKE||j.fill(),H!==w.TextRenderingMode.STROKE&&H!==w.TextRenderingMode.FILL_STROKE||(T&&(j.resetTransform(),j.lineWidth=Math.round(this._combinedScaleFactor)),j.stroke()),j.restore()):(H!==w.TextRenderingMode.FILL&&H!==w.TextRenderingMode.FILL_STROKE||j.fillText(t,h,y),H!==w.TextRenderingMode.STROKE&&H!==w.TextRenderingMode.FILL_STROKE||(T?(j.save(),j.moveTo(h,y),j.resetTransform(),j.lineWidth=Math.round(this._combinedScaleFactor),j.strokeText(t,0,0),j.restore()):j.strokeText(t,h,y))),G)&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:j.mozCurrentTransform,x:h,y:y,fontSize:W,addToPath:E})}},{key:"isFontSubpixelAAEnabled",get:function get(){var t=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10).context;t.scale(1.5,1),t.fillText("I",0,10);for(var h=t.getImageData(0,0,10,10).data,y=!1,A=3;A<h.length;A+=4)if(h[A]>0&&h[A]<255){y=!0;break}return(0,w.shadow)(this,"isFontSubpixelAAEnabled",y)}},{key:"showText",value:function showText(t){var h=this.current,y=h.font;if(y.isType3Font)return this.showType3Text(t);var T=h.fontSize;if(0!==T){var E,j=this.ctx,B=h.fontSizeScale,N=h.charSpacing,V=h.wordSpacing,W=h.fontDirection,H=h.textHScale*W,G=t.length,z=y.vertical,$=z?1:-1,J=y.defaultVMetrics,X=T*h.fontMatrix[0],K=h.textRenderingMode===w.TextRenderingMode.FILL&&!y.disableFontFace&&!h.patternFill;if(j.save(),j.transform.apply(j,h.textMatrix),j.translate(h.x,h.y+h.textRise),W>0?j.scale(H,-1):j.scale(H,1),h.patternFill){j.save();var ne=h.fillColor.getPattern(j,this,j.mozCurrentTransformInverse,A.PathType.FILL);E=j.mozCurrentTransform,j.restore(),j.fillStyle=ne}var ue=h.lineWidth,pe=!1,me=h.textMatrixScale;if(0===me||0===ue){var ge=h.textRenderingMode&w.TextRenderingMode.FILL_STROKE_MASK;ge!==w.TextRenderingMode.STROKE&&ge!==w.TextRenderingMode.FILL_STROKE||(this._cachedGetSinglePixelWidth=null,pe=(ue=this.getSinglePixelWidth())<0)}else ue/=me;1!==B&&(j.scale(B,B),ue/=B),j.lineWidth=ue;var we,Ce=0;for(we=0;we<G;++we){var ke=t[we];if((0,w.isNum)(ke))Ce+=$*ke*T/1e3;else{var Ie=!1,Te=(ke.isSpace?V:0)+N,Ee=ke.fontChar,Me=ke.accent,Be=void 0,Ne=void 0,Ze=ke.width;if(z){var et=ke.vmetric||J,tt=-(ke.vmetric?et[1]:.5*Ze)*X,rt=et[2]*X;Ze=et?-et[0]:Ze,Be=tt/B,Ne=(Ce+rt)/B}else Be=Ce/B,Ne=0;if(y.remeasure&&Ze>0){var nt=1e3*j.measureText(Ee).width/T*B;if(Ze<nt&&this.isFontSubpixelAAEnabled){var it=Ze/nt;Ie=!0,j.save(),j.scale(it,1),Be/=it}else Ze!==nt&&(Be+=(Ze-nt)/2e3*T/B)}if(this.contentVisible&&(ke.isInFont||y.missingFile))if(K&&!Me)j.fillText(Ee,Be,Ne);else if(this.paintChar(Ee,Be,Ne,E,pe),Me){var at=Be+T*Me.offset.x/B,st=Ne-T*Me.offset.y/B;this.paintChar(Me.fontChar,at,st,E,pe)}Ce+=z?Ze*X-Te*W:Ze*X+Te*W,Ie&&j.restore()}}z?h.y-=Ce:h.x+=Ce*H,j.restore(),this.compose()}}},{key:"showType3Text",value:function showType3Text(t){var h,y,A,T,E=this.ctx,j=this.current,B=j.font,N=j.fontSize,V=j.fontDirection,W=B.vertical?1:-1,H=j.charSpacing,G=j.wordSpacing,z=j.textHScale*V,$=j.fontMatrix||w.FONT_IDENTITY_MATRIX,J=t.length;if(!(j.textRenderingMode===w.TextRenderingMode.INVISIBLE)&&0!==N){for(this._cachedGetSinglePixelWidth=null,E.save(),E.transform.apply(E,j.textMatrix),E.translate(j.x,j.y),E.scale(z,V),h=0;h<J;++h)if(y=t[h],(0,w.isNum)(y))T=W*y*N/1e3,this.ctx.translate(T,0),j.x+=T*z;else{var X=(y.isSpace?G:0)+H,K=B.charProcOperatorList[y.operatorListId];if(K)this.contentVisible&&(this.processingType3=y,this.save(),E.scale(N,N),E.transform.apply(E,$),this.executeOperatorList(K),this.restore()),A=w.Util.applyTransform([y.width,0],$)[0]*N+X,E.translate(A,0),j.x+=A*z;else(0,w.warn)('Type3 character "'.concat(y.operatorListId,'" is not available.'))}E.restore(),this.processingType3=null}}},{key:"setCharWidth",value:function setCharWidth(t,h){}},{key:"setCharWidthAndBounds",value:function setCharWidthAndBounds(t,h,y,w,A,T){this.ctx.rect(y,w,A-y,T-w),this.clip(),this.endPath()}},{key:"getColorN_Pattern",value:function getColorN_Pattern(t){var h,y=this;if("TilingPattern"===t[0]){var w=t[1],T=this.baseTransform||this.ctx.mozCurrentTransform.slice(),E={createCanvasGraphics:function createCanvasGraphics(t){return new CanvasGraphics(t,y.commonObjs,y.objs,y.canvasFactory)}};h=new A.TilingPattern(t,w,this.ctx,E,T)}else h=this._getPattern(t[1],t[2]);return h}},{key:"setStrokeColorN",value:function setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}},{key:"setFillColorN",value:function setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}},{key:"setStrokeRGBColor",value:function setStrokeRGBColor(t,h,y){var A=w.Util.makeHexColor(t,h,y);this.ctx.strokeStyle=A,this.current.strokeColor=A}},{key:"setFillRGBColor",value:function setFillRGBColor(t,h,y){var A=w.Util.makeHexColor(t,h,y);this.ctx.fillStyle=A,this.current.fillColor=A,this.current.patternFill=!1}},{key:"_getPattern",value:function _getPattern(t){var h,y=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this.cachedPatterns.has(t)?h=this.cachedPatterns.get(t):(h=(0,A.getShadingPattern)(this.objs.get(t)),this.cachedPatterns.set(t,h)),y&&(h.matrix=y),h}},{key:"shadingFill",value:function shadingFill(t){if(this.contentVisible){var h=this.ctx;this.save();var y=this._getPattern(t);h.fillStyle=y.getPattern(h,this,h.mozCurrentTransformInverse,A.PathType.SHADING);var T=h.mozCurrentTransformInverse;if(T){var E=h.canvas,j=E.width,B=E.height,N=w.Util.applyTransform([0,0],T),V=w.Util.applyTransform([0,B],T),W=w.Util.applyTransform([j,0],T),H=w.Util.applyTransform([j,B],T),G=Math.min(N[0],V[0],W[0],H[0]),z=Math.min(N[1],V[1],W[1],H[1]),$=Math.max(N[0],V[0],W[0],H[0]),J=Math.max(N[1],V[1],W[1],H[1]);this.ctx.fillRect(G,z,$-G,J-z)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}}},{key:"beginInlineImage",value:function beginInlineImage(){(0,w.unreachable)("Should not call beginInlineImage")}},{key:"beginImageData",value:function beginImageData(){(0,w.unreachable)("Should not call beginImageData")}},{key:"paintFormXObjectBegin",value:function paintFormXObjectBegin(t,h){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(t)&&6===t.length&&this.transform.apply(this,t),this.baseTransform=this.ctx.mozCurrentTransform,h)){var y=h[2]-h[0],w=h[3]-h[1];this.ctx.rect(h[0],h[1],y,w),this.current.updatePathMinMax(this.ctx.mozCurrentTransform,h[0],h[1]),this.current.updatePathMinMax(this.ctx.mozCurrentTransform,h[2],h[3]),this.clip(),this.endPath()}}},{key:"paintFormXObjectEnd",value:function paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}},{key:"beginGroup",value:function beginGroup(t){if(this.contentVisible){this.save();var h=this.suspendedCtx;this.current.activeSMask&&(this.suspendedCtx=null,this.current.activeSMask=null);var y=this.ctx;t.isolated||(0,w.info)("TODO: Support non-isolated groups."),t.knockout&&(0,w.warn)("Knockout groups not supported.");var A=y.mozCurrentTransform;if(t.matrix&&y.transform.apply(y,t.matrix),!t.bbox)throw new Error("Bounding box is required.");var T=w.Util.getAxialAlignedBoundingBox(t.bbox,y.mozCurrentTransform),j=[0,0,y.canvas.width,y.canvas.height];T=w.Util.intersect(T,j)||[0,0,0,0];var B=Math.floor(T[0]),N=Math.floor(T[1]),V=Math.max(Math.ceil(T[2])-B,1),W=Math.max(Math.ceil(T[3])-N,1),H=1,G=1;V>E&&(H=V/E,V=E),W>E&&(G=W/E,W=E),this.current.startNewPathAndClipBox([0,0,V,W]);var z="groupAt"+this.groupLevel;t.smask&&(z+="_smask_"+this.smaskCounter++%2);var $=this.cachedCanvases.getCanvas(z,V,W,!0),J=$.context;J.scale(1/H,1/G),J.translate(-B,-N),J.transform.apply(J,A),t.smask?this.smaskStack.push({canvas:$.canvas,context:J,offsetX:B,offsetY:N,scaleX:H,scaleY:G,subtype:t.smask.subtype,backdrop:t.smask.backdrop,transferMap:t.smask.transferMap||null,startTransformInverse:null}):(y.setTransform(1,0,0,1,0,0),y.translate(B,N),y.scale(H,G),y.save()),copyCtxState(y,J),this.ctx=J,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push({ctx:y,suspendedCtx:h}),this.groupLevel++}}},{key:"endGroup",value:function endGroup(t){if(this.contentVisible){this.groupLevel--;var h=this.ctx,y=this.groupStack.pop(),A=y.ctx,T=y.suspendedCtx;if(this.ctx=A,this.ctx.imageSmoothingEnabled=!1,T&&(this.suspendedCtx=T),t.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();var E=this.ctx.mozCurrentTransform;this.restore(),this.ctx.save(),this.ctx.setTransform.apply(this.ctx,E);var j=w.Util.getAxialAlignedBoundingBox([0,0,h.canvas.width,h.canvas.height],E);this.ctx.drawImage(h.canvas,0,0),this.ctx.restore(),this.compose(j)}}}},{key:"beginAnnotations",value:function beginAnnotations(){this.save(),this.baseTransform&&this.ctx.setTransform.apply(this.ctx,this.baseTransform)}},{key:"endAnnotations",value:function endAnnotations(){this.restore()}},{key:"beginAnnotation",value:function beginAnnotation(t,h,y,A,T){if(this.save(),Array.isArray(h)&&4===h.length){var E=h[2]-h[0],j=h[3]-h[1];if(T&&this.annotationCanvasMap){(y=y.slice())[4]-=h[0],y[5]-=h[1],(h=h.slice())[0]=h[1]=0,h[2]=E,h[3]=j;var B=_slicedToArray(w.Util.singularValueDecompose2dScale(this.ctx.mozCurrentTransform),2),V=B[0],W=B[1],H=this.viewportScale,G=Math.ceil(E*this.outputScaleX*H),z=Math.ceil(j*this.outputScaleY*H);this.annotationCanvas=this.canvasFactory.create(G,z);var $=this.annotationCanvas,J=$.canvas,X=$.context;J.style.width="calc(".concat(E,"px * var(--viewport-scale-factor))"),J.style.height="calc(".concat(j,"px * var(--viewport-scale-factor))"),this.annotationCanvasMap.set(t,J),this.annotationCanvas.savedCtx=this.ctx,this.ctx=X,this.ctx.setTransform(V,0,0,-W,0,j*W),addContextCurrentTransform(this.ctx),resetCtxToDefault(this.ctx)}else resetCtxToDefault(this.ctx),this.ctx.rect(h[0],h[1],E,j),this.clip(),this.endPath()}this.current=new N(this.ctx.canvas.width,this.ctx.canvas.height),this.transform.apply(this,y),this.transform.apply(this,A)}},{key:"endAnnotation",value:function endAnnotation(){this.annotationCanvas&&(this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas),this.restore()}},{key:"paintImageMaskXObject",value:function paintImageMaskXObject(t){if(this.contentVisible){var h=this.ctx,y=t.width,w=t.height,A=this.processingType3;if(A&&void 0===A.compiled&&(A.compiled=y<=1e3&&w<=1e3?function compileType3Glyph(t){var h,y,w,A,T=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),E=t.width,j=t.height,B=E+1,N=new Uint8Array(B*(j+1)),V=E+7&-8,W=t.data,H=new Uint8Array(V*j),G=0;for(h=0,y=W.length;h<y;h++)for(var z=W[h],$=128;$>0;)H[G++]=z&$?0:255,$>>=1;var J=0;for(0!==H[G=0]&&(N[0]=1,++J),w=1;w<E;w++)H[G]!==H[G+1]&&(N[w]=H[G]?2:1,++J),G++;for(0!==H[G]&&(N[w]=2,++J),h=1;h<j;h++){A=h*B,H[(G=h*V)-V]!==H[G]&&(N[A]=H[G]?1:8,++J);var X=(H[G]?4:0)+(H[G-V]?8:0);for(w=1;w<E;w++)T[X=(X>>2)+(H[G+1]?4:0)+(H[G-V+1]?8:0)]&&(N[A+w]=T[X],++J),G++;if(H[G-V]!==H[G]&&(N[A+w]=H[G]?2:4,++J),J>1e3)return null}for(A=h*B,0!==H[G=V*(j-1)]&&(N[A]=8,++J),w=1;w<E;w++)H[G]!==H[G+1]&&(N[A+w]=H[G]?4:8,++J),G++;if(0!==H[G]&&(N[A+w]=4,++J),J>1e3)return null;var K=new Int32Array([0,B,-1,0,-B,0,0,0,1]),ne=[];for(h=0;J&&h<=j;h++){for(var ue=h*B,pe=ue+E;ue<pe&&!N[ue];)ue++;if(ue!==pe){var me=[ue%B,h],ge=ue,we=N[ue];do{var Ce=K[we];do{ue+=Ce}while(!N[ue]);var ke=N[ue];5!==ke&&10!==ke?(we=ke,N[ue]=0):(we=ke&51*we>>4,N[ue]&=we>>2|we<<2),me.push(ue%B,ue/B|0),N[ue]||--J}while(ge!==ue);ne.push(me),--h}}return function drawOutline(t){t.save(),t.scale(1/E,-1/j),t.translate(0,-j),t.beginPath();for(var h=0,y=ne.length;h<y;h++){var w=ne[h];t.moveTo(w[0],w[1]);for(var A=2,T=w.length;A<T;A+=2)t.lineTo(w[A],w[A+1])}t.fill(),t.beginPath(),t.restore()}}({data:t.data,width:y,height:w}):null),null!=A&&A.compiled)A.compiled(h);else{var T=this._createMaskCanvas(t),E=T.canvas;h.save(),h.setTransform(1,0,0,1,0,0),h.drawImage(E,T.offsetX,T.offsetY),h.restore(),this.compose()}}}},{key:"paintImageMaskXObjectRepeat",value:function paintImageMaskXObjectRepeat(t,h){var y=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,A=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,T=arguments.length>4?arguments[4]:void 0,E=arguments.length>5?arguments[5]:void 0;if(this.contentVisible){var j=this.ctx;j.save();var B=j.mozCurrentTransform;j.transform(h,y,A,T,0,0);var N=this._createMaskCanvas(t);j.setTransform(1,0,0,1,0,0);for(var V=0,W=E.length;V<W;V+=2){var H=w.Util.transform(B,[h,y,A,T,E[V],E[V+1]]),G=_slicedToArray(w.Util.applyTransform([0,0],H),2),z=G[0],$=G[1];j.drawImage(N.canvas,z,$)}j.restore(),this.compose()}}},{key:"paintImageMaskXObjectGroup",value:function paintImageMaskXObjectGroup(t){if(this.contentVisible){for(var h=this.ctx,y=this.current.fillColor,w=this.current.patternFill,T=0,E=t.length;T<E;T++){var j=t[T],B=j.width,N=j.height,V=this.cachedCanvases.getCanvas("maskCanvas",B,N),W=V.context;W.save(),putBinaryImageMask(W,j),W.globalCompositeOperation="source-in",W.fillStyle=w?y.getPattern(W,this,h.mozCurrentTransformInverse,A.PathType.FILL):y,W.fillRect(0,0,B,N),W.restore(),h.save(),h.transform.apply(h,j.transform),h.scale(1,-1),h.drawImage(V.canvas,0,0,B,N,0,-1,1,1),h.restore()}this.compose()}}},{key:"paintImageXObject",value:function paintImageXObject(t){if(this.contentVisible){var h=t.startsWith("g_")?this.commonObjs.get(t):this.objs.get(t);h?this.paintInlineImageXObject(h):(0,w.warn)("Dependent image isn't ready yet")}}},{key:"paintImageXObjectRepeat",value:function paintImageXObjectRepeat(t,h,y,A){if(this.contentVisible){var T=t.startsWith("g_")?this.commonObjs.get(t):this.objs.get(t);if(T){for(var E=T.width,j=T.height,B=[],N=0,V=A.length;N<V;N+=2)B.push({transform:[h,0,0,y,A[N],A[N+1]],x:0,y:0,w:E,h:j});this.paintInlineImageXObjectGroup(T,B)}else(0,w.warn)("Dependent image isn't ready yet")}}},{key:"paintInlineImageXObject",value:function paintInlineImageXObject(t){if(this.contentVisible){var h,y=t.width,w=t.height,A=this.ctx;if(this.save(),A.scale(1/y,-1/w),"function"==typeof HTMLElement&&t instanceof HTMLElement||!t.data)h=t;else{var T=this.cachedCanvases.getCanvas("inlineImage",y,w);putBinaryImageData(T.context,t,this.current.transferMaps),h=T.canvas}var E=this._scaleImage(h,A.mozCurrentTransformInverse);if(A.imageSmoothingEnabled=getImageSmoothingEnabled(A.mozCurrentTransform,t.interpolate),A.drawImage(E.img,0,0,E.paintWidth,E.paintHeight,0,-w,y,w),this.imageLayer){var j=this.getCanvasPosition(0,-w);this.imageLayer.appendImage({imgData:t,left:j[0],top:j[1],width:y/A.mozCurrentTransformInverse[0],height:w/A.mozCurrentTransformInverse[3]})}this.compose(),this.restore()}}},{key:"paintInlineImageXObjectGroup",value:function paintInlineImageXObjectGroup(t,h){if(this.contentVisible){var y=this.ctx,w=t.width,A=t.height,T=this.cachedCanvases.getCanvas("inlineImage",w,A);putBinaryImageData(T.context,t,this.current.transferMaps);for(var E=0,j=h.length;E<j;E++){var B=h[E];if(y.save(),y.transform.apply(y,B.transform),y.scale(1,-1),y.drawImage(T.canvas,B.x,B.y,B.w,B.h,0,-1,1,1),this.imageLayer){var N=this.getCanvasPosition(B.x,B.y);this.imageLayer.appendImage({imgData:t,left:N[0],top:N[1],width:w,height:A})}y.restore()}this.compose()}}},{key:"paintSolidColorImageMask",value:function paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}},{key:"markPoint",value:function markPoint(t){}},{key:"markPointProps",value:function markPointProps(t,h){}},{key:"beginMarkedContent",value:function beginMarkedContent(t){this.markedContentStack.push({visible:!0})}},{key:"beginMarkedContentProps",value:function beginMarkedContentProps(t,h){"OC"===t?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(h)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}},{key:"endMarkedContent",value:function endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}},{key:"beginCompat",value:function beginCompat(){}},{key:"endCompat",value:function endCompat(){}},{key:"consumePath",value:function consumePath(t){this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(t);var h=this.ctx;this.pendingClip&&(this.pendingClip===G?h.clip("evenodd"):h.clip(),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),h.beginPath()}},{key:"getSinglePixelWidth",value:function getSinglePixelWidth(){if(null===this._cachedGetSinglePixelWidth){var t=this.ctx.mozCurrentTransform,h=Math.abs(t[0]*t[3]-t[2]*t[1]),y=Math.pow(t[0],2)+Math.pow(t[2],2),w=Math.pow(t[1],2)+Math.pow(t[3],2),A=Math.sqrt(Math.max(y,w))/h;y!==w&&this._combinedScaleFactor*A>1?this._cachedGetSinglePixelWidth=-this._combinedScaleFactor*A:h>Number.EPSILON?this._cachedGetSinglePixelWidth=A:this._cachedGetSinglePixelWidth=1}return this._cachedGetSinglePixelWidth}},{key:"getCanvasPosition",value:function getCanvasPosition(t,h){var y=this.ctx.mozCurrentTransform;return[y[0]*t+y[2]*h+y[4],y[1]*t+y[3]*h+y[5]]}},{key:"isContentVisible",value:function isContentVisible(){for(var t=this.markedContentStack.length-1;t>=0;t--)if(!this.markedContentStack[t].visible)return!1;return!0}}]),CanvasGraphics}();for(var $ in h.CanvasGraphics=z,w.OPS)void 0!==z.prototype[$]&&(z.prototype[w.OPS[$]]=z.prototype[$])},(t,h,y)=>{"use strict";Object.defineProperty(h,"__esModule",{value:!0}),h.TilingPattern=h.PathType=void 0,h.getShadingPattern=function getShadingPattern(t){switch(t[0]){case"RadialAxial":return new E(t);case"Mesh":return new j(t);case"Dummy":return new B}throw new Error("Unknown IR type: ".concat(t[0]))};var w=y(4);function _createForOfIteratorHelper(t,h){var y="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!y){if(Array.isArray(t)||(y=function _unsupportedIterableToArray(t,h){if(!t)return;if("string"==typeof t)return _arrayLikeToArray(t,h);var y=Object.prototype.toString.call(t).slice(8,-1);"Object"===y&&t.constructor&&(y=t.constructor.name);if("Map"===y||"Set"===y)return Array.from(t);if("Arguments"===y||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(y))return _arrayLikeToArray(t,h)}(t))||h&&t&&"number"==typeof t.length){y&&(t=y);var w=0,A=function F(){};return{s:A,n:function n(){return w>=t.length?{done:!0}:{done:!1,value:t[w++]}},e:function e(t){throw t},f:A}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var T,E=!0,j=!1;return{s:function s(){y=y.call(t)},n:function n(){var t=y.next();return E=t.done,t},e:function e(t){j=!0,T=t},f:function f(){try{E||null==y.return||y.return()}finally{if(j)throw T}}}}function _arrayLikeToArray(t,h){(null==h||h>t.length)&&(h=t.length);for(var y=0,w=new Array(h);y<h;y++)w[y]=t[y];return w}function _inherits(t,h){if("function"!=typeof h&&null!==h)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(h&&h.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),h&&_setPrototypeOf(t,h)}function _setPrototypeOf(t,h){return _setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(t,h){return t.__proto__=h,t},_setPrototypeOf(t,h)}function _createSuper(t){var h=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var y,w=_getPrototypeOf(t);if(h){var A=_getPrototypeOf(this).constructor;y=Reflect.construct(w,arguments,A)}else y=w.apply(this,arguments);return function _possibleConstructorReturn(t,h){if(h&&("object"===_typeof(h)||"function"==typeof h))return h;if(void 0!==h)throw new TypeError("Derived constructors may only return object or undefined");return function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,y)}}function _getPrototypeOf(t){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)},_getPrototypeOf(t)}function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _classCallCheck(t,h){if(!(t instanceof h))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,h){for(var y=0;y<h.length;y++){var w=h[y];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(t,(A=w.key,T=void 0,T=function _toPrimitive(t,h){if("object"!==_typeof(t)||null===t)return t;var y=t[Symbol.toPrimitive];if(void 0!==y){var w=y.call(t,h||"default");if("object"!==_typeof(w))return w;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===h?String:Number)(t)}(A,"string"),"symbol"===_typeof(T)?T:String(T)),w)}var A,T}function _createClass(t,h,y){return h&&_defineProperties(t.prototype,h),y&&_defineProperties(t,y),Object.defineProperty(t,"prototype",{writable:!1}),t}var A={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function applyBoundingBox(t,h){if(h&&"undefined"!=typeof Path2D){var y=h[2]-h[0],w=h[3]-h[1],A=new Path2D;A.rect(h[0],h[1],y,w),t.clip(A)}}h.PathType=A;var T=function(){function BaseShadingPattern(){_classCallCheck(this,BaseShadingPattern),this.constructor===BaseShadingPattern&&(0,w.unreachable)("Cannot initialize BaseShadingPattern.")}return _createClass(BaseShadingPattern,[{key:"getPattern",value:function getPattern(){(0,w.unreachable)("Abstract method `getPattern` called.")}}]),BaseShadingPattern}(),E=function(t){_inherits(RadialAxialShadingPattern,t);var h=_createSuper(RadialAxialShadingPattern);function RadialAxialShadingPattern(t){var y;return _classCallCheck(this,RadialAxialShadingPattern),(y=h.call(this))._type=t[1],y._bbox=t[2],y._colorStops=t[3],y._p0=t[4],y._p1=t[5],y._r0=t[6],y._r1=t[7],y.matrix=null,y}return _createClass(RadialAxialShadingPattern,[{key:"_createGradient",value:function _createGradient(t){var h;"axial"===this._type?h=t.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):"radial"===this._type&&(h=t.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));var y,w=_createForOfIteratorHelper(this._colorStops);try{for(w.s();!(y=w.n()).done;){var A=y.value;h.addColorStop(A[0],A[1])}}catch(t){w.e(t)}finally{w.f()}return h}},{key:"getPattern",value:function getPattern(t,h,y,T){var E;if(T===A.STROKE||T===A.FILL){var j=h.current.getClippedPathBoundingBox(T,t.mozCurrentTransform)||[0,0,0,0],B=Math.ceil(j[2]-j[0])||1,N=Math.ceil(j[3]-j[1])||1,V=h.cachedCanvases.getCanvas("pattern",B,N,!0),W=V.context;W.clearRect(0,0,W.canvas.width,W.canvas.height),W.beginPath(),W.rect(0,0,W.canvas.width,W.canvas.height),W.translate(-j[0],-j[1]),y=w.Util.transform(y,[1,0,0,1,j[0],j[1]]),W.transform.apply(W,h.baseTransform),this.matrix&&W.transform.apply(W,this.matrix),applyBoundingBox(W,this._bbox),W.fillStyle=this._createGradient(W),W.fill(),E=t.createPattern(V.canvas,"no-repeat");var H=new DOMMatrix(y);try{E.setTransform(H)}catch(t){(0,w.warn)('RadialAxialShadingPattern.getPattern: "'.concat(null==t?void 0:t.message,'".'))}}else applyBoundingBox(t,this._bbox),E=this._createGradient(t);return E}}]),RadialAxialShadingPattern}(T);function drawTriangle(t,h,y,w,A,T,E,j){var B,N=h.coords,V=h.colors,W=t.data,H=4*t.width;N[y+1]>N[w+1]&&(B=y,y=w,w=B,B=T,T=E,E=B),N[w+1]>N[A+1]&&(B=w,w=A,A=B,B=E,E=j,j=B),N[y+1]>N[w+1]&&(B=y,y=w,w=B,B=T,T=E,E=B);var G=(N[y]+h.offsetX)*h.scaleX,z=(N[y+1]+h.offsetY)*h.scaleY,$=(N[w]+h.offsetX)*h.scaleX,J=(N[w+1]+h.offsetY)*h.scaleY,X=(N[A]+h.offsetX)*h.scaleX,K=(N[A+1]+h.offsetY)*h.scaleY;if(!(z>=K))for(var ne,ue,pe,me,ge,we,Ce,ke,Ie=V[T],Te=V[T+1],Ee=V[T+2],Me=V[E],Be=V[E+1],Ne=V[E+2],Ze=V[j],et=V[j+1],tt=V[j+2],rt=Math.round(z),nt=Math.round(K),it=rt;it<=nt;it++){if(it<J){var at=void 0;ne=G-(G-$)*(at=it<z?0:(z-it)/(z-J)),ue=Ie-(Ie-Me)*at,pe=Te-(Te-Be)*at,me=Ee-(Ee-Ne)*at}else{var st=void 0;ne=$-($-X)*(st=it>K?1:J===K?0:(J-it)/(J-K)),ue=Me-(Me-Ze)*st,pe=Be-(Be-et)*st,me=Ne-(Ne-tt)*st}var lt=void 0;ge=G-(G-X)*(lt=it<z?0:it>K?1:(z-it)/(z-K)),we=Ie-(Ie-Ze)*lt,Ce=Te-(Te-et)*lt,ke=Ee-(Ee-tt)*lt;for(var ct=Math.round(Math.min(ne,ge)),ht=Math.round(Math.max(ne,ge)),vt=H*it+4*ct,gt=ct;gt<=ht;gt++)(lt=(ne-gt)/(ne-ge))<0?lt=0:lt>1&&(lt=1),W[vt++]=ue-(ue-we)*lt|0,W[vt++]=pe-(pe-Ce)*lt|0,W[vt++]=me-(me-ke)*lt|0,W[vt++]=255}}function drawFigure(t,h,y){var w,A,T=h.coords,E=h.colors;switch(h.type){case"lattice":var j=h.verticesPerRow,B=Math.floor(T.length/j)-1,N=j-1;for(w=0;w<B;w++)for(var V=w*j,W=0;W<N;W++,V++)drawTriangle(t,y,T[V],T[V+1],T[V+j],E[V],E[V+1],E[V+j]),drawTriangle(t,y,T[V+j+1],T[V+1],T[V+j],E[V+j+1],E[V+1],E[V+j]);break;case"triangles":for(w=0,A=T.length;w<A;w+=3)drawTriangle(t,y,T[w],T[w+1],T[w+2],E[w],E[w+1],E[w+2]);break;default:throw new Error("illegal figure")}}var j=function(t){_inherits(MeshShadingPattern,t);var h=_createSuper(MeshShadingPattern);function MeshShadingPattern(t){var y;return _classCallCheck(this,MeshShadingPattern),(y=h.call(this))._coords=t[2],y._colors=t[3],y._figures=t[4],y._bounds=t[5],y._bbox=t[7],y._background=t[8],y.matrix=null,y}return _createClass(MeshShadingPattern,[{key:"_createMeshCanvas",value:function _createMeshCanvas(t,h,y){var w=Math.floor(this._bounds[0]),A=Math.floor(this._bounds[1]),T=Math.ceil(this._bounds[2])-w,E=Math.ceil(this._bounds[3])-A,j=Math.min(Math.ceil(Math.abs(T*t[0]*1.1)),3e3),B=Math.min(Math.ceil(Math.abs(E*t[1]*1.1)),3e3),N=T/j,V=E/B,W={coords:this._coords,colors:this._colors,offsetX:-w,offsetY:-A,scaleX:1/N,scaleY:1/V},H=j+4,G=B+4,z=y.getCanvas("mesh",H,G,!1),$=z.context,J=$.createImageData(j,B);if(h)for(var X=J.data,K=0,ne=X.length;K<ne;K+=4)X[K]=h[0],X[K+1]=h[1],X[K+2]=h[2],X[K+3]=255;var ue,pe=_createForOfIteratorHelper(this._figures);try{for(pe.s();!(ue=pe.n()).done;){drawFigure(J,ue.value,W)}}catch(t){pe.e(t)}finally{pe.f()}return $.putImageData(J,2,2),{canvas:z.canvas,offsetX:w-2*N,offsetY:A-2*V,scaleX:N,scaleY:V}}},{key:"getPattern",value:function getPattern(t,h,y,T){var E;if(applyBoundingBox(t,this._bbox),T===A.SHADING)E=w.Util.singularValueDecompose2dScale(t.mozCurrentTransform);else if(E=w.Util.singularValueDecompose2dScale(h.baseTransform),this.matrix){var j=w.Util.singularValueDecompose2dScale(this.matrix);E=[E[0]*j[0],E[1]*j[1]]}var B=this._createMeshCanvas(E,T===A.SHADING?null:this._background,h.cachedCanvases);return T!==A.SHADING&&(t.setTransform.apply(t,h.baseTransform),this.matrix&&t.transform.apply(t,this.matrix)),t.translate(B.offsetX,B.offsetY),t.scale(B.scaleX,B.scaleY),t.createPattern(B.canvas,"no-repeat")}}]),MeshShadingPattern}(T),B=function(t){_inherits(DummyShadingPattern,t);var h=_createSuper(DummyShadingPattern);function DummyShadingPattern(){return _classCallCheck(this,DummyShadingPattern),h.apply(this,arguments)}return _createClass(DummyShadingPattern,[{key:"getPattern",value:function getPattern(){return"hotpink"}}]),DummyShadingPattern}(T);var N=1,V=2,W=function(){function TilingPattern(t,h,y,w,A){_classCallCheck(this,TilingPattern),this.operatorList=t[2],this.matrix=t[3]||[1,0,0,1,0,0],this.bbox=t[4],this.xstep=t[5],this.ystep=t[6],this.paintType=t[7],this.tilingType=t[8],this.color=h,this.ctx=y,this.canvasGraphicsFactory=w,this.baseTransform=A}return _createClass(TilingPattern,[{key:"createPatternCanvas",value:function createPatternCanvas(t){var h=this.operatorList,y=this.bbox,A=this.xstep,T=this.ystep,E=this.paintType,j=this.tilingType,B=this.color,N=this.canvasGraphicsFactory;(0,w.info)("TilingType: "+j);var V=y[0],W=y[1],H=y[2],G=y[3],z=w.Util.singularValueDecompose2dScale(this.matrix),$=w.Util.singularValueDecompose2dScale(this.baseTransform),J=[z[0]*$[0],z[1]*$[1]],X=this.getSizeAndScale(A,this.ctx.canvas.width,J[0]),K=this.getSizeAndScale(T,this.ctx.canvas.height,J[1]),ne=t.cachedCanvases.getCanvas("pattern",X.size,K.size,!0),ue=ne.context,pe=N.createCanvasGraphics(ue);pe.groupLevel=t.groupLevel,this.setFillAndStrokeStyleToContext(pe,E,B);var me=V,ge=W,we=H,Ce=G;return V<0&&(me=0,we+=Math.abs(V)),W<0&&(ge=0,Ce+=Math.abs(W)),ue.translate(-X.scale*me,-K.scale*ge),pe.transform(X.scale,0,0,K.scale,0,0),this.clipBbox(pe,me,ge,we,Ce),pe.baseTransform=pe.ctx.mozCurrentTransform.slice(),pe.executeOperatorList(h),pe.endDrawing(),{canvas:ne.canvas,scaleX:X.scale,scaleY:K.scale,offsetX:me,offsetY:ge}}},{key:"getSizeAndScale",value:function getSizeAndScale(t,h,y){t=Math.abs(t);var w=Math.max(TilingPattern.MAX_PATTERN_SIZE,h),A=Math.ceil(t*y);return A>=w?A=w:y=A/t,{scale:y,size:A}}},{key:"clipBbox",value:function clipBbox(t,h,y,w,A){var T=w-h,E=A-y;t.ctx.rect(h,y,T,E),t.clip(),t.endPath()}},{key:"setFillAndStrokeStyleToContext",value:function setFillAndStrokeStyleToContext(t,h,y){var A=t.ctx,T=t.current;switch(h){case N:var E=this.ctx;A.fillStyle=E.fillStyle,A.strokeStyle=E.strokeStyle,T.fillColor=E.fillStyle,T.strokeColor=E.strokeStyle;break;case V:var j=w.Util.makeHexColor(y[0],y[1],y[2]);A.fillStyle=j,A.strokeStyle=j,T.fillColor=j,T.strokeColor=j;break;default:throw new w.FormatError("Unsupported paint type: ".concat(h))}}},{key:"getPattern",value:function getPattern(t,h,y,T){var E=y;T!==A.SHADING&&(E=w.Util.transform(E,h.baseTransform),this.matrix&&(E=w.Util.transform(E,this.matrix)));var j=this.createPatternCanvas(h),B=new DOMMatrix(E);B=(B=B.translate(j.offsetX,j.offsetY)).scale(1/j.scaleX,1/j.scaleY);var N=t.createPattern(j.canvas,"repeat");try{N.setTransform(B)}catch(t){(0,w.warn)('TilingPattern.getPattern: "'.concat(null==t?void 0:t.message,'".'))}return N}}],[{key:"MAX_PATTERN_SIZE",get:function get(){return(0,w.shadow)(this,"MAX_PATTERN_SIZE",3e3)}}]),TilingPattern}();h.TilingPattern=W},(t,h)=>{"use strict";Object.defineProperty(h,"__esModule",{value:!0}),h.GlobalWorkerOptions=void 0;var y=Object.create(null);h.GlobalWorkerOptions=y,y.workerPort=void 0===y.workerPort?null:y.workerPort,y.workerSrc=void 0===y.workerSrc?"":y.workerSrc},(t,h,y)=>{"use strict";Object.defineProperty(h,"__esModule",{value:!0}),h.MessageHandler=void 0;var w=function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}(y(2)),A=y(4);function asyncGeneratorStep(t,h,y,w,A,T,E){try{var j=t[T](E),B=j.value}catch(t){return void y(t)}j.done?h(B):Promise.resolve(B).then(w,A)}function _defineProperties(t,h){for(var y=0;y<h.length;y++){var w=h[y];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(t,(A=w.key,T=void 0,T=function _toPrimitive(t,h){if("object"!==_typeof(t)||null===t)return t;var y=t[Symbol.toPrimitive];if(void 0!==y){var w=y.call(t,h||"default");if("object"!==_typeof(w))return w;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===h?String:Number)(t)}(A,"string"),"symbol"===_typeof(T)?T:String(T)),w)}var A,T}function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}var T=1,E=2,j=1,B=2,N=3,V=4,W=5,H=6,G=7,z=8;function wrapReason(t){if(!(t instanceof Error||"object"===_typeof(t)&&null!==t))return(0,A.warn)('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),t;switch(t.name){case"AbortException":return new A.AbortException(t.message);case"MissingPDFException":return new A.MissingPDFException(t.message);case"PasswordException":return new A.PasswordException(t.message,t.code);case"UnexpectedResponseException":return new A.UnexpectedResponseException(t.message,t.status);case"UnknownErrorException":return new A.UnknownErrorException(t.message,t.details);default:return new A.UnknownErrorException(t.message,t.toString())}}var $=function(){function MessageHandler(t,h,y){var w=this;!function _classCallCheck(t,h){if(!(t instanceof h))throw new TypeError("Cannot call a class as a function")}(this,MessageHandler),this.sourceName=t,this.targetName=h,this.comObj=y,this.callbackId=1,this.streamId=1,this.postMessageTransfers=!0,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=function(t){var h=t.data;if(h.targetName===w.sourceName)if(h.stream)w._processStreamMessage(h);else if(h.callback){var A=h.callbackId,j=w.callbackCapabilities[A];if(!j)throw new Error("Cannot resolve callback ".concat(A));if(delete w.callbackCapabilities[A],h.callback===T)j.resolve(h.data);else{if(h.callback!==E)throw new Error("Unexpected callback case");j.reject(wrapReason(h.reason))}}else{var B=w.actionHandler[h.action];if(!B)throw new Error("Unknown action from worker: ".concat(h.action));if(h.callbackId){var N=w.sourceName,V=h.sourceName;new Promise((function(t){t(B(h.data))})).then((function(t){y.postMessage({sourceName:N,targetName:V,callback:T,callbackId:h.callbackId,data:t})}),(function(t){y.postMessage({sourceName:N,targetName:V,callback:E,callbackId:h.callbackId,reason:wrapReason(t)})}))}else h.streamId?w._createStreamSink(h):B(h.data)}},y.addEventListener("message",this._onComObjOnMessage)}var t;return function _createClass(t,h,y){return h&&_defineProperties(t.prototype,h),y&&_defineProperties(t,y),Object.defineProperty(t,"prototype",{writable:!1}),t}(MessageHandler,[{key:"on",value:function on(t,h){var y=this.actionHandler;if(y[t])throw new Error('There is already an actionName called "'.concat(t,'"'));y[t]=h}},{key:"send",value:function send(t,h,y){this._postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,data:h},y)}},{key:"sendWithPromise",value:function sendWithPromise(t,h,y){var w=this.callbackId++,T=(0,A.createPromiseCapability)();this.callbackCapabilities[w]=T;try{this._postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,callbackId:w,data:h},y)}catch(t){T.reject(t)}return T.promise}},{key:"sendWithStream",value:function sendWithStream(t,h,y,w){var T=this,E=this.streamId++,B=this.sourceName,N=this.targetName,V=this.comObj;return new ReadableStream({start:function start(y){var j=(0,A.createPromiseCapability)();return T.streamControllers[E]={controller:y,startCall:j,pullCall:null,cancelCall:null,isClosed:!1},T._postMessage({sourceName:B,targetName:N,action:t,streamId:E,data:h,desiredSize:y.desiredSize},w),j.promise},pull:function pull(t){var h=(0,A.createPromiseCapability)();return T.streamControllers[E].pullCall=h,V.postMessage({sourceName:B,targetName:N,stream:H,streamId:E,desiredSize:t.desiredSize}),h.promise},cancel:function cancel(t){(0,A.assert)(t instanceof Error,"cancel must have a valid reason");var h=(0,A.createPromiseCapability)();return T.streamControllers[E].cancelCall=h,T.streamControllers[E].isClosed=!0,V.postMessage({sourceName:B,targetName:N,stream:j,streamId:E,reason:wrapReason(t)}),h.promise}},y)}},{key:"_createStreamSink",value:function _createStreamSink(t){var h=t.streamId,y=this.sourceName,w=t.sourceName,T=this.comObj,E=this,j=this.actionHandler[t.action],B={enqueue:function enqueue(t){var T=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,j=arguments.length>2?arguments[2]:void 0;if(!this.isCancelled){var B=this.desiredSize;this.desiredSize-=T,B>0&&this.desiredSize<=0&&(this.sinkCapability=(0,A.createPromiseCapability)(),this.ready=this.sinkCapability.promise),E._postMessage({sourceName:y,targetName:w,stream:V,streamId:h,chunk:t},j)}},close:function close(){this.isCancelled||(this.isCancelled=!0,T.postMessage({sourceName:y,targetName:w,stream:N,streamId:h}),delete E.streamSinks[h])},error:function error(t){(0,A.assert)(t instanceof Error,"error must have a valid reason"),this.isCancelled||(this.isCancelled=!0,T.postMessage({sourceName:y,targetName:w,stream:W,streamId:h,reason:wrapReason(t)}))},sinkCapability:(0,A.createPromiseCapability)(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:t.desiredSize,ready:null};B.sinkCapability.resolve(),B.ready=B.sinkCapability.promise,this.streamSinks[h]=B,new Promise((function(h){h(j(t.data,B))})).then((function(){T.postMessage({sourceName:y,targetName:w,stream:z,streamId:h,success:!0})}),(function(t){T.postMessage({sourceName:y,targetName:w,stream:z,streamId:h,reason:wrapReason(t)})}))}},{key:"_processStreamMessage",value:function _processStreamMessage(t){var h=t.streamId,y=this.sourceName,w=t.sourceName,T=this.comObj,E=this.streamControllers[h],$=this.streamSinks[h];switch(t.stream){case z:t.success?E.startCall.resolve():E.startCall.reject(wrapReason(t.reason));break;case G:t.success?E.pullCall.resolve():E.pullCall.reject(wrapReason(t.reason));break;case H:if(!$){T.postMessage({sourceName:y,targetName:w,stream:G,streamId:h,success:!0});break}$.desiredSize<=0&&t.desiredSize>0&&$.sinkCapability.resolve(),$.desiredSize=t.desiredSize,new Promise((function(t){t($.onPull&&$.onPull())})).then((function(){T.postMessage({sourceName:y,targetName:w,stream:G,streamId:h,success:!0})}),(function(t){T.postMessage({sourceName:y,targetName:w,stream:G,streamId:h,reason:wrapReason(t)})}));break;case V:if((0,A.assert)(E,"enqueue should have stream controller"),E.isClosed)break;E.controller.enqueue(t.chunk);break;case N:if((0,A.assert)(E,"close should have stream controller"),E.isClosed)break;E.isClosed=!0,E.controller.close(),this._deleteStreamController(E,h);break;case W:(0,A.assert)(E,"error should have stream controller"),E.controller.error(wrapReason(t.reason)),this._deleteStreamController(E,h);break;case B:t.success?E.cancelCall.resolve():E.cancelCall.reject(wrapReason(t.reason)),this._deleteStreamController(E,h);break;case j:if(!$)break;new Promise((function(h){h($.onCancel&&$.onCancel(wrapReason(t.reason)))})).then((function(){T.postMessage({sourceName:y,targetName:w,stream:B,streamId:h,success:!0})}),(function(t){T.postMessage({sourceName:y,targetName:w,stream:B,streamId:h,reason:wrapReason(t)})})),$.sinkCapability.reject(wrapReason(t.reason)),$.isCancelled=!0,delete this.streamSinks[h];break;default:throw new Error("Unexpected stream case")}}},{key:"_deleteStreamController",value:(t=function _asyncToGenerator(t){return function(){var h=this,y=arguments;return new Promise((function(w,A){var T=t.apply(h,y);function _next(t){asyncGeneratorStep(T,w,A,_next,_throw,"next",t)}function _throw(t){asyncGeneratorStep(T,w,A,_next,_throw,"throw",t)}_next(void 0)}))}}(w.default.mark((function _callee(t,h){return w.default.wrap((function _callee$(y){for(;;)switch(y.prev=y.next){case 0:return y.next=2,Promise.allSettled([t.startCall&&t.startCall.promise,t.pullCall&&t.pullCall.promise,t.cancelCall&&t.cancelCall.promise]);case 2:delete this.streamControllers[h];case 3:case"end":return y.stop()}}),_callee,this)}))),function _deleteStreamController(h,y){return t.apply(this,arguments)})},{key:"_postMessage",value:function _postMessage(t,h){h&&this.postMessageTransfers?this.comObj.postMessage(t,h):this.comObj.postMessage(t)}},{key:"destroy",value:function destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}]),MessageHandler}();h.MessageHandler=$},(t,h,y)=>{"use strict";function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}Object.defineProperty(h,"__esModule",{value:!0}),h.Metadata=void 0;var w=y(4);function _defineProperties(t,h){for(var y=0;y<h.length;y++){var w=h[y];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(t,(A=w.key,T=void 0,T=function _toPrimitive(t,h){if("object"!==_typeof(t)||null===t)return t;var y=t[Symbol.toPrimitive];if(void 0!==y){var w=y.call(t,h||"default");if("object"!==_typeof(w))return w;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===h?String:Number)(t)}(A,"string"),"symbol"===_typeof(T)?T:String(T)),w)}var A,T}function _classPrivateFieldInitSpec(t,h,y){!function _checkPrivateRedeclaration(t,h){if(h.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,h),h.set(t,y)}function _classPrivateFieldGet(t,h){return function _classApplyDescriptorGet(t,h){if(h.get)return h.get.call(t);return h.value}(t,_classExtractFieldDescriptor(t,h,"get"))}function _classPrivateFieldSet(t,h,y){return function _classApplyDescriptorSet(t,h,y){if(h.set)h.set.call(t,y);else{if(!h.writable)throw new TypeError("attempted to set read only private field");h.value=y}}(t,_classExtractFieldDescriptor(t,h,"set"),y),y}function _classExtractFieldDescriptor(t,h,y){if(!h.has(t))throw new TypeError("attempted to "+y+" private field on non-instance");return h.get(t)}var A=new WeakMap,T=new WeakMap,E=function(){function Metadata(t){var h=t.parsedData,y=t.rawData;!function _classCallCheck(t,h){if(!(t instanceof h))throw new TypeError("Cannot call a class as a function")}(this,Metadata),_classPrivateFieldInitSpec(this,A,{writable:!0,value:void 0}),_classPrivateFieldInitSpec(this,T,{writable:!0,value:void 0}),_classPrivateFieldSet(this,A,h),_classPrivateFieldSet(this,T,y)}return function _createClass(t,h,y){return h&&_defineProperties(t.prototype,h),y&&_defineProperties(t,y),Object.defineProperty(t,"prototype",{writable:!1}),t}(Metadata,[{key:"getRaw",value:function getRaw(){return _classPrivateFieldGet(this,T)}},{key:"get",value:function get(t){var h;return null!==(h=_classPrivateFieldGet(this,A).get(t))&&void 0!==h?h:null}},{key:"getAll",value:function getAll(){return(0,w.objectFromMap)(_classPrivateFieldGet(this,A))}},{key:"has",value:function has(t){return _classPrivateFieldGet(this,A).has(t)}}]),Metadata}();h.Metadata=E},(t,h,y)=>{"use strict";function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}Object.defineProperty(h,"__esModule",{value:!0}),h.OptionalContentConfig=void 0;var w=y(4);function _createForOfIteratorHelper(t,h){var y="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!y){if(Array.isArray(t)||(y=function _unsupportedIterableToArray(t,h){if(!t)return;if("string"==typeof t)return _arrayLikeToArray(t,h);var y=Object.prototype.toString.call(t).slice(8,-1);"Object"===y&&t.constructor&&(y=t.constructor.name);if("Map"===y||"Set"===y)return Array.from(t);if("Arguments"===y||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(y))return _arrayLikeToArray(t,h)}(t))||h&&t&&"number"==typeof t.length){y&&(t=y);var w=0,A=function F(){};return{s:A,n:function n(){return w>=t.length?{done:!0}:{done:!1,value:t[w++]}},e:function e(t){throw t},f:A}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var T,E=!0,j=!1;return{s:function s(){y=y.call(t)},n:function n(){var t=y.next();return E=t.done,t},e:function e(t){j=!0,T=t},f:function f(){try{E||null==y.return||y.return()}finally{if(j)throw T}}}}function _arrayLikeToArray(t,h){(null==h||h>t.length)&&(h=t.length);for(var y=0,w=new Array(h);y<h;y++)w[y]=t[y];return w}function _defineProperties(t,h){for(var y=0;y<h.length;y++){var w=h[y];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(t,(A=w.key,T=void 0,T=function _toPrimitive(t,h){if("object"!==_typeof(t)||null===t)return t;var y=t[Symbol.toPrimitive];if(void 0!==y){var w=y.call(t,h||"default");if("object"!==_typeof(w))return w;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===h?String:Number)(t)}(A,"string"),"symbol"===_typeof(T)?T:String(T)),w)}var A,T}function _classCallCheck(t,h){if(!(t instanceof h))throw new TypeError("Cannot call a class as a function")}var A=function OptionalContentGroup(t,h){_classCallCheck(this,OptionalContentGroup),this.visible=!0,this.name=t,this.intent=h},T=function(){function OptionalContentConfig(t){if(_classCallCheck(this,OptionalContentConfig),this.name=null,this.creator=null,this._order=null,this._groups=new Map,null!==t){this.name=t.name,this.creator=t.creator,this._order=t.order;var h,y=_createForOfIteratorHelper(t.groups);try{for(y.s();!(h=y.n()).done;){var w=h.value;this._groups.set(w.id,new A(w.name,w.intent))}}catch(t){y.e(t)}finally{y.f()}if("OFF"===t.baseState){var T,E=_createForOfIteratorHelper(this._groups);try{for(E.s();!(T=E.n()).done;){T.value.visible=!1}}catch(t){E.e(t)}finally{E.f()}}var j,B=_createForOfIteratorHelper(t.on);try{for(B.s();!(j=B.n()).done;){var N=j.value;this._groups.get(N).visible=!0}}catch(t){B.e(t)}finally{B.f()}var V,W=_createForOfIteratorHelper(t.off);try{for(W.s();!(V=W.n()).done;){var H=V.value;this._groups.get(H).visible=!1}}catch(t){W.e(t)}finally{W.f()}}}return function _createClass(t,h,y){return h&&_defineProperties(t.prototype,h),y&&_defineProperties(t,y),Object.defineProperty(t,"prototype",{writable:!1}),t}(OptionalContentConfig,[{key:"_evaluateVisibilityExpression",value:function _evaluateVisibilityExpression(t){var h=t.length;if(h<2)return!0;for(var y=t[0],A=1;A<h;A++){var T=t[A],E=void 0;if(Array.isArray(T))E=this._evaluateVisibilityExpression(T);else{if(!this._groups.has(T))return(0,w.warn)("Optional content group not found: ".concat(T)),!0;E=this._groups.get(T).visible}switch(y){case"And":if(!E)return!1;break;case"Or":if(E)return!0;break;case"Not":return!E;default:return!0}}return"And"===y}},{key:"isVisible",value:function isVisible(t){if(0===this._groups.size)return!0;if(!t)return(0,w.warn)("Optional content group not defined."),!0;if("OCG"===t.type)return this._groups.has(t.id)?this._groups.get(t.id).visible:((0,w.warn)("Optional content group not found: ".concat(t.id)),!0);if("OCMD"===t.type){if(t.expression)return this._evaluateVisibilityExpression(t.expression);if(!t.policy||"AnyOn"===t.policy){var h,y=_createForOfIteratorHelper(t.ids);try{for(y.s();!(h=y.n()).done;){var A=h.value;if(!this._groups.has(A))return(0,w.warn)("Optional content group not found: ".concat(A)),!0;if(this._groups.get(A).visible)return!0}}catch(t){y.e(t)}finally{y.f()}return!1}if("AllOn"===t.policy){var T,E=_createForOfIteratorHelper(t.ids);try{for(E.s();!(T=E.n()).done;){var j=T.value;if(!this._groups.has(j))return(0,w.warn)("Optional content group not found: ".concat(j)),!0;if(!this._groups.get(j).visible)return!1}}catch(t){E.e(t)}finally{E.f()}return!0}if("AnyOff"===t.policy){var B,N=_createForOfIteratorHelper(t.ids);try{for(N.s();!(B=N.n()).done;){var V=B.value;if(!this._groups.has(V))return(0,w.warn)("Optional content group not found: ".concat(V)),!0;if(!this._groups.get(V).visible)return!0}}catch(t){N.e(t)}finally{N.f()}return!1}if("AllOff"===t.policy){var W,H=_createForOfIteratorHelper(t.ids);try{for(H.s();!(W=H.n()).done;){var G=W.value;if(!this._groups.has(G))return(0,w.warn)("Optional content group not found: ".concat(G)),!0;if(this._groups.get(G).visible)return!1}}catch(t){H.e(t)}finally{H.f()}return!0}return(0,w.warn)("Unknown optional content policy ".concat(t.policy,".")),!0}return(0,w.warn)("Unknown group type ".concat(t.type,".")),!0}},{key:"setVisibility",value:function setVisibility(t){var h=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this._groups.has(t)?this._groups.get(t).visible=!!h:(0,w.warn)("Optional content group not found: ".concat(t))}},{key:"getOrder",value:function getOrder(){return this._groups.size?this._order?this._order.slice():Array.from(this._groups.keys()):null}},{key:"getGroups",value:function getGroups(){return this._groups.size>0?(0,w.objectFromMap)(this._groups):null}},{key:"getGroup",value:function getGroup(t){return this._groups.get(t)||null}}]),OptionalContentConfig}();h.OptionalContentConfig=T},(t,h,y)=>{"use strict";Object.defineProperty(h,"__esModule",{value:!0}),h.PDFDataTransportStream=void 0;var w=function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}(y(2)),A=y(4),T=y(1);function asyncGeneratorStep(t,h,y,w,A,T,E){try{var j=t[T](E),B=j.value}catch(t){return void y(t)}j.done?h(B):Promise.resolve(B).then(w,A)}function _asyncToGenerator(t){return function(){var h=this,y=arguments;return new Promise((function(w,A){var T=t.apply(h,y);function _next(t){asyncGeneratorStep(T,w,A,_next,_throw,"next",t)}function _throw(t){asyncGeneratorStep(T,w,A,_next,_throw,"throw",t)}_next(void 0)}))}}function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _createForOfIteratorHelper(t,h){var y="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!y){if(Array.isArray(t)||(y=function _unsupportedIterableToArray(t,h){if(!t)return;if("string"==typeof t)return _arrayLikeToArray(t,h);var y=Object.prototype.toString.call(t).slice(8,-1);"Object"===y&&t.constructor&&(y=t.constructor.name);if("Map"===y||"Set"===y)return Array.from(t);if("Arguments"===y||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(y))return _arrayLikeToArray(t,h)}(t))||h&&t&&"number"==typeof t.length){y&&(t=y);var w=0,A=function F(){};return{s:A,n:function n(){return w>=t.length?{done:!0}:{done:!1,value:t[w++]}},e:function e(t){throw t},f:A}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var T,E=!0,j=!1;return{s:function s(){y=y.call(t)},n:function n(){var t=y.next();return E=t.done,t},e:function e(t){j=!0,T=t},f:function f(){try{E||null==y.return||y.return()}finally{if(j)throw T}}}}function _arrayLikeToArray(t,h){(null==h||h>t.length)&&(h=t.length);for(var y=0,w=new Array(h);y<h;y++)w[y]=t[y];return w}function _classCallCheck(t,h){if(!(t instanceof h))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,h){for(var y=0;y<h.length;y++){var w=h[y];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(t,(A=w.key,T=void 0,T=function _toPrimitive(t,h){if("object"!==_typeof(t)||null===t)return t;var y=t[Symbol.toPrimitive];if(void 0!==y){var w=y.call(t,h||"default");if("object"!==_typeof(w))return w;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===h?String:Number)(t)}(A,"string"),"symbol"===_typeof(T)?T:String(T)),w)}var A,T}function _createClass(t,h,y){return h&&_defineProperties(t.prototype,h),y&&_defineProperties(t,y),Object.defineProperty(t,"prototype",{writable:!1}),t}var E=function(){function PDFDataTransportStream(t,h){var y=this;_classCallCheck(this,PDFDataTransportStream),(0,A.assert)(h,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=t.progressiveDone||!1,this._contentDispositionFilename=t.contentDispositionFilename||null;var w=t.initialData;if((null==w?void 0:w.length)>0){var T=new Uint8Array(w).buffer;this._queuedChunks.push(T)}this._pdfDataRangeTransport=h,this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange,this._contentLength=t.length,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener((function(t,h){y._onReceiveData({begin:t,chunk:h})})),this._pdfDataRangeTransport.addProgressListener((function(t,h){y._onProgress({loaded:t,total:h})})),this._pdfDataRangeTransport.addProgressiveReadListener((function(t){y._onReceiveData({chunk:t})})),this._pdfDataRangeTransport.addProgressiveDoneListener((function(){y._onProgressiveDone()})),this._pdfDataRangeTransport.transportReady()}return _createClass(PDFDataTransportStream,[{key:"_onReceiveData",value:function _onReceiveData(t){var h=new Uint8Array(t.chunk).buffer;if(void 0===t.begin)this._fullRequestReader?this._fullRequestReader._enqueue(h):this._queuedChunks.push(h);else{var y=this._rangeReaders.some((function(y){return y._begin===t.begin&&(y._enqueue(h),!0)}));(0,A.assert)(y,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}},{key:"_progressiveDataLength",get:function get(){var t,h;return null!==(t=null===(h=this._fullRequestReader)||void 0===h?void 0:h._loaded)&&void 0!==t?t:0}},{key:"_onProgress",value:function _onProgress(t){if(void 0===t.total){var h=this._rangeReaders[0];null!=h&&h.onProgress&&h.onProgress({loaded:t.loaded})}else{var y=this._fullRequestReader;null!=y&&y.onProgress&&y.onProgress({loaded:t.loaded,total:t.total})}}},{key:"_onProgressiveDone",value:function _onProgressiveDone(){this._fullRequestReader&&this._fullRequestReader.progressiveDone(),this._progressiveDone=!0}},{key:"_removeRangeReader",value:function _removeRangeReader(t){var h=this._rangeReaders.indexOf(t);h>=0&&this._rangeReaders.splice(h,1)}},{key:"getFullReader",value:function getFullReader(){(0,A.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");var t=this._queuedChunks;return this._queuedChunks=null,new j(this,t,this._progressiveDone,this._contentDispositionFilename)}},{key:"getRangeReader",value:function getRangeReader(t,h){if(h<=this._progressiveDataLength)return null;var y=new B(this,t,h);return this._pdfDataRangeTransport.requestDataRange(t,h),this._rangeReaders.push(y),y}},{key:"cancelAllRequests",value:function cancelAllRequests(t){this._fullRequestReader&&this._fullRequestReader.cancel(t);var h,y=_createForOfIteratorHelper(this._rangeReaders.slice(0));try{for(y.s();!(h=y.n()).done;){h.value.cancel(t)}}catch(t){y.e(t)}finally{y.f()}this._pdfDataRangeTransport.abort()}}]),PDFDataTransportStream}();h.PDFDataTransportStream=E;var j=function(){function PDFDataTransportStreamReader(t,h){var y=arguments.length>2&&void 0!==arguments[2]&&arguments[2],w=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;_classCallCheck(this,PDFDataTransportStreamReader),this._stream=t,this._done=y||!1,this._filename=(0,T.isPdfFile)(w)?w:null,this._queuedChunks=h||[],this._loaded=0;var A,E=_createForOfIteratorHelper(this._queuedChunks);try{for(E.s();!(A=E.n()).done;){var j=A.value;this._loaded+=j.byteLength}}catch(t){E.e(t)}finally{E.f()}this._requests=[],this._headersReady=Promise.resolve(),t._fullRequestReader=this,this.onProgress=null}var t;return _createClass(PDFDataTransportStreamReader,[{key:"_enqueue",value:function _enqueue(t){if(!this._done){if(this._requests.length>0)this._requests.shift().resolve({value:t,done:!1});else this._queuedChunks.push(t);this._loaded+=t.byteLength}}},{key:"headersReady",get:function get(){return this._headersReady}},{key:"filename",get:function get(){return this._filename}},{key:"isRangeSupported",get:function get(){return this._stream._isRangeSupported}},{key:"isStreamingSupported",get:function get(){return this._stream._isStreamingSupported}},{key:"contentLength",get:function get(){return this._stream._contentLength}},{key:"read",value:(t=_asyncToGenerator(w.default.mark((function _callee(){var t,h;return w.default.wrap((function _callee$(y){for(;;)switch(y.prev=y.next){case 0:if(!(this._queuedChunks.length>0)){y.next=3;break}return t=this._queuedChunks.shift(),y.abrupt("return",{value:t,done:!1});case 3:if(!this._done){y.next=5;break}return y.abrupt("return",{value:void 0,done:!0});case 5:return h=(0,A.createPromiseCapability)(),this._requests.push(h),y.abrupt("return",h.promise);case 8:case"end":return y.stop()}}),_callee,this)}))),function read(){return t.apply(this,arguments)})},{key:"cancel",value:function cancel(t){this._done=!0;var h,y=_createForOfIteratorHelper(this._requests);try{for(y.s();!(h=y.n()).done;){h.value.resolve({value:void 0,done:!0})}}catch(t){y.e(t)}finally{y.f()}this._requests.length=0}},{key:"progressiveDone",value:function progressiveDone(){this._done||(this._done=!0)}}]),PDFDataTransportStreamReader}(),B=function(){function PDFDataTransportStreamRangeReader(t,h,y){_classCallCheck(this,PDFDataTransportStreamRangeReader),this._stream=t,this._begin=h,this._end=y,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}var t;return _createClass(PDFDataTransportStreamRangeReader,[{key:"_enqueue",value:function _enqueue(t){if(!this._done){if(0===this._requests.length)this._queuedChunk=t;else{this._requests.shift().resolve({value:t,done:!1});var h,y=_createForOfIteratorHelper(this._requests);try{for(y.s();!(h=y.n()).done;){h.value.resolve({value:void 0,done:!0})}}catch(t){y.e(t)}finally{y.f()}this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}},{key:"isStreamingSupported",get:function get(){return!1}},{key:"read",value:(t=_asyncToGenerator(w.default.mark((function _callee2(){var t,h;return w.default.wrap((function _callee2$(y){for(;;)switch(y.prev=y.next){case 0:if(!this._queuedChunk){y.next=4;break}return t=this._queuedChunk,this._queuedChunk=null,y.abrupt("return",{value:t,done:!1});case 4:if(!this._done){y.next=6;break}return y.abrupt("return",{value:void 0,done:!0});case 6:return h=(0,A.createPromiseCapability)(),this._requests.push(h),y.abrupt("return",h.promise);case 9:case"end":return y.stop()}}),_callee2,this)}))),function read(){return t.apply(this,arguments)})},{key:"cancel",value:function cancel(t){this._done=!0;var h,y=_createForOfIteratorHelper(this._requests);try{for(y.s();!(h=y.n()).done;){h.value.resolve({value:void 0,done:!0})}}catch(t){y.e(t)}finally{y.f()}this._requests.length=0,this._stream._removeRangeReader(this)}}]),PDFDataTransportStreamRangeReader}()},(t,h)=>{"use strict";function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _createForOfIteratorHelper(t,h){var y="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!y){if(Array.isArray(t)||(y=function _unsupportedIterableToArray(t,h){if(!t)return;if("string"==typeof t)return _arrayLikeToArray(t,h);var y=Object.prototype.toString.call(t).slice(8,-1);"Object"===y&&t.constructor&&(y=t.constructor.name);if("Map"===y||"Set"===y)return Array.from(t);if("Arguments"===y||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(y))return _arrayLikeToArray(t,h)}(t))||h&&t&&"number"==typeof t.length){y&&(t=y);var w=0,A=function F(){};return{s:A,n:function n(){return w>=t.length?{done:!0}:{done:!1,value:t[w++]}},e:function e(t){throw t},f:A}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var T,E=!0,j=!1;return{s:function s(){y=y.call(t)},n:function n(){var t=y.next();return E=t.done,t},e:function e(t){j=!0,T=t},f:function f(){try{E||null==y.return||y.return()}finally{if(j)throw T}}}}function _arrayLikeToArray(t,h){(null==h||h>t.length)&&(h=t.length);for(var y=0,w=new Array(h);y<h;y++)w[y]=t[y];return w}function _defineProperties(t,h){for(var y=0;y<h.length;y++){var w=h[y];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(t,(A=w.key,T=void 0,T=function _toPrimitive(t,h){if("object"!==_typeof(t)||null===t)return t;var y=t[Symbol.toPrimitive];if(void 0!==y){var w=y.call(t,h||"default");if("object"!==_typeof(w))return w;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===h?String:Number)(t)}(A,"string"),"symbol"===_typeof(T)?T:String(T)),w)}var A,T}Object.defineProperty(h,"__esModule",{value:!0}),h.XfaText=void 0;var y=function(){function XfaText(){!function _classCallCheck(t,h){if(!(t instanceof h))throw new TypeError("Cannot call a class as a function")}(this,XfaText)}return function _createClass(t,h,y){return h&&_defineProperties(t.prototype,h),y&&_defineProperties(t,y),Object.defineProperty(t,"prototype",{writable:!1}),t}(XfaText,null,[{key:"textContent",value:function textContent(t){var h=[],y={items:h,styles:Object.create(null)};return function walk(t){var y;if(t){var w=null,A=t.name;if("#text"===A)w=t.value;else{if(!XfaText.shouldBuildText(A))return;null!=t&&null!==(y=t.attributes)&&void 0!==y&&y.textContent?w=t.attributes.textContent:t.value&&(w=t.value)}if(null!==w&&h.push({str:w}),t.children){var T,E=_createForOfIteratorHelper(t.children);try{for(E.s();!(T=E.n()).done;){walk(T.value)}}catch(t){E.e(t)}finally{E.f()}}}}(t),y}},{key:"shouldBuildText",value:function shouldBuildText(t){return!("textarea"===t||"input"===t||"option"===t||"select"===t)}}]),XfaText}();h.XfaText=y},(t,h,y)=>{"use strict";Object.defineProperty(h,"__esModule",{value:!0}),h.AnnotationLayer=void 0;var w=y(4),A=y(1),T=y(138),E=y(148),j=y(149);function _classStaticPrivateMethodGet(t,h,y){return function _classCheckPrivateStaticAccess(t,h){if(t!==h)throw new TypeError("Private static access of wrong provenance")}(t,h),y}function _get(){return _get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function _get(t,h,y){var w=function _superPropBase(t,h){for(;!Object.prototype.hasOwnProperty.call(t,h)&&null!==(t=_getPrototypeOf(t)););return t}(t,h);if(w){var A=Object.getOwnPropertyDescriptor(w,h);return A.get?A.get.call(arguments.length<3?t:y):A.value}},_get.apply(this,arguments)}function _defineProperty(t,h,y){return(h=_toPropertyKey(h))in t?Object.defineProperty(t,h,{value:y,enumerable:!0,configurable:!0,writable:!0}):t[h]=y,t}function _toConsumableArray(t){return function _arrayWithoutHoles(t){if(Array.isArray(t))return _arrayLikeToArray(t)}(t)||function _iterableToArray(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||_unsupportedIterableToArray(t)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _inherits(t,h){if("function"!=typeof h&&null!==h)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(h&&h.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),h&&_setPrototypeOf(t,h)}function _setPrototypeOf(t,h){return _setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(t,h){return t.__proto__=h,t},_setPrototypeOf(t,h)}function _createSuper(t){var h=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var y,w=_getPrototypeOf(t);if(h){var A=_getPrototypeOf(this).constructor;y=Reflect.construct(w,arguments,A)}else y=w.apply(this,arguments);return function _possibleConstructorReturn(t,h){if(h&&("object"===_typeof(h)||"function"==typeof h))return h;if(void 0!==h)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(t)}(this,y)}}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _getPrototypeOf(t){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)},_getPrototypeOf(t)}function _createForOfIteratorHelper(t,h){var y="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!y){if(Array.isArray(t)||(y=_unsupportedIterableToArray(t))||h&&t&&"number"==typeof t.length){y&&(t=y);var w=0,A=function F(){};return{s:A,n:function n(){return w>=t.length?{done:!0}:{done:!1,value:t[w++]}},e:function e(t){throw t},f:A}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var T,E=!0,j=!1;return{s:function s(){y=y.call(t)},n:function n(){var t=y.next();return E=t.done,t},e:function e(t){j=!0,T=t},f:function f(){try{E||null==y.return||y.return()}finally{if(j)throw T}}}}function _slicedToArray(t,h){return function _arrayWithHoles(t){if(Array.isArray(t))return t}(t)||function _iterableToArrayLimit(t,h){var y=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=y){var w,A,T,E,j=[],B=!0,N=!1;try{if(T=(y=y.call(t)).next,0===h){if(Object(y)!==y)return;B=!1}else for(;!(B=(w=T.call(y)).done)&&(j.push(w.value),j.length!==h);B=!0);}catch(t){N=!0,A=t}finally{try{if(!B&&null!=y.return&&(E=y.return(),Object(E)!==E))return}finally{if(N)throw A}}return j}}(t,h)||_unsupportedIterableToArray(t,h)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _unsupportedIterableToArray(t,h){if(t){if("string"==typeof t)return _arrayLikeToArray(t,h);var y=Object.prototype.toString.call(t).slice(8,-1);return"Object"===y&&t.constructor&&(y=t.constructor.name),"Map"===y||"Set"===y?Array.from(t):"Arguments"===y||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(y)?_arrayLikeToArray(t,h):void 0}}function _arrayLikeToArray(t,h){(null==h||h>t.length)&&(h=t.length);for(var y=0,w=new Array(h);y<h;y++)w[y]=t[y];return w}function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _classCallCheck(t,h){if(!(t instanceof h))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,h){for(var y=0;y<h.length;y++){var w=h[y];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(t,_toPropertyKey(w.key),w)}}function _createClass(t,h,y){return h&&_defineProperties(t.prototype,h),y&&_defineProperties(t,y),Object.defineProperty(t,"prototype",{writable:!1}),t}function _toPropertyKey(t){var h=function _toPrimitive(t,h){if("object"!==_typeof(t)||null===t)return t;var y=t[Symbol.toPrimitive];if(void 0!==y){var w=y.call(t,h||"default");if("object"!==_typeof(w))return w;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===h?String:Number)(t)}(t,"string");return"symbol"===_typeof(h)?h:String(h)}var B=1e3,N=new WeakSet,V=function(){function AnnotationElementFactory(){_classCallCheck(this,AnnotationElementFactory)}return _createClass(AnnotationElementFactory,null,[{key:"create",value:function create(t){switch(t.data.annotationType){case w.AnnotationType.LINK:return new H(t);case w.AnnotationType.TEXT:return new G(t);case w.AnnotationType.WIDGET:switch(t.data.fieldType){case"Tx":return new $(t);case"Btn":return t.data.radioButton?new X(t):t.data.checkBox?new J(t):new K(t);case"Ch":return new ne(t)}return new z(t);case w.AnnotationType.POPUP:return new ue(t);case w.AnnotationType.FREETEXT:return new me(t);case w.AnnotationType.LINE:return new ge(t);case w.AnnotationType.SQUARE:return new we(t);case w.AnnotationType.CIRCLE:return new Ce(t);case w.AnnotationType.POLYLINE:return new ke(t);case w.AnnotationType.CARET:return new Te(t);case w.AnnotationType.INK:return new Ee(t);case w.AnnotationType.POLYGON:return new Ie(t);case w.AnnotationType.HIGHLIGHT:return new Me(t);case w.AnnotationType.UNDERLINE:return new Be(t);case w.AnnotationType.SQUIGGLY:return new Ne(t);case w.AnnotationType.STRIKEOUT:return new Ze(t);case w.AnnotationType.STAMP:return new et(t);case w.AnnotationType.FILEATTACHMENT:return new tt(t);default:return new W(t)}}}]),AnnotationElementFactory}(),W=function(){function AnnotationElement(t){var h=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},y=h.isRenderable,w=void 0!==y&&y,A=h.ignoreBorder,T=void 0!==A&&A,E=h.createQuadrilaterals,j=void 0!==E&&E;_classCallCheck(this,AnnotationElement),this.isRenderable=w,this.data=t.data,this.layer=t.layer,this.page=t.page,this.viewport=t.viewport,this.linkService=t.linkService,this.downloadManager=t.downloadManager,this.imageResourcesPath=t.imageResourcesPath,this.renderForms=t.renderForms,this.svgFactory=t.svgFactory,this.annotationStorage=t.annotationStorage,this.enableScripting=t.enableScripting,this.hasJSActions=t.hasJSActions,this._fieldObjects=t.fieldObjects,this._mouseState=t.mouseState,w&&(this.container=this._createContainer(T)),j&&(this.quadrilaterals=this._createQuadrilaterals(T))}return _createClass(AnnotationElement,[{key:"_createContainer",value:function _createContainer(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],h=this.data,y=this.page,A=this.viewport,T=document.createElement("section"),E=h.rect[2]-h.rect[0],j=h.rect[3]-h.rect[1];T.setAttribute("data-annotation-id",h.id);var B=w.Util.normalizeRect([h.rect[0],y.view[3]-h.rect[1]+y.view[1],h.rect[2],y.view[3]-h.rect[3]+y.view[1]]);if(h.hasOwnCanvas){var N=A.transform.slice(),V=_slicedToArray(w.Util.singularValueDecompose2dScale(N),2),W=V[0],H=V[1];E=Math.ceil(E*W),j=Math.ceil(j*H),B[0]*=W,B[1]*=H;for(var G=0;G<4;G++)N[G]=Math.sign(N[G]);T.style.transform="matrix(".concat(N.join(","),")")}else T.style.transform="matrix(".concat(A.transform.join(","),")");if(T.style.transformOrigin="".concat(-B[0],"px ").concat(-B[1],"px"),!t&&h.borderStyle.width>0){T.style.borderWidth="".concat(h.borderStyle.width,"px"),h.borderStyle.style!==w.AnnotationBorderStyleType.UNDERLINE&&(E-=2*h.borderStyle.width,j-=2*h.borderStyle.width);var z=h.borderStyle.horizontalCornerRadius,$=h.borderStyle.verticalCornerRadius;if(z>0||$>0){var J="".concat(z,"px / ").concat($,"px");T.style.borderRadius=J}switch(h.borderStyle.style){case w.AnnotationBorderStyleType.SOLID:T.style.borderStyle="solid";break;case w.AnnotationBorderStyleType.DASHED:T.style.borderStyle="dashed";break;case w.AnnotationBorderStyleType.BEVELED:(0,w.warn)("Unimplemented border style: beveled");break;case w.AnnotationBorderStyleType.INSET:(0,w.warn)("Unimplemented border style: inset");break;case w.AnnotationBorderStyleType.UNDERLINE:T.style.borderBottomStyle="solid"}h.borderColor||h.color||null?T.style.borderColor=w.Util.makeHexColor(0|h.color[0],0|h.color[1],0|h.color[2]):T.style.borderWidth=0}return T.style.left="".concat(B[0],"px"),T.style.top="".concat(B[1],"px"),h.hasOwnCanvas?T.style.width=T.style.height="auto":(T.style.width="".concat(E,"px"),T.style.height="".concat(j,"px")),T}},{key:"_createQuadrilaterals",value:function _createQuadrilaterals(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.data.quadPoints)return null;var h,y=[],w=this.data.rect,A=_createForOfIteratorHelper(this.data.quadPoints);try{for(A.s();!(h=A.n()).done;){var T=h.value;this.data.rect=[T[2].x,T[2].y,T[1].x,T[1].y],y.push(this._createContainer(t))}}catch(t){A.e(t)}finally{A.f()}return this.data.rect=w,y}},{key:"_createPopup",value:function _createPopup(t,h){var y=this.container;this.quadrilaterals&&(t=t||this.quadrilaterals,y=this.quadrilaterals[0]),t||((t=document.createElement("div")).style.height=y.style.height,t.style.width=y.style.width,y.appendChild(t));var w=new pe({container:y,trigger:t,color:h.color,titleObj:h.titleObj,modificationDate:h.modificationDate,contentsObj:h.contentsObj,richText:h.richText,hideWrapper:!0}).render();w.style.left=y.style.width,y.appendChild(w)}},{key:"_renderQuadrilaterals",value:function _renderQuadrilaterals(t){var h,y=_createForOfIteratorHelper(this.quadrilaterals);try{for(y.s();!(h=y.n()).done;){h.value.className=t}}catch(t){y.e(t)}finally{y.f()}return this.quadrilaterals}},{key:"render",value:function render(){(0,w.unreachable)("Abstract method `AnnotationElement.render` called")}},{key:"_getElementsByName",value:function _getElementsByName(t){var h=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,y=[];if(this._fieldObjects){var A=this._fieldObjects[t];if(A){var T,E=_createForOfIteratorHelper(A);try{for(E.s();!(T=E.n()).done;){var j=T.value,B=j.page,V=j.id,W=j.exportValues;if(-1!==B&&V!==h){var H="string"==typeof W?W:null,G=document.getElementById(V);!G||N.has(G)?y.push({id:V,exportValue:H,domElement:G}):(0,w.warn)("_getElementsByName - element not allowed: ".concat(V))}}}catch(t){E.e(t)}finally{E.f()}}return y}var z,$=_createForOfIteratorHelper(document.getElementsByName(t));try{for($.s();!(z=$.n()).done;){var J=z.value,X=J.id,K=J.exportValue;X!==h&&(N.has(J)&&y.push({id:X,exportValue:K,domElement:J}))}}catch(t){$.e(t)}finally{$.f()}return y}}],[{key:"platform",get:function get(){var t="undefined"!=typeof navigator?navigator.platform:"";return(0,w.shadow)(this,"platform",{isWin:t.includes("Win"),isMac:t.includes("Mac")})}}]),AnnotationElement}(),H=function(t){_inherits(LinkAnnotationElement,t);var h=_createSuper(LinkAnnotationElement);function LinkAnnotationElement(t){var y=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;_classCallCheck(this,LinkAnnotationElement);var w=!!(t.data.url||t.data.dest||t.data.action||t.data.isTooltipOnly||t.data.resetForm||t.data.actions&&(t.data.actions.Action||t.data.actions["Mouse Up"]||t.data.actions["Mouse Down"]));return h.call(this,t,{isRenderable:w,ignoreBorder:!(null==y||!y.ignoreBorder),createQuadrilaterals:!0})}return _createClass(LinkAnnotationElement,[{key:"render",value:function render(){var t,h=this.data,y=this.linkService,A=document.createElement("a");if(h.url)y.addLinkAttributes||(0,w.warn)("LinkAnnotationElement.render - missing `addLinkAttributes`-method on the `linkService`-instance."),null===(t=y.addLinkAttributes)||void 0===t||t.call(y,A,h.url,h.newWindow);else if(h.action)this._bindNamedAction(A,h.action);else if(h.dest)this._bindLink(A,h.dest);else{var T=!1;h.actions&&(h.actions.Action||h.actions["Mouse Up"]||h.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(T=!0,this._bindJSAction(A,h)),h.resetForm?this._bindResetFormAction(A,h.resetForm):T||this._bindLink(A,"")}return this.quadrilaterals?this._renderQuadrilaterals("linkAnnotation").map((function(t,h){var y=0===h?A:A.cloneNode();return t.appendChild(y),t})):(this.container.className="linkAnnotation",this.container.appendChild(A),this.container)}},{key:"_bindLink",value:function _bindLink(t,h){var y=this;t.href=this.linkService.getDestinationHash(h),t.onclick=function(){return h&&y.linkService.goToDestination(h),!1},(h||""===h)&&(t.className="internalLink")}},{key:"_bindNamedAction",value:function _bindNamedAction(t,h){var y=this;t.href=this.linkService.getAnchorUrl(""),t.onclick=function(){return y.linkService.executeNamedAction(h),!1},t.className="internalLink"}},{key:"_bindJSAction",value:function _bindJSAction(t,h){var y=this;t.href=this.linkService.getAnchorUrl("");for(var w=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]),A=function _loop(){var A=E[T],j=w.get(A);if(!j)return"continue";t[j]=function(){var t;return null===(t=y.linkService.eventBus)||void 0===t||t.dispatch("dispatcheventinsandbox",{source:y,detail:{id:h.id,name:A}}),!1}},T=0,E=Object.keys(h.actions);T<E.length;T++)A();t.onclick||(t.onclick=function(){return!1}),t.className="internalLink"}},{key:"_bindResetFormAction",value:function _bindResetFormAction(t,h){var y=this,A=t.onclick;if(A||(t.href=this.linkService.getAnchorUrl("")),t.className="internalLink",!this._fieldObjects)return(0,w.warn)('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),void(A||(t.onclick=function(){return!1}));t.onclick=function(){A&&A();var t=h.fields,w=h.refs,T=h.include,E=[];if(0!==t.length||0!==w.length){var j,B=new Set(w),V=_createForOfIteratorHelper(t);try{for(V.s();!(j=V.n()).done;){var W,H=j.value,G=_createForOfIteratorHelper(y._fieldObjects[H]||[]);try{for(G.s();!(W=G.n()).done;){var z=W.value.id;B.add(z)}}catch(t){G.e(t)}finally{G.f()}}}catch(t){V.e(t)}finally{V.f()}for(var $=0,J=Object.values(y._fieldObjects);$<J.length;$++){var X,K=_createForOfIteratorHelper(J[$]);try{for(K.s();!(X=K.n()).done;){var ne=X.value;B.has(ne.id)===T&&E.push(ne)}}catch(t){K.e(t)}finally{K.f()}}}else for(var ue=0,pe=Object.values(y._fieldObjects);ue<pe.length;ue++){var me=pe[ue];E.push.apply(E,_toConsumableArray(me))}for(var ge,we=y.annotationStorage,Ce=[],ke=0,Ie=E;ke<Ie.length;ke++){var Te=Ie[ke],Ee=Te.id;switch(Ce.push(Ee),Te.type){case"text":var Me=Te.defaultValue||"";we.setValue(Ee,{value:Me,valueAsString:Me});break;case"checkbox":case"radiobutton":var Be=Te.defaultValue===Te.exportValues;we.setValue(Ee,{value:Be});break;case"combobox":case"listbox":var Ne=Te.defaultValue||"";we.setValue(Ee,{value:Ne});break;default:continue}var Ze=document.getElementById(Ee);Ze&&N.has(Ze)&&Ze.dispatchEvent(new Event("resetform"))}y.enableScripting&&(null===(ge=y.linkService.eventBus)||void 0===ge||ge.dispatch("dispatcheventinsandbox",{source:y,detail:{id:"app",ids:Ce,name:"ResetForm"}}));return!1}}}]),LinkAnnotationElement}(W),G=function(t){_inherits(TextAnnotationElement,t);var h=_createSuper(TextAnnotationElement);function TextAnnotationElement(t){var y,w,A;_classCallCheck(this,TextAnnotationElement);var T=!!(t.data.hasPopup||null!==(y=t.data.titleObj)&&void 0!==y&&y.str||null!==(w=t.data.contentsObj)&&void 0!==w&&w.str||null!==(A=t.data.richText)&&void 0!==A&&A.str);return h.call(this,t,{isRenderable:T})}return _createClass(TextAnnotationElement,[{key:"render",value:function render(){this.container.className="textAnnotation";var t=document.createElement("img");return t.style.height=this.container.style.height,t.style.width=this.container.style.width,t.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",t.alt="[{{type}} Annotation]",t.dataset.l10nId="text_annotation_type",t.dataset.l10nArgs=JSON.stringify({type:this.data.name}),this.data.hasPopup||this._createPopup(t,this.data),this.container.appendChild(t),this.container}}]),TextAnnotationElement}(W),z=function(t){_inherits(WidgetAnnotationElement,t);var h=_createSuper(WidgetAnnotationElement);function WidgetAnnotationElement(){return _classCallCheck(this,WidgetAnnotationElement),h.apply(this,arguments)}return _createClass(WidgetAnnotationElement,[{key:"render",value:function render(){return this.data.alternativeText&&(this.container.title=this.data.alternativeText),this.container}},{key:"_getKeyModifier",value:function _getKeyModifier(t){var h=W.platform,y=h.isWin,w=h.isMac;return y&&t.ctrlKey||w&&t.metaKey}},{key:"_setEventListener",value:function _setEventListener(t,h,y,w){var A=this;h.includes("mouse")?t.addEventListener(h,(function(t){var h;null===(h=A.linkService.eventBus)||void 0===h||h.dispatch("dispatcheventinsandbox",{source:A,detail:{id:A.data.id,name:y,value:w(t),shift:t.shiftKey,modifier:A._getKeyModifier(t)}})})):t.addEventListener(h,(function(t){var h;null===(h=A.linkService.eventBus)||void 0===h||h.dispatch("dispatcheventinsandbox",{source:A,detail:{id:A.data.id,name:y,value:t.target.checked}})}))}},{key:"_setEventListeners",value:function _setEventListeners(t,h,y){var w,A=_createForOfIteratorHelper(h);try{for(A.s();!(w=A.n()).done;){var T,E=_slicedToArray(w.value,2),j=E[0],B=E[1];("Action"===B||null!==(T=this.data.actions)&&void 0!==T&&T[B])&&this._setEventListener(t,j,B,y)}}catch(t){A.e(t)}finally{A.f()}}},{key:"_setBackgroundColor",value:function _setBackgroundColor(t){var h=this.data.backgroundColor||null;t.style.backgroundColor=null===h?"transparent":w.Util.makeHexColor(h[0],h[1],h[2])}},{key:"_dispatchEventFromSandbox",value:function _dispatchEventFromSandbox(t,h){for(var y=this,w=function setColor(t,h,y){var w=y.detail[t];y.target.style[h]=E.ColorConverters["".concat(w[0],"_HTML")](w.slice(1))},A={display:function display(t){var h=t.detail.display%2==1;t.target.style.visibility=h?"hidden":"visible",y.annotationStorage.setValue(y.data.id,{hidden:h,print:0===t.detail.display||3===t.detail.display})},print:function print(t){y.annotationStorage.setValue(y.data.id,{print:t.detail.print})},hidden:function hidden(t){t.target.style.visibility=t.detail.hidden?"hidden":"visible",y.annotationStorage.setValue(y.data.id,{hidden:t.detail.hidden})},focus:function focus(t){setTimeout((function(){return t.target.focus({preventScroll:!1})}),0)},userName:function userName(t){t.target.title=t.detail.userName},readonly:function readonly(t){t.detail.readonly?t.target.setAttribute("readonly",""):t.target.removeAttribute("readonly")},required:function required(t){t.detail.required?t.target.setAttribute("required",""):t.target.removeAttribute("required")},bgColor:function bgColor(t){w("bgColor","backgroundColor",t)},fillColor:function fillColor(t){w("fillColor","backgroundColor",t)},fgColor:function fgColor(t){w("fgColor","color",t)},textColor:function textColor(t){w("textColor","color",t)},borderColor:function borderColor(t){w("borderColor","borderColor",t)},strokeColor:function strokeColor(t){w("strokeColor","borderColor",t)}},T=0,j=Object.keys(h.detail);T<j.length;T++){var B=j[T],N=t[B]||A[B];N&&N(h)}}}]),WidgetAnnotationElement}(W),$=function(t){_inherits(TextWidgetAnnotationElement,t);var h=_createSuper(TextWidgetAnnotationElement);function TextWidgetAnnotationElement(t){_classCallCheck(this,TextWidgetAnnotationElement);var y=t.renderForms||!t.data.hasAppearance&&!!t.data.fieldValue;return h.call(this,t,{isRenderable:y})}return _createClass(TextWidgetAnnotationElement,[{key:"setPropertyOnSiblings",value:function setPropertyOnSiblings(t,h,y,w){var A,T=this.annotationStorage,E=_createForOfIteratorHelper(this._getElementsByName(t.name,t.id));try{for(E.s();!(A=E.n()).done;){var j=A.value;j.domElement&&(j.domElement[h]=y),T.setValue(j.id,_defineProperty({},w,y))}}catch(t){E.e(t)}finally{E.f()}}},{key:"render",value:function render(){var t=this,h=this.annotationStorage,y=this.data.id;this.container.className="textWidgetAnnotation";var w=null;if(this.renderForms){var A=h.getValue(y,{value:this.data.fieldValue,valueAsString:this.data.fieldValue}),T=A.valueAsString||A.value||"",E={userValue:null,formattedValue:null,beforeInputSelectionRange:null,beforeInputValue:null};this.data.multiLine?(w=document.createElement("textarea")).textContent=T:((w=document.createElement("input")).type="text",w.setAttribute("value",T)),N.add(w),w.disabled=this.data.readOnly,w.name=this.data.fieldName,w.tabIndex=B,E.userValue=T,w.setAttribute("id",y),w.addEventListener("input",(function(A){h.setValue(y,{value:A.target.value}),t.setPropertyOnSiblings(w,"value",A.target.value,"value")})),w.addEventListener("resetform",(function(h){var y=t.data.defaultFieldValue||"";w.value=E.userValue=y,delete E.formattedValue}));var j=function blurListener(t){E.formattedValue&&(t.target.value=E.formattedValue),t.target.scrollLeft=0,E.beforeInputSelectionRange=null};if(this.enableScripting&&this.hasJSActions){var V;w.addEventListener("focus",(function(t){E.userValue&&(t.target.value=E.userValue)})),w.addEventListener("updatefromsandbox",(function(w){var A={value:function value(t){E.userValue=t.detail.value||"",h.setValue(y,{value:E.userValue.toString()}),E.formattedValue||(t.target.value=E.userValue)},valueAsString:function valueAsString(t){E.formattedValue=t.detail.valueAsString||"",t.target!==document.activeElement&&(t.target.value=E.formattedValue),h.setValue(y,{formattedValue:E.formattedValue})},selRange:function selRange(t){var h=_slicedToArray(t.detail.selRange,2),y=h[0],w=h[1];y>=0&&w<t.target.value.length&&t.target.setSelectionRange(y,w)}};t._dispatchEventFromSandbox(A,w)})),w.addEventListener("keydown",(function(h){var w;E.beforeInputValue=h.target.value;var A=-1;"Escape"===h.key?A=0:"Enter"===h.key?A=2:"Tab"===h.key&&(A=3),-1!==A&&(E.userValue=h.target.value,null===(w=t.linkService.eventBus)||void 0===w||w.dispatch("dispatcheventinsandbox",{source:t,detail:{id:y,name:"Keystroke",value:h.target.value,willCommit:!0,commitKey:A,selStart:h.target.selectionStart,selEnd:h.target.selectionEnd}}))}));var W=j;j=null,w.addEventListener("blur",(function(h){var w;t._mouseState.isDown&&(E.userValue=h.target.value,null===(w=t.linkService.eventBus)||void 0===w||w.dispatch("dispatcheventinsandbox",{source:t,detail:{id:y,name:"Keystroke",value:h.target.value,willCommit:!0,commitKey:1,selStart:h.target.selectionStart,selEnd:h.target.selectionEnd}}));W(h)})),w.addEventListener("mousedown",(function(t){E.beforeInputValue=t.target.value,E.beforeInputSelectionRange=null})),w.addEventListener("keyup",(function(t){t.target.selectionStart===t.target.selectionEnd&&(E.beforeInputSelectionRange=null)})),w.addEventListener("select",(function(t){E.beforeInputSelectionRange=[t.target.selectionStart,t.target.selectionEnd]})),null!==(V=this.data.actions)&&void 0!==V&&V.Keystroke&&w.addEventListener("input",(function(h){var w,A=-1,T=-1;if(E.beforeInputSelectionRange){var j=_slicedToArray(E.beforeInputSelectionRange,2);A=j[0],T=j[1]}null===(w=t.linkService.eventBus)||void 0===w||w.dispatch("dispatcheventinsandbox",{source:t,detail:{id:y,name:"Keystroke",value:E.beforeInputValue,change:h.data,willCommit:!1,selStart:A,selEnd:T}})})),this._setEventListeners(w,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],(function(t){return t.target.value}))}if(j&&w.addEventListener("blur",j),null!==this.data.maxLen&&(w.maxLength=this.data.maxLen),this.data.comb){var H=(this.data.rect[2]-this.data.rect[0])/this.data.maxLen;w.classList.add("comb"),w.style.letterSpacing="calc(".concat(H,"px - 1ch)")}}else(w=document.createElement("div")).textContent=this.data.fieldValue,w.style.verticalAlign="middle",w.style.display="table-cell";return this._setTextStyle(w),this._setBackgroundColor(w),this.container.appendChild(w),this.container}},{key:"_setTextStyle",value:function _setTextStyle(t){var h=this.data.defaultAppearanceData,y=h.fontSize,A=h.fontColor,T=t.style;y&&(T.fontSize="".concat(y,"px")),T.color=w.Util.makeHexColor(A[0],A[1],A[2]),null!==this.data.textAlignment&&(T.textAlign=["left","center","right"][this.data.textAlignment])}}]),TextWidgetAnnotationElement}(z),J=function(t){_inherits(CheckboxWidgetAnnotationElement,t);var h=_createSuper(CheckboxWidgetAnnotationElement);function CheckboxWidgetAnnotationElement(t){return _classCallCheck(this,CheckboxWidgetAnnotationElement),h.call(this,t,{isRenderable:t.renderForms})}return _createClass(CheckboxWidgetAnnotationElement,[{key:"render",value:function render(){var t=this,h=this.annotationStorage,y=this.data,w=y.id,A=h.getValue(w,{value:y.exportValue===y.fieldValue}).value;"string"==typeof A&&(A="Off"!==A,h.setValue(w,{value:A})),this.container.className="buttonWidgetAnnotation checkBox";var T=document.createElement("input");return N.add(T),T.disabled=y.readOnly,T.type="checkbox",T.name=y.fieldName,A&&T.setAttribute("checked",!0),T.setAttribute("id",w),T.setAttribute("exportValue",y.exportValue),T.tabIndex=B,T.addEventListener("change",(function(A){var T,E=A.target,j=E.name,B=E.checked,N=_createForOfIteratorHelper(t._getElementsByName(j,w));try{for(N.s();!(T=N.n()).done;){var V=T.value,W=B&&V.exportValue===y.exportValue;V.domElement&&(V.domElement.checked=W),h.setValue(V.id,{value:W})}}catch(t){N.e(t)}finally{N.f()}h.setValue(w,{value:B})})),T.addEventListener("resetform",(function(t){var h=y.defaultFieldValue||"Off";t.target.checked=h===y.exportValue})),this.enableScripting&&this.hasJSActions&&(T.addEventListener("updatefromsandbox",(function(y){var A={value:function value(t){t.target.checked="Off"!==t.detail.value,h.setValue(w,{value:t.target.checked})}};t._dispatchEventFromSandbox(A,y)})),this._setEventListeners(T,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],(function(t){return t.target.checked}))),this._setBackgroundColor(T),this.container.appendChild(T),this.container}}]),CheckboxWidgetAnnotationElement}(z),X=function(t){_inherits(RadioButtonWidgetAnnotationElement,t);var h=_createSuper(RadioButtonWidgetAnnotationElement);function RadioButtonWidgetAnnotationElement(t){return _classCallCheck(this,RadioButtonWidgetAnnotationElement),h.call(this,t,{isRenderable:t.renderForms})}return _createClass(RadioButtonWidgetAnnotationElement,[{key:"render",value:function render(){var t=this;this.container.className="buttonWidgetAnnotation radioButton";var h=this.annotationStorage,y=this.data,w=y.id,A=h.getValue(w,{value:y.fieldValue===y.buttonValue}).value;"string"==typeof A&&(A=A!==y.buttonValue,h.setValue(w,{value:A}));var T=document.createElement("input");if(N.add(T),T.disabled=y.readOnly,T.type="radio",T.name=y.fieldName,A&&T.setAttribute("checked",!0),T.setAttribute("id",w),T.tabIndex=B,T.addEventListener("change",(function(y){var A,T=y.target,E=T.name,j=T.checked,B=_createForOfIteratorHelper(t._getElementsByName(E,w));try{for(B.s();!(A=B.n()).done;){var N=A.value;h.setValue(N.id,{value:!1})}}catch(t){B.e(t)}finally{B.f()}h.setValue(w,{value:j})})),T.addEventListener("resetform",(function(t){var h=y.defaultFieldValue;t.target.checked=null!=h&&h===y.buttonValue})),this.enableScripting&&this.hasJSActions){var E=y.buttonValue;T.addEventListener("updatefromsandbox",(function(y){var A={value:function value(y){var A,T=E===y.detail.value,j=_createForOfIteratorHelper(t._getElementsByName(y.target.name));try{for(j.s();!(A=j.n()).done;){var B=A.value,N=T&&B.id===w;B.domElement&&(B.domElement.checked=N),h.setValue(B.id,{value:N})}}catch(t){j.e(t)}finally{j.f()}}};t._dispatchEventFromSandbox(A,y)})),this._setEventListeners(T,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],(function(t){return t.target.checked}))}return this._setBackgroundColor(T),this.container.appendChild(T),this.container}}]),RadioButtonWidgetAnnotationElement}(z),K=function(t){_inherits(PushButtonWidgetAnnotationElement,t);var h=_createSuper(PushButtonWidgetAnnotationElement);function PushButtonWidgetAnnotationElement(t){return _classCallCheck(this,PushButtonWidgetAnnotationElement),h.call(this,t,{ignoreBorder:t.data.hasAppearance})}return _createClass(PushButtonWidgetAnnotationElement,[{key:"render",value:function render(){var t=_get(_getPrototypeOf(PushButtonWidgetAnnotationElement.prototype),"render",this).call(this);return t.className="buttonWidgetAnnotation pushButton",this.data.alternativeText&&(t.title=this.data.alternativeText),t}}]),PushButtonWidgetAnnotationElement}(H),ne=function(t){_inherits(ChoiceWidgetAnnotationElement,t);var h=_createSuper(ChoiceWidgetAnnotationElement);function ChoiceWidgetAnnotationElement(t){return _classCallCheck(this,ChoiceWidgetAnnotationElement),h.call(this,t,{isRenderable:t.renderForms})}return _createClass(ChoiceWidgetAnnotationElement,[{key:"render",value:function render(){var t=this;this.container.className="choiceWidgetAnnotation";var h=this.annotationStorage,y=this.data.id;h.getValue(y,{value:this.data.fieldValue.length>0?this.data.fieldValue[0]:void 0});var w=this.data.defaultAppearanceData.fontSize;w||(w=9);var A="calc(".concat(w,"px * var(--zoom-factor))"),T=document.createElement("select");N.add(T),T.disabled=this.data.readOnly,T.name=this.data.fieldName,T.setAttribute("id",y),T.tabIndex=B,T.style.fontSize="".concat(w,"px"),this.data.combo||(T.size=this.data.options.length,this.data.multiSelect&&(T.multiple=!0)),T.addEventListener("resetform",(function(h){var y,w=t.data.defaultFieldValue,A=_createForOfIteratorHelper(T.options);try{for(A.s();!(y=A.n()).done;){var E=y.value;E.selected=E.value===w}}catch(t){A.e(t)}finally{A.f()}}));var E,j=_createForOfIteratorHelper(this.data.options);try{for(j.s();!(E=j.n()).done;){var V=E.value,W=document.createElement("option");W.textContent=V.displayValue,W.value=V.exportValue,this.data.combo&&(W.style.fontSize=A),this.data.fieldValue.includes(V.exportValue)&&W.setAttribute("selected",!0),T.appendChild(W)}}catch(t){j.e(t)}finally{j.f()}var H=function getValue(t,h){var y=h?"value":"textContent",w=t.target.options;return t.target.multiple?Array.prototype.filter.call(w,(function(t){return t.selected})).map((function(t){return t[y]})):-1===w.selectedIndex?null:w[w.selectedIndex][y]},G=function getItems(t){var h=t.target.options;return Array.prototype.map.call(h,(function(t){return{displayValue:t.textContent,exportValue:t.value}}))};return this.enableScripting&&this.hasJSActions?(T.addEventListener("updatefromsandbox",(function(w){var A={value:function value(t){var w,value=t.detail.value,A=new Set(Array.isArray(value)?value:[value]),E=_createForOfIteratorHelper(T.options);try{for(E.s();!(w=E.n()).done;){var j=w.value;j.selected=A.has(j.value)}}catch(t){E.e(t)}finally{E.f()}h.setValue(y,{value:H(t,!0)})},multipleSelection:function multipleSelection(t){T.multiple=!0},remove:function remove(t){var w=T.options,A=t.detail.remove;if(w[A].selected=!1,T.remove(A),w.length>0){var E=Array.prototype.findIndex.call(w,(function(t){return t.selected}));-1===E&&(w[0].selected=!0)}h.setValue(y,{value:H(t,!0),items:G(t)})},clear:function clear(t){for(;0!==T.length;)T.remove(0);h.setValue(y,{value:null,items:[]})},insert:function insert(t){var w=t.detail.insert,A=w.index,E=w.displayValue,j=w.exportValue,B=document.createElement("option");B.textContent=E,B.value=j,T.insertBefore(B,T.children[A]),h.setValue(y,{value:H(t,!0),items:G(t)})},items:function items(t){for(var items=t.detail.items;0!==T.length;)T.remove(0);var w,A=_createForOfIteratorHelper(items);try{for(A.s();!(w=A.n()).done;){var E=w.value,j=E.displayValue,B=E.exportValue,N=document.createElement("option");N.textContent=j,N.value=B,T.appendChild(N)}}catch(t){A.e(t)}finally{A.f()}T.options.length>0&&(T.options[0].selected=!0),h.setValue(y,{value:H(t,!0),items:G(t)})},indices:function indices(t){var w,indices=new Set(t.detail.indices),A=_createForOfIteratorHelper(t.target.options);try{for(A.s();!(w=A.n()).done;){var T=w.value;T.selected=indices.has(T.index)}}catch(t){A.e(t)}finally{A.f()}h.setValue(y,{value:H(t,!0)})},editable:function editable(t){t.target.disabled=!t.detail.editable}};t._dispatchEventFromSandbox(A,w)})),T.addEventListener("input",(function(w){var A,T=H(w,!0),E=H(w,!1);h.setValue(y,{value:T}),null===(A=t.linkService.eventBus)||void 0===A||A.dispatch("dispatcheventinsandbox",{source:t,detail:{id:y,name:"Keystroke",value:E,changeEx:T,willCommit:!0,commitKey:1,keyDown:!1}})})),this._setEventListeners(T,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"]],(function(t){return t.target.checked}))):T.addEventListener("input",(function(t){h.setValue(y,{value:H(t)})})),this._setBackgroundColor(T),this.container.appendChild(T),this.container}}]),ChoiceWidgetAnnotationElement}(z),ue=function(t){_inherits(PopupAnnotationElement,t);var h=_createSuper(PopupAnnotationElement);function PopupAnnotationElement(t){var y,w,A;_classCallCheck(this,PopupAnnotationElement);var T=!!(null!==(y=t.data.titleObj)&&void 0!==y&&y.str||null!==(w=t.data.contentsObj)&&void 0!==w&&w.str||null!==(A=t.data.richText)&&void 0!==A&&A.str);return h.call(this,t,{isRenderable:T})}return _createClass(PopupAnnotationElement,[{key:"render",value:function render(){if(this.container.className="popupAnnotation",["Line","Square","Circle","PolyLine","Polygon","Ink"].includes(this.data.parentType))return this.container;var t='[data-annotation-id="'.concat(this.data.parentId,'"]'),h=this.layer.querySelectorAll(t);if(0===h.length)return this.container;var y=new pe({container:this.container,trigger:Array.from(h),color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText}),A=this.page,T=w.Util.normalizeRect([this.data.parentRect[0],A.view[3]-this.data.parentRect[1]+A.view[1],this.data.parentRect[2],A.view[3]-this.data.parentRect[3]+A.view[1]]),E=T[0]+this.data.parentRect[2]-this.data.parentRect[0],j=T[1];return this.container.style.transformOrigin="".concat(-E,"px ").concat(-j,"px"),this.container.style.left="".concat(E,"px"),this.container.style.top="".concat(j,"px"),this.container.appendChild(y.render()),this.container}}]),PopupAnnotationElement}(W),pe=function(){function PopupElement(t){_classCallCheck(this,PopupElement),this.container=t.container,this.trigger=t.trigger,this.color=t.color,this.titleObj=t.titleObj,this.modificationDate=t.modificationDate,this.contentsObj=t.contentsObj,this.richText=t.richText,this.hideWrapper=t.hideWrapper||!1,this.pinned=!1}return _createClass(PopupElement,[{key:"render",value:function render(){var t,h,y=document.createElement("div");y.className="popupWrapper",this.hideElement=this.hideWrapper?y:this.container,this.hideElement.hidden=!0;var T=document.createElement("div");T.className="popup";var E=this.color;if(E){var B=.7*(255-E[0])+E[0],N=.7*(255-E[1])+E[1],V=.7*(255-E[2])+E[2];T.style.backgroundColor=w.Util.makeHexColor(0|B,0|N,0|V)}var W=document.createElement("h1");W.dir=this.titleObj.dir,W.textContent=this.titleObj.str,T.appendChild(W);var H=A.PDFDateString.toDateObject(this.modificationDate);if(H){var G=document.createElement("span");G.className="popupDate",G.textContent="{{date}}, {{time}}",G.dataset.l10nId="annotation_date_string",G.dataset.l10nArgs=JSON.stringify({date:H.toLocaleDateString(),time:H.toLocaleTimeString()}),T.appendChild(G)}if(null===(t=this.richText)||void 0===t||!t.str||null!==(h=this.contentsObj)&&void 0!==h&&h.str&&this.contentsObj.str!==this.richText.str){var z=this._formatContents(this.contentsObj);T.appendChild(z)}else j.XfaLayer.render({xfa:this.richText.html,intent:"richText",div:T}),T.lastChild.className="richText popupContent";Array.isArray(this.trigger)||(this.trigger=[this.trigger]);var $,J=_createForOfIteratorHelper(this.trigger);try{for(J.s();!($=J.n()).done;){var X=$.value;X.addEventListener("click",this._toggle.bind(this)),X.addEventListener("mouseover",this._show.bind(this,!1)),X.addEventListener("mouseout",this._hide.bind(this,!1))}}catch(t){J.e(t)}finally{J.f()}return T.addEventListener("click",this._hide.bind(this,!0)),y.appendChild(T),y}},{key:"_formatContents",value:function _formatContents(t){var h=t.str,y=t.dir,w=document.createElement("p");w.className="popupContent",w.dir=y;for(var A=h.split(/(?:\r\n?|\n)/),T=0,E=A.length;T<E;++T){var j=A[T];w.appendChild(document.createTextNode(j)),T<E-1&&w.appendChild(document.createElement("br"))}return w}},{key:"_toggle",value:function _toggle(){this.pinned?this._hide(!0):this._show(!0)}},{key:"_show",value:function _show(){arguments.length>0&&void 0!==arguments[0]&&arguments[0]&&(this.pinned=!0),this.hideElement.hidden&&(this.hideElement.hidden=!1,this.container.style.zIndex+=1)}},{key:"_hide",value:function _hide(){(!(arguments.length>0&&void 0!==arguments[0])||arguments[0])&&(this.pinned=!1),this.hideElement.hidden||this.pinned||(this.hideElement.hidden=!0,this.container.style.zIndex-=1)}}]),PopupElement}(),me=function(t){_inherits(FreeTextAnnotationElement,t);var h=_createSuper(FreeTextAnnotationElement);function FreeTextAnnotationElement(t){var y,w,A;_classCallCheck(this,FreeTextAnnotationElement);var T=!!(t.data.hasPopup||null!==(y=t.data.titleObj)&&void 0!==y&&y.str||null!==(w=t.data.contentsObj)&&void 0!==w&&w.str||null!==(A=t.data.richText)&&void 0!==A&&A.str);return h.call(this,t,{isRenderable:T,ignoreBorder:!0})}return _createClass(FreeTextAnnotationElement,[{key:"render",value:function render(){return this.container.className="freeTextAnnotation",this.data.hasPopup||this._createPopup(null,this.data),this.container}}]),FreeTextAnnotationElement}(W),ge=function(t){_inherits(LineAnnotationElement,t);var h=_createSuper(LineAnnotationElement);function LineAnnotationElement(t){var y,w,A;_classCallCheck(this,LineAnnotationElement);var T=!!(t.data.hasPopup||null!==(y=t.data.titleObj)&&void 0!==y&&y.str||null!==(w=t.data.contentsObj)&&void 0!==w&&w.str||null!==(A=t.data.richText)&&void 0!==A&&A.str);return h.call(this,t,{isRenderable:T,ignoreBorder:!0})}return _createClass(LineAnnotationElement,[{key:"render",value:function render(){this.container.className="lineAnnotation";var t=this.data,h=t.rect[2]-t.rect[0],y=t.rect[3]-t.rect[1],w=this.svgFactory.create(h,y),A=this.svgFactory.createElement("svg:line");return A.setAttribute("x1",t.rect[2]-t.lineCoordinates[0]),A.setAttribute("y1",t.rect[3]-t.lineCoordinates[1]),A.setAttribute("x2",t.rect[2]-t.lineCoordinates[2]),A.setAttribute("y2",t.rect[3]-t.lineCoordinates[3]),A.setAttribute("stroke-width",t.borderStyle.width||1),A.setAttribute("stroke","transparent"),A.setAttribute("fill","transparent"),w.appendChild(A),this.container.append(w),this._createPopup(A,t),this.container}}]),LineAnnotationElement}(W),we=function(t){_inherits(SquareAnnotationElement,t);var h=_createSuper(SquareAnnotationElement);function SquareAnnotationElement(t){var y,w,A;_classCallCheck(this,SquareAnnotationElement);var T=!!(t.data.hasPopup||null!==(y=t.data.titleObj)&&void 0!==y&&y.str||null!==(w=t.data.contentsObj)&&void 0!==w&&w.str||null!==(A=t.data.richText)&&void 0!==A&&A.str);return h.call(this,t,{isRenderable:T,ignoreBorder:!0})}return _createClass(SquareAnnotationElement,[{key:"render",value:function render(){this.container.className="squareAnnotation";var t=this.data,h=t.rect[2]-t.rect[0],y=t.rect[3]-t.rect[1],w=this.svgFactory.create(h,y),A=t.borderStyle.width,T=this.svgFactory.createElement("svg:rect");return T.setAttribute("x",A/2),T.setAttribute("y",A/2),T.setAttribute("width",h-A),T.setAttribute("height",y-A),T.setAttribute("stroke-width",A||1),T.setAttribute("stroke","transparent"),T.setAttribute("fill","transparent"),w.appendChild(T),this.container.append(w),this._createPopup(T,t),this.container}}]),SquareAnnotationElement}(W),Ce=function(t){_inherits(CircleAnnotationElement,t);var h=_createSuper(CircleAnnotationElement);function CircleAnnotationElement(t){var y,w,A;_classCallCheck(this,CircleAnnotationElement);var T=!!(t.data.hasPopup||null!==(y=t.data.titleObj)&&void 0!==y&&y.str||null!==(w=t.data.contentsObj)&&void 0!==w&&w.str||null!==(A=t.data.richText)&&void 0!==A&&A.str);return h.call(this,t,{isRenderable:T,ignoreBorder:!0})}return _createClass(CircleAnnotationElement,[{key:"render",value:function render(){this.container.className="circleAnnotation";var t=this.data,h=t.rect[2]-t.rect[0],y=t.rect[3]-t.rect[1],w=this.svgFactory.create(h,y),A=t.borderStyle.width,T=this.svgFactory.createElement("svg:ellipse");return T.setAttribute("cx",h/2),T.setAttribute("cy",y/2),T.setAttribute("rx",h/2-A/2),T.setAttribute("ry",y/2-A/2),T.setAttribute("stroke-width",A||1),T.setAttribute("stroke","transparent"),T.setAttribute("fill","transparent"),w.appendChild(T),this.container.append(w),this._createPopup(T,t),this.container}}]),CircleAnnotationElement}(W),ke=function(t){_inherits(PolylineAnnotationElement,t);var h=_createSuper(PolylineAnnotationElement);function PolylineAnnotationElement(t){var y,w,A,T;_classCallCheck(this,PolylineAnnotationElement);var E=!!(t.data.hasPopup||null!==(y=t.data.titleObj)&&void 0!==y&&y.str||null!==(w=t.data.contentsObj)&&void 0!==w&&w.str||null!==(A=t.data.richText)&&void 0!==A&&A.str);return(T=h.call(this,t,{isRenderable:E,ignoreBorder:!0})).containerClassName="polylineAnnotation",T.svgElementName="svg:polyline",T}return _createClass(PolylineAnnotationElement,[{key:"render",value:function render(){this.container.className=this.containerClassName;var t,h=this.data,y=h.rect[2]-h.rect[0],w=h.rect[3]-h.rect[1],A=this.svgFactory.create(y,w),T=[],E=_createForOfIteratorHelper(h.vertices);try{for(E.s();!(t=E.n()).done;){var j=t.value,B=j.x-h.rect[0],N=h.rect[3]-j.y;T.push(B+","+N)}}catch(t){E.e(t)}finally{E.f()}T=T.join(" ");var V=this.svgFactory.createElement(this.svgElementName);return V.setAttribute("points",T),V.setAttribute("stroke-width",h.borderStyle.width||1),V.setAttribute("stroke","transparent"),V.setAttribute("fill","transparent"),A.appendChild(V),this.container.append(A),this._createPopup(V,h),this.container}}]),PolylineAnnotationElement}(W),Ie=function(t){_inherits(PolygonAnnotationElement,t);var h=_createSuper(PolygonAnnotationElement);function PolygonAnnotationElement(t){var y;return _classCallCheck(this,PolygonAnnotationElement),(y=h.call(this,t)).containerClassName="polygonAnnotation",y.svgElementName="svg:polygon",y}return PolygonAnnotationElement}(ke),Te=function(t){_inherits(CaretAnnotationElement,t);var h=_createSuper(CaretAnnotationElement);function CaretAnnotationElement(t){var y,w,A;_classCallCheck(this,CaretAnnotationElement);var T=!!(t.data.hasPopup||null!==(y=t.data.titleObj)&&void 0!==y&&y.str||null!==(w=t.data.contentsObj)&&void 0!==w&&w.str||null!==(A=t.data.richText)&&void 0!==A&&A.str);return h.call(this,t,{isRenderable:T,ignoreBorder:!0})}return _createClass(CaretAnnotationElement,[{key:"render",value:function render(){return this.container.className="caretAnnotation",this.data.hasPopup||this._createPopup(null,this.data),this.container}}]),CaretAnnotationElement}(W),Ee=function(t){_inherits(InkAnnotationElement,t);var h=_createSuper(InkAnnotationElement);function InkAnnotationElement(t){var y,w,A,T;_classCallCheck(this,InkAnnotationElement);var E=!!(t.data.hasPopup||null!==(y=t.data.titleObj)&&void 0!==y&&y.str||null!==(w=t.data.contentsObj)&&void 0!==w&&w.str||null!==(A=t.data.richText)&&void 0!==A&&A.str);return(T=h.call(this,t,{isRenderable:E,ignoreBorder:!0})).containerClassName="inkAnnotation",T.svgElementName="svg:polyline",T}return _createClass(InkAnnotationElement,[{key:"render",value:function render(){this.container.className=this.containerClassName;var t,h=this.data,y=h.rect[2]-h.rect[0],w=h.rect[3]-h.rect[1],A=this.svgFactory.create(y,w),T=_createForOfIteratorHelper(h.inkLists);try{for(T.s();!(t=T.n()).done;){var E,j=t.value,B=[],N=_createForOfIteratorHelper(j);try{for(N.s();!(E=N.n()).done;){var V=E.value,W=V.x-h.rect[0],H=h.rect[3]-V.y;B.push("".concat(W,",").concat(H))}}catch(t){N.e(t)}finally{N.f()}B=B.join(" ");var G=this.svgFactory.createElement(this.svgElementName);G.setAttribute("points",B),G.setAttribute("stroke-width",h.borderStyle.width||1),G.setAttribute("stroke","transparent"),G.setAttribute("fill","transparent"),this._createPopup(G,h),A.appendChild(G)}}catch(t){T.e(t)}finally{T.f()}return this.container.append(A),this.container}}]),InkAnnotationElement}(W),Me=function(t){_inherits(HighlightAnnotationElement,t);var h=_createSuper(HighlightAnnotationElement);function HighlightAnnotationElement(t){var y,w,A;_classCallCheck(this,HighlightAnnotationElement);var T=!!(t.data.hasPopup||null!==(y=t.data.titleObj)&&void 0!==y&&y.str||null!==(w=t.data.contentsObj)&&void 0!==w&&w.str||null!==(A=t.data.richText)&&void 0!==A&&A.str);return h.call(this,t,{isRenderable:T,ignoreBorder:!0,createQuadrilaterals:!0})}return _createClass(HighlightAnnotationElement,[{key:"render",value:function render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("highlightAnnotation"):(this.container.className="highlightAnnotation",this.container)}}]),HighlightAnnotationElement}(W),Be=function(t){_inherits(UnderlineAnnotationElement,t);var h=_createSuper(UnderlineAnnotationElement);function UnderlineAnnotationElement(t){var y,w,A;_classCallCheck(this,UnderlineAnnotationElement);var T=!!(t.data.hasPopup||null!==(y=t.data.titleObj)&&void 0!==y&&y.str||null!==(w=t.data.contentsObj)&&void 0!==w&&w.str||null!==(A=t.data.richText)&&void 0!==A&&A.str);return h.call(this,t,{isRenderable:T,ignoreBorder:!0,createQuadrilaterals:!0})}return _createClass(UnderlineAnnotationElement,[{key:"render",value:function render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("underlineAnnotation"):(this.container.className="underlineAnnotation",this.container)}}]),UnderlineAnnotationElement}(W),Ne=function(t){_inherits(SquigglyAnnotationElement,t);var h=_createSuper(SquigglyAnnotationElement);function SquigglyAnnotationElement(t){var y,w,A;_classCallCheck(this,SquigglyAnnotationElement);var T=!!(t.data.hasPopup||null!==(y=t.data.titleObj)&&void 0!==y&&y.str||null!==(w=t.data.contentsObj)&&void 0!==w&&w.str||null!==(A=t.data.richText)&&void 0!==A&&A.str);return h.call(this,t,{isRenderable:T,ignoreBorder:!0,createQuadrilaterals:!0})}return _createClass(SquigglyAnnotationElement,[{key:"render",value:function render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("squigglyAnnotation"):(this.container.className="squigglyAnnotation",this.container)}}]),SquigglyAnnotationElement}(W),Ze=function(t){_inherits(StrikeOutAnnotationElement,t);var h=_createSuper(StrikeOutAnnotationElement);function StrikeOutAnnotationElement(t){var y,w,A;_classCallCheck(this,StrikeOutAnnotationElement);var T=!!(t.data.hasPopup||null!==(y=t.data.titleObj)&&void 0!==y&&y.str||null!==(w=t.data.contentsObj)&&void 0!==w&&w.str||null!==(A=t.data.richText)&&void 0!==A&&A.str);return h.call(this,t,{isRenderable:T,ignoreBorder:!0,createQuadrilaterals:!0})}return _createClass(StrikeOutAnnotationElement,[{key:"render",value:function render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("strikeoutAnnotation"):(this.container.className="strikeoutAnnotation",this.container)}}]),StrikeOutAnnotationElement}(W),et=function(t){_inherits(StampAnnotationElement,t);var h=_createSuper(StampAnnotationElement);function StampAnnotationElement(t){var y,w,A;_classCallCheck(this,StampAnnotationElement);var T=!!(t.data.hasPopup||null!==(y=t.data.titleObj)&&void 0!==y&&y.str||null!==(w=t.data.contentsObj)&&void 0!==w&&w.str||null!==(A=t.data.richText)&&void 0!==A&&A.str);return h.call(this,t,{isRenderable:T,ignoreBorder:!0})}return _createClass(StampAnnotationElement,[{key:"render",value:function render(){return this.container.className="stampAnnotation",this.data.hasPopup||this._createPopup(null,this.data),this.container}}]),StampAnnotationElement}(W),tt=function(t){_inherits(FileAttachmentAnnotationElement,t);var h=_createSuper(FileAttachmentAnnotationElement);function FileAttachmentAnnotationElement(t){var y,T;_classCallCheck(this,FileAttachmentAnnotationElement);var E=(T=h.call(this,t,{isRenderable:!0})).data.file,j=E.filename,B=E.content;return T.filename=(0,A.getFilenameFromUrl)(j),T.content=B,null===(y=T.linkService.eventBus)||void 0===y||y.dispatch("fileattachmentannotation",{source:_assertThisInitialized(T),id:(0,w.stringToPDFString)(j),filename:j,content:B}),T}return _createClass(FileAttachmentAnnotationElement,[{key:"render",value:function render(){var t,h;this.container.className="fileAttachmentAnnotation";var y=document.createElement("div");return y.style.height=this.container.style.height,y.style.width=this.container.style.width,y.addEventListener("dblclick",this._download.bind(this)),!this.data.hasPopup&&(null!==(t=this.data.titleObj)&&void 0!==t&&t.str||null!==(h=this.data.contentsObj)&&void 0!==h&&h.str||this.data.richText)&&this._createPopup(y,this.data),this.container.appendChild(y),this.container}},{key:"_download",value:function _download(){var t;null===(t=this.downloadManager)||void 0===t||t.openOrDownloadData(this.container,this.content,this.filename)}}]),FileAttachmentAnnotationElement}(W),rt=function(){function AnnotationLayer(){_classCallCheck(this,AnnotationLayer)}return _createClass(AnnotationLayer,null,[{key:"render",value:function render(t){var h,y=[],E=[],j=_createForOfIteratorHelper(t.annotations);try{for(j.s();!(h=j.n()).done;){var B=h.value;B&&(B.annotationType!==w.AnnotationType.POPUP?y.push(B):E.push(B))}}catch(t){j.e(t)}finally{j.f()}E.length&&y.push.apply(y,E);for(var N=t.div,W=0,H=y;W<H.length;W++){var G=H[W],z=V.create({data:G,layer:N,page:t.page,viewport:t.viewport,linkService:t.linkService,downloadManager:t.downloadManager,imageResourcesPath:t.imageResourcesPath||"",renderForms:!1!==t.renderForms,svgFactory:new A.DOMSVGFactory,annotationStorage:t.annotationStorage||new T.AnnotationStorage,enableScripting:t.enableScripting,hasJSActions:t.hasJSActions,fieldObjects:t.fieldObjects,mouseState:t.mouseState||{isDown:!1}});if(z.isRenderable){var $=z.render();if(G.hidden&&($.style.visibility="hidden"),Array.isArray($)){var J,X=_createForOfIteratorHelper($);try{for(X.s();!(J=X.n()).done;){var K=J.value;N.appendChild(K)}}catch(t){X.e(t)}finally{X.f()}}else z instanceof ue?N.prepend($):N.appendChild($)}}_classStaticPrivateMethodGet(this,AnnotationLayer,_setAnnotationCanvasMap).call(this,N,t.annotationCanvasMap)}},{key:"update",value:function update(t){var h,y,A,T=t.page,E=t.viewport,j=t.annotations,B=t.annotationCanvasMap,N=t.div,V=E.transform,W="matrix(".concat(V.join(","),")"),H=_createForOfIteratorHelper(j);try{for(H.s();!(A=H.n()).done;){var G=A.value,z=N.querySelectorAll('[data-annotation-id="'.concat(G.id,'"]'));if(z){var $,J=_createForOfIteratorHelper(z);try{for(J.s();!($=J.n()).done;){var X=$.value;if(G.hasOwnCanvas){var K=w.Util.normalizeRect([G.rect[0],T.view[3]-G.rect[1]+T.view[1],G.rect[2],T.view[3]-G.rect[3]+T.view[1]]);if(!y){h=Math.abs(V[0]||V[1]);for(var ne=V.slice(),ue=0;ue<4;ue++)ne[ue]=Math.sign(ne[ue]);y="matrix(".concat(ne.join(","),")")}var pe=K[0]*h,me=K[1]*h;X.style.left="".concat(pe,"px"),X.style.top="".concat(me,"px"),X.style.transformOrigin="".concat(-pe,"px ").concat(-me,"px"),X.style.transform=y}else X.style.transform=W}}catch(t){J.e(t)}finally{J.f()}}}}catch(t){H.e(t)}finally{H.f()}_classStaticPrivateMethodGet(this,AnnotationLayer,_setAnnotationCanvasMap).call(this,N,B),N.hidden=!1}}]),AnnotationLayer}();function _setAnnotationCanvasMap(t,h){if(h){var y,w=_createForOfIteratorHelper(h);try{for(w.s();!(y=w.n()).done;){var A=_slicedToArray(y.value,2),T=A[0],E=A[1],j=t.querySelector('[data-annotation-id="'.concat(T,'"]'));if(j){var B=j.firstChild;"CANVAS"===B.nodeName?j.replaceChild(E,B):j.insertBefore(E,B)}}}catch(t){w.e(t)}finally{w.f()}h.clear()}}h.AnnotationLayer=rt},(t,h)=>{"use strict";function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _slicedToArray(t,h){return function _arrayWithHoles(t){if(Array.isArray(t))return t}(t)||function _iterableToArrayLimit(t,h){var y=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=y){var w,A,T,E,j=[],B=!0,N=!1;try{if(T=(y=y.call(t)).next,0===h){if(Object(y)!==y)return;B=!1}else for(;!(B=(w=T.call(y)).done)&&(j.push(w.value),j.length!==h);B=!0);}catch(t){N=!0,A=t}finally{try{if(!B&&null!=y.return&&(E=y.return(),Object(E)!==E))return}finally{if(N)throw A}}return j}}(t,h)||function _unsupportedIterableToArray(t,h){if(!t)return;if("string"==typeof t)return _arrayLikeToArray(t,h);var y=Object.prototype.toString.call(t).slice(8,-1);"Object"===y&&t.constructor&&(y=t.constructor.name);if("Map"===y||"Set"===y)return Array.from(t);if("Arguments"===y||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(y))return _arrayLikeToArray(t,h)}(t,h)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(t,h){(null==h||h>t.length)&&(h=t.length);for(var y=0,w=new Array(h);y<h;y++)w[y]=t[y];return w}function _defineProperties(t,h){for(var y=0;y<h.length;y++){var w=h[y];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(t,(A=w.key,T=void 0,T=function _toPrimitive(t,h){if("object"!==_typeof(t)||null===t)return t;var y=t[Symbol.toPrimitive];if(void 0!==y){var w=y.call(t,h||"default");if("object"!==_typeof(w))return w;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===h?String:Number)(t)}(A,"string"),"symbol"===_typeof(T)?T:String(T)),w)}var A,T}function makeColorComp(t){return Math.floor(255*Math.max(0,Math.min(1,t))).toString(16).padStart(2,"0")}Object.defineProperty(h,"__esModule",{value:!0}),h.ColorConverters=void 0;var y=function(){function ColorConverters(){!function _classCallCheck(t,h){if(!(t instanceof h))throw new TypeError("Cannot call a class as a function")}(this,ColorConverters)}return function _createClass(t,h,y){return h&&_defineProperties(t.prototype,h),y&&_defineProperties(t,y),Object.defineProperty(t,"prototype",{writable:!1}),t}(ColorConverters,null,[{key:"CMYK_G",value:function CMYK_G(t){var h=_slicedToArray(t,4),y=h[0],w=h[1],A=h[2],T=h[3];return["G",1-Math.min(1,.3*y+.59*A+.11*w+T)]}},{key:"G_CMYK",value:function G_CMYK(t){return["CMYK",0,0,0,1-_slicedToArray(t,1)[0]]}},{key:"G_RGB",value:function G_RGB(t){var h=_slicedToArray(t,1)[0];return["RGB",h,h,h]}},{key:"G_HTML",value:function G_HTML(t){var h=makeColorComp(_slicedToArray(t,1)[0]);return"#".concat(h).concat(h).concat(h)}},{key:"RGB_G",value:function RGB_G(t){var h=_slicedToArray(t,3);return["G",.3*h[0]+.59*h[1]+.11*h[2]]}},{key:"RGB_HTML",value:function RGB_HTML(t){var h=_slicedToArray(t,3),y=h[0],w=h[1],A=h[2],T=makeColorComp(y),E=makeColorComp(w),j=makeColorComp(A);return"#".concat(T).concat(E).concat(j)}},{key:"T_HTML",value:function T_HTML(){return"#00000000"}},{key:"CMYK_RGB",value:function CMYK_RGB(t){var h=_slicedToArray(t,4),y=h[0],w=h[1],A=h[2],T=h[3];return["RGB",1-Math.min(1,y+T),1-Math.min(1,A+T),1-Math.min(1,w+T)]}},{key:"CMYK_HTML",value:function CMYK_HTML(t){return this.RGB_HTML(this.CMYK_RGB(t))}},{key:"RGB_CMYK",value:function RGB_CMYK(t){var h=_slicedToArray(t,3),y=1-h[0],w=1-h[1],A=1-h[2];return["CMYK",y,w,A,Math.min(y,w,A)]}}]),ColorConverters}();h.ColorConverters=y},(t,h,y)=>{"use strict";Object.defineProperty(h,"__esModule",{value:!0}),h.XfaLayer=void 0;var w=y(4),A=y(146);function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _slicedToArray(t,h){return function _arrayWithHoles(t){if(Array.isArray(t))return t}(t)||function _iterableToArrayLimit(t,h){var y=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=y){var w,A,T,E,j=[],B=!0,N=!1;try{if(T=(y=y.call(t)).next,0===h){if(Object(y)!==y)return;B=!1}else for(;!(B=(w=T.call(y)).done)&&(j.push(w.value),j.length!==h);B=!0);}catch(t){N=!0,A=t}finally{try{if(!B&&null!=y.return&&(E=y.return(),Object(E)!==E))return}finally{if(N)throw A}}return j}}(t,h)||_unsupportedIterableToArray(t,h)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _createForOfIteratorHelper(t,h){var y="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!y){if(Array.isArray(t)||(y=_unsupportedIterableToArray(t))||h&&t&&"number"==typeof t.length){y&&(t=y);var w=0,A=function F(){};return{s:A,n:function n(){return w>=t.length?{done:!0}:{done:!1,value:t[w++]}},e:function e(t){throw t},f:A}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var T,E=!0,j=!1;return{s:function s(){y=y.call(t)},n:function n(){var t=y.next();return E=t.done,t},e:function e(t){j=!0,T=t},f:function f(){try{E||null==y.return||y.return()}finally{if(j)throw T}}}}function _unsupportedIterableToArray(t,h){if(t){if("string"==typeof t)return _arrayLikeToArray(t,h);var y=Object.prototype.toString.call(t).slice(8,-1);return"Object"===y&&t.constructor&&(y=t.constructor.name),"Map"===y||"Set"===y?Array.from(t):"Arguments"===y||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(y)?_arrayLikeToArray(t,h):void 0}}function _arrayLikeToArray(t,h){(null==h||h>t.length)&&(h=t.length);for(var y=0,w=new Array(h);y<h;y++)w[y]=t[y];return w}function _defineProperties(t,h){for(var y=0;y<h.length;y++){var w=h[y];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(t,(A=w.key,T=void 0,T=function _toPrimitive(t,h){if("object"!==_typeof(t)||null===t)return t;var y=t[Symbol.toPrimitive];if(void 0!==y){var w=y.call(t,h||"default");if("object"!==_typeof(w))return w;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===h?String:Number)(t)}(A,"string"),"symbol"===_typeof(T)?T:String(T)),w)}var A,T}var T=function(){function XfaLayer(){!function _classCallCheck(t,h){if(!(t instanceof h))throw new TypeError("Cannot call a class as a function")}(this,XfaLayer)}return function _createClass(t,h,y){return h&&_defineProperties(t.prototype,h),y&&_defineProperties(t,y),Object.defineProperty(t,"prototype",{writable:!1}),t}(XfaLayer,null,[{key:"setupStorage",value:function setupStorage(t,h,y,w,A){var T=w.getValue(h,{value:null});switch(y.name){case"textarea":if(null!==T.value&&(t.textContent=T.value),"print"===A)break;t.addEventListener("input",(function(t){w.setValue(h,{value:t.target.value})}));break;case"input":if("radio"===y.attributes.type||"checkbox"===y.attributes.type){if(T.value===y.attributes.xfaOn?t.setAttribute("checked",!0):T.value===y.attributes.xfaOff&&t.removeAttribute("checked"),"print"===A)break;t.addEventListener("change",(function(t){w.setValue(h,{value:t.target.checked?t.target.getAttribute("xfaOn"):t.target.getAttribute("xfaOff")})}))}else{if(null!==T.value&&t.setAttribute("value",T.value),"print"===A)break;t.addEventListener("input",(function(t){w.setValue(h,{value:t.target.value})}))}break;case"select":if(null!==T.value){var E,j=_createForOfIteratorHelper(y.children);try{for(j.s();!(E=j.n()).done;){var B=E.value;B.attributes.value===T.value&&(B.attributes.selected=!0)}}catch(t){j.e(t)}finally{j.f()}}t.addEventListener("input",(function(t){var y=t.target.options,A=-1===y.selectedIndex?"":y[y.selectedIndex].value;w.setValue(h,{value:A})}))}}},{key:"setAttributes",value:function setAttributes(t){var h,y=t.html,A=t.element,T=t.storage,E=void 0===T?null:T,j=t.intent,B=t.linkService,N=A.attributes,V=y instanceof HTMLAnchorElement;"radio"===N.type&&(N.name="".concat(N.name,"-").concat(j));for(var W=0,H=Object.entries(N);W<H.length;W++){var G=_slicedToArray(H[W],2),z=G[0],$=G[1];if(null!=$&&"dataId"!==z)if("style"!==z)if("textContent"===z)y.textContent=$;else if("class"===z)$.length&&y.setAttribute(z,$.join(" "));else{if(V&&("href"===z||"newWindow"===z))continue;y.setAttribute(z,$)}else _extends(y.style,$)}V&&(B.addLinkAttributes||(0,w.warn)("XfaLayer.setAttribute - missing `addLinkAttributes`-method on the `linkService`-instance."),null===(h=B.addLinkAttributes)||void 0===h||h.call(B,y,N.href,N.newWindow));E&&N.dataId&&this.setupStorage(y,N.dataId,A,E)}},{key:"render",value:function render(t){var h=t.annotationStorage,y=t.linkService,w=t.xfa,T=t.intent||"display",E=document.createElement(w.name);w.attributes&&this.setAttributes({html:E,element:w,intent:T,linkService:y});var j=[[w,-1,E]],B=t.div;if(B.appendChild(E),t.viewport){var N="matrix(".concat(t.viewport.transform.join(","),")");B.style.transform=N}"richText"!==T&&B.setAttribute("class","xfaLayer xfaFont");for(var V=[];j.length>0;){var W,H=_slicedToArray(j[j.length-1],3),G=H[0],z=H[1],$=H[2];if(z+1!==G.children.length){var J=G.children[++j[j.length-1][1]];if(null!==J){var X=J.name;if("#text"!==X){var K=void 0;if(K=null!=J&&null!==(W=J.attributes)&&void 0!==W&&W.xmlns?document.createElementNS(J.attributes.xmlns,X):document.createElement(X),$.appendChild(K),J.attributes&&this.setAttributes({html:K,element:J,storage:h,intent:T,linkService:y}),J.children&&J.children.length>0)j.push([J,-1,K]);else if(J.value){var ne=document.createTextNode(J.value);A.XfaText.shouldBuildText(X)&&V.push(ne),K.appendChild(ne)}}else{var ue=document.createTextNode(J.value);V.push(ue),$.appendChild(ue)}}}else j.pop()}var pe,me=_createForOfIteratorHelper(B.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"));try{for(me.s();!(pe=me.n()).done;){pe.value.setAttribute("readOnly",!0)}}catch(t){me.e(t)}finally{me.f()}return{textDivs:V}}},{key:"update",value:function update(t){var h="matrix(".concat(t.viewport.transform.join(","),")");t.div.style.transform=h,t.div.hidden=!1}}]),XfaLayer}();h.XfaLayer=T},(t,h,y)=>{"use strict";function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}Object.defineProperty(h,"__esModule",{value:!0}),h.renderTextLayer=function renderTextLayer(t){var h=new N({textContent:t.textContent,textContentStream:t.textContentStream,container:t.container,viewport:t.viewport,textDivs:t.textDivs,textContentItemsStr:t.textContentItemsStr,enhanceTextSelection:t.enhanceTextSelection});return h._render(t.timeout),h};var w=y(4),A=y(151);function _defineProperties(t,h){for(var y=0;y<h.length;y++){var w=h[y];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(t,(A=w.key,T=void 0,T=function _toPrimitive(t,h){if("object"!==_typeof(t)||null===t)return t;var y=t[Symbol.toPrimitive];if(void 0!==y){var w=y.call(t,h||"default");if("object"!==_typeof(w))return w;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===h?String:Number)(t)}(A,"string"),"symbol"===_typeof(T)?T:String(T)),w)}var A,T}function _createForOfIteratorHelper(t,h){var y="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!y){if(Array.isArray(t)||(y=_unsupportedIterableToArray(t))||h&&t&&"number"==typeof t.length){y&&(t=y);var w=0,A=function F(){};return{s:A,n:function n(){return w>=t.length?{done:!0}:{done:!1,value:t[w++]}},e:function e(t){throw t},f:A}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var T,E=!0,j=!1;return{s:function s(){y=y.call(t)},n:function n(){var t=y.next();return E=t.done,t},e:function e(t){j=!0,T=t},f:function f(){try{E||null==y.return||y.return()}finally{if(j)throw T}}}}function _slicedToArray(t,h){return function _arrayWithHoles(t){if(Array.isArray(t))return t}(t)||function _iterableToArrayLimit(t,h){var y=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=y){var w,A,T,E,j=[],B=!0,N=!1;try{if(T=(y=y.call(t)).next,0===h){if(Object(y)!==y)return;B=!1}else for(;!(B=(w=T.call(y)).done)&&(j.push(w.value),j.length!==h);B=!0);}catch(t){N=!0,A=t}finally{try{if(!B&&null!=y.return&&(E=y.return(),Object(E)!==E))return}finally{if(N)throw A}}return j}}(t,h)||_unsupportedIterableToArray(t,h)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _unsupportedIterableToArray(t,h){if(t){if("string"==typeof t)return _arrayLikeToArray(t,h);var y=Object.prototype.toString.call(t).slice(8,-1);return"Object"===y&&t.constructor&&(y=t.constructor.name),"Map"===y||"Set"===y?Array.from(t):"Arguments"===y||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(y)?_arrayLikeToArray(t,h):void 0}}function _arrayLikeToArray(t,h){(null==h||h>t.length)&&(h=t.length);for(var y=0,w=new Array(h);y<h;y++)w[y]=t[y];return w}var T=30,E=.8,j=new Map,B=/^\s+$/g;function appendText(t,h,y,A){var N=document.createElement("span"),V=t._enhanceTextSelection?{angle:0,canvasWidth:0,hasText:""!==h.str,hasEOL:h.hasEOL,originalTransform:null,paddingBottom:0,paddingLeft:0,paddingRight:0,paddingTop:0,scale:1}:{angle:0,canvasWidth:0,hasText:""!==h.str,hasEOL:h.hasEOL};t._textDivs.push(N);var W=w.Util.transform(t._viewport.transform,h.transform),H=Math.atan2(W[1],W[0]),G=y[h.fontName];G.vertical&&(H+=Math.PI/2);var z,$,J=Math.hypot(W[2],W[3]),X=J*function getAscent(t,h){var y=j.get(t);if(y)return y;h.save(),h.font="".concat(T,"px ").concat(t);var w=h.measureText(""),A=w.fontBoundingBoxAscent,B=Math.abs(w.fontBoundingBoxDescent);if(A){h.restore();var N=A/(A+B);return j.set(t,N),N}h.strokeStyle="red",h.clearRect(0,0,T,T),h.strokeText("g",0,0);var V=h.getImageData(0,0,T,T).data;B=0;for(var W=V.length-1-3;W>=0;W-=4)if(V[W]>0){B=Math.ceil(W/4/T);break}h.clearRect(0,0,T,T),h.strokeText("A",0,T),A=0;for(var H=0,G=(V=h.getImageData(0,0,T,T).data).length;H<G;H+=4)if(V[H]>0){A=T-Math.floor(H/4/T);break}if(h.restore(),A){var z=A/(A+B);return j.set(t,z),z}return j.set(t,E),E}(G.fontFamily,A);0===H?(z=W[4],$=W[5]-X):(z=W[4]+X*Math.sin(H),$=W[5]-X*Math.cos(H)),N.style.left="".concat(z,"px"),N.style.top="".concat($,"px"),N.style.fontSize="".concat(J,"px"),N.style.fontFamily=G.fontFamily,N.setAttribute("role","presentation"),N.textContent=h.str,N.dir=h.dir,t._fontInspectorEnabled&&(N.dataset.fontName=h.fontName),0!==H&&(V.angle=H*(180/Math.PI));var K=!1;if(h.str.length>1||t._enhanceTextSelection&&B.test(h.str))K=!0;else if(" "!==h.str&&h.transform[0]!==h.transform[3]){var ne=Math.abs(h.transform[0]),ue=Math.abs(h.transform[3]);ne!==ue&&Math.max(ne,ue)/Math.min(ne,ue)>1.5&&(K=!0)}if(K&&(G.vertical?V.canvasWidth=h.height*t._viewport.scale:V.canvasWidth=h.width*t._viewport.scale),t._textDivProperties.set(N,V),t._textContentStream&&t._layoutText(N),t._enhanceTextSelection&&V.hasText){var pe=1,me=0;0!==H&&(pe=Math.cos(H),me=Math.sin(H));var ge,we,Ce=(G.vertical?h.height:h.width)*t._viewport.scale,ke=J;0!==H?(ge=[pe,me,-me,pe,z,$],we=w.Util.getAxialAlignedBoundingBox([0,0,Ce,ke],ge)):we=[z,$,z+Ce,$+ke],t._bounds.push({left:we[0],top:we[1],right:we[2],bottom:we[3],div:N,size:[Ce,ke],m:ge})}var Ie=_slicedToArray(h.fontColor,3),Te=Ie[0],Ee=Ie[1],Me=Ie[2];N.dataset.color=w.Util.makeHexColor(Te,Ee,Me),N.dataset.pdfX=h.transform[4],N.dataset.pdfY=h.transform[5],N.dataset.fontFace=h.fontName,N.dataset.fontFaces=JSON.stringify(h.fontNames),N.dataset.fontAscent=X,h.ascent&&(N.dataset.ascent=h.ascent),h.descent&&(N.dataset.descent=h.descent);var Be=h.font||"";N.dataset.font=Be,N.dataset.fonts=JSON.stringify(h.fonts),(h.fontBold||function isFontBold(t){var h=t.toUpperCase();return h.includes("BOLD")||h.includes("BLACK")}(Be))&&(N.dataset.bold="true"),(h.fontItalic||function isFontItalic(t){var h=t.toUpperCase();return h.includes("ITALIC")||h.includes("OBLIQUE")}(Be))&&(N.dataset.italic="true")}function render(t){if(!t._canceled){var h=t._textDivs,y=t._capability,w=h.length;if(w>1e5)return t._renderingDone=!0,void y.resolve();if(!t._textContentStream)for(var A=0;A<w;A++)t._layoutText(h[A]);t._renderingDone=!0,y.resolve()}}function findPositiveMin(t,h,y){for(var w=0,A=0;A<y;A++){var T=t[h++];T>0&&(w=w?Math.min(T,w):T)}return w}function expand(t){for(var h=t._bounds,y=t._viewport,A=function expandBounds(t,h,y){var w=y.map((function(t,h){return{x1:t.left,y1:t.top,x2:t.right,y2:t.bottom,index:h,x1New:void 0,x2New:void 0}}));expandBoundsLTR(t,w);var A,T=new Array(y.length),E=_createForOfIteratorHelper(w);try{for(E.s();!(A=E.n()).done;){var j=A.value,B=j.index;T[B]={left:j.x1New,top:0,right:j.x2New,bottom:0}}}catch(t){E.e(t)}finally{E.f()}y.map((function(h,y){var A=T[y],E=w[y];E.x1=h.top,E.y1=t-A.right,E.x2=h.bottom,E.y2=t-A.left,E.index=y,E.x1New=void 0,E.x2New=void 0})),expandBoundsLTR(h,w);var N,V=_createForOfIteratorHelper(w);try{for(V.s();!(N=V.n()).done;){var W=N.value,H=W.index;T[H].top=W.x1New,T[H].bottom=W.x2New}}catch(t){V.e(t)}finally{V.f()}return T}(y.width,y.height,h),T=0;T<A.length;T++){var E=h[T].div,j=t._textDivProperties.get(E);if(0!==j.angle){for(var B=A[T],N=h[T],V=N.m,W=V[0],H=V[1],G=[[0,0],[0,N.size[1]],[N.size[0],0],N.size],z=new Float64Array(64),$=0,J=G.length;$<J;$++){var X=w.Util.applyTransform(G[$],V);z[$+0]=W&&(B.left-X[0])/W,z[$+4]=H&&(B.top-X[1])/H,z[$+8]=W&&(B.right-X[0])/W,z[$+12]=H&&(B.bottom-X[1])/H,z[$+16]=H&&(B.left-X[0])/-H,z[$+20]=W&&(B.top-X[1])/W,z[$+24]=H&&(B.right-X[0])/-H,z[$+28]=W&&(B.bottom-X[1])/W,z[$+32]=W&&(B.left-X[0])/-W,z[$+36]=H&&(B.top-X[1])/-H,z[$+40]=W&&(B.right-X[0])/-W,z[$+44]=H&&(B.bottom-X[1])/-H,z[$+48]=H&&(B.left-X[0])/H,z[$+52]=W&&(B.top-X[1])/-W,z[$+56]=H&&(B.right-X[0])/H,z[$+60]=W&&(B.bottom-X[1])/-W}var K=1+Math.min(Math.abs(W),Math.abs(H));j.paddingLeft=findPositiveMin(z,32,16)/K,j.paddingTop=findPositiveMin(z,48,16)/K,j.paddingRight=findPositiveMin(z,0,16)/K,j.paddingBottom=findPositiveMin(z,16,16)/K,t._textDivProperties.set(E,j)}else j.paddingLeft=h[T].left-A[T].left,j.paddingTop=h[T].top-A[T].top,j.paddingRight=A[T].right-h[T].right,j.paddingBottom=A[T].bottom-h[T].bottom,t._textDivProperties.set(E,j)}}function expandBoundsLTR(t,h){h.sort((function(t,h){return t.x1-h.x1||t.index-h.index}));var y,w=[{start:-1/0,end:1/0,boundary:{x1:-1/0,y1:-1/0,x2:0,y2:1/0,index:-1,x1New:0,x2New:0}}],A=_createForOfIteratorHelper(h);try{for(A.s();!(y=A.n()).done;){for(var T=y.value,E=0;E<w.length&&w[E].end<=T.y1;)E++;for(var j=w.length-1;j>=0&&w[j].start>=T.y2;)j--;var B=void 0,N=void 0,V=void 0,W=void 0,H=-1/0;for(V=E;V<=j;V++){N=(B=w[V]).boundary;var G=void 0;(G=N.x2>T.x1?N.index>T.index?N.x1New:T.x1:void 0===N.x2New?(N.x2+T.x1)/2:N.x2New)>H&&(H=G)}for(T.x1New=H,V=E;V<=j;V++)void 0===(N=(B=w[V]).boundary).x2New?N.x2>T.x1?N.index>T.index&&(N.x2New=N.x2):N.x2New=H:N.x2New>H&&(N.x2New=Math.max(H,N.x2));var z=[],$=null;for(V=E;V<=j;V++){var J=(N=(B=w[V]).boundary).x2>T.x2?N:T;$===J?z[z.length-1].end=B.end:(z.push({start:B.start,end:B.end,boundary:J}),$=J)}for(w[E].start<T.y1&&(z[0].start=T.y1,z.unshift({start:w[E].start,end:T.y1,boundary:w[E].boundary})),T.y2<w[j].end&&(z[z.length-1].end=T.y2,z.push({start:T.y2,end:w[j].end,boundary:w[j].boundary})),V=E;V<=j;V++)if(void 0===(N=(B=w[V]).boundary).x2New){var X=!1;for(W=E-1;!X&&W>=0&&w[W].start>=N.y1;W--)X=w[W].boundary===N;for(W=j+1;!X&&W<w.length&&w[W].end<=N.y2;W++)X=w[W].boundary===N;for(W=0;!X&&W<z.length;W++)X=z[W].boundary===N;X||(N.x2New=H)}Array.prototype.splice.apply(w,[E,j-E+1].concat(z))}}catch(t){A.e(t)}finally{A.f()}for(var K=0,ne=w;K<ne.length;K++){var ue=ne[K].boundary;void 0===ue.x2New&&(ue.x2New=Math.max(t,ue.x2))}}function trimTextLine(t){for(var h=0,y=t.length;y>0&&(t[0].str.trim()?h|=2:(t.shift(),y--),y>0&&t[y-1].str.trim()?h|=1:(t.pop(),y--),3!==h););return t}var N=function(){function TextLayerRenderTask(t){var h,y=this,A=t.textContent,T=t.textContentStream,E=t.container,j=t.viewport,B=t.textDivs,N=t.textContentItemsStr,V=t.enhanceTextSelection;!function _classCallCheck(t,h){if(!(t instanceof h))throw new TypeError("Cannot call a class as a function")}(this,TextLayerRenderTask),this._textContent=A,this._textContentStream=T,this._container=E,this._document=E.ownerDocument,this._viewport=j,this._textDivs=B||[],this._textContentItemsStr=N||[],this._enhanceTextSelection=!!V,this._fontInspectorEnabled=!(null===(h=globalThis.FontInspector)||void 0===h||!h.enabled),this._reader=null,this._layoutTextLastFontSize=null,this._layoutTextLastFontFamily=null,this._layoutTextCtx=null,this._textDivProperties=new WeakMap,this._renderingDone=!1,this._canceled=!1,this._capability=(0,w.createPromiseCapability)(),this._renderTimer=null,this._bounds=[],this._lastTextItem=null,this._lineOfTextItems=[],this._capability.promise.finally((function(){y._enhanceTextSelection||(y._textDivProperties=null),y._layoutTextCtx&&(y._layoutTextCtx.canvas.width=0,y._layoutTextCtx.canvas.height=0,y._layoutTextCtx=null)})).catch((function(){}))}return function _createClass(t,h,y){return h&&_defineProperties(t.prototype,h),y&&_defineProperties(t,y),Object.defineProperty(t,"prototype",{writable:!1}),t}(TextLayerRenderTask,[{key:"promise",get:function get(){return this._capability.promise}},{key:"cancel",value:function cancel(){this._canceled=!0,this._reader&&(this._reader.cancel(new w.AbortException("TextLayer task cancelled.")).catch((function(){})),this._reader=null),null!==this._renderTimer&&(clearTimeout(this._renderTimer),this._renderTimer=null),this._capability.reject(new Error("TextLayer task cancelled."))}},{key:"_processItems",value:function _processItems(t,h){for(var y=0,w=t.length;y<w;y++){var T;if(void 0!==t[y].str){if(""!==t[y].str){var E={name:(null===(T=this._lastTextItem)||void 0===T?void 0:T.font)||""},j={name:t[y].font||""};((0,A.canStartNewLine)(t[y],this._lastTextItem)||(0,A.canStartNewLineByFont)(j,E))&&(trimTextLine(this._lineOfTextItems),this._processLineOfItems(this._lineOfTextItems,h),this._lineOfTextItems.length=0),this._lineOfTextItems.push(t[y]),this._lastTextItem=t[y]}}else if("beginMarkedContentProps"===t[y].type||"beginMarkedContent"===t[y].type){var B=this._container;this._container=document.createElement("span"),this._container.classList.add("markedContent"),null!==t[y].id&&this._container.setAttribute("id","".concat(t[y].id)),B.appendChild(this._container)}else"endMarkedContent"===t[y].type&&(this._container=this._container.parentNode)}}},{key:"_processLineOfItems",value:function _processLineOfItems(t,h){if(null!=t&&t.length){var y=_extends({},t[0]),w=t.reduce((function(t,h,y,w){var A=w[y-1]||h,T=A.width,E=_slicedToArray(A.transform,5)[4],j=h.width,B=_slicedToArray(h.transform,5)[4];return t.str+=h.str,0===y?t.width=j:t.width+=B-(E+T)+j,t.fonts.add(h.font),t.fontNames.add(h.fontName),t.height=Math.max(h.height,t.height),t}),{str:"",fonts:new Set,fontNames:new Set,width:0,height:0});y.str=w.str,y.fonts=Array.from(w.fonts),y.fontNames=Array.from(w.fontNames),y.width=w.width,y.height=w.height,this._textContentItemsStr.push(y.str),appendText(this,y,h,this._layoutTextCtx)}}},{key:"_layoutText",value:function _layoutText(t){var h=this._textDivProperties.get(t),y="";if(0!==h.canvasWidth&&h.hasText){var w=t.style,A=w.fontSize,T=w.fontFamily;A===this._layoutTextLastFontSize&&T===this._layoutTextLastFontFamily||(this._layoutTextCtx.font="".concat(A," ").concat(T),this._layoutTextLastFontSize=A,this._layoutTextLastFontFamily=T);var E=this._layoutTextCtx.measureText(t.textContent).width;if(E>0){var j=h.canvasWidth/E;this._enhanceTextSelection&&(h.scale=j),y="scaleX(".concat(j,")")}}if(0!==h.angle&&(y="rotate(".concat(h.angle,"deg) ").concat(y)),y.length>0&&(this._enhanceTextSelection&&(h.originalTransform=y),t.style.transform=y),h.hasText&&this._container.appendChild(t),h.hasEOL){var B=document.createElement("br");B.setAttribute("role","presentation"),this._container.appendChild(B)}}},{key:"_render",value:function _render(){var t=this,h=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,y=(0,w.createPromiseCapability)(),A=Object.create(null);this._lineOfTextItems=[];var E=this._document.createElement("canvas");if(E.height=E.width=T,E.mozOpaque=!0,this._layoutTextCtx=E.getContext("2d",{alpha:!1}),this._textContent){var j=this._textContent.items,B=this._textContent.styles;this._processItems(j,B),this._lineOfTextItems.length>0&&this._processLineOfItems(this._lineOfTextItems,B),y.resolve()}else{if(!this._textContentStream)throw new Error('Neither "textContent" nor "textContentStream" parameters specified.');this._reader=this._textContentStream.getReader(),function pump(){t._reader.read().then((function(h){var w=h.value;if(h.done)return t._lineOfTextItems.length>0&&t._processLineOfItems(t._lineOfTextItems,A),void y.resolve();_extends(A,w.styles),t._processItems(w.items,A),pump()}),y.reject)}()}y.promise.then((function(){A=null,h?t._renderTimer=setTimeout((function(){render(t),t._renderTimer=null}),h):render(t)}),this._capability.reject)}},{key:"expandTextDivs",value:function expandTextDivs(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this._enhanceTextSelection&&this._renderingDone){null!==this._bounds&&(expand(this),this._bounds=null);for(var h=[],y=[],w=0,A=this._textDivs.length;w<A;w++){var T=this._textDivs[w],E=this._textDivProperties.get(T);E.hasText&&(t?(h.length=0,y.length=0,E.originalTransform&&h.push(E.originalTransform),E.paddingTop>0?(y.push("".concat(E.paddingTop,"px")),h.push("translateY(".concat(-E.paddingTop,"px)"))):y.push(0),E.paddingRight>0?y.push("".concat(E.paddingRight/E.scale,"px")):y.push(0),E.paddingBottom>0?y.push("".concat(E.paddingBottom,"px")):y.push(0),E.paddingLeft>0?(y.push("".concat(E.paddingLeft/E.scale,"px")),h.push("translateX(".concat(-E.paddingLeft/E.scale,"px)"))):y.push(0),T.style.padding=y.join(" "),h.length&&(T.style.transform=h.join(" "))):(T.style.padding=null,T.style.transform=E.originalTransform))}}}}]),TextLayerRenderTask}()},(t,h)=>{"use strict";function _slicedToArray(t,h){return function _arrayWithHoles(t){if(Array.isArray(t))return t}(t)||function _iterableToArrayLimit(t,h){var y=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=y){var w,A,T,E,j=[],B=!0,N=!1;try{if(T=(y=y.call(t)).next,0===h){if(Object(y)!==y)return;B=!1}else for(;!(B=(w=T.call(y)).done)&&(j.push(w.value),j.length!==h);B=!0);}catch(t){N=!0,A=t}finally{try{if(!B&&null!=y.return&&(E=y.return(),Object(E)!==E))return}finally{if(N)throw A}}return j}}(t,h)||function _unsupportedIterableToArray(t,h){if(!t)return;if("string"==typeof t)return _arrayLikeToArray(t,h);var y=Object.prototype.toString.call(t).slice(8,-1);"Object"===y&&t.constructor&&(y=t.constructor.name);if("Map"===y||"Set"===y)return Array.from(t);if("Arguments"===y||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(y))return _arrayLikeToArray(t,h)}(t,h)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(t,h){(null==h||h>t.length)&&(h=t.length);for(var y=0,w=new Array(h);y<h;y++)w[y]=t[y];return w}Object.defineProperty(h,"__esModule",{value:!0}),h.canStartNewLineByFont=h.canStartNewLine=void 0;var y={d:function d(t,h){for(var w in h)y.o(h,w)&&!y.o(t,w)&&Object.defineProperty(t,w,{enumerable:!0,get:h[w]})},o:function o(t,h){return Object.prototype.hasOwnProperty.call(t,h)}},w={};function r(t){var h=_slicedToArray(t,4),y=h[0],w=h[1],A=h[2],T=h[3];return y=a(y),w=a(w),A=a(A),T=a(T),0<w&&A<0?90:y<0&&T<0?180:w<0&&0<A?270:0}function a(t){return 1e-6<Math.abs(t)?t:0}function n(t,h){var y=(h=h||t).str.trim(),w=t.str.trim();return function(t,h){var y=h||t,w=y.height,A=y.transform,T=r(A),E=t.height,j=t.transform,B=r(j);if(T!==B)return!0;var N=_slicedToArray(A,6),V=N[4],W=N[5],H=_slicedToArray(j,6),G=H[4],z=H[5],$=z-W;switch(B){case 0:break;case 90:$=G-V;break;case 180:$=W-z;break;case 270:$=V-G;break;default:console.error("Rotate ".concat(B," of text is not acceptable"))}return w>0&&E>0&&($<0&&.5*E<Math.abs($)||$>0&&.5*w<$)}(t,h)||function(t,h){var y=h||t,w=y.str,A=y.width,T=y.height,E=y.transform,j=r(E),B=t.str,N=t.width,V=t.height,W=t.transform,H=r(W);if(j!==H)return!0;var G=_slicedToArray(E,6),z=G[4],$=G[5],J=_slicedToArray(W,6),X=J[4],K=J[5],ne=0,ue=X-z;switch(H){case 0:break;case 90:ue=$-K;break;case 180:ue=z-X;break;case 270:ue=K-$;break;default:console.error("Rotate ".concat(H," of text is not acceptable"))}if(ue<0){switch(ne=z-(X+N),H){case 90:ne=K-N-$;break;case 180:ne=X-N-z;break;case 270:ne=$-(K+N)}" "===B&&(ne+=N)}if(ue>0){switch(ne=X-(z+A),H){case 90:ne=$-A-K;break;case 180:ne=z-A-X;break;case 270:ne=K-($+A)}" "===w&&(ne+=A)}return 1.4*Math.max(T,V)<ne}(t,h)||!!y&&!!w&&function(t,h){var y=h=null!=h?h:t,w=y.height,A=y.transform,T=r(A),E=t.height,j=t.transform,B=r(j);if(T!==B)return!0;if(0===w||0===E)return!1;var N=E/w,V=_slicedToArray(A,6),W=V[4],H=V[5],G=_slicedToArray(j,6),z=G[4],$=G[5],J=Math.abs($-H);switch(B){case 0:case 180:break;case 90:case 270:J=Math.abs(z-W);break;default:console.error("Rotate ".concat(B," of text is not acceptable"))}var X=.1*Math.min(w,E);return(N<=.78||1.2821<=N)&&J<X}(t,h)}function s(t){var h=t.toUpperCase();return h.includes("ITALIC")||h.includes("OBLIQUE")}function c(t){var h=t.toUpperCase();return h.includes("BOLD")||h.includes("BLACK")}function o(t,h){var y=i(h||t),w=y.name,A=y.isBold,T=y.isItalic,E=i(t),j=E.name,B=E.isBold,N=E.isItalic;return w!==j&&(!B&&!N||A!==B||T!==N)&&u(w)!==u(j)}function i(t){var h=t.name,y=t.isBold,w=t.isItalic;return{name:h,isBold:null!=y?y:c(h),isItalic:null!=w?w:s(h)}}function u(t){return t.replace(/^[a-z]+\+/i,"")}y.d(w,{m:function m(){return n},P:function P(){return o}});var A=w.m,T=w.P;h.canStartNewLineByFont=T,h.canStartNewLine=A},(t,h,y)=>{"use strict";function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}Object.defineProperty(h,"__esModule",{value:!0}),h.SVGGraphics=void 0;var w=y(4),A=y(1),T=y(6);function _toConsumableArray(t){return function _arrayWithoutHoles(t){if(Array.isArray(t))return _arrayLikeToArray(t)}(t)||function _iterableToArray(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||_unsupportedIterableToArray(t)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _slicedToArray(t,h){return function _arrayWithHoles(t){if(Array.isArray(t))return t}(t)||function _iterableToArrayLimit(t,h){var y=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=y){var w,A,T,E,j=[],B=!0,N=!1;try{if(T=(y=y.call(t)).next,0===h){if(Object(y)!==y)return;B=!1}else for(;!(B=(w=T.call(y)).done)&&(j.push(w.value),j.length!==h);B=!0);}catch(t){N=!0,A=t}finally{try{if(!B&&null!=y.return&&(E=y.return(),Object(E)!==E))return}finally{if(N)throw A}}return j}}(t,h)||_unsupportedIterableToArray(t,h)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _createForOfIteratorHelper(t,h){var y="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!y){if(Array.isArray(t)||(y=_unsupportedIterableToArray(t))||h&&t&&"number"==typeof t.length){y&&(t=y);var w=0,A=function F(){};return{s:A,n:function n(){return w>=t.length?{done:!0}:{done:!1,value:t[w++]}},e:function e(t){throw t},f:A}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var T,E=!0,j=!1;return{s:function s(){y=y.call(t)},n:function n(){var t=y.next();return E=t.done,t},e:function e(t){j=!0,T=t},f:function f(){try{E||null==y.return||y.return()}finally{if(j)throw T}}}}function _unsupportedIterableToArray(t,h){if(t){if("string"==typeof t)return _arrayLikeToArray(t,h);var y=Object.prototype.toString.call(t).slice(8,-1);return"Object"===y&&t.constructor&&(y=t.constructor.name),"Map"===y||"Set"===y?Array.from(t):"Arguments"===y||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(y)?_arrayLikeToArray(t,h):void 0}}function _arrayLikeToArray(t,h){(null==h||h>t.length)&&(h=t.length);for(var y=0,w=new Array(h);y<h;y++)w[y]=t[y];return w}function _defineProperties(t,h){for(var y=0;y<h.length;y++){var w=h[y];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(t,(A=w.key,T=void 0,T=function _toPrimitive(t,h){if("object"!==_typeof(t)||null===t)return t;var y=t[Symbol.toPrimitive];if(void 0!==y){var w=y.call(t,h||"default");if("object"!==_typeof(w))return w;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===h?String:Number)(t)}(A,"string"),"symbol"===_typeof(T)?T:String(T)),w)}var A,T}function _createClass(t,h,y){return h&&_defineProperties(t.prototype,h),y&&_defineProperties(t,y),Object.defineProperty(t,"prototype",{writable:!1}),t}function _classCallCheck(t,h){if(!(t instanceof h))throw new TypeError("Cannot call a class as a function")}var E=function SVGGraphics(){_classCallCheck(this,SVGGraphics),(0,w.unreachable)("Not implemented: SVGGraphics")};h.SVGGraphics=E;var j=function pf(t){if(Number.isInteger(t))return t.toString();var h=t.toFixed(10),y=h.length-1;if("0"!==h[y])return h;do{y--}while("0"===h[y]);return h.substring(0,"."===h[y]?y:y+1)},B=function pm(t){if(0===t[4]&&0===t[5]){if(0===t[1]&&0===t[2])return 1===t[0]&&1===t[3]?"":"scale(".concat(j(t[0])," ").concat(j(t[3]),")");if(t[0]===t[3]&&t[1]===-t[2]){var h=180*Math.acos(t[0])/Math.PI;return"rotate(".concat(j(h),")")}}else if(1===t[0]&&0===t[1]&&0===t[2]&&1===t[3])return"translate(".concat(j(t[4])," ").concat(j(t[5]),")");return"matrix(".concat(j(t[0])," ").concat(j(t[1])," ").concat(j(t[2])," ").concat(j(t[3])," ").concat(j(t[4])," ")+"".concat(j(t[5]),")")},N={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},V=["butt","round","square"],W=["miter","round","bevel"],H=function(){for(var t=new Uint8Array([137,80,78,71,13,10,26,10]),h=new Int32Array(256),y=0;y<256;y++){for(var A=y,E=0;E<8;E++)A=1&A?3988292384^A>>1&2147483647:A>>1&2147483647;h[y]=A}function writePngChunk(t,y,w,A){var T=A,E=y.length;w[T]=E>>24&255,w[T+1]=E>>16&255,w[T+2]=E>>8&255,w[T+3]=255&E,w[T+=4]=255&t.charCodeAt(0),w[T+1]=255&t.charCodeAt(1),w[T+2]=255&t.charCodeAt(2),w[T+3]=255&t.charCodeAt(3),T+=4,w.set(y,T);var j=function crc32(t,y,w){for(var A=-1,T=y;T<w;T++){var E=255&(A^t[T]);A=A>>>8^h[E]}return-1^A}(w,A+4,T+=y.length);w[T]=j>>24&255,w[T+1]=j>>16&255,w[T+2]=j>>8&255,w[T+3]=255&j}function deflateSyncUncompressed(t){var h=t.length,y=65535,w=Math.ceil(h/y),A=new Uint8Array(2+h+5*w+4),T=0;A[T++]=120,A[T++]=156;for(var E=0;h>y;)A[T++]=0,A[T++]=255,A[T++]=255,A[T++]=0,A[T++]=0,A.set(t.subarray(E,E+y),T),T+=y,E+=y,h-=y;A[T++]=1,A[T++]=255&h,A[T++]=h>>8&255,A[T++]=255&~h,A[T++]=(65535&~h)>>8&255,A.set(t.subarray(E),T),T+=t.length-E;var j=function adler32(t,h,y){for(var w=1,A=0,T=h;T<y;++T)A=(A+(w=(w+(255&t[T]))%65521))%65521;return A<<16|w}(t,0,t.length);return A[T++]=j>>24&255,A[T++]=j>>16&255,A[T++]=j>>8&255,A[T++]=255&j,A}function encode(h,y,A,E){var j,B,N,V=h.width,W=h.height,H=h.data;switch(y){case w.ImageKind.GRAYSCALE_1BPP:B=0,j=1,N=V+7>>3;break;case w.ImageKind.RGB_24BPP:B=2,j=8,N=3*V;break;case w.ImageKind.RGBA_32BPP:B=6,j=8,N=4*V;break;default:throw new Error("invalid format")}for(var G=new Uint8Array((1+N)*W),z=0,$=0,J=0;J<W;++J)G[z++]=0,G.set(H.subarray($,$+N),z),$+=N,z+=N;if(y===w.ImageKind.GRAYSCALE_1BPP&&E){z=0;for(var X=0;X<W;X++){z++;for(var K=0;K<N;K++)G[z++]^=255}}var ne=new Uint8Array([V>>24&255,V>>16&255,V>>8&255,255&V,W>>24&255,W>>16&255,W>>8&255,255&W,j,B,0,0,0]),ue=function deflateSync(t){if(!T.isNodeJS)return deflateSyncUncompressed(t);try{var h;h=parseInt(process.versions.node)>=8?t:Buffer.from(t);var y=__webpack_require__(12294).deflateSync(h,{level:9});return y instanceof Uint8Array?y:new Uint8Array(y)}catch(t){(0,w.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+t)}return deflateSyncUncompressed(t)}(G),pe=t.length+36+ne.length+ue.length,me=new Uint8Array(pe),ge=0;return me.set(t,ge),writePngChunk("IHDR",ne,me,ge+=t.length),writePngChunk("IDATA",ue,me,ge+=12+ne.length),ge+=12+ue.length,writePngChunk("IEND",new Uint8Array(0),me,ge),(0,w.createObjectURL)(me,"image/png",A)}return function convertImgDataToPng(t,h,y){return encode(t,void 0===t.kind?w.ImageKind.GRAYSCALE_1BPP:t.kind,h,y)}}(),G=function(){function SVGExtraState(){_classCallCheck(this,SVGExtraState),this.fontSizeScale=1,this.fontWeight=N.fontWeight,this.fontSize=0,this.textMatrix=w.IDENTITY_MATRIX,this.fontMatrix=w.FONT_IDENTITY_MATRIX,this.leading=0,this.textRenderingMode=w.TextRenderingMode.FILL,this.textMatrixScale=1,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=N.fillColor,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}return _createClass(SVGExtraState,[{key:"clone",value:function clone(){return Object.create(this)}},{key:"setCurrentPoint",value:function setCurrentPoint(t,h){this.x=t,this.y=h}}]),SVGExtraState}(),z=0,$=0,J=0;h.SVGGraphics=E=function(){function SVGGraphics(t,h){var y=arguments.length>2&&void 0!==arguments[2]&&arguments[2];for(var T in _classCallCheck(this,SVGGraphics),this.svgFactory=new A.DOMSVGFactory,this.current=new G,this.transformMatrix=w.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=t,this.objs=h,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!y,this._operatorIdMapping=[],w.OPS)this._operatorIdMapping[w.OPS[T]]=T}return _createClass(SVGGraphics,[{key:"save",value:function save(){this.transformStack.push(this.transformMatrix);var t=this.current;this.extraStack.push(t),this.current=t.clone()}},{key:"restore",value:function restore(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null}},{key:"group",value:function group(t){this.save(),this.executeOpTree(t),this.restore()}},{key:"loadDependencies",value:function loadDependencies(t){for(var h=this,y=t.fnArray,A=t.argsArray,T=0,E=y.length;T<E;T++)if(y[T]===w.OPS.dependency){var j,B=_createForOfIteratorHelper(A[T]);try{var N=function _loop(){var t=j.value,y=t.startsWith("g_")?h.commonObjs:h.objs,w=new Promise((function(h){y.get(t,h)}));h.current.dependencies.push(w)};for(B.s();!(j=B.n()).done;)N()}catch(t){B.e(t)}finally{B.f()}}return Promise.all(this.current.dependencies)}},{key:"transform",value:function transform(t,h,y,A,T,E){var j=[t,h,y,A,T,E];this.transformMatrix=w.Util.transform(this.transformMatrix,j),this.tgrp=null}},{key:"getSVG",value:function getSVG(t,h){var y=this;this.viewport=h;var A=this._initialize(h);return this.loadDependencies(t).then((function(){return y.transformMatrix=w.IDENTITY_MATRIX,y.executeOpTree(y.convertOpList(t)),A}))}},{key:"convertOpList",value:function convertOpList(t){for(var h=this._operatorIdMapping,y=t.argsArray,w=t.fnArray,A=[],T=0,E=w.length;T<E;T++){var j=w[T];A.push({fnId:j,fn:h[j],args:y[T]})}return function opListToTree(t){var h,y=[],w=[],A=_createForOfIteratorHelper(t);try{for(A.s();!(h=A.n()).done;){var T=h.value;"save"!==T.fn?"restore"===T.fn?y=w.pop():y.push(T):(y.push({fnId:92,fn:"group",items:[]}),w.push(y),y=y[y.length-1].items)}}catch(t){A.e(t)}finally{A.f()}return y}(A)}},{key:"executeOpTree",value:function executeOpTree(t){var h,y=_createForOfIteratorHelper(t);try{for(y.s();!(h=y.n()).done;){var A=h.value,T=A.fn,E=A.fnId,j=A.args;switch(0|E){case w.OPS.beginText:this.beginText();break;case w.OPS.dependency:break;case w.OPS.setLeading:this.setLeading(j);break;case w.OPS.setLeadingMoveText:this.setLeadingMoveText(j[0],j[1]);break;case w.OPS.setFont:this.setFont(j);break;case w.OPS.showText:case w.OPS.showSpacedText:this.showText(j[0]);break;case w.OPS.endText:this.endText();break;case w.OPS.moveText:this.moveText(j[0],j[1]);break;case w.OPS.setCharSpacing:this.setCharSpacing(j[0]);break;case w.OPS.setWordSpacing:this.setWordSpacing(j[0]);break;case w.OPS.setHScale:this.setHScale(j[0]);break;case w.OPS.setTextMatrix:this.setTextMatrix(j[0],j[1],j[2],j[3],j[4],j[5]);break;case w.OPS.setTextRise:this.setTextRise(j[0]);break;case w.OPS.setTextRenderingMode:this.setTextRenderingMode(j[0]);break;case w.OPS.setLineWidth:this.setLineWidth(j[0]);break;case w.OPS.setLineJoin:this.setLineJoin(j[0]);break;case w.OPS.setLineCap:this.setLineCap(j[0]);break;case w.OPS.setMiterLimit:this.setMiterLimit(j[0]);break;case w.OPS.setFillRGBColor:this.setFillRGBColor(j[0],j[1],j[2]);break;case w.OPS.setStrokeRGBColor:this.setStrokeRGBColor(j[0],j[1],j[2]);break;case w.OPS.setStrokeColorN:this.setStrokeColorN(j);break;case w.OPS.setFillColorN:this.setFillColorN(j);break;case w.OPS.shadingFill:this.shadingFill(j[0]);break;case w.OPS.setDash:this.setDash(j[0],j[1]);break;case w.OPS.setRenderingIntent:this.setRenderingIntent(j[0]);break;case w.OPS.setFlatness:this.setFlatness(j[0]);break;case w.OPS.setGState:this.setGState(j[0]);break;case w.OPS.fill:this.fill();break;case w.OPS.eoFill:this.eoFill();break;case w.OPS.stroke:this.stroke();break;case w.OPS.fillStroke:this.fillStroke();break;case w.OPS.eoFillStroke:this.eoFillStroke();break;case w.OPS.clip:this.clip("nonzero");break;case w.OPS.eoClip:this.clip("evenodd");break;case w.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case w.OPS.paintImageXObject:this.paintImageXObject(j[0]);break;case w.OPS.paintInlineImageXObject:this.paintInlineImageXObject(j[0]);break;case w.OPS.paintImageMaskXObject:this.paintImageMaskXObject(j[0]);break;case w.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(j[0],j[1]);break;case w.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case w.OPS.closePath:this.closePath();break;case w.OPS.closeStroke:this.closeStroke();break;case w.OPS.closeFillStroke:this.closeFillStroke();break;case w.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case w.OPS.nextLine:this.nextLine();break;case w.OPS.transform:this.transform(j[0],j[1],j[2],j[3],j[4],j[5]);break;case w.OPS.constructPath:this.constructPath(j[0],j[1]);break;case w.OPS.endPath:this.endPath();break;case 92:this.group(A.items);break;default:(0,w.warn)("Unimplemented operator ".concat(T))}}}catch(t){y.e(t)}finally{y.f()}}},{key:"setWordSpacing",value:function setWordSpacing(t){this.current.wordSpacing=t}},{key:"setCharSpacing",value:function setCharSpacing(t){this.current.charSpacing=t}},{key:"nextLine",value:function nextLine(){this.moveText(0,this.current.leading)}},{key:"setTextMatrix",value:function setTextMatrix(t,h,y,w,A,T){var E=this.current;E.textMatrix=E.lineMatrix=[t,h,y,w,A,T],E.textMatrixScale=Math.hypot(t,h),E.x=E.lineX=0,E.y=E.lineY=0,E.xcoords=[],E.ycoords=[],E.tspan=this.svgFactory.createElement("svg:tspan"),E.tspan.setAttributeNS(null,"font-family",E.fontFamily),E.tspan.setAttributeNS(null,"font-size","".concat(j(E.fontSize),"px")),E.tspan.setAttributeNS(null,"y",j(-E.y)),E.txtElement=this.svgFactory.createElement("svg:text"),E.txtElement.appendChild(E.tspan)}},{key:"beginText",value:function beginText(){var t=this.current;t.x=t.lineX=0,t.y=t.lineY=0,t.textMatrix=w.IDENTITY_MATRIX,t.lineMatrix=w.IDENTITY_MATRIX,t.textMatrixScale=1,t.tspan=this.svgFactory.createElement("svg:tspan"),t.txtElement=this.svgFactory.createElement("svg:text"),t.txtgrp=this.svgFactory.createElement("svg:g"),t.xcoords=[],t.ycoords=[]}},{key:"moveText",value:function moveText(t,h){var y=this.current;y.x=y.lineX+=t,y.y=y.lineY+=h,y.xcoords=[],y.ycoords=[],y.tspan=this.svgFactory.createElement("svg:tspan"),y.tspan.setAttributeNS(null,"font-family",y.fontFamily),y.tspan.setAttributeNS(null,"font-size","".concat(j(y.fontSize),"px")),y.tspan.setAttributeNS(null,"y",j(-y.y))}},{key:"showText",value:function showText(t){var h=this.current,y=h.font,A=h.fontSize;if(0!==A){var T,E=h.fontSizeScale,V=h.charSpacing,W=h.wordSpacing,H=h.fontDirection,G=h.textHScale*H,z=y.vertical,$=z?1:-1,J=y.defaultVMetrics,X=A*h.fontMatrix[0],K=0,ne=_createForOfIteratorHelper(t);try{for(ne.s();!(T=ne.n()).done;){var ue=T.value;if(null!==ue)if((0,w.isNum)(ue))K+=$*ue*A/1e3;else{var pe=(ue.isSpace?W:0)+V,me=ue.fontChar,ge=void 0,we=void 0,Ce=ue.width;if(z){var ke=void 0,Ie=ue.vmetric||J;ke=-(ke=ue.vmetric?Ie[1]:.5*Ce)*X;var Te=Ie[2]*X;Ce=Ie?-Ie[0]:Ce,ge=ke/E,we=(K+Te)/E}else ge=K/E,we=0;(ue.isInFont||y.missingFile)&&(h.xcoords.push(h.x+ge),z&&h.ycoords.push(-h.y+we),h.tspan.textContent+=me);K+=z?Ce*X-pe*H:Ce*X+pe*H}else K+=H*W}}catch(t){ne.e(t)}finally{ne.f()}h.tspan.setAttributeNS(null,"x",h.xcoords.map(j).join(" ")),z?h.tspan.setAttributeNS(null,"y",h.ycoords.map(j).join(" ")):h.tspan.setAttributeNS(null,"y",j(-h.y)),z?h.y-=K:h.x+=K*G,h.tspan.setAttributeNS(null,"font-family",h.fontFamily),h.tspan.setAttributeNS(null,"font-size","".concat(j(h.fontSize),"px")),h.fontStyle!==N.fontStyle&&h.tspan.setAttributeNS(null,"font-style",h.fontStyle),h.fontWeight!==N.fontWeight&&h.tspan.setAttributeNS(null,"font-weight",h.fontWeight);var Ee=h.textRenderingMode&w.TextRenderingMode.FILL_STROKE_MASK;if(Ee===w.TextRenderingMode.FILL||Ee===w.TextRenderingMode.FILL_STROKE?(h.fillColor!==N.fillColor&&h.tspan.setAttributeNS(null,"fill",h.fillColor),h.fillAlpha<1&&h.tspan.setAttributeNS(null,"fill-opacity",h.fillAlpha)):h.textRenderingMode===w.TextRenderingMode.ADD_TO_PATH?h.tspan.setAttributeNS(null,"fill","transparent"):h.tspan.setAttributeNS(null,"fill","none"),Ee===w.TextRenderingMode.STROKE||Ee===w.TextRenderingMode.FILL_STROKE){var Me=1/(h.textMatrixScale||1);this._setStrokeAttributes(h.tspan,Me)}var Be=h.textMatrix;0!==h.textRise&&((Be=Be.slice())[5]+=h.textRise),h.txtElement.setAttributeNS(null,"transform","".concat(B(Be)," scale(").concat(j(G),", -1)")),h.txtElement.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),h.txtElement.appendChild(h.tspan),h.txtgrp.appendChild(h.txtElement),this._ensureTransformGroup().appendChild(h.txtElement)}}},{key:"setLeadingMoveText",value:function setLeadingMoveText(t,h){this.setLeading(-h),this.moveText(t,h)}},{key:"addFontStyle",value:function addFontStyle(t){if(!t.data)throw new Error('addFontStyle: No font data available, ensure that the "fontExtraProperties" API parameter is set.');this.cssStyle||(this.cssStyle=this.svgFactory.createElement("svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.appendChild(this.cssStyle));var h=(0,w.createObjectURL)(t.data,t.mimetype,this.forceDataSchema);this.cssStyle.textContent+='@font-face { font-family: "'.concat(t.loadedName,'";')+" src: url(".concat(h,"); }\n")}},{key:"setFont",value:function setFont(t){var h=this.current,y=this.commonObjs.get(t[0]),A=t[1];h.font=y,!this.embedFonts||y.missingFile||this.embeddedFonts[y.loadedName]||(this.addFontStyle(y),this.embeddedFonts[y.loadedName]=y),h.fontMatrix=y.fontMatrix||w.FONT_IDENTITY_MATRIX;var T="normal";y.black?T="900":y.bold&&(T="bold");var E=y.italic?"italic":"normal";A<0?(A=-A,h.fontDirection=-1):h.fontDirection=1,h.fontSize=A,h.fontFamily=y.loadedName,h.fontWeight=T,h.fontStyle=E,h.tspan=this.svgFactory.createElement("svg:tspan"),h.tspan.setAttributeNS(null,"y",j(-h.y)),h.xcoords=[],h.ycoords=[]}},{key:"endText",value:function endText(){var t,h=this.current;h.textRenderingMode&w.TextRenderingMode.ADD_TO_PATH_FLAG&&null!==(t=h.txtElement)&&void 0!==t&&t.hasChildNodes()&&(h.element=h.txtElement,this.clip("nonzero"),this.endPath())}},{key:"setLineWidth",value:function setLineWidth(t){t>0&&(this.current.lineWidth=t)}},{key:"setLineCap",value:function setLineCap(t){this.current.lineCap=V[t]}},{key:"setLineJoin",value:function setLineJoin(t){this.current.lineJoin=W[t]}},{key:"setMiterLimit",value:function setMiterLimit(t){this.current.miterLimit=t}},{key:"setStrokeAlpha",value:function setStrokeAlpha(t){this.current.strokeAlpha=t}},{key:"setStrokeRGBColor",value:function setStrokeRGBColor(t,h,y){this.current.strokeColor=w.Util.makeHexColor(t,h,y)}},{key:"setFillAlpha",value:function setFillAlpha(t){this.current.fillAlpha=t}},{key:"setFillRGBColor",value:function setFillRGBColor(t,h,y){this.current.fillColor=w.Util.makeHexColor(t,h,y),this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.xcoords=[],this.current.ycoords=[]}},{key:"setStrokeColorN",value:function setStrokeColorN(t){this.current.strokeColor=this._makeColorN_Pattern(t)}},{key:"setFillColorN",value:function setFillColorN(t){this.current.fillColor=this._makeColorN_Pattern(t)}},{key:"shadingFill",value:function shadingFill(t){var h=this.viewport.width,y=this.viewport.height,A=w.Util.inverseTransform(this.transformMatrix),T=w.Util.applyTransform([0,0],A),E=w.Util.applyTransform([0,y],A),j=w.Util.applyTransform([h,0],A),B=w.Util.applyTransform([h,y],A),N=Math.min(T[0],E[0],j[0],B[0]),V=Math.min(T[1],E[1],j[1],B[1]),W=Math.max(T[0],E[0],j[0],B[0]),H=Math.max(T[1],E[1],j[1],B[1]),G=this.svgFactory.createElement("svg:rect");G.setAttributeNS(null,"x",N),G.setAttributeNS(null,"y",V),G.setAttributeNS(null,"width",W-N),G.setAttributeNS(null,"height",H-V),G.setAttributeNS(null,"fill",this._makeShadingPattern(t)),this.current.fillAlpha<1&&G.setAttributeNS(null,"fill-opacity",this.current.fillAlpha),this._ensureTransformGroup().appendChild(G)}},{key:"_makeColorN_Pattern",value:function _makeColorN_Pattern(t){return"TilingPattern"===t[0]?this._makeTilingPattern(t):this._makeShadingPattern(t)}},{key:"_makeTilingPattern",value:function _makeTilingPattern(t){var h=t[1],y=t[2],A=t[3]||w.IDENTITY_MATRIX,T=_slicedToArray(t[4],4),E=T[0],j=T[1],B=T[2],N=T[3],V=t[5],W=t[6],H=t[7],G="shading".concat(J++),z=_slicedToArray(w.Util.normalizeRect([].concat(_toConsumableArray(w.Util.applyTransform([E,j],A)),_toConsumableArray(w.Util.applyTransform([B,N],A)))),4),$=z[0],X=z[1],K=z[2],ne=z[3],ue=_slicedToArray(w.Util.singularValueDecompose2dScale(A),2),pe=V*ue[0],me=W*ue[1],ge=this.svgFactory.createElement("svg:pattern");ge.setAttributeNS(null,"id",G),ge.setAttributeNS(null,"patternUnits","userSpaceOnUse"),ge.setAttributeNS(null,"width",pe),ge.setAttributeNS(null,"height",me),ge.setAttributeNS(null,"x","".concat($)),ge.setAttributeNS(null,"y","".concat(X));var we=this.svg,Ce=this.transformMatrix,ke=this.current.fillColor,Ie=this.current.strokeColor,Te=this.svgFactory.create(K-$,ne-X);if(this.svg=Te,this.transformMatrix=A,2===H){var Ee=w.Util.makeHexColor.apply(w.Util,_toConsumableArray(h));this.current.fillColor=Ee,this.current.strokeColor=Ee}return this.executeOpTree(this.convertOpList(y)),this.svg=we,this.transformMatrix=Ce,this.current.fillColor=ke,this.current.strokeColor=Ie,ge.appendChild(Te.childNodes[0]),this.defs.appendChild(ge),"url(#".concat(G,")")}},{key:"_makeShadingPattern",value:function _makeShadingPattern(t){switch("string"==typeof t&&(t=this.objs.get(t)),t[0]){case"RadialAxial":var h,y="shading".concat(J++),A=t[3];switch(t[1]){case"axial":var T=t[4],E=t[5];(h=this.svgFactory.createElement("svg:linearGradient")).setAttributeNS(null,"id",y),h.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),h.setAttributeNS(null,"x1",T[0]),h.setAttributeNS(null,"y1",T[1]),h.setAttributeNS(null,"x2",E[0]),h.setAttributeNS(null,"y2",E[1]);break;case"radial":var j=t[4],B=t[5],N=t[6],V=t[7];(h=this.svgFactory.createElement("svg:radialGradient")).setAttributeNS(null,"id",y),h.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),h.setAttributeNS(null,"cx",B[0]),h.setAttributeNS(null,"cy",B[1]),h.setAttributeNS(null,"r",V),h.setAttributeNS(null,"fx",j[0]),h.setAttributeNS(null,"fy",j[1]),h.setAttributeNS(null,"fr",N);break;default:throw new Error("Unknown RadialAxial type: ".concat(t[1]))}var W,H=_createForOfIteratorHelper(A);try{for(H.s();!(W=H.n()).done;){var G=W.value,z=this.svgFactory.createElement("svg:stop");z.setAttributeNS(null,"offset",G[0]),z.setAttributeNS(null,"stop-color",G[1]),h.appendChild(z)}}catch(t){H.e(t)}finally{H.f()}return this.defs.appendChild(h),"url(#".concat(y,")");case"Mesh":return(0,w.warn)("Unimplemented pattern Mesh"),null;case"Dummy":return"hotpink";default:throw new Error("Unknown IR type: ".concat(t[0]))}}},{key:"setDash",value:function setDash(t,h){this.current.dashArray=t,this.current.dashPhase=h}},{key:"constructPath",value:function constructPath(t,h){var y,A=this.current,T=A.x,E=A.y,B=[],N=0,V=_createForOfIteratorHelper(t);try{for(V.s();!(y=V.n()).done;){switch(0|y.value){case w.OPS.rectangle:T=h[N++],E=h[N++];var W=h[N++],H=h[N++],G=T+W,z=E+H;B.push("M",j(T),j(E),"L",j(G),j(E),"L",j(G),j(z),"L",j(T),j(z),"Z");break;case w.OPS.moveTo:T=h[N++],E=h[N++],B.push("M",j(T),j(E));break;case w.OPS.lineTo:T=h[N++],E=h[N++],B.push("L",j(T),j(E));break;case w.OPS.curveTo:T=h[N+4],E=h[N+5],B.push("C",j(h[N]),j(h[N+1]),j(h[N+2]),j(h[N+3]),j(T),j(E)),N+=6;break;case w.OPS.curveTo2:B.push("C",j(T),j(E),j(h[N]),j(h[N+1]),j(h[N+2]),j(h[N+3])),T=h[N+2],E=h[N+3],N+=4;break;case w.OPS.curveTo3:T=h[N+2],E=h[N+3],B.push("C",j(h[N]),j(h[N+1]),j(T),j(E),j(T),j(E)),N+=4;break;case w.OPS.closePath:B.push("Z")}}}catch(t){V.e(t)}finally{V.f()}B=B.join(" "),A.path&&t.length>0&&t[0]!==w.OPS.rectangle&&t[0]!==w.OPS.moveTo?B=A.path.getAttributeNS(null,"d")+B:(A.path=this.svgFactory.createElement("svg:path"),this._ensureTransformGroup().appendChild(A.path)),A.path.setAttributeNS(null,"d",B),A.path.setAttributeNS(null,"fill","none"),A.element=A.path,A.setCurrentPoint(T,E)}},{key:"endPath",value:function endPath(){var t=this.current;if(t.path=null,this.pendingClip)if(t.element){var h="clippath".concat(z++),y=this.svgFactory.createElement("svg:clipPath");y.setAttributeNS(null,"id",h),y.setAttributeNS(null,"transform",B(this.transformMatrix));var w=t.element.cloneNode(!0);if("evenodd"===this.pendingClip?w.setAttributeNS(null,"clip-rule","evenodd"):w.setAttributeNS(null,"clip-rule","nonzero"),this.pendingClip=null,y.appendChild(w),this.defs.appendChild(y),t.activeClipUrl){t.clipGroup=null;var A,T=_createForOfIteratorHelper(this.extraStack);try{for(T.s();!(A=T.n()).done;){A.value.clipGroup=null}}catch(t){T.e(t)}finally{T.f()}y.setAttributeNS(null,"clip-path",t.activeClipUrl)}t.activeClipUrl="url(#".concat(h,")"),this.tgrp=null}else this.pendingClip=null}},{key:"clip",value:function clip(t){this.pendingClip=t}},{key:"closePath",value:function closePath(){var t=this.current;if(t.path){var h="".concat(t.path.getAttributeNS(null,"d"),"Z");t.path.setAttributeNS(null,"d",h)}}},{key:"setLeading",value:function setLeading(t){this.current.leading=-t}},{key:"setTextRise",value:function setTextRise(t){this.current.textRise=t}},{key:"setTextRenderingMode",value:function setTextRenderingMode(t){this.current.textRenderingMode=t}},{key:"setHScale",value:function setHScale(t){this.current.textHScale=t/100}},{key:"setRenderingIntent",value:function setRenderingIntent(t){}},{key:"setFlatness",value:function setFlatness(t){}},{key:"setGState",value:function setGState(t){var h,y=_createForOfIteratorHelper(t);try{for(y.s();!(h=y.n()).done;){var A=_slicedToArray(h.value,2),T=A[0],E=A[1];switch(T){case"LW":this.setLineWidth(E);break;case"LC":this.setLineCap(E);break;case"LJ":this.setLineJoin(E);break;case"ML":this.setMiterLimit(E);break;case"D":this.setDash(E[0],E[1]);break;case"RI":this.setRenderingIntent(E);break;case"FL":this.setFlatness(E);break;case"Font":this.setFont(E);break;case"CA":this.setStrokeAlpha(E);break;case"ca":this.setFillAlpha(E);break;default:(0,w.warn)("Unimplemented graphic state operator ".concat(T))}}}catch(t){y.e(t)}finally{y.f()}}},{key:"fill",value:function fill(){var t=this.current;t.element&&(t.element.setAttributeNS(null,"fill",t.fillColor),t.element.setAttributeNS(null,"fill-opacity",t.fillAlpha),this.endPath())}},{key:"stroke",value:function stroke(){var t=this.current;t.element&&(this._setStrokeAttributes(t.element),t.element.setAttributeNS(null,"fill","none"),this.endPath())}},{key:"_setStrokeAttributes",value:function _setStrokeAttributes(t){var h=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,y=this.current,w=y.dashArray;1!==h&&w.length>0&&(w=w.map((function(t){return h*t}))),t.setAttributeNS(null,"stroke",y.strokeColor),t.setAttributeNS(null,"stroke-opacity",y.strokeAlpha),t.setAttributeNS(null,"stroke-miterlimit",j(y.miterLimit)),t.setAttributeNS(null,"stroke-linecap",y.lineCap),t.setAttributeNS(null,"stroke-linejoin",y.lineJoin),t.setAttributeNS(null,"stroke-width",j(h*y.lineWidth)+"px"),t.setAttributeNS(null,"stroke-dasharray",w.map(j).join(" ")),t.setAttributeNS(null,"stroke-dashoffset",j(h*y.dashPhase)+"px")}},{key:"eoFill",value:function eoFill(){this.current.element&&this.current.element.setAttributeNS(null,"fill-rule","evenodd"),this.fill()}},{key:"fillStroke",value:function fillStroke(){this.stroke(),this.fill()}},{key:"eoFillStroke",value:function eoFillStroke(){this.current.element&&this.current.element.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()}},{key:"closeStroke",value:function closeStroke(){this.closePath(),this.stroke()}},{key:"closeFillStroke",value:function closeFillStroke(){this.closePath(),this.fillStroke()}},{key:"closeEOFillStroke",value:function closeEOFillStroke(){this.closePath(),this.eoFillStroke()}},{key:"paintSolidColorImageMask",value:function paintSolidColorImageMask(){var t=this.svgFactory.createElement("svg:rect");t.setAttributeNS(null,"x","0"),t.setAttributeNS(null,"y","0"),t.setAttributeNS(null,"width","1px"),t.setAttributeNS(null,"height","1px"),t.setAttributeNS(null,"fill",this.current.fillColor),this._ensureTransformGroup().appendChild(t)}},{key:"paintImageXObject",value:function paintImageXObject(t){var h=t.startsWith("g_")?this.commonObjs.get(t):this.objs.get(t);h?this.paintInlineImageXObject(h):(0,w.warn)("Dependent image with object ID ".concat(t," is not ready yet"))}},{key:"paintInlineImageXObject",value:function paintInlineImageXObject(t,h){var y=t.width,w=t.height,A=H(t,this.forceDataSchema,!!h),T=this.svgFactory.createElement("svg:rect");T.setAttributeNS(null,"x","0"),T.setAttributeNS(null,"y","0"),T.setAttributeNS(null,"width",j(y)),T.setAttributeNS(null,"height",j(w)),this.current.element=T,this.clip("nonzero");var E=this.svgFactory.createElement("svg:image");E.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",A),E.setAttributeNS(null,"x","0"),E.setAttributeNS(null,"y",j(-w)),E.setAttributeNS(null,"width",j(y)+"px"),E.setAttributeNS(null,"height",j(w)+"px"),E.setAttributeNS(null,"transform","scale(".concat(j(1/y)," ").concat(j(-1/w),")")),h?h.appendChild(E):this._ensureTransformGroup().appendChild(E)}},{key:"paintImageMaskXObject",value:function paintImageMaskXObject(t){var h=this.current,y=t.width,w=t.height,A=h.fillColor;h.maskId="mask".concat($++);var T=this.svgFactory.createElement("svg:mask");T.setAttributeNS(null,"id",h.maskId);var E=this.svgFactory.createElement("svg:rect");E.setAttributeNS(null,"x","0"),E.setAttributeNS(null,"y","0"),E.setAttributeNS(null,"width",j(y)),E.setAttributeNS(null,"height",j(w)),E.setAttributeNS(null,"fill",A),E.setAttributeNS(null,"mask","url(#".concat(h.maskId,")")),this.defs.appendChild(T),this._ensureTransformGroup().appendChild(E),this.paintInlineImageXObject(t,T)}},{key:"paintFormXObjectBegin",value:function paintFormXObjectBegin(t,h){if(Array.isArray(t)&&6===t.length&&this.transform(t[0],t[1],t[2],t[3],t[4],t[5]),h){var y=h[2]-h[0],w=h[3]-h[1],A=this.svgFactory.createElement("svg:rect");A.setAttributeNS(null,"x",h[0]),A.setAttributeNS(null,"y",h[1]),A.setAttributeNS(null,"width",j(y)),A.setAttributeNS(null,"height",j(w)),this.current.element=A,this.clip("nonzero"),this.endPath()}}},{key:"paintFormXObjectEnd",value:function paintFormXObjectEnd(){}},{key:"_initialize",value:function _initialize(t){var h=this.svgFactory.create(t.width,t.height),y=this.svgFactory.createElement("svg:defs");h.appendChild(y),this.defs=y;var w=this.svgFactory.createElement("svg:g");return w.setAttributeNS(null,"transform",B(t.transform)),h.appendChild(w),this.svg=w,h}},{key:"_ensureClipGroup",value:function _ensureClipGroup(){if(!this.current.clipGroup){var t=this.svgFactory.createElement("svg:g");t.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.appendChild(t),this.current.clipGroup=t}return this.current.clipGroup}},{key:"_ensureTransformGroup",value:function _ensureTransformGroup(){return this.tgrp||(this.tgrp=this.svgFactory.createElement("svg:g"),this.tgrp.setAttributeNS(null,"transform",B(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().appendChild(this.tgrp):this.svg.appendChild(this.tgrp)),this.tgrp}}]),SVGGraphics}()},(t,h,y)=>{"use strict";Object.defineProperty(h,"__esModule",{value:!0}),h.PDFNodeStream=void 0;var w=function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}(y(2)),A=y(4),T=y(154);function _inherits(t,h){if("function"!=typeof h&&null!==h)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(h&&h.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),h&&_setPrototypeOf(t,h)}function _setPrototypeOf(t,h){return _setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(t,h){return t.__proto__=h,t},_setPrototypeOf(t,h)}function _createSuper(t){var h=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var y,w=_getPrototypeOf(t);if(h){var A=_getPrototypeOf(this).constructor;y=Reflect.construct(w,arguments,A)}else y=w.apply(this,arguments);return function _possibleConstructorReturn(t,h){if(h&&("object"===_typeof(h)||"function"==typeof h))return h;if(void 0!==h)throw new TypeError("Derived constructors may only return object or undefined");return function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,y)}}function _getPrototypeOf(t){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)},_getPrototypeOf(t)}function asyncGeneratorStep(t,h,y,w,A,T,E){try{var j=t[T](E),B=j.value}catch(t){return void y(t)}j.done?h(B):Promise.resolve(B).then(w,A)}function _asyncToGenerator(t){return function(){var h=this,y=arguments;return new Promise((function(w,A){var T=t.apply(h,y);function _next(t){asyncGeneratorStep(T,w,A,_next,_throw,"next",t)}function _throw(t){asyncGeneratorStep(T,w,A,_next,_throw,"throw",t)}_next(void 0)}))}}function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _createForOfIteratorHelper(t,h){var y="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!y){if(Array.isArray(t)||(y=function _unsupportedIterableToArray(t,h){if(!t)return;if("string"==typeof t)return _arrayLikeToArray(t,h);var y=Object.prototype.toString.call(t).slice(8,-1);"Object"===y&&t.constructor&&(y=t.constructor.name);if("Map"===y||"Set"===y)return Array.from(t);if("Arguments"===y||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(y))return _arrayLikeToArray(t,h)}(t))||h&&t&&"number"==typeof t.length){y&&(t=y);var w=0,A=function F(){};return{s:A,n:function n(){return w>=t.length?{done:!0}:{done:!1,value:t[w++]}},e:function e(t){throw t},f:A}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var T,E=!0,j=!1;return{s:function s(){y=y.call(t)},n:function n(){var t=y.next();return E=t.done,t},e:function e(t){j=!0,T=t},f:function f(){try{E||null==y.return||y.return()}finally{if(j)throw T}}}}function _arrayLikeToArray(t,h){(null==h||h>t.length)&&(h=t.length);for(var y=0,w=new Array(h);y<h;y++)w[y]=t[y];return w}function _classCallCheck(t,h){if(!(t instanceof h))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,h){for(var y=0;y<h.length;y++){var w=h[y];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(t,(A=w.key,T=void 0,T=function _toPrimitive(t,h){if("object"!==_typeof(t)||null===t)return t;var y=t[Symbol.toPrimitive];if(void 0!==y){var w=y.call(t,h||"default");if("object"!==_typeof(w))return w;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===h?String:Number)(t)}(A,"string"),"symbol"===_typeof(T)?T:String(T)),w)}var A,T}function _createClass(t,h,y){return h&&_defineProperties(t.prototype,h),y&&_defineProperties(t,y),Object.defineProperty(t,"prototype",{writable:!1}),t}var E=__webpack_require__(48340),j=__webpack_require__(73782),B=__webpack_require__(53994),N=__webpack_require__(94604),V=/^file:\/\/\/[a-zA-Z]:\//;var W=function(){function PDFNodeStream(t){_classCallCheck(this,PDFNodeStream),this.source=t,this.url=function parseUrl(t){var h=N.parse(t);return"file:"===h.protocol||h.host?h:/^[a-z]:[/\\]/i.test(t)?N.parse("file:///".concat(t)):(h.host||(h.protocol="file:"),h)}(t.url),this.isHttp="http:"===this.url.protocol||"https:"===this.url.protocol,this.isFsUrl="file:"===this.url.protocol,this.httpHeaders=this.isHttp&&t.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}return _createClass(PDFNodeStream,[{key:"_progressiveDataLength",get:function get(){var t,h;return null!==(t=null===(h=this._fullRequestReader)||void 0===h?void 0:h._loaded)&&void 0!==t?t:0}},{key:"getFullReader",value:function getFullReader(){return(0,A.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new J(this):new z(this),this._fullRequestReader}},{key:"getRangeReader",value:function getRangeReader(t,h){if(h<=this._progressiveDataLength)return null;var y=this.isFsUrl?new X(this,t,h):new $(this,t,h);return this._rangeRequestReaders.push(y),y}},{key:"cancelAllRequests",value:function cancelAllRequests(t){this._fullRequestReader&&this._fullRequestReader.cancel(t);var h,y=_createForOfIteratorHelper(this._rangeRequestReaders.slice(0));try{for(y.s();!(h=y.n()).done;){h.value.cancel(t)}}catch(t){y.e(t)}finally{y.f()}}}]),PDFNodeStream}();h.PDFNodeStream=W;var H=function(){function BaseFullReader(t){_classCallCheck(this,BaseFullReader),this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null;var h=t.source;this._contentLength=h.length,this._loaded=0,this._filename=null,this._disableRange=h.disableRange||!1,this._rangeChunkSize=h.rangeChunkSize,this._rangeChunkSize||this._disableRange||(this._disableRange=!0),this._isStreamingSupported=!h.disableStream,this._isRangeSupported=!h.disableRange,this._readableStream=null,this._readCapability=(0,A.createPromiseCapability)(),this._headersCapability=(0,A.createPromiseCapability)()}var t;return _createClass(BaseFullReader,[{key:"headersReady",get:function get(){return this._headersCapability.promise}},{key:"filename",get:function get(){return this._filename}},{key:"contentLength",get:function get(){return this._contentLength}},{key:"isRangeSupported",get:function get(){return this._isRangeSupported}},{key:"isStreamingSupported",get:function get(){return this._isStreamingSupported}},{key:"read",value:(t=_asyncToGenerator(w.default.mark((function _callee(){var t,h;return w.default.wrap((function _callee$(y){for(;;)switch(y.prev=y.next){case 0:return y.next=2,this._readCapability.promise;case 2:if(!this._done){y.next=4;break}return y.abrupt("return",{value:void 0,done:!0});case 4:if(!this._storedError){y.next=6;break}throw this._storedError;case 6:if(null!==(t=this._readableStream.read())){y.next=10;break}return this._readCapability=(0,A.createPromiseCapability)(),y.abrupt("return",this.read());case 10:return this._loaded+=t.length,this.onProgress&&this.onProgress({loaded:this._loaded,total:this._contentLength}),h=new Uint8Array(t).buffer,y.abrupt("return",{value:h,done:!1});case 14:case"end":return y.stop()}}),_callee,this)}))),function read(){return t.apply(this,arguments)})},{key:"cancel",value:function cancel(t){this._readableStream?this._readableStream.destroy(t):this._error(t)}},{key:"_error",value:function _error(t){this._storedError=t,this._readCapability.resolve()}},{key:"_setReadableStream",value:function _setReadableStream(t){var h=this;this._readableStream=t,t.on("readable",(function(){h._readCapability.resolve()})),t.on("end",(function(){t.destroy(),h._done=!0,h._readCapability.resolve()})),t.on("error",(function(t){h._error(t)})),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new A.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}]),BaseFullReader}(),G=function(){function BaseRangeReader(t){_classCallCheck(this,BaseRangeReader),this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=(0,A.createPromiseCapability)();var h=t.source;this._isStreamingSupported=!h.disableStream}var t;return _createClass(BaseRangeReader,[{key:"isStreamingSupported",get:function get(){return this._isStreamingSupported}},{key:"read",value:(t=_asyncToGenerator(w.default.mark((function _callee2(){var t,h;return w.default.wrap((function _callee2$(y){for(;;)switch(y.prev=y.next){case 0:return y.next=2,this._readCapability.promise;case 2:if(!this._done){y.next=4;break}return y.abrupt("return",{value:void 0,done:!0});case 4:if(!this._storedError){y.next=6;break}throw this._storedError;case 6:if(null!==(t=this._readableStream.read())){y.next=10;break}return this._readCapability=(0,A.createPromiseCapability)(),y.abrupt("return",this.read());case 10:return this._loaded+=t.length,this.onProgress&&this.onProgress({loaded:this._loaded}),h=new Uint8Array(t).buffer,y.abrupt("return",{value:h,done:!1});case 14:case"end":return y.stop()}}),_callee2,this)}))),function read(){return t.apply(this,arguments)})},{key:"cancel",value:function cancel(t){this._readableStream?this._readableStream.destroy(t):this._error(t)}},{key:"_error",value:function _error(t){this._storedError=t,this._readCapability.resolve()}},{key:"_setReadableStream",value:function _setReadableStream(t){var h=this;this._readableStream=t,t.on("readable",(function(){h._readCapability.resolve()})),t.on("end",(function(){t.destroy(),h._done=!0,h._readCapability.resolve()})),t.on("error",(function(t){h._error(t)})),this._storedError&&this._readableStream.destroy(this._storedError)}}]),BaseRangeReader}();function createRequestOptions(t,h){return{protocol:t.protocol,auth:t.auth,host:t.hostname,port:t.port,path:t.path,method:"GET",headers:h}}var z=function(t){_inherits(PDFNodeStreamFullReader,t);var h=_createSuper(PDFNodeStreamFullReader);function PDFNodeStreamFullReader(t){var y;_classCallCheck(this,PDFNodeStreamFullReader);var w=function handleResponse(h){if(404===h.statusCode){var w=new A.MissingPDFException('Missing PDF "'.concat(y._url,'".'));return y._storedError=w,void y._headersCapability.reject(w)}y._headersCapability.resolve(),y._setReadableStream(h);var E=function getResponseHeader(t){return y._readableStream.headers[t.toLowerCase()]},j=(0,T.validateRangeRequestCapabilities)({getResponseHeader:E,isHttp:t.isHttp,rangeChunkSize:y._rangeChunkSize,disableRange:y._disableRange}),B=j.allowRangeRequests,N=j.suggestedLength;y._isRangeSupported=B,y._contentLength=N||y._contentLength,y._filename=(0,T.extractFilenameFromHeader)(E)};return(y=h.call(this,t))._request=null,"http:"===y._url.protocol?y._request=j.request(createRequestOptions(y._url,t.httpHeaders),w):y._request=B.request(createRequestOptions(y._url,t.httpHeaders),w),y._request.on("error",(function(t){y._storedError=t,y._headersCapability.reject(t)})),y._request.end(),y}return PDFNodeStreamFullReader}(H),$=function(t){_inherits(PDFNodeStreamRangeReader,t);var h=_createSuper(PDFNodeStreamRangeReader);function PDFNodeStreamRangeReader(t,y,w){var T;for(var E in _classCallCheck(this,PDFNodeStreamRangeReader),(T=h.call(this,t))._httpHeaders={},t.httpHeaders){var N=t.httpHeaders[E];void 0!==N&&(T._httpHeaders[E]=N)}T._httpHeaders.Range="bytes=".concat(y,"-").concat(w-1);var V=function handleResponse(t){if(404!==t.statusCode)T._setReadableStream(t);else{var h=new A.MissingPDFException('Missing PDF "'.concat(T._url,'".'));T._storedError=h}};return T._request=null,"http:"===T._url.protocol?T._request=j.request(createRequestOptions(T._url,T._httpHeaders),V):T._request=B.request(createRequestOptions(T._url,T._httpHeaders),V),T._request.on("error",(function(t){T._storedError=t})),T._request.end(),T}return PDFNodeStreamRangeReader}(G),J=function(t){_inherits(PDFNodeStreamFsFullReader,t);var h=_createSuper(PDFNodeStreamFsFullReader);function PDFNodeStreamFsFullReader(t){var y;_classCallCheck(this,PDFNodeStreamFsFullReader),y=h.call(this,t);var w=decodeURIComponent(y._url.path);return V.test(y._url.href)&&(w=w.replace(/^\//,"")),E.lstat(w,(function(t,h){if(t)return"ENOENT"===t.code&&(t=new A.MissingPDFException('Missing PDF "'.concat(w,'".'))),y._storedError=t,void y._headersCapability.reject(t);y._contentLength=h.size,y._setReadableStream(E.createReadStream(w)),y._headersCapability.resolve()})),y}return PDFNodeStreamFsFullReader}(H),X=function(t){_inherits(PDFNodeStreamFsRangeReader,t);var h=_createSuper(PDFNodeStreamFsRangeReader);function PDFNodeStreamFsRangeReader(t,y,w){var A;_classCallCheck(this,PDFNodeStreamFsRangeReader),A=h.call(this,t);var T=decodeURIComponent(A._url.path);return V.test(A._url.href)&&(T=T.replace(/^\//,"")),A._setReadableStream(E.createReadStream(T,{start:y,end:w-1})),A}return PDFNodeStreamFsRangeReader}(G)},(t,h,y)=>{"use strict";Object.defineProperty(h,"__esModule",{value:!0}),h.createResponseStatusError=function createResponseStatusError(t,h){if(404===t||0===t&&h.startsWith("file:"))return new w.MissingPDFException('Missing PDF "'+h+'".');return new w.UnexpectedResponseException("Unexpected server response (".concat(t,') while retrieving PDF "').concat(h,'".'),t)},h.extractFilenameFromHeader=function extractFilenameFromHeader(t){var h=t("Content-Disposition");if(h){var y=(0,A.getFilenameFromContentDispositionHeader)(h);if(y.includes("%"))try{y=decodeURIComponent(y)}catch(t){}if((0,T.isPdfFile)(y))return y}return null},h.validateRangeRequestCapabilities=function validateRangeRequestCapabilities(t){var h=t.getResponseHeader,y=t.isHttp,A=t.rangeChunkSize,T=t.disableRange;(0,w.assert)(A>0,"Range chunk size must be larger than zero");var E={allowRangeRequests:!1,suggestedLength:void 0},j=parseInt(h("Content-Length"),10);if(!Number.isInteger(j))return E;if(E.suggestedLength=j,j<=2*A)return E;if(T||!y)return E;if("bytes"!==h("Accept-Ranges"))return E;if("identity"!==(h("Content-Encoding")||"identity"))return E;return E.allowRangeRequests=!0,E},h.validateResponseStatus=function validateResponseStatus(t){return 200===t||206===t};var w=y(4),A=y(155),T=y(1)},(t,h,y)=>{"use strict";Object.defineProperty(h,"__esModule",{value:!0}),h.getFilenameFromContentDispositionHeader=function getFilenameFromContentDispositionHeader(t){var h=!0,y=toParamRegExp("filename\\*","i").exec(t);if(y){var A=rfc2616unquote(y=y[1]);return fixupEncoding(A=rfc2047decode(A=rfc5987decode(A=unescape(A))))}if(y=function rfc2231getparam(t){var h,y=[],w=toParamRegExp("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;null!==(h=w.exec(t));){var A=_slicedToArray(h,4),T=A[1],E=A[2],j=A[3];if((T=parseInt(T,10))in y){if(0===T)break}else y[T]=[E,j]}for(var B=[],N=0;N<y.length&&N in y;++N){var V=_slicedToArray(y[N],2),W=V[0],H=V[1];H=rfc2616unquote(H),W&&(H=unescape(H),0===N&&(H=rfc5987decode(H))),B.push(H)}return B.join("")}(t)){return fixupEncoding(rfc2047decode(y))}if(y=toParamRegExp("filename","i").exec(t)){var T=rfc2616unquote(y=y[1]);return fixupEncoding(T=rfc2047decode(T))}function toParamRegExp(t,h){return new RegExp("(?:^|;)\\s*"+t+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',h)}function textdecode(t,y){if(t){if(!/^[\x00-\xFF]+$/.test(y))return y;try{var A=new TextDecoder(t,{fatal:!0}),T=(0,w.stringToBytes)(y);y=A.decode(T),h=!1}catch(w){if(/^utf-?8$/i.test(t))try{y=decodeURIComponent(escape(y)),h=!1}catch(t){}}}return y}function fixupEncoding(t){return h&&/[\x80-\xff]/.test(t)&&(t=textdecode("utf-8",t),h&&(t=textdecode("iso-8859-1",t))),t}function rfc2616unquote(t){if(t.startsWith('"')){for(var h=t.slice(1).split('\\"'),y=0;y<h.length;++y){var w=h[y].indexOf('"');-1!==w&&(h[y]=h[y].slice(0,w),h.length=y+1),h[y]=h[y].replace(/\\(.)/g,"$1")}t=h.join('"')}return t}function rfc5987decode(t){var h=t.indexOf("'");return-1===h?t:textdecode(t.slice(0,h),t.slice(h+1).replace(/^[^']*'/,""))}function rfc2047decode(t){return!t.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(t)?t:t.replace(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,(function(t,h,y,w){if("q"===y||"Q"===y)return textdecode(h,w=(w=w.replace(/_/g," ")).replace(/=([0-9a-fA-F]{2})/g,(function(t,h){return String.fromCharCode(parseInt(h,16))})));try{w=atob(w)}catch(t){}return textdecode(h,w)}))}return""};var w=y(4);function _slicedToArray(t,h){return function _arrayWithHoles(t){if(Array.isArray(t))return t}(t)||function _iterableToArrayLimit(t,h){var y=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=y){var w,A,T,E,j=[],B=!0,N=!1;try{if(T=(y=y.call(t)).next,0===h){if(Object(y)!==y)return;B=!1}else for(;!(B=(w=T.call(y)).done)&&(j.push(w.value),j.length!==h);B=!0);}catch(t){N=!0,A=t}finally{try{if(!B&&null!=y.return&&(E=y.return(),Object(E)!==E))return}finally{if(N)throw A}}return j}}(t,h)||function _unsupportedIterableToArray(t,h){if(!t)return;if("string"==typeof t)return _arrayLikeToArray(t,h);var y=Object.prototype.toString.call(t).slice(8,-1);"Object"===y&&t.constructor&&(y=t.constructor.name);if("Map"===y||"Set"===y)return Array.from(t);if("Arguments"===y||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(y))return _arrayLikeToArray(t,h)}(t,h)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(t,h){(null==h||h>t.length)&&(h=t.length);for(var y=0,w=new Array(h);y<h;y++)w[y]=t[y];return w}},(t,h,y)=>{"use strict";Object.defineProperty(h,"__esModule",{value:!0}),h.PDFNetworkStream=void 0;var w=function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}(y(2)),A=y(4),T=y(154);function asyncGeneratorStep(t,h,y,w,A,T,E){try{var j=t[T](E),B=j.value}catch(t){return void y(t)}j.done?h(B):Promise.resolve(B).then(w,A)}function _asyncToGenerator(t){return function(){var h=this,y=arguments;return new Promise((function(w,A){var T=t.apply(h,y);function _next(t){asyncGeneratorStep(T,w,A,_next,_throw,"next",t)}function _throw(t){asyncGeneratorStep(T,w,A,_next,_throw,"throw",t)}_next(void 0)}))}}function _createForOfIteratorHelper(t,h){var y="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!y){if(Array.isArray(t)||(y=function _unsupportedIterableToArray(t,h){if(!t)return;if("string"==typeof t)return _arrayLikeToArray(t,h);var y=Object.prototype.toString.call(t).slice(8,-1);"Object"===y&&t.constructor&&(y=t.constructor.name);if("Map"===y||"Set"===y)return Array.from(t);if("Arguments"===y||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(y))return _arrayLikeToArray(t,h)}(t))||h&&t&&"number"==typeof t.length){y&&(t=y);var w=0,A=function F(){};return{s:A,n:function n(){return w>=t.length?{done:!0}:{done:!1,value:t[w++]}},e:function e(t){throw t},f:A}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var T,E=!0,j=!1;return{s:function s(){y=y.call(t)},n:function n(){var t=y.next();return E=t.done,t},e:function e(t){j=!0,T=t},f:function f(){try{E||null==y.return||y.return()}finally{if(j)throw T}}}}function _arrayLikeToArray(t,h){(null==h||h>t.length)&&(h=t.length);for(var y=0,w=new Array(h);y<h;y++)w[y]=t[y];return w}function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _classCallCheck(t,h){if(!(t instanceof h))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,h){for(var y=0;y<h.length;y++){var w=h[y];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(t,(A=w.key,T=void 0,T=function _toPrimitive(t,h){if("object"!==_typeof(t)||null===t)return t;var y=t[Symbol.toPrimitive];if(void 0!==y){var w=y.call(t,h||"default");if("object"!==_typeof(w))return w;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===h?String:Number)(t)}(A,"string"),"symbol"===_typeof(T)?T:String(T)),w)}var A,T}function _createClass(t,h,y){return h&&_defineProperties(t.prototype,h),y&&_defineProperties(t,y),Object.defineProperty(t,"prototype",{writable:!1}),t}var E=function(){function NetworkManager(t){var h=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};_classCallCheck(this,NetworkManager),this.url=t,this.isHttp=/^https?:/i.test(t),this.httpHeaders=this.isHttp&&h.httpHeaders||Object.create(null),this.withCredentials=h.withCredentials||!1,this.getXhr=h.getXhr||function NetworkManager_getXhr(){return new XMLHttpRequest},this.currXhrId=0,this.pendingRequests=Object.create(null)}return _createClass(NetworkManager,[{key:"requestRange",value:function requestRange(t,h,y){var w={begin:t,end:h};for(var A in y)w[A]=y[A];return this.request(w)}},{key:"requestFull",value:function requestFull(t){return this.request(t)}},{key:"request",value:function request(t){var h=this.getXhr(),y=this.currXhrId++,w=this.pendingRequests[y]={xhr:h};for(var A in h.open("GET",this.url),h.withCredentials=this.withCredentials,this.httpHeaders){var T=this.httpHeaders[A];void 0!==T&&h.setRequestHeader(A,T)}return this.isHttp&&"begin"in t&&"end"in t?(h.setRequestHeader("Range","bytes=".concat(t.begin,"-").concat(t.end-1)),w.expectedStatus=206):w.expectedStatus=200,h.responseType="arraybuffer",t.onError&&(h.onerror=function(y){t.onError(h.status)}),h.onreadystatechange=this.onStateChange.bind(this,y),h.onprogress=this.onProgress.bind(this,y),w.onHeadersReceived=t.onHeadersReceived,w.onDone=t.onDone,w.onError=t.onError,w.onProgress=t.onProgress,h.send(null),y}},{key:"onProgress",value:function onProgress(t,h){var y,w=this.pendingRequests[t];w&&(null===(y=w.onProgress)||void 0===y||y.call(w,h))}},{key:"onStateChange",value:function onStateChange(t,h){var y=this.pendingRequests[t];if(y){var w=y.xhr;if(w.readyState>=2&&y.onHeadersReceived&&(y.onHeadersReceived(),delete y.onHeadersReceived),4===w.readyState&&t in this.pendingRequests)if(delete this.pendingRequests[t],0===w.status&&this.isHttp){var T;null===(T=y.onError)||void 0===T||T.call(y,w.status)}else{var E=w.status||200;if(200===E&&206===y.expectedStatus||E===y.expectedStatus){var j=function getArrayBuffer(t){var h=t.response;return"string"!=typeof h?h:(0,A.stringToBytes)(h).buffer}(w);if(206===E){var B=w.getResponseHeader("Content-Range"),N=/bytes (\d+)-(\d+)\/(\d+)/.exec(B);y.onDone({begin:parseInt(N[1],10),chunk:j})}else if(j)y.onDone({begin:0,chunk:j});else{var V;null===(V=y.onError)||void 0===V||V.call(y,w.status)}}else{var W;null===(W=y.onError)||void 0===W||W.call(y,w.status)}}}}},{key:"getRequestXhr",value:function getRequestXhr(t){return this.pendingRequests[t].xhr}},{key:"isPendingRequest",value:function isPendingRequest(t){return t in this.pendingRequests}},{key:"abortRequest",value:function abortRequest(t){var h=this.pendingRequests[t].xhr;delete this.pendingRequests[t],h.abort()}}]),NetworkManager}(),j=function(){function PDFNetworkStream(t){_classCallCheck(this,PDFNetworkStream),this._source=t,this._manager=new E(t.url,{httpHeaders:t.httpHeaders,withCredentials:t.withCredentials}),this._rangeChunkSize=t.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}return _createClass(PDFNetworkStream,[{key:"_onRangeRequestReaderClosed",value:function _onRangeRequestReaderClosed(t){var h=this._rangeRequestReaders.indexOf(t);h>=0&&this._rangeRequestReaders.splice(h,1)}},{key:"getFullReader",value:function getFullReader(){return(0,A.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new B(this._manager,this._source),this._fullRequestReader}},{key:"getRangeReader",value:function getRangeReader(t,h){var y=new N(this._manager,t,h);return y.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(y),y}},{key:"cancelAllRequests",value:function cancelAllRequests(t){var h;null===(h=this._fullRequestReader)||void 0===h||h.cancel(t);var y,w=_createForOfIteratorHelper(this._rangeRequestReaders.slice(0));try{for(w.s();!(y=w.n()).done;){y.value.cancel(t)}}catch(t){w.e(t)}finally{w.f()}}}]),PDFNetworkStream}();h.PDFNetworkStream=j;var B=function(){function PDFNetworkStreamFullRequestReader(t,h){_classCallCheck(this,PDFNetworkStreamFullRequestReader),this._manager=t;var y={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=h.url,this._fullRequestId=t.requestFull(y),this._headersReceivedCapability=(0,A.createPromiseCapability)(),this._disableRange=h.disableRange||!1,this._contentLength=h.length,this._rangeChunkSize=h.rangeChunkSize,this._rangeChunkSize||this._disableRange||(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}var t;return _createClass(PDFNetworkStreamFullRequestReader,[{key:"_onHeadersReceived",value:function _onHeadersReceived(){var t=this._fullRequestId,h=this._manager.getRequestXhr(t),y=function getResponseHeader(t){return h.getResponseHeader(t)},w=(0,T.validateRangeRequestCapabilities)({getResponseHeader:y,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange}),A=w.allowRangeRequests,E=w.suggestedLength;A&&(this._isRangeSupported=!0),this._contentLength=E||this._contentLength,this._filename=(0,T.extractFilenameFromHeader)(y),this._isRangeSupported&&this._manager.abortRequest(t),this._headersReceivedCapability.resolve()}},{key:"_onDone",value:function _onDone(t){t&&(this._requests.length>0?this._requests.shift().resolve({value:t.chunk,done:!1}):this._cachedChunks.push(t.chunk));if(this._done=!0,!(this._cachedChunks.length>0)){var h,y=_createForOfIteratorHelper(this._requests);try{for(y.s();!(h=y.n()).done;){h.value.resolve({value:void 0,done:!0})}}catch(t){y.e(t)}finally{y.f()}this._requests.length=0}}},{key:"_onError",value:function _onError(t){this._storedError=(0,T.createResponseStatusError)(t,this._url),this._headersReceivedCapability.reject(this._storedError);var h,y=_createForOfIteratorHelper(this._requests);try{for(y.s();!(h=y.n()).done;){h.value.reject(this._storedError)}}catch(t){y.e(t)}finally{y.f()}this._requests.length=0,this._cachedChunks.length=0}},{key:"_onProgress",value:function _onProgress(t){var h;null===(h=this.onProgress)||void 0===h||h.call(this,{loaded:t.loaded,total:t.lengthComputable?t.total:this._contentLength})}},{key:"filename",get:function get(){return this._filename}},{key:"isRangeSupported",get:function get(){return this._isRangeSupported}},{key:"isStreamingSupported",get:function get(){return this._isStreamingSupported}},{key:"contentLength",get:function get(){return this._contentLength}},{key:"headersReady",get:function get(){return this._headersReceivedCapability.promise}},{key:"read",value:(t=_asyncToGenerator(w.default.mark((function _callee(){var t,h;return w.default.wrap((function _callee$(y){for(;;)switch(y.prev=y.next){case 0:if(!this._storedError){y.next=2;break}throw this._storedError;case 2:if(!(this._cachedChunks.length>0)){y.next=5;break}return t=this._cachedChunks.shift(),y.abrupt("return",{value:t,done:!1});case 5:if(!this._done){y.next=7;break}return y.abrupt("return",{value:void 0,done:!0});case 7:return h=(0,A.createPromiseCapability)(),this._requests.push(h),y.abrupt("return",h.promise);case 10:case"end":return y.stop()}}),_callee,this)}))),function read(){return t.apply(this,arguments)})},{key:"cancel",value:function cancel(t){this._done=!0,this._headersReceivedCapability.reject(t);var h,y=_createForOfIteratorHelper(this._requests);try{for(y.s();!(h=y.n()).done;){h.value.resolve({value:void 0,done:!0})}}catch(t){y.e(t)}finally{y.f()}this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}]),PDFNetworkStreamFullRequestReader}(),N=function(){function PDFNetworkStreamRangeRequestReader(t,h,y){_classCallCheck(this,PDFNetworkStreamRangeRequestReader),this._manager=t;var w={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=t.url,this._requestId=t.requestRange(h,y,w),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}var t;return _createClass(PDFNetworkStreamRangeRequestReader,[{key:"_close",value:function _close(){var t;null===(t=this.onClosed)||void 0===t||t.call(this,this)}},{key:"_onDone",value:function _onDone(t){var h=t.chunk;this._requests.length>0?this._requests.shift().resolve({value:h,done:!1}):this._queuedChunk=h;this._done=!0;var y,w=_createForOfIteratorHelper(this._requests);try{for(w.s();!(y=w.n()).done;){y.value.resolve({value:void 0,done:!0})}}catch(t){w.e(t)}finally{w.f()}this._requests.length=0,this._close()}},{key:"_onError",value:function _onError(t){this._storedError=(0,T.createResponseStatusError)(t,this._url);var h,y=_createForOfIteratorHelper(this._requests);try{for(y.s();!(h=y.n()).done;){h.value.reject(this._storedError)}}catch(t){y.e(t)}finally{y.f()}this._requests.length=0,this._queuedChunk=null}},{key:"_onProgress",value:function _onProgress(t){var h;this.isStreamingSupported||(null===(h=this.onProgress)||void 0===h||h.call(this,{loaded:t.loaded}))}},{key:"isStreamingSupported",get:function get(){return!1}},{key:"read",value:(t=_asyncToGenerator(w.default.mark((function _callee2(){var t,h;return w.default.wrap((function _callee2$(y){for(;;)switch(y.prev=y.next){case 0:if(!this._storedError){y.next=2;break}throw this._storedError;case 2:if(null===this._queuedChunk){y.next=6;break}return t=this._queuedChunk,this._queuedChunk=null,y.abrupt("return",{value:t,done:!1});case 6:if(!this._done){y.next=8;break}return y.abrupt("return",{value:void 0,done:!0});case 8:return h=(0,A.createPromiseCapability)(),this._requests.push(h),y.abrupt("return",h.promise);case 11:case"end":return y.stop()}}),_callee2,this)}))),function read(){return t.apply(this,arguments)})},{key:"cancel",value:function cancel(t){this._done=!0;var h,y=_createForOfIteratorHelper(this._requests);try{for(y.s();!(h=y.n()).done;){h.value.resolve({value:void 0,done:!0})}}catch(t){y.e(t)}finally{y.f()}this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}]),PDFNetworkStreamRangeRequestReader}()},(t,h,y)=>{"use strict";Object.defineProperty(h,"__esModule",{value:!0}),h.PDFFetchStream=void 0;var w=function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}(y(2)),A=y(4),T=y(154);function asyncGeneratorStep(t,h,y,w,A,T,E){try{var j=t[T](E),B=j.value}catch(t){return void y(t)}j.done?h(B):Promise.resolve(B).then(w,A)}function _asyncToGenerator(t){return function(){var h=this,y=arguments;return new Promise((function(w,A){var T=t.apply(h,y);function _next(t){asyncGeneratorStep(T,w,A,_next,_throw,"next",t)}function _throw(t){asyncGeneratorStep(T,w,A,_next,_throw,"throw",t)}_next(void 0)}))}}function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _createForOfIteratorHelper(t,h){var y="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!y){if(Array.isArray(t)||(y=function _unsupportedIterableToArray(t,h){if(!t)return;if("string"==typeof t)return _arrayLikeToArray(t,h);var y=Object.prototype.toString.call(t).slice(8,-1);"Object"===y&&t.constructor&&(y=t.constructor.name);if("Map"===y||"Set"===y)return Array.from(t);if("Arguments"===y||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(y))return _arrayLikeToArray(t,h)}(t))||h&&t&&"number"==typeof t.length){y&&(t=y);var w=0,A=function F(){};return{s:A,n:function n(){return w>=t.length?{done:!0}:{done:!1,value:t[w++]}},e:function e(t){throw t},f:A}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var T,E=!0,j=!1;return{s:function s(){y=y.call(t)},n:function n(){var t=y.next();return E=t.done,t},e:function e(t){j=!0,T=t},f:function f(){try{E||null==y.return||y.return()}finally{if(j)throw T}}}}function _arrayLikeToArray(t,h){(null==h||h>t.length)&&(h=t.length);for(var y=0,w=new Array(h);y<h;y++)w[y]=t[y];return w}function _classCallCheck(t,h){if(!(t instanceof h))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,h){for(var y=0;y<h.length;y++){var w=h[y];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(t,(A=w.key,T=void 0,T=function _toPrimitive(t,h){if("object"!==_typeof(t)||null===t)return t;var y=t[Symbol.toPrimitive];if(void 0!==y){var w=y.call(t,h||"default");if("object"!==_typeof(w))return w;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===h?String:Number)(t)}(A,"string"),"symbol"===_typeof(T)?T:String(T)),w)}var A,T}function _createClass(t,h,y){return h&&_defineProperties(t.prototype,h),y&&_defineProperties(t,y),Object.defineProperty(t,"prototype",{writable:!1}),t}function createFetchOptions(t,h,y){return{method:"GET",headers:t,signal:null==y?void 0:y.signal,mode:"cors",credentials:h?"include":"same-origin",redirect:"follow"}}function createHeaders(t){var h=new Headers;for(var y in t){var w=t[y];void 0!==w&&h.append(y,w)}return h}var E=function(){function PDFFetchStream(t){_classCallCheck(this,PDFFetchStream),this.source=t,this.isHttp=/^https?:/i.test(t.url),this.httpHeaders=this.isHttp&&t.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}return _createClass(PDFFetchStream,[{key:"_progressiveDataLength",get:function get(){var t,h;return null!==(t=null===(h=this._fullRequestReader)||void 0===h?void 0:h._loaded)&&void 0!==t?t:0}},{key:"getFullReader",value:function getFullReader(){return(0,A.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new j(this),this._fullRequestReader}},{key:"getRangeReader",value:function getRangeReader(t,h){if(h<=this._progressiveDataLength)return null;var y=new B(this,t,h);return this._rangeRequestReaders.push(y),y}},{key:"cancelAllRequests",value:function cancelAllRequests(t){this._fullRequestReader&&this._fullRequestReader.cancel(t);var h,y=_createForOfIteratorHelper(this._rangeRequestReaders.slice(0));try{for(y.s();!(h=y.n()).done;){h.value.cancel(t)}}catch(t){y.e(t)}finally{y.f()}}}]),PDFFetchStream}();h.PDFFetchStream=E;var j=function(){function PDFFetchStreamReader(t){var h=this;_classCallCheck(this,PDFFetchStreamReader),this._stream=t,this._reader=null,this._loaded=0,this._filename=null;var y=t.source;this._withCredentials=y.withCredentials||!1,this._contentLength=y.length,this._headersCapability=(0,A.createPromiseCapability)(),this._disableRange=y.disableRange||!1,this._rangeChunkSize=y.rangeChunkSize,this._rangeChunkSize||this._disableRange||(this._disableRange=!0),"undefined"!=typeof AbortController&&(this._abortController=new AbortController),this._isStreamingSupported=!y.disableStream,this._isRangeSupported=!y.disableRange,this._headers=createHeaders(this._stream.httpHeaders);var w=y.url;fetch(w,createFetchOptions(this._headers,this._withCredentials,this._abortController)).then((function(t){if(!(0,T.validateResponseStatus)(t.status))throw(0,T.createResponseStatusError)(t.status,w);h._reader=t.body.getReader(),h._headersCapability.resolve();var y=function getResponseHeader(h){return t.headers.get(h)},E=(0,T.validateRangeRequestCapabilities)({getResponseHeader:y,isHttp:h._stream.isHttp,rangeChunkSize:h._rangeChunkSize,disableRange:h._disableRange}),j=E.allowRangeRequests,B=E.suggestedLength;h._isRangeSupported=j,h._contentLength=B||h._contentLength,h._filename=(0,T.extractFilenameFromHeader)(y),!h._isStreamingSupported&&h._isRangeSupported&&h.cancel(new A.AbortException("Streaming is disabled."))})).catch(this._headersCapability.reject),this.onProgress=null}var t;return _createClass(PDFFetchStreamReader,[{key:"headersReady",get:function get(){return this._headersCapability.promise}},{key:"filename",get:function get(){return this._filename}},{key:"contentLength",get:function get(){return this._contentLength}},{key:"isRangeSupported",get:function get(){return this._isRangeSupported}},{key:"isStreamingSupported",get:function get(){return this._isStreamingSupported}},{key:"read",value:(t=_asyncToGenerator(w.default.mark((function _callee(){var t,h,y,A;return w.default.wrap((function _callee$(w){for(;;)switch(w.prev=w.next){case 0:return w.next=2,this._headersCapability.promise;case 2:return w.next=4,this._reader.read();case 4:if(t=w.sent,h=t.value,!(y=t.done)){w.next=9;break}return w.abrupt("return",{value:h,done:y});case 9:return this._loaded+=h.byteLength,this.onProgress&&this.onProgress({loaded:this._loaded,total:this._contentLength}),A=new Uint8Array(h).buffer,w.abrupt("return",{value:A,done:!1});case 13:case"end":return w.stop()}}),_callee,this)}))),function read(){return t.apply(this,arguments)})},{key:"cancel",value:function cancel(t){this._reader&&this._reader.cancel(t),this._abortController&&this._abortController.abort()}}]),PDFFetchStreamReader}(),B=function(){function PDFFetchStreamRangeReader(t,h,y){var w=this;_classCallCheck(this,PDFFetchStreamRangeReader),this._stream=t,this._reader=null,this._loaded=0;var E=t.source;this._withCredentials=E.withCredentials||!1,this._readCapability=(0,A.createPromiseCapability)(),this._isStreamingSupported=!E.disableStream,"undefined"!=typeof AbortController&&(this._abortController=new AbortController),this._headers=createHeaders(this._stream.httpHeaders),this._headers.append("Range","bytes=".concat(h,"-").concat(y-1));var j=E.url;fetch(j,createFetchOptions(this._headers,this._withCredentials,this._abortController)).then((function(t){if(!(0,T.validateResponseStatus)(t.status))throw(0,T.createResponseStatusError)(t.status,j);w._readCapability.resolve(),w._reader=t.body.getReader()})).catch(this._readCapability.reject),this.onProgress=null}var t;return _createClass(PDFFetchStreamRangeReader,[{key:"isStreamingSupported",get:function get(){return this._isStreamingSupported}},{key:"read",value:(t=_asyncToGenerator(w.default.mark((function _callee2(){var t,h,y,A;return w.default.wrap((function _callee2$(w){for(;;)switch(w.prev=w.next){case 0:return w.next=2,this._readCapability.promise;case 2:return w.next=4,this._reader.read();case 4:if(t=w.sent,h=t.value,!(y=t.done)){w.next=9;break}return w.abrupt("return",{value:h,done:y});case 9:return this._loaded+=h.byteLength,this.onProgress&&this.onProgress({loaded:this._loaded}),A=new Uint8Array(h).buffer,w.abrupt("return",{value:A,done:!1});case 13:case"end":return w.stop()}}),_callee2,this)}))),function read(){return t.apply(this,arguments)})},{key:"cancel",value:function cancel(t){this._reader&&this._reader.cancel(t),this._abortController&&this._abortController.abort()}}]),PDFFetchStreamRangeReader}()}],__webpack_module_cache__={};function __w_pdfjs_require__(t){var h=__webpack_module_cache__[t];if(void 0!==h)return h.exports;var y=__webpack_module_cache__[t]={id:t,loaded:!1,exports:{}};return __webpack_modules__[t].call(y.exports,y,y.exports,__w_pdfjs_require__),y.loaded=!0,y.exports}__w_pdfjs_require__.nmd=t=>(t.paths=[],t.children||(t.children=[]),t);var __nested_webpack_exports__={};return(()=>{"use strict";var t=__nested_webpack_exports__;Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"AnnotationLayer",{enumerable:!0,get:function get(){return A.AnnotationLayer}}),Object.defineProperty(t,"AnnotationMode",{enumerable:!0,get:function get(){return y.AnnotationMode}}),Object.defineProperty(t,"CMapCompressionType",{enumerable:!0,get:function get(){return y.CMapCompressionType}}),Object.defineProperty(t,"GlobalWorkerOptions",{enumerable:!0,get:function get(){return T.GlobalWorkerOptions}}),Object.defineProperty(t,"InvalidPDFException",{enumerable:!0,get:function get(){return y.InvalidPDFException}}),Object.defineProperty(t,"LinkTarget",{enumerable:!0,get:function get(){return h.LinkTarget}}),Object.defineProperty(t,"LoopbackPort",{enumerable:!0,get:function get(){return w.LoopbackPort}}),Object.defineProperty(t,"MissingPDFException",{enumerable:!0,get:function get(){return y.MissingPDFException}}),Object.defineProperty(t,"OPS",{enumerable:!0,get:function get(){return y.OPS}}),Object.defineProperty(t,"PDFDataRangeTransport",{enumerable:!0,get:function get(){return w.PDFDataRangeTransport}}),Object.defineProperty(t,"PDFDateString",{enumerable:!0,get:function get(){return h.PDFDateString}}),Object.defineProperty(t,"PDFWorker",{enumerable:!0,get:function get(){return w.PDFWorker}}),Object.defineProperty(t,"PasswordResponses",{enumerable:!0,get:function get(){return y.PasswordResponses}}),Object.defineProperty(t,"PermissionFlag",{enumerable:!0,get:function get(){return y.PermissionFlag}}),Object.defineProperty(t,"PixelsPerInch",{enumerable:!0,get:function get(){return h.PixelsPerInch}}),Object.defineProperty(t,"RenderingCancelledException",{enumerable:!0,get:function get(){return h.RenderingCancelledException}}),Object.defineProperty(t,"SVGGraphics",{enumerable:!0,get:function get(){return B.SVGGraphics}}),Object.defineProperty(t,"UNSUPPORTED_FEATURES",{enumerable:!0,get:function get(){return y.UNSUPPORTED_FEATURES}}),Object.defineProperty(t,"UnexpectedResponseException",{enumerable:!0,get:function get(){return y.UnexpectedResponseException}}),Object.defineProperty(t,"Util",{enumerable:!0,get:function get(){return y.Util}}),Object.defineProperty(t,"VerbosityLevel",{enumerable:!0,get:function get(){return y.VerbosityLevel}}),Object.defineProperty(t,"XfaLayer",{enumerable:!0,get:function get(){return N.XfaLayer}}),Object.defineProperty(t,"addLinkAttributes",{enumerable:!0,get:function get(){return h.addLinkAttributes}}),Object.defineProperty(t,"build",{enumerable:!0,get:function get(){return w.build}}),Object.defineProperty(t,"createObjectURL",{enumerable:!0,get:function get(){return y.createObjectURL}}),Object.defineProperty(t,"createPromiseCapability",{enumerable:!0,get:function get(){return y.createPromiseCapability}}),Object.defineProperty(t,"createValidAbsoluteUrl",{enumerable:!0,get:function get(){return y.createValidAbsoluteUrl}}),Object.defineProperty(t,"getDocument",{enumerable:!0,get:function get(){return w.getDocument}}),Object.defineProperty(t,"getFilenameFromUrl",{enumerable:!0,get:function get(){return h.getFilenameFromUrl}}),Object.defineProperty(t,"getPdfFilenameFromUrl",{enumerable:!0,get:function get(){return h.getPdfFilenameFromUrl}}),Object.defineProperty(t,"getXfaPageViewport",{enumerable:!0,get:function get(){return h.getXfaPageViewport}}),Object.defineProperty(t,"isPdfFile",{enumerable:!0,get:function get(){return h.isPdfFile}}),Object.defineProperty(t,"loadScript",{enumerable:!0,get:function get(){return h.loadScript}}),Object.defineProperty(t,"removeNullCharacters",{enumerable:!0,get:function get(){return y.removeNullCharacters}}),Object.defineProperty(t,"renderTextLayer",{enumerable:!0,get:function get(){return j.renderTextLayer}}),Object.defineProperty(t,"shadow",{enumerable:!0,get:function get(){return y.shadow}}),Object.defineProperty(t,"version",{enumerable:!0,get:function get(){return w.version}});var h=__w_pdfjs_require__(1),y=__w_pdfjs_require__(4),w=__w_pdfjs_require__(135),A=__w_pdfjs_require__(147),T=__w_pdfjs_require__(141),E=__w_pdfjs_require__(6),j=__w_pdfjs_require__(150),B=__w_pdfjs_require__(152),N=__w_pdfjs_require__(149);if(E.isNodeJS){var V=__w_pdfjs_require__(153).PDFNodeStream;(0,w.setPDFNetworkStreamFactory)((function(t){return new V(t)}))}else{var W=__w_pdfjs_require__(156).PDFNetworkStream,H=__w_pdfjs_require__(157).PDFFetchStream;(0,w.setPDFNetworkStreamFactory)((function(t){return(0,h.isValidFetchUrl)(t.url)?new H(t):new W(t)}))}})(),__nested_webpack_exports__})()}))},73427:function(t,h,y){function _extends(){return _extends=Object.assign||function(t){for(var h=1;h<arguments.length;h++){var y=arguments[h];for(var w in y)Object.prototype.hasOwnProperty.call(y,w)&&(t[w]=y[w])}return t},_extends.apply(this,arguments)}!function webpackUniversalModuleDefinition(h,y){t.exports=y()}(0,(function(){return(()=>{"use strict";var t=[,(t,h,y)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.DefaultAnnotationLayerFactory=h.AnnotationLayerBuilder=void 0;var w=function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}(y(2)),A=y(4),T=y(5),E=y(6);function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _slicedToArray(t,h){return function _arrayWithHoles(t){if(Array.isArray(t))return t}(t)||function _iterableToArrayLimit(t,h){var y=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=y){var w,A,T,E,j=[],B=!0,N=!1;try{if(T=(y=y.call(t)).next,0===h){if(Object(y)!==y)return;B=!1}else for(;!(B=(w=T.call(y)).done)&&(j.push(w.value),j.length!==h);B=!0);}catch(t){N=!0,A=t}finally{try{if(!B&&null!=y.return&&(E=y.return(),Object(E)!==E))return}finally{if(N)throw A}}return j}}(t,h)||function _unsupportedIterableToArray(t,h){if(!t)return;if("string"==typeof t)return _arrayLikeToArray(t,h);var y=Object.prototype.toString.call(t).slice(8,-1);"Object"===y&&t.constructor&&(y=t.constructor.name);if("Map"===y||"Set"===y)return Array.from(t);if("Arguments"===y||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(y))return _arrayLikeToArray(t,h)}(t,h)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(t,h){(null==h||h>t.length)&&(h=t.length);for(var y=0,w=new Array(h);y<h;y++)w[y]=t[y];return w}function asyncGeneratorStep(t,h,y,w,A,T,E){try{var j=t[T](E),B=j.value}catch(t){return void y(t)}j.done?h(B):Promise.resolve(B).then(w,A)}function _classCallCheck(t,h){if(!(t instanceof h))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,h){for(var y=0;y<h.length;y++){var w=h[y];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(t,(A=w.key,T=void 0,T=function _toPrimitive(t,h){if("object"!==_typeof(t)||null===t)return t;var y=t[Symbol.toPrimitive];if(void 0!==y){var w=y.call(t,h||"default");if("object"!==_typeof(w))return w;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===h?String:Number)(t)}(A,"string"),"symbol"===_typeof(T)?T:String(T)),w)}var A,T}function _createClass(t,h,y){return h&&_defineProperties(t.prototype,h),y&&_defineProperties(t,y),Object.defineProperty(t,"prototype",{writable:!1}),t}var j=function(){function AnnotationLayerBuilder(t){var h=t.pageDiv,y=t.pdfPage,w=t.linkService,A=t.downloadManager,E=t.annotationStorage,j=void 0===E?null:E,B=t.imageResourcesPath,N=void 0===B?"":B,V=t.renderForms,W=void 0===V||V,H=t.l10n,G=void 0===H?T.NullL10n:H,z=t.enableScripting,$=void 0!==z&&z,J=t.hasJSActionsPromise,X=void 0===J?null:J,K=t.fieldObjectsPromise,ne=void 0===K?null:K,ue=t.mouseState,pe=void 0===ue?null:ue,me=t.annotationCanvasMap,ge=void 0===me?null:me;_classCallCheck(this,AnnotationLayerBuilder),this.pageDiv=h,this.pdfPage=y,this.linkService=w,this.downloadManager=A,this.imageResourcesPath=N,this.renderForms=W,this.l10n=G,this.annotationStorage=j,this.enableScripting=$,this._hasJSActionsPromise=X,this._fieldObjectsPromise=ne,this._mouseState=pe,this._annotationCanvasMap=ge,this.div=null,this._cancelled=!1}var t;return _createClass(AnnotationLayerBuilder,[{key:"render",value:(t=function _asyncToGenerator(t){return function(){var h=this,y=arguments;return new Promise((function(w,A){var T=t.apply(h,y);function _next(t){asyncGeneratorStep(T,w,A,_next,_throw,"next",t)}function _throw(t){asyncGeneratorStep(T,w,A,_next,_throw,"throw",t)}_next(void 0)}))}}(w.default.mark((function _callee(t){var h,y,T,E,j,B,N,V,W,H=arguments;return w.default.wrap((function _callee$(w){for(;;)switch(w.prev=w.next){case 0:return h=H.length>1&&void 0!==H[1]?H[1]:"display",w.next=3,Promise.all([this.pdfPage.getAnnotations({intent:h}),this._hasJSActionsPromise,this._fieldObjectsPromise]);case 3:if(y=w.sent,T=_slicedToArray(y,3),E=T[0],j=T[1],B=void 0!==j&&j,N=T[2],V=void 0===N?null:N,!this._cancelled&&0!==E.length){w.next=12;break}return w.abrupt("return");case 12:W={viewport:t.clone({dontFlip:!0}),div:this.div,annotations:E,page:this.pdfPage,imageResourcesPath:this.imageResourcesPath,renderForms:this.renderForms,linkService:this.linkService,downloadManager:this.downloadManager,annotationStorage:this.annotationStorage,enableScripting:this.enableScripting,hasJSActions:B,fieldObjects:V,mouseState:this._mouseState,annotationCanvasMap:this._annotationCanvasMap},this.div?A.AnnotationLayer.update(W):(this.div=document.createElement("div"),this.div.className="annotationLayer",this.pageDiv.appendChild(this.div),W.div=this.div,A.AnnotationLayer.render(W),this.l10n.translate(this.div));case 14:case"end":return w.stop()}}),_callee,this)}))),function render(h){return t.apply(this,arguments)})},{key:"cancel",value:function cancel(){this._cancelled=!0}},{key:"hide",value:function hide(){this.div&&(this.div.hidden=!0)}}]),AnnotationLayerBuilder}();h.AnnotationLayerBuilder=j;var B=function(){function DefaultAnnotationLayerFactory(){_classCallCheck(this,DefaultAnnotationLayerFactory)}return _createClass(DefaultAnnotationLayerFactory,[{key:"createAnnotationLayerBuilder",value:function createAnnotationLayerBuilder(t,h){var y=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,w=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",A=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],B=arguments.length>5&&void 0!==arguments[5]?arguments[5]:T.NullL10n,N=arguments.length>6&&void 0!==arguments[6]&&arguments[6],V=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null,W=arguments.length>8&&void 0!==arguments[8]?arguments[8]:null,H=arguments.length>9&&void 0!==arguments[9]?arguments[9]:null,G=arguments.length>10&&void 0!==arguments[10]?arguments[10]:null;return new j({pageDiv:t,pdfPage:h,imageResourcesPath:w,renderForms:A,linkService:new E.SimpleLinkService,l10n:B,annotationStorage:y,enableScripting:N,hasJSActionsPromise:V,fieldObjectsPromise:H,mouseState:W,annotationCanvasMap:G})}}]),DefaultAnnotationLayerFactory}();h.DefaultAnnotationLayerFactory=B},(t,h,y)=>{t.exports=y(3)},(t,h,y)=>{function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}var w=function(t){var h,y=Object.prototype,w=y.hasOwnProperty,A="function"==typeof Symbol?Symbol:{},T=A.iterator||"@@iterator",E=A.asyncIterator||"@@asyncIterator",j=A.toStringTag||"@@toStringTag";function define(t,h,y){return Object.defineProperty(t,h,{value:y,enumerable:!0,configurable:!0,writable:!0}),t[h]}try{define({},"")}catch(t){define=function define(t,h,y){return t[h]=y}}function wrap(t,h,y,w){var A=h&&h.prototype instanceof Generator?h:Generator,T=Object.create(A.prototype),E=new Context(w||[]);return T._invoke=function makeInvokeMethod(t,h,y){var w=B;return function invoke(A,T){if(w===V)throw new Error("Generator is already running");if(w===W){if("throw"===A)throw T;return doneResult()}for(y.method=A,y.arg=T;;){var E=y.delegate;if(E){var j=maybeInvokeDelegate(E,y);if(j){if(j===H)continue;return j}}if("next"===y.method)y.sent=y._sent=y.arg;else if("throw"===y.method){if(w===B)throw w=W,y.arg;y.dispatchException(y.arg)}else"return"===y.method&&y.abrupt("return",y.arg);w=V;var G=tryCatch(t,h,y);if("normal"===G.type){if(w=y.done?W:N,G.arg===H)continue;return{value:G.arg,done:y.done}}"throw"===G.type&&(w=W,y.method="throw",y.arg=G.arg)}}}(t,y,E),T}function tryCatch(t,h,y){try{return{type:"normal",arg:t.call(h,y)}}catch(t){return{type:"throw",arg:t}}}t.wrap=wrap;var B="suspendedStart",N="suspendedYield",V="executing",W="completed",H={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var G={};define(G,T,(function(){return this}));var z=Object.getPrototypeOf,$=z&&z(z(values([])));$&&$!==y&&w.call($,T)&&(G=$);var J=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(G);function defineIteratorMethods(t){["next","throw","return"].forEach((function(h){define(t,h,(function(t){return this._invoke(h,t)}))}))}function AsyncIterator(t,h){function invoke(y,A,T,E){var j=tryCatch(t[y],t,A);if("throw"!==j.type){var B=j.arg,N=B.value;return N&&"object"===_typeof(N)&&w.call(N,"__await")?h.resolve(N.__await).then((function(t){invoke("next",t,T,E)}),(function(t){invoke("throw",t,T,E)})):h.resolve(N).then((function(t){B.value=t,T(B)}),(function(t){return invoke("throw",t,T,E)}))}E(j.arg)}var y;this._invoke=function enqueue(t,w){function callInvokeWithMethodAndArg(){return new h((function(h,y){invoke(t,w,h,y)}))}return y=y?y.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}}function maybeInvokeDelegate(t,y){var w=t.iterator[y.method];if(w===h){if(y.delegate=null,"throw"===y.method){if(t.iterator.return&&(y.method="return",y.arg=h,maybeInvokeDelegate(t,y),"throw"===y.method))return H;y.method="throw",y.arg=new TypeError("The iterator does not provide a 'throw' method")}return H}var A=tryCatch(w,t.iterator,y.arg);if("throw"===A.type)return y.method="throw",y.arg=A.arg,y.delegate=null,H;var T=A.arg;return T?T.done?(y[t.resultName]=T.value,y.next=t.nextLoc,"return"!==y.method&&(y.method="next",y.arg=h),y.delegate=null,H):T:(y.method="throw",y.arg=new TypeError("iterator result is not an object"),y.delegate=null,H)}function pushTryEntry(t){var h={tryLoc:t[0]};1 in t&&(h.catchLoc=t[1]),2 in t&&(h.finallyLoc=t[2],h.afterLoc=t[3]),this.tryEntries.push(h)}function resetTryEntry(t){var h=t.completion||{};h.type="normal",delete h.arg,t.completion=h}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0)}function values(t){if(t){var y=t[T];if(y)return y.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var A=-1,E=function next(){for(;++A<t.length;)if(w.call(t,A))return next.value=t[A],next.done=!1,next;return next.value=h,next.done=!0,next};return E.next=E}}return{next:doneResult}}function doneResult(){return{value:h,done:!0}}return GeneratorFunction.prototype=GeneratorFunctionPrototype,define(J,"constructor",GeneratorFunctionPrototype),define(GeneratorFunctionPrototype,"constructor",GeneratorFunction),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,j,"GeneratorFunction"),t.isGeneratorFunction=function(t){var h="function"==typeof t&&t.constructor;return!!h&&(h===GeneratorFunction||"GeneratorFunction"===(h.displayName||h.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,define(t,j,"GeneratorFunction")),t.prototype=Object.create(J),t},t.awrap=function(t){return{__await:t}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,E,(function(){return this})),t.AsyncIterator=AsyncIterator,t.async=function(h,y,w,A,T){void 0===T&&(T=Promise);var E=new AsyncIterator(wrap(h,y,w,A),T);return t.isGeneratorFunction(y)?E:E.next().then((function(t){return t.done?t.value:E.next()}))},defineIteratorMethods(J),define(J,j,"Generator"),define(J,T,(function(){return this})),define(J,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var h=[];for(var y in t)h.push(y);return h.reverse(),function next(){for(;h.length;){var y=h.pop();if(y in t)return next.value=y,next.done=!1,next}return next.done=!0,next}},t.values=values,Context.prototype={constructor:Context,reset:function reset(t){if(this.prev=0,this.next=0,this.sent=this._sent=h,this.done=!1,this.delegate=null,this.method="next",this.arg=h,this.tryEntries.forEach(resetTryEntry),!t)for(var y in this)"t"===y.charAt(0)&&w.call(this,y)&&!isNaN(+y.slice(1))&&(this[y]=h)},stop:function stop(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function dispatchException(t){if(this.done)throw t;var y=this;function handle(w,A){return E.type="throw",E.arg=t,y.next=w,A&&(y.method="next",y.arg=h),!!A}for(var A=this.tryEntries.length-1;A>=0;--A){var T=this.tryEntries[A],E=T.completion;if("root"===T.tryLoc)return handle("end");if(T.tryLoc<=this.prev){var j=w.call(T,"catchLoc"),B=w.call(T,"finallyLoc");if(j&&B){if(this.prev<T.catchLoc)return handle(T.catchLoc,!0);if(this.prev<T.finallyLoc)return handle(T.finallyLoc)}else if(j){if(this.prev<T.catchLoc)return handle(T.catchLoc,!0)}else{if(!B)throw new Error("try statement without catch or finally");if(this.prev<T.finallyLoc)return handle(T.finallyLoc)}}}},abrupt:function abrupt(t,h){for(var y=this.tryEntries.length-1;y>=0;--y){var A=this.tryEntries[y];if(A.tryLoc<=this.prev&&w.call(A,"finallyLoc")&&this.prev<A.finallyLoc){var T=A;break}}T&&("break"===t||"continue"===t)&&T.tryLoc<=h&&h<=T.finallyLoc&&(T=null);var E=T?T.completion:{};return E.type=t,E.arg=h,T?(this.method="next",this.next=T.finallyLoc,H):this.complete(E)},complete:function complete(t,h){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&h&&(this.next=h),H},finish:function finish(t){for(var h=this.tryEntries.length-1;h>=0;--h){var y=this.tryEntries[h];if(y.finallyLoc===t)return this.complete(y.completion,y.afterLoc),resetTryEntry(y),H}},catch:function _catch(t){for(var h=this.tryEntries.length-1;h>=0;--h){var y=this.tryEntries[h];if(y.tryLoc===t){var w=y.completion;if("throw"===w.type){var A=w.arg;resetTryEntry(y)}return A}}throw new Error("illegal catch attempt")},delegateYield:function delegateYield(t,y,w){return this.delegate={iterator:values(t),resultName:y,nextLoc:w},"next"===this.method&&(this.arg=h),H}},t}("object"===_typeof(t=y.nmd(t))?t.exports:{});try{regeneratorRuntime=w}catch(t){"object"===("undefined"==typeof globalThis?"undefined":_typeof(globalThis))?globalThis.regeneratorRuntime=w:Function("r","regeneratorRuntime = r")(w)}},t=>{var h;h="undefined"!=typeof window&&window["pdfjs-dist/build/pdf"]?window["pdfjs-dist/build/pdf"]:y(82098),t.exports=h},(t,h,y)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.NullL10n=void 0,h.fixupLangCode=function fixupLangCode(t){return T[null==t?void 0:t.toLowerCase()]||t},h.getL10nFallback=getL10nFallback;var w=function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}(y(2));function asyncGeneratorStep(t,h,y,w,A,T,E){try{var j=t[T](E),B=j.value}catch(t){return void y(t)}j.done?h(B):Promise.resolve(B).then(w,A)}function _asyncToGenerator(t){return function(){var h=this,y=arguments;return new Promise((function(w,A){var T=t.apply(h,y);function _next(t){asyncGeneratorStep(T,w,A,_next,_throw,"next",t)}function _throw(t){asyncGeneratorStep(T,w,A,_next,_throw,"throw",t)}_next(void 0)}))}}var A={of_pages:"of {{pagesCount}}",page_of_pages:"({{pageNumber}} of {{pagesCount}})",document_properties_kb:"{{size_kb}} KB ({{size_b}} bytes)",document_properties_mb:"{{size_mb}} MB ({{size_b}} bytes)",document_properties_date_string:"{{date}}, {{time}}",document_properties_page_size_unit_inches:"in",document_properties_page_size_unit_millimeters:"mm",document_properties_page_size_orientation_portrait:"portrait",document_properties_page_size_orientation_landscape:"landscape",document_properties_page_size_name_a3:"A3",document_properties_page_size_name_a4:"A4",document_properties_page_size_name_letter:"Letter",document_properties_page_size_name_legal:"Legal",document_properties_page_size_dimension_string:"{{width}} × {{height}} {{unit}} ({{orientation}})",document_properties_page_size_dimension_name_string:"{{width}} × {{height}} {{unit}} ({{name}}, {{orientation}})",document_properties_linearized_yes:"Yes",document_properties_linearized_no:"No",print_progress_percent:"{{progress}}%","toggle_sidebar.title":"Toggle Sidebar","toggle_sidebar_notification2.title":"Toggle Sidebar (document contains outline/attachments/layers)",additional_layers:"Additional Layers",page_landmark:"Page {{page}}",thumb_page_title:"Page {{page}}",thumb_page_canvas:"Thumbnail of Page {{page}}",find_reached_top:"Reached top of document, continued from bottom",find_reached_bottom:"Reached end of document, continued from top","find_match_count[one]":"{{current}} of {{total}} match","find_match_count[other]":"{{current}} of {{total}} matches","find_match_count_limit[one]":"More than {{limit}} match","find_match_count_limit[other]":"More than {{limit}} matches",find_not_found:"Phrase not found",error_version_info:"PDF.js v{{version}} (build: {{build}})",error_message:"Message: {{message}}",error_stack:"Stack: {{stack}}",error_file:"File: {{file}}",error_line:"Line: {{line}}",rendering_error:"An error occurred while rendering the page.",page_scale_width:"Page Width",page_scale_fit:"Page Fit",page_scale_auto:"Automatic Zoom",page_scale_actual:"Actual Size",page_scale_percent:"{{scale}}%",loading:"Loading…",loading_error:"An error occurred while loading the PDF.",invalid_file_error:"Invalid or corrupted PDF file.",missing_file_error:"Missing PDF file.",unexpected_response_error:"Unexpected server response.",printing_not_supported:"Warning: Printing is not fully supported by this browser.",printing_not_ready:"Warning: The PDF is not fully loaded for printing.",web_fonts_disabled:"Web fonts are disabled: unable to use embedded PDF fonts."};function getL10nFallback(t,h){switch(t){case"find_match_count":t="find_match_count[".concat(1===h.total?"one":"other","]");break;case"find_match_count_limit":t="find_match_count_limit[".concat(1===h.limit?"one":"other","]")}return A[t]||""}var T={en:"en-US",es:"es-ES",fy:"fy-NL",ga:"ga-IE",gu:"gu-IN",hi:"hi-IN",hy:"hy-AM",nb:"nb-NO",ne:"ne-NP",nn:"nn-NO",pa:"pa-IN",pt:"pt-PT",sv:"sv-SE",zh:"zh-CN"};function formatL10nValue(t,h){return h?t.replace(/\{\{\s*(\w+)\s*\}\}/g,(function(t,y){return y in h?h[y]:"{{"+y+"}}"})):t}var E={getLanguage:function getLanguage(){return _asyncToGenerator(w.default.mark((function _callee(){return w.default.wrap((function _callee$(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return","en-us");case 1:case"end":return t.stop()}}),_callee)})))()},getDirection:function getDirection(){return _asyncToGenerator(w.default.mark((function _callee2(){return w.default.wrap((function _callee2$(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return","ltr");case 1:case"end":return t.stop()}}),_callee2)})))()},get:function get(t){var h=arguments;return _asyncToGenerator(w.default.mark((function _callee3(){var y,A;return w.default.wrap((function _callee3$(w){for(;;)switch(w.prev=w.next){case 0:return y=h.length>1&&void 0!==h[1]?h[1]:null,A=h.length>2&&void 0!==h[2]?h[2]:getL10nFallback(t,y),w.abrupt("return",formatL10nValue(A,y));case 3:case"end":return w.stop()}}),_callee3)})))()},translate:function translate(t){return _asyncToGenerator(w.default.mark((function _callee4(){return w.default.wrap((function _callee4$(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),_callee4)})))()}};h.NullL10n=E},(t,h,y)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.SimpleLinkService=h.PDFLinkService=void 0;var w=function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}(y(2)),A=y(4),T=y(7);function asyncGeneratorStep(t,h,y,w,A,T,E){try{var j=t[T](E),B=j.value}catch(t){return void y(t)}j.done?h(B):Promise.resolve(B).then(w,A)}function _asyncToGenerator(t){return function(){var h=this,y=arguments;return new Promise((function(w,A){var T=t.apply(h,y);function _next(t){asyncGeneratorStep(T,w,A,_next,_throw,"next",t)}function _throw(t){asyncGeneratorStep(T,w,A,_next,_throw,"throw",t)}_next(void 0)}))}}function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _classCallCheck(t,h){if(!(t instanceof h))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,h){for(var y=0;y<h.length;y++){var w=h[y];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(t,(A=w.key,T=void 0,T=function _toPrimitive(t,h){if("object"!==_typeof(t)||null===t)return t;var y=t[Symbol.toPrimitive];if(void 0!==y){var w=y.call(t,h||"default");if("object"!==_typeof(w))return w;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===h?String:Number)(t)}(A,"string"),"symbol"===_typeof(T)?T:String(T)),w)}var A,T}function _createClass(t,h,y){return h&&_defineProperties(t.prototype,h),y&&_defineProperties(t,y),Object.defineProperty(t,"prototype",{writable:!1}),t}var E=function(){function PDFLinkService(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},h=t.eventBus,y=t.externalLinkTarget,w=void 0===y?null:y,A=t.externalLinkRel,T=void 0===A?null:A,E=t.ignoreDestinationZoom,j=void 0!==E&&E;_classCallCheck(this,PDFLinkService),this.eventBus=h,this.externalLinkTarget=w,this.externalLinkRel=T,this.externalLinkEnabled=!0,this._ignoreDestinationZoom=j,this.baseUrl=null,this.pdfDocument=null,this.pdfViewer=null,this.pdfHistory=null,this._pagesRefCache=null}var t;return _createClass(PDFLinkService,[{key:"setDocument",value:function setDocument(t){var h=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.baseUrl=h,this.pdfDocument=t,this._pagesRefCache=Object.create(null)}},{key:"setViewer",value:function setViewer(t){this.pdfViewer=t}},{key:"setHistory",value:function setHistory(t){this.pdfHistory=t}},{key:"pagesCount",get:function get(){return this.pdfDocument?this.pdfDocument.numPages:0}},{key:"page",get:function get(){return this.pdfViewer.currentPageNumber},set:function set(t){this.pdfViewer.currentPageNumber=t}},{key:"rotation",get:function get(){return this.pdfViewer.pagesRotation},set:function set(t){this.pdfViewer.pagesRotation=t}},{key:"_goToDestinationHelper",value:function _goToDestinationHelper(t){var h,y=this,w=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,A=arguments.length>2?arguments[2]:void 0,T=A[0];if("object"===_typeof(T)&&null!==T){if(null===(h=this._cachedPageNumber(T)))return void this.pdfDocument.getPageIndex(T).then((function(h){y.cachePageRef(h+1,T),y._goToDestinationHelper(t,w,A)})).catch((function(){console.error('PDFLinkService._goToDestinationHelper: "'.concat(T,'" is not ')+'a valid page reference, for dest="'.concat(t,'".'))}))}else{if(!Number.isInteger(T))return void console.error('PDFLinkService._goToDestinationHelper: "'.concat(T,'" is not ')+'a valid destination reference, for dest="'.concat(t,'".'));h=T+1}!h||h<1||h>this.pagesCount?console.error('PDFLinkService._goToDestinationHelper: "'.concat(h,'" is not ')+'a valid page number, for dest="'.concat(t,'".')):(this.pdfHistory&&(this.pdfHistory.pushCurrentPosition(),this.pdfHistory.push({namedDest:w,explicitDest:A,pageNumber:h})),this.pdfViewer.scrollPageIntoView({pageNumber:h,destArray:A,ignoreDestinationZoom:this._ignoreDestinationZoom}))}},{key:"goToDestination",value:(t=_asyncToGenerator(w.default.mark((function _callee(t){var h,y;return w.default.wrap((function _callee$(w){for(;;)switch(w.prev=w.next){case 0:if(this.pdfDocument){w.next=2;break}return w.abrupt("return");case 2:if("string"!=typeof t){w.next=9;break}return h=t,w.next=6,this.pdfDocument.getDestination(t);case 6:y=w.sent,w.next=13;break;case 9:return h=null,w.next=12,t;case 12:y=w.sent;case 13:if(Array.isArray(y)){w.next=16;break}return console.error('PDFLinkService.goToDestination: "'.concat(y,'" is not ')+'a valid destination array, for dest="'.concat(t,'".')),w.abrupt("return");case 16:this._goToDestinationHelper(t,h,y);case 17:case"end":return w.stop()}}),_callee,this)}))),function goToDestination(h){return t.apply(this,arguments)})},{key:"goToPage",value:function goToPage(t){if(this.pdfDocument){var h="string"==typeof t&&this.pdfViewer.pageLabelToPageNumber(t)||0|t;Number.isInteger(h)&&h>0&&h<=this.pagesCount?(this.pdfHistory&&(this.pdfHistory.pushCurrentPosition(),this.pdfHistory.pushPage(h)),this.pdfViewer.scrollPageIntoView({pageNumber:h})):console.error('PDFLinkService.goToPage: "'.concat(t,'" is not a valid page.'))}}},{key:"addLinkAttributes",value:function addLinkAttributes(t,h){var y=arguments.length>2&&void 0!==arguments[2]&&arguments[2];(0,A.addLinkAttributes)(t,{url:h,target:y?A.LinkTarget.BLANK:this.externalLinkTarget,rel:this.externalLinkRel,enabled:this.externalLinkEnabled})}},{key:"getDestinationHash",value:function getDestinationHash(t){if("string"==typeof t){if(t.length>0)return this.getAnchorUrl("#"+escape(t))}else if(Array.isArray(t)){var h=JSON.stringify(t);if(h.length>0)return this.getAnchorUrl("#"+escape(h))}return this.getAnchorUrl("")}},{key:"getAnchorUrl",value:function getAnchorUrl(t){return(this.baseUrl||"")+t}},{key:"setHash",value:function setHash(t){var h,y;if(this.pdfDocument)if(t.includes("=")){var w=(0,T.parseQueryString)(t);if(w.has("search")&&this.eventBus.dispatch("findfromurlhash",{source:this,query:w.get("search").replace(/"/g,""),phraseSearch:"true"===w.get("phrase")}),w.has("page")&&(h=0|w.get("page")||1),w.has("zoom")){var A=w.get("zoom").split(","),E=A[0],j=parseFloat(E);E.includes("Fit")?"Fit"===E||"FitB"===E?y=[null,{name:E}]:"FitH"===E||"FitBH"===E||"FitV"===E||"FitBV"===E?y=[null,{name:E},A.length>1?0|A[1]:null]:"FitR"===E?5!==A.length?console.error('PDFLinkService.setHash: Not enough parameters for "FitR".'):y=[null,{name:E},0|A[1],0|A[2],0|A[3],0|A[4]]:console.error('PDFLinkService.setHash: "'.concat(E,'" is not ')+"a valid zoom value."):y=[null,{name:"XYZ"},A.length>1?0|A[1]:null,A.length>2?0|A[2]:null,j?j/100:E]}y?this.pdfViewer.scrollPageIntoView({pageNumber:h||this.page,destArray:y,allowNegativeOffset:!0}):h&&(this.page=h),w.has("pagemode")&&this.eventBus.dispatch("pagemode",{source:this,mode:w.get("pagemode")}),w.has("nameddest")&&this.goToDestination(w.get("nameddest"))}else{y=unescape(t);try{y=JSON.parse(y),Array.isArray(y)||(y=y.toString())}catch(t){}if("string"==typeof y||function isValidExplicitDestination(t){if(!Array.isArray(t))return!1;var h=t.length;if(h<2)return!1;var y=t[0];if(!("object"===_typeof(y)&&Number.isInteger(y.num)&&Number.isInteger(y.gen)||Number.isInteger(y)&&y>=0))return!1;var w=t[1];if("object"!==_typeof(w)||"string"!=typeof w.name)return!1;var A=!0;switch(w.name){case"XYZ":if(5!==h)return!1;break;case"Fit":case"FitB":return 2===h;case"FitH":case"FitBH":case"FitV":case"FitBV":if(3!==h)return!1;break;case"FitR":if(6!==h)return!1;A=!1;break;default:return!1}for(var T=2;T<h;T++){var E=t[T];if(!("number"==typeof E||A&&null===E))return!1}return!0}(y))return void this.goToDestination(y);console.error('PDFLinkService.setHash: "'.concat(unescape(t),'" is not ')+"a valid destination.")}}},{key:"executeNamedAction",value:function executeNamedAction(t){var h,y;switch(t){case"GoBack":null===(h=this.pdfHistory)||void 0===h||h.back();break;case"GoForward":null===(y=this.pdfHistory)||void 0===y||y.forward();break;case"NextPage":this.pdfViewer.nextPage();break;case"PrevPage":this.pdfViewer.previousPage();break;case"LastPage":this.page=this.pagesCount;break;case"FirstPage":this.page=1}this.eventBus.dispatch("namedaction",{source:this,action:t})}},{key:"cachePageRef",value:function cachePageRef(t,h){if(h){var y=0===h.gen?"".concat(h.num,"R"):"".concat(h.num,"R").concat(h.gen);this._pagesRefCache[y]=t}}},{key:"_cachedPageNumber",value:function _cachedPageNumber(t){var h,y=0===t.gen?"".concat(t.num,"R"):"".concat(t.num,"R").concat(t.gen);return(null===(h=this._pagesRefCache)||void 0===h?void 0:h[y])||null}},{key:"isPageVisible",value:function isPageVisible(t){return this.pdfViewer.isPageVisible(t)}},{key:"isPageCached",value:function isPageCached(t){return this.pdfViewer.isPageCached(t)}}]),PDFLinkService}();h.PDFLinkService=E;var j=function(){function SimpleLinkService(){_classCallCheck(this,SimpleLinkService),this.externalLinkEnabled=!0}var t;return _createClass(SimpleLinkService,[{key:"pagesCount",get:function get(){return 0}},{key:"page",get:function get(){return 0},set:function set(t){}},{key:"rotation",get:function get(){return 0},set:function set(t){}},{key:"goToDestination",value:(t=_asyncToGenerator(w.default.mark((function _callee2(t){return w.default.wrap((function _callee2$(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),_callee2)}))),function goToDestination(h){return t.apply(this,arguments)})},{key:"goToPage",value:function goToPage(t){}},{key:"addLinkAttributes",value:function addLinkAttributes(t,h){(0,A.addLinkAttributes)(t,{url:h,enabled:this.externalLinkEnabled})}},{key:"getDestinationHash",value:function getDestinationHash(t){return"#"}},{key:"getAnchorUrl",value:function getAnchorUrl(t){return"#"}},{key:"setHash",value:function setHash(t){}},{key:"executeNamedAction",value:function executeNamedAction(t){}},{key:"cachePageRef",value:function cachePageRef(t,h){}},{key:"isPageVisible",value:function isPageVisible(t){return!0}},{key:"isPageCached",value:function isPageCached(t){return!0}}]),SimpleLinkService}();h.SimpleLinkService=j},(t,h)=>{function _setPrototypeOf(t,h){return _setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(t,h){return t.__proto__=h,t},_setPrototypeOf(t,h)}function _createSuper(t){var h=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var y,w=_getPrototypeOf(t);if(h){var A=_getPrototypeOf(this).constructor;y=Reflect.construct(w,arguments,A)}else y=w.apply(this,arguments);return function _possibleConstructorReturn(t,h){if(h&&("object"===_typeof(h)||"function"==typeof h))return h;if(void 0!==h)throw new TypeError("Derived constructors may only return object or undefined");return function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,y)}}function _getPrototypeOf(t){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)},_getPrototypeOf(t)}function _classCallCheck(t,h){if(!(t instanceof h))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,h){for(var y=0;y<h.length;y++){var w=h[y];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(t,(A=w.key,T=void 0,T=function _toPrimitive(t,h){if("object"!==_typeof(t)||null===t)return t;var y=t[Symbol.toPrimitive];if(void 0!==y){var w=y.call(t,h||"default");if("object"!==_typeof(w))return w;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===h?String:Number)(t)}(A,"string"),"symbol"===_typeof(T)?T:String(T)),w)}var A,T}function _createClass(t,h,y){return h&&_defineProperties(t.prototype,h),y&&_defineProperties(t,y),Object.defineProperty(t,"prototype",{writable:!1}),t}function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _slicedToArray(t,h){return function _arrayWithHoles(t){if(Array.isArray(t))return t}(t)||function _iterableToArrayLimit(t,h){var y=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=y){var w,A,T,E,j=[],B=!0,N=!1;try{if(T=(y=y.call(t)).next,0===h){if(Object(y)!==y)return;B=!1}else for(;!(B=(w=T.call(y)).done)&&(j.push(w.value),j.length!==h);B=!0);}catch(t){N=!0,A=t}finally{try{if(!B&&null!=y.return&&(E=y.return(),Object(E)!==E))return}finally{if(N)throw A}}return j}}(t,h)||_unsupportedIterableToArray(t,h)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _createForOfIteratorHelper(t,h){var y="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!y){if(Array.isArray(t)||(y=_unsupportedIterableToArray(t))||h&&t&&"number"==typeof t.length){y&&(t=y);var w=0,A=function F(){};return{s:A,n:function n(){return w>=t.length?{done:!0}:{done:!1,value:t[w++]}},e:function e(t){throw t},f:A}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var T,E=!0,j=!1;return{s:function s(){y=y.call(t)},n:function n(){var t=y.next();return E=t.done,t},e:function e(t){j=!0,T=t},f:function f(){try{E||null==y.return||y.return()}finally{if(j)throw T}}}}function _unsupportedIterableToArray(t,h){if(t){if("string"==typeof t)return _arrayLikeToArray(t,h);var y=Object.prototype.toString.call(t).slice(8,-1);return"Object"===y&&t.constructor&&(y=t.constructor.name),"Map"===y||"Set"===y?Array.from(t):"Arguments"===y||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(y)?_arrayLikeToArray(t,h):void 0}}function _arrayLikeToArray(t,h){(null==h||h>t.length)&&(h=t.length);for(var y=0,w=new Array(h);y<h;y++)w[y]=t[y];return w}Object.defineProperty(h,"__esModule",{value:!0}),h.animationStarted=h.WaitOnType=h.VERTICAL_PADDING=h.UNKNOWN_SCALE=h.TextLayerMode=h.SpreadMode=h.SidebarView=h.ScrollMode=h.SCROLLBAR_PADDING=h.RendererType=h.ProgressBar=h.PresentationModeState=h.MIN_SCALE=h.MAX_SCALE=h.MAX_AUTO_SCALE=h.EventBus=h.DEFAULT_SCALE_VALUE=h.DEFAULT_SCALE_DELTA=h.DEFAULT_SCALE=h.AutomationEventBus=h.AutoPrintRegExp=void 0,h.apiPageLayoutToViewerModes=function apiPageLayoutToViewerModes(t){var h=w.VERTICAL,y=A.NONE;switch(t){case"SinglePage":h=w.PAGE;break;case"OneColumn":break;case"TwoPageLeft":h=w.PAGE;case"TwoColumnLeft":y=A.ODD;break;case"TwoPageRight":h=w.PAGE;case"TwoColumnRight":y=A.EVEN}return{scrollMode:h,spreadMode:y}},h.apiPageModeToSidebarView=function apiPageModeToSidebarView(t){switch(t){case"UseNone":return y.NONE;case"UseThumbs":return y.THUMBS;case"UseOutlines":return y.OUTLINE;case"UseAttachments":return y.ATTACHMENTS;case"UseOC":return y.LAYERS}return y.NONE},h.approximateFraction=function approximateFraction(t){if(Math.floor(t)===t)return[t,1];var h=1/t;if(h>8)return[1,8];if(Math.floor(h)===h)return[1,h];var y,w=t>1?h:t,A=0,T=1,E=1,j=1;for(;;){var B=A+E,N=T+j;if(N>8)break;w<=B/N?(E=B,j=N):(A=B,T=N)}y=w-A/T<E/j-w?w===t?[A,T]:[T,A]:w===t?[E,j]:[j,E];return y},h.backtrackBeforeAllVisibleElements=backtrackBeforeAllVisibleElements,h.binarySearchFirstItem=binarySearchFirstItem,h.getActiveOrFocusedElement=function getActiveOrFocusedElement(){var t=document,h=t.activeElement||t.querySelector(":focus");for(;null!==(y=h)&&void 0!==y&&y.shadowRoot;){var y;h=(t=h.shadowRoot).activeElement||t.querySelector(":focus")}return h},h.getOutputScale=function getOutputScale(t){var h=window.devicePixelRatio||1,y=t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.backingStorePixelRatio||1,w=h/y;return{sx:w,sy:w,scaled:1!==w}},h.getPageSizeInches=function getPageSizeInches(t){var h=t.view,y=t.userUnit,w=t.rotate,A=_slicedToArray(h,4),T=A[0],E=A[1],j=A[2],B=A[3],N=w%180!=0,V=(j-T)/72*y,W=(B-E)/72*y;return{width:N?W:V,height:N?V:W}},h.getVisibleElements=function getVisibleElements(t){var h=t.scrollEl,y=t.views,w=t.sortByVisibility,A=void 0!==w&&w,T=t.horizontal,E=void 0!==T&&T,j=t.rtl,B=void 0!==j&&j,N=h.scrollTop,V=N+h.clientHeight,W=h.scrollLeft,H=W+h.clientWidth;var G=[],z=new Set,$=y.length,J=binarySearchFirstItem(y,E?function isElementNextAfterViewHorizontally(t){var h=t.div,y=h.offsetLeft+h.clientLeft,w=y+h.clientWidth;return B?y<H:w>W}:function isElementBottomAfterViewTop(t){var h=t.div;return h.offsetTop+h.clientTop+h.clientHeight>N});J>0&&J<$&&!E&&(J=backtrackBeforeAllVisibleElements(J,y,N));for(var X=E?H:-1,K=J;K<$;K++){var ne=y[K],ue=ne.div,pe=ue.offsetLeft+ue.clientLeft,me=ue.offsetTop+ue.clientTop,ge=ue.clientWidth,we=ue.clientHeight,Ce=pe+ge,ke=me+we;if(-1===X)ke>=V&&(X=ke);else if((E?pe:me)>X)break;if(!(ke<=N||me>=V||Ce<=W||pe>=H)){var Ie=Math.max(0,N-me)+Math.max(0,ke-V),Te=(ge-(Math.max(0,W-pe)+Math.max(0,Ce-H)))/ge,Ee=(we-Ie)/we*Te*100|0;G.push({id:ne.id,x:pe,y:me,view:ne,percent:Ee,widthPercent:100*Te|0}),z.add(ne.id)}}var Me=G[0],Be=G[G.length-1];A&&G.sort((function(t,h){var y=t.percent-h.percent;return Math.abs(y)>.001?-y:t.id-h.id}));return{first:Me,last:Be,views:G,ids:z}},h.isPortraitOrientation=function isPortraitOrientation(t){return t.width<=t.height},h.isValidRotation=function isValidRotation(t){return Number.isInteger(t)&&t%90==0},h.isValidScrollMode=function isValidScrollMode(t){return Number.isInteger(t)&&Object.values(w).includes(t)&&t!==w.UNKNOWN},h.isValidSpreadMode=function isValidSpreadMode(t){return Number.isInteger(t)&&Object.values(A).includes(t)&&t!==A.UNKNOWN},h.noContextMenuHandler=function noContextMenuHandler(t){t.preventDefault()},h.normalizeWheelEventDelta=function normalizeWheelEventDelta(t){var h=normalizeWheelEventDirection(t);0===t.deltaMode?h/=900:1===t.deltaMode&&(h/=30);return h},h.normalizeWheelEventDirection=normalizeWheelEventDirection,h.parseQueryString=function parseQueryString(t){var h,y=new Map,w=_createForOfIteratorHelper(new URLSearchParams(t));try{for(w.s();!(h=w.n()).done;){var A=_slicedToArray(h.value,2),T=A[0],E=A[1];y.set(T.toLowerCase(),E)}}catch(t){w.e(t)}finally{w.f()}return y},h.roundToDivide=function roundToDivide(t,h){var y=t%h;return 0===y?t:Math.round(t-y+h)},h.scrollIntoView=function scrollIntoView(t,h){var y=arguments.length>2&&void 0!==arguments[2]&&arguments[2],w=t.offsetParent;if(!w)return void console.error("offsetParent is not set -- cannot scroll");var A=t.offsetTop+t.clientTop,T=t.offsetLeft+t.clientLeft;for(;w.clientHeight===w.scrollHeight&&w.clientWidth===w.scrollWidth||y&&(w.classList.contains("markedContent")||"hidden"===getComputedStyle(w).overflow);)if(A+=w.offsetTop,T+=w.offsetLeft,!(w=w.offsetParent))return;h&&(void 0!==h.top&&(A+=h.top),void 0!==h.left&&(T+=h.left,w.scrollLeft=T));w.scrollTop=A},h.waitOnEventOrTimeout=function waitOnEventOrTimeout(t){var h=t.target,y=t.name,w=t.delay,A=void 0===w?0:w;return new Promise((function(t,w){if("object"!==_typeof(h)||!y||"string"!=typeof y||!(Number.isInteger(A)&&A>=0))throw new Error("waitOnEventOrTimeout - invalid parameters.");function handler(w){h instanceof j?h._off(y,E):h.removeEventListener(y,E),N&&clearTimeout(N),t(w)}var E=handler.bind(null,T.EVENT);h instanceof j?h._on(y,E):h.addEventListener(y,E);var B=handler.bind(null,T.TIMEOUT),N=setTimeout(B,A)}))},h.watchScroll=function watchScroll(t,h){var y=function debounceScroll(y){A||(A=window.requestAnimationFrame((function viewAreaElementScrolled(){A=null;var y=t.scrollLeft,T=w.lastX;y!==T&&(w.right=y>T),w.lastX=y;var E=t.scrollTop,j=w.lastY;E!==j&&(w.down=E>j),w.lastY=E,h(w)})))},w={right:!0,down:!0,lastX:t.scrollLeft,lastY:t.scrollTop,_eventHandler:y},A=null;return t.addEventListener("scroll",y,!0),w};h.DEFAULT_SCALE_VALUE="auto";h.DEFAULT_SCALE=1;h.DEFAULT_SCALE_DELTA=1.1;h.MIN_SCALE=.1;h.MAX_SCALE=10;h.UNKNOWN_SCALE=0;h.MAX_AUTO_SCALE=1.25;h.SCROLLBAR_PADDING=40;h.VERTICAL_PADDING=5;h.PresentationModeState={UNKNOWN:0,NORMAL:1,CHANGING:2,FULLSCREEN:3};var y={UNKNOWN:-1,NONE:0,THUMBS:1,OUTLINE:2,ATTACHMENTS:3,LAYERS:4};h.SidebarView=y;h.RendererType={CANVAS:"canvas",SVG:"svg"};h.TextLayerMode={DISABLE:0,ENABLE:1,ENABLE_ENHANCE:2};var w={UNKNOWN:-1,VERTICAL:0,HORIZONTAL:1,WRAPPED:2,PAGE:3};h.ScrollMode=w;var A={UNKNOWN:-1,NONE:0,ODD:1,EVEN:2};h.SpreadMode=A;function binarySearchFirstItem(t,h){var y=0,w=t.length-1;if(w<0||!h(t[w]))return t.length;if(h(t[y]))return y;for(;y<w;){var A=y+w>>1;h(t[A])?w=A:y=A+1}return y}function backtrackBeforeAllVisibleElements(t,h,y){if(t<2)return t;var w=h[t].div,A=w.offsetTop+w.clientTop;A>=y&&(A=(w=h[t-1].div).offsetTop+w.clientTop);for(var T=t-2;T>=0&&!((w=h[T].div).offsetTop+w.clientTop+w.clientHeight<=A);--T)t=T;return t}function normalizeWheelEventDirection(t){var h=Math.hypot(t.deltaX,t.deltaY),y=Math.atan2(t.deltaY,t.deltaX);return-.25*Math.PI<y&&y<.75*Math.PI&&(h=-h),h}h.AutoPrintRegExp=/\bprint\s*\(/;var T={EVENT:"event",TIMEOUT:"timeout"};h.WaitOnType=T;var E=new Promise((function(t){window.requestAnimationFrame(t)}));h.animationStarted=E;var j=function(){function EventBus(){_classCallCheck(this,EventBus),this._listeners=Object.create(null)}return _createClass(EventBus,[{key:"on",value:function on(t,h){var y=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this._on(t,h,{external:!0,once:null==y?void 0:y.once})}},{key:"off",value:function off(t,h){var y=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this._off(t,h,{external:!0,once:null==y?void 0:y.once})}},{key:"dispatch",value:function dispatch(t,h){var y=this._listeners[t];if(y&&0!==y.length){var w,A,T=_createForOfIteratorHelper(y.slice(0));try{for(T.s();!(A=T.n()).done;){var E=A.value,j=E.listener,B=E.external;E.once&&this._off(t,j),B?(w||(w=[])).push(j):j(h)}}catch(t){T.e(t)}finally{T.f()}if(w){var N,V=_createForOfIteratorHelper(w);try{for(V.s();!(N=V.n()).done;){(0,N.value)(h)}}catch(t){V.e(t)}finally{V.f()}w=null}}}},{key:"_on",value:function _on(t,h){var y,w=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;((y=this._listeners)[t]||(y[t]=[])).push({listener:h,external:!0===(null==w?void 0:w.external),once:!0===(null==w?void 0:w.once)})}},{key:"_off",value:function _off(t,h){var y=this._listeners[t];if(y)for(var w=0,A=y.length;w<A;w++)if(y[w].listener===h)return void y.splice(w,1)}}]),EventBus}();h.EventBus=j;var B=function(t){!function _inherits(t,h){if("function"!=typeof h&&null!==h)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(h&&h.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),h&&_setPrototypeOf(t,h)}(AutomationEventBus,t);var h=_createSuper(AutomationEventBus);function AutomationEventBus(){return _classCallCheck(this,AutomationEventBus),h.apply(this,arguments)}return _createClass(AutomationEventBus,[{key:"dispatch",value:function dispatch(t,h){throw new Error("Not implemented: AutomationEventBus.dispatch")}}]),AutomationEventBus}(j);h.AutomationEventBus=B;var N=function(){function ProgressBar(t){var h=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},y=h.height,w=h.width,A=h.units;_classCallCheck(this,ProgressBar),this.visible=!0,this.div=document.querySelector(t+" .progress"),this.bar=this.div.parentNode,this.height=y||100,this.width=w||100,this.units=A||"%",this.div.style.height=this.height+this.units,this.percent=0}return _createClass(ProgressBar,[{key:"_updateBar",value:function _updateBar(){if(this._indeterminate)return this.div.classList.add("indeterminate"),void(this.div.style.width=this.width+this.units);this.div.classList.remove("indeterminate");var t=this.width*this._percent/100;this.div.style.width=t+this.units}},{key:"percent",get:function get(){return this._percent},set:function set(t){this._indeterminate=isNaN(t),this._percent=function clamp(t,h,y){return Math.min(Math.max(t,h),y)}(t,0,100),this._updateBar()}},{key:"setWidth",value:function setWidth(t){if(t){var h=t.parentNode.offsetWidth-t.offsetWidth;if(h>0)document.documentElement.style.setProperty("--loadingBar-end-offset","".concat(h,"px"))}}},{key:"hide",value:function hide(){this.visible&&(this.visible=!1,this.bar.classList.add("hidden"))}},{key:"show",value:function show(){this.visible||(this.visible=!0,this.bar.classList.remove("hidden"))}}]),ProgressBar}();h.ProgressBar=N},(t,h)=>{function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _createForOfIteratorHelper(t,h){var y="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!y){if(Array.isArray(t)||(y=function _unsupportedIterableToArray(t,h){if(!t)return;if("string"==typeof t)return _arrayLikeToArray(t,h);var y=Object.prototype.toString.call(t).slice(8,-1);"Object"===y&&t.constructor&&(y=t.constructor.name);if("Map"===y||"Set"===y)return Array.from(t);if("Arguments"===y||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(y))return _arrayLikeToArray(t,h)}(t))||h&&t&&"number"==typeof t.length){y&&(t=y);var w=0,A=function F(){};return{s:A,n:function n(){return w>=t.length?{done:!0}:{done:!1,value:t[w++]}},e:function e(t){throw t},f:A}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var T,E=!0,j=!1;return{s:function s(){y=y.call(t)},n:function n(){var t=y.next();return E=t.done,t},e:function e(t){j=!0,T=t},f:function f(){try{E||null==y.return||y.return()}finally{if(j)throw T}}}}function _arrayLikeToArray(t,h){(null==h||h>t.length)&&(h=t.length);for(var y=0,w=new Array(h);y<h;y++)w[y]=t[y];return w}function _classCallCheck(t,h){if(!(t instanceof h))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,h){for(var y=0;y<h.length;y++){var w=h[y];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(t,(A=w.key,T=void 0,T=function _toPrimitive(t,h){if("object"!==_typeof(t)||null===t)return t;var y=t[Symbol.toPrimitive];if(void 0!==y){var w=y.call(t,h||"default");if("object"!==_typeof(w))return w;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===h?String:Number)(t)}(A,"string"),"symbol"===_typeof(T)?T:String(T)),w)}var A,T}function _createClass(t,h,y){return h&&_defineProperties(t.prototype,h),y&&_defineProperties(t,y),Object.defineProperty(t,"prototype",{writable:!1}),t}Object.defineProperty(h,"__esModule",{value:!0}),h.StructTreeLayerBuilder=h.DefaultStructTreeLayerFactory=void 0;var y={Document:null,DocumentFragment:null,Part:"group",Sect:"group",Div:"group",Aside:"note",NonStruct:"none",P:null,H:"heading",Title:null,FENote:"note",Sub:"group",Lbl:null,Span:null,Em:null,Strong:null,Link:"link",Annot:"note",Form:"form",Ruby:null,RB:null,RT:null,RP:null,Warichu:null,WT:null,WP:null,L:"list",LI:"listitem",LBody:null,Table:"table",TR:"row",TH:"columnheader",TD:"cell",THead:"columnheader",TBody:null,TFoot:null,Caption:null,Figure:"figure",Formula:null,Artifact:null},w=/^H(\d+)$/,A=function(){function StructTreeLayerBuilder(t){var h=t.pdfPage;_classCallCheck(this,StructTreeLayerBuilder),this.pdfPage=h}return _createClass(StructTreeLayerBuilder,[{key:"render",value:function render(t){return this._walk(t)}},{key:"_setAttributes",value:function _setAttributes(t,h){void 0!==t.alt&&h.setAttribute("aria-label",t.alt),void 0!==t.id&&h.setAttribute("aria-owns",t.id)}},{key:"_walk",value:function _walk(t){if(!t)return null;var h=document.createElement("span");if("role"in t){var A=t.role,T=A.match(w);T?(h.setAttribute("role","heading"),h.setAttribute("aria-level",T[1])):y[A]&&h.setAttribute("role",y[A])}if(this._setAttributes(t,h),t.children)if(1===t.children.length&&"id"in t.children[0])this._setAttributes(t.children[0],h);else{var E,j=_createForOfIteratorHelper(t.children);try{for(j.s();!(E=j.n()).done;){var B=E.value;h.appendChild(this._walk(B))}}catch(t){j.e(t)}finally{j.f()}}return h}}]),StructTreeLayerBuilder}();h.StructTreeLayerBuilder=A;var T=function(){function DefaultStructTreeLayerFactory(){_classCallCheck(this,DefaultStructTreeLayerFactory)}return _createClass(DefaultStructTreeLayerFactory,[{key:"createStructTreeLayerBuilder",value:function createStructTreeLayerBuilder(t){return new A({pdfPage:t})}}]),DefaultStructTreeLayerFactory}();h.DefaultStructTreeLayerFactory=T},(t,h,y)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.TextLayerBuilder=h.DefaultTextLayerFactory=void 0;var w=y(4);function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _classCallCheck(t,h){if(!(t instanceof h))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,h){for(var y=0;y<h.length;y++){var w=h[y];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(t,(A=w.key,T=void 0,T=function _toPrimitive(t,h){if("object"!==_typeof(t)||null===t)return t;var y=t[Symbol.toPrimitive];if(void 0!==y){var w=y.call(t,h||"default");if("object"!==_typeof(w))return w;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===h?String:Number)(t)}(A,"string"),"symbol"===_typeof(T)?T:String(T)),w)}var A,T}function _createClass(t,h,y){return h&&_defineProperties(t.prototype,h),y&&_defineProperties(t,y),Object.defineProperty(t,"prototype",{writable:!1}),t}var A=function(){function TextLayerBuilder(t){var h=t.textLayerDiv,y=t.eventBus,w=t.pageIndex,A=t.viewport,T=t.highlighter,E=void 0===T?null:T,j=t.enhanceTextSelection,B=void 0!==j&&j;_classCallCheck(this,TextLayerBuilder),this.textLayerDiv=h,this.eventBus=y,this.textContent=null,this.textContentItemsStr=[],this.textContentStream=null,this.renderingDone=!1,this.pageNumber=w+1,this.viewport=A,this.textDivs=[],this.textLayerRenderTask=null,this.highlighter=E,this.enhanceTextSelection=B,this._bindMouse()}return _createClass(TextLayerBuilder,[{key:"_finishRendering",value:function _finishRendering(){if(this.renderingDone=!0,!this.enhanceTextSelection){var t=document.createElement("div");t.className="endOfContent",this.textLayerDiv.appendChild(t)}this.eventBus.dispatch("textlayerrendered",{source:this,pageNumber:this.pageNumber,numTextDivs:this.textDivs.length})}},{key:"render",value:function render(){var t,h=this,y=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if((this.textContent||this.textContentStream)&&!this.renderingDone){this.cancel(),this.textDivs.length=0,null===(t=this.highlighter)||void 0===t||t.setTextMapping(this.textDivs,this.textContentItemsStr);var A=document.createDocumentFragment();this.textLayerRenderTask=(0,w.renderTextLayer)({textContent:this.textContent,textContentStream:this.textContentStream,container:A,viewport:this.viewport,textDivs:this.textDivs,textContentItemsStr:this.textContentItemsStr,timeout:y,enhanceTextSelection:this.enhanceTextSelection}),this.textLayerRenderTask.promise.then((function(){var t;h.textLayerDiv.appendChild(A),h._finishRendering(),null===(t=h.highlighter)||void 0===t||t.enable()}),(function(t){}))}}},{key:"cancel",value:function cancel(){var t;this.textLayerRenderTask&&(this.textLayerRenderTask.cancel(),this.textLayerRenderTask=null),null===(t=this.highlighter)||void 0===t||t.disable()}},{key:"setTextContentStream",value:function setTextContentStream(t){this.cancel(),this.textContentStream=t}},{key:"setTextContent",value:function setTextContent(t){this.cancel(),this.textContent=t}},{key:"_bindMouse",value:function _bindMouse(){var t=this,h=this.textLayerDiv,y=null;h.addEventListener("mousedown",(function(w){if(t.enhanceTextSelection&&t.textLayerRenderTask)return t.textLayerRenderTask.expandTextDivs(!0),void(y&&(clearTimeout(y),y=null));var A=h.querySelector(".endOfContent");if(A){var T=w.target!==h;if(T=T&&"none"!==window.getComputedStyle(A).getPropertyValue("-moz-user-select")){var E=h.getBoundingClientRect(),j=Math.max(0,(w.pageY-E.top)/E.height);A.style.top=(100*j).toFixed(2)+"%"}A.classList.add("active")}})),h.addEventListener("mouseup",(function(){if(t.enhanceTextSelection&&t.textLayerRenderTask)y=setTimeout((function(){t.textLayerRenderTask&&t.textLayerRenderTask.expandTextDivs(!1),y=null}),300);else{var w=h.querySelector(".endOfContent");w&&(w.style.top="",w.classList.remove("active"))}}))}}]),TextLayerBuilder}();h.TextLayerBuilder=A;var T=function(){function DefaultTextLayerFactory(){_classCallCheck(this,DefaultTextLayerFactory)}return _createClass(DefaultTextLayerFactory,[{key:"createTextLayerBuilder",value:function createTextLayerBuilder(t,h,y){return new A({textLayerDiv:t,pageIndex:h,viewport:y,enhanceTextSelection:arguments.length>3&&void 0!==arguments[3]&&arguments[3],eventBus:arguments.length>4?arguments[4]:void 0,highlighter:arguments.length>5?arguments[5]:void 0})}}]),DefaultTextLayerFactory}();h.DefaultTextLayerFactory=T},(t,h,y)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.XfaLayerBuilder=h.DefaultXfaLayerFactory=void 0;var w=y(6),A=y(4);function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _classCallCheck(t,h){if(!(t instanceof h))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,h){for(var y=0;y<h.length;y++){var w=h[y];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(t,(A=w.key,T=void 0,T=function _toPrimitive(t,h){if("object"!==_typeof(t)||null===t)return t;var y=t[Symbol.toPrimitive];if(void 0!==y){var w=y.call(t,h||"default");if("object"!==_typeof(w))return w;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===h?String:Number)(t)}(A,"string"),"symbol"===_typeof(T)?T:String(T)),w)}var A,T}function _createClass(t,h,y){return h&&_defineProperties(t.prototype,h),y&&_defineProperties(t,y),Object.defineProperty(t,"prototype",{writable:!1}),t}var T=function(){function XfaLayerBuilder(t){var h=t.pageDiv,y=t.pdfPage,w=t.annotationStorage,A=t.linkService,T=t.xfaHtml;_classCallCheck(this,XfaLayerBuilder),this.pageDiv=h,this.pdfPage=y,this.annotationStorage=w,this.linkService=A,this.xfaHtml=T,this.div=null,this._cancelled=!1}return _createClass(XfaLayerBuilder,[{key:"render",value:function render(t){var h=this,y=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"display";if("print"===y){var w={viewport:t.clone({dontFlip:!0}),div:this.div,xfa:this.xfaHtml,page:null,annotationStorage:this.annotationStorage,linkService:this.linkService,intent:y},T=document.createElement("div");this.pageDiv.appendChild(T),w.div=T;var E=A.XfaLayer.render(w);return Promise.resolve(E)}return this.pdfPage.getXfa().then((function(w){if(h._cancelled||!w)return{textDivs:[]};var T={viewport:t.clone({dontFlip:!0}),div:h.div,xfa:w,page:h.pdfPage,annotationStorage:h.annotationStorage,linkService:h.linkService,intent:y};return h.div?A.XfaLayer.update(T):(h.div=document.createElement("div"),h.pageDiv.appendChild(h.div),T.div=h.div,A.XfaLayer.render(T))})).catch((function(t){console.error(t)}))}},{key:"cancel",value:function cancel(){this._cancelled=!0}},{key:"hide",value:function hide(){this.div&&(this.div.hidden=!0)}}]),XfaLayerBuilder}();h.XfaLayerBuilder=T;var E=function(){function DefaultXfaLayerFactory(){_classCallCheck(this,DefaultXfaLayerFactory)}return _createClass(DefaultXfaLayerFactory,[{key:"createXfaLayerBuilder",value:function createXfaLayerBuilder(t,h){var y=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return new T({pageDiv:t,pdfPage:h,annotationStorage:arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,linkService:new w.SimpleLinkService,xfaHtml:y})}}]),DefaultXfaLayerFactory}();h.DefaultXfaLayerFactory=E},(t,h,y)=>{function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}Object.defineProperty(h,"__esModule",{value:!0}),h.PDFViewer=h.PDFSinglePageViewer=void 0;var w=y(7),A=y(12);function _defineProperties(t,h){for(var y=0;y<h.length;y++){var w=h[y];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(t,(A=w.key,T=void 0,T=function _toPrimitive(t,h){if("object"!==_typeof(t)||null===t)return t;var y=t[Symbol.toPrimitive];if(void 0!==y){var w=y.call(t,h||"default");if("object"!==_typeof(w))return w;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===h?String:Number)(t)}(A,"string"),"symbol"===_typeof(T)?T:String(T)),w)}var A,T}function _get(){return _get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function _get(t,h,y){var w=function _superPropBase(t,h){for(;!Object.prototype.hasOwnProperty.call(t,h)&&null!==(t=_getPrototypeOf(t)););return t}(t,h);if(w){var A=Object.getOwnPropertyDescriptor(w,h);return A.get?A.get.call(arguments.length<3?t:y):A.value}},_get.apply(this,arguments)}function _classCallCheck(t,h){if(!(t instanceof h))throw new TypeError("Cannot call a class as a function")}function _inherits(t,h){if("function"!=typeof h&&null!==h)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(h&&h.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),h&&_setPrototypeOf(t,h)}function _setPrototypeOf(t,h){return _setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(t,h){return t.__proto__=h,t},_setPrototypeOf(t,h)}function _createSuper(t){var h=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var y,w=_getPrototypeOf(t);if(h){var A=_getPrototypeOf(this).constructor;y=Reflect.construct(w,arguments,A)}else y=w.apply(this,arguments);return function _possibleConstructorReturn(t,h){if(h&&("object"===_typeof(h)||"function"==typeof h))return h;if(void 0!==h)throw new TypeError("Derived constructors may only return object or undefined");return function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,y)}}function _getPrototypeOf(t){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)},_getPrototypeOf(t)}var T=function(t){_inherits(PDFViewer,t);var h=_createSuper(PDFViewer);function PDFViewer(){return _classCallCheck(this,PDFViewer),h.apply(this,arguments)}return PDFViewer}(A.BaseViewer);h.PDFViewer=T;var E=function(t){_inherits(PDFSinglePageViewer,t);var h=_createSuper(PDFSinglePageViewer);function PDFSinglePageViewer(){return _classCallCheck(this,PDFSinglePageViewer),h.apply(this,arguments)}return function _createClass(t,h,y){return h&&_defineProperties(t.prototype,h),y&&_defineProperties(t,y),Object.defineProperty(t,"prototype",{writable:!1}),t}(PDFSinglePageViewer,[{key:"_resetView",value:function _resetView(){_get(_getPrototypeOf(PDFSinglePageViewer.prototype),"_resetView",this).call(this),this._scrollMode=w.ScrollMode.PAGE,this._spreadMode=w.SpreadMode.NONE}},{key:"scrollMode",set:function set(t){}},{key:"_updateScrollMode",value:function _updateScrollMode(){}},{key:"spreadMode",set:function set(t){}},{key:"_updateSpreadMode",value:function _updateSpreadMode(){}}]),PDFSinglePageViewer}(A.BaseViewer);h.PDFSinglePageViewer=E},(t,h,y)=>{function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}Object.defineProperty(h,"__esModule",{value:!0}),h.PDFPageViewBuffer=h.BaseViewer=void 0;var w,A=y(4),T=y(7),E=y(13),j=y(1),B=y(5),N=y(14),V=y(6),W=y(8),H=y(16),G=y(9),z=y(10);function _createForOfIteratorHelper(t,h){var y="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!y){if(Array.isArray(t)||(y=function _unsupportedIterableToArray(t,h){if(!t)return;if("string"==typeof t)return _arrayLikeToArray(t,h);var y=Object.prototype.toString.call(t).slice(8,-1);"Object"===y&&t.constructor&&(y=t.constructor.name);if("Map"===y||"Set"===y)return Array.from(t);if("Arguments"===y||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(y))return _arrayLikeToArray(t,h)}(t))||h&&t&&"number"==typeof t.length){y&&(t=y);var w=0,A=function F(){};return{s:A,n:function n(){return w>=t.length?{done:!0}:{done:!1,value:t[w++]}},e:function e(t){throw t},f:A}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var T,E=!0,j=!1;return{s:function s(){y=y.call(t)},n:function n(){var t=y.next();return E=t.done,t},e:function e(t){j=!0,T=t},f:function f(){try{E||null==y.return||y.return()}finally{if(j)throw T}}}}function _arrayLikeToArray(t,h){(null==h||h>t.length)&&(h=t.length);for(var y=0,w=new Array(h);y<h;y++)w[y]=t[y];return w}function _classCallCheck(t,h){if(!(t instanceof h))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,h){for(var y=0;y<h.length;y++){var w=h[y];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(t,(A=w.key,T=void 0,T=function _toPrimitive(t,h){if("object"!==_typeof(t)||null===t)return t;var y=t[Symbol.toPrimitive];if(void 0!==y){var w=y.call(t,h||"default");if("object"!==_typeof(w))return w;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===h?String:Number)(t)}(A,"string"),"symbol"===_typeof(T)?T:String(T)),w)}var A,T}function _createClass(t,h,y){return h&&_defineProperties(t.prototype,h),y&&_defineProperties(t,y),Object.defineProperty(t,"prototype",{writable:!1}),t}function _classPrivateMethodInitSpec(t,h){_checkPrivateRedeclaration(t,h),h.add(t)}function _classPrivateFieldInitSpec(t,h,y){_checkPrivateRedeclaration(t,h),h.set(t,y)}function _checkPrivateRedeclaration(t,h){if(h.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function _classPrivateMethodGet(t,h,y){if(!h.has(t))throw new TypeError("attempted to get private field on non-instance");return y}function _classPrivateFieldGet(t,h){return function _classApplyDescriptorGet(t,h){if(h.get)return h.get.call(t);return h.value}(t,_classExtractFieldDescriptor(t,h,"get"))}function _classPrivateFieldSet(t,h,y){return function _classApplyDescriptorSet(t,h,y){if(h.set)h.set.call(t,y);else{if(!h.writable)throw new TypeError("attempted to set read only private field");h.value=y}}(t,_classExtractFieldDescriptor(t,h,"set"),y),y}function _classExtractFieldDescriptor(t,h,y){if(!h.has(t))throw new TypeError("attempted to "+y+" private field on non-instance");return h.get(t)}var $=new WeakMap,J=new WeakMap,X=new WeakSet;w=Symbol.iterator;var K=function(){function PDFPageViewBuffer(t){_classCallCheck(this,PDFPageViewBuffer),_classPrivateMethodInitSpec(this,X),_classPrivateFieldInitSpec(this,$,{writable:!0,value:new Set}),_classPrivateFieldInitSpec(this,J,{writable:!0,value:0}),_classPrivateFieldSet(this,J,t)}return _createClass(PDFPageViewBuffer,[{key:"push",value:function push(t){var h=_classPrivateFieldGet(this,$);h.has(t)&&h.delete(t),h.add(t),h.size>_classPrivateFieldGet(this,J)&&_classPrivateMethodGet(this,X,_destroyFirstView2).call(this)}},{key:"resize",value:function resize(t){var h=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;_classPrivateFieldSet(this,J,t);var y=_classPrivateFieldGet(this,$);if(h){var w,A=y.size,T=1,E=_createForOfIteratorHelper(y);try{for(E.s();!(w=E.n()).done;){var j=w.value;if(h.has(j.id)&&(y.delete(j),y.add(j)),++T>A)break}}catch(t){E.e(t)}finally{E.f()}}for(;y.size>_classPrivateFieldGet(this,J);)_classPrivateMethodGet(this,X,_destroyFirstView2).call(this)}},{key:"has",value:function has(t){return _classPrivateFieldGet(this,$).has(t)}},{key:w,value:function value(){return _classPrivateFieldGet(this,$).keys()}}]),PDFPageViewBuffer}();function _destroyFirstView2(){var t=_classPrivateFieldGet(this,$).keys().next().value;null==t||t.destroy(),_classPrivateFieldGet(this,$).delete(t)}h.PDFPageViewBuffer=K;var ne=new WeakMap,ue=new WeakMap,pe=new WeakSet,me=new WeakSet,ge=new WeakSet,we=function(){function BaseViewer(t){var h,y,w,j,N=this;if(_classCallCheck(this,BaseViewer),_classPrivateMethodInitSpec(this,ge),_classPrivateMethodInitSpec(this,me),_classPrivateMethodInitSpec(this,pe),_classPrivateFieldInitSpec(this,ne,{writable:!0,value:null}),_classPrivateFieldInitSpec(this,ue,{writable:!0,value:null}),this.constructor===BaseViewer)throw new Error("Cannot initialize BaseViewer.");var W="2.12.223";if(A.version!==W)throw new Error('The API version "'.concat(A.version,'" does not match the Viewer version "').concat(W,'".'));if(this.container=t.container,this.viewer=t.viewer||t.container.firstElementChild,"DIV"!==(null===(h=this.container)||void 0===h?void 0:h.tagName.toUpperCase())||"DIV"!==(null===(y=this.viewer)||void 0===y?void 0:y.tagName.toUpperCase()))throw new Error("Invalid `container` and/or `viewer` option.");if(this.container.offsetParent&&"absolute"!==getComputedStyle(this.container).position)throw new Error("The `container` must be absolutely positioned.");this.eventBus=t.eventBus,this.linkService=t.linkService||new V.SimpleLinkService,this.downloadManager=t.downloadManager||null,this.findController=t.findController||null,this._scriptingManager=t.scriptingManager||null,this.removePageBorders=t.removePageBorders||!1,this.textLayerMode=null!==(w=t.textLayerMode)&&void 0!==w?w:T.TextLayerMode.ENABLE,this._annotationMode=null!==(j=t.annotationMode)&&void 0!==j?j:A.AnnotationMode.ENABLE_FORMS,this.imageResourcesPath=t.imageResourcesPath||"",this.enablePrintAutoRotate=t.enablePrintAutoRotate||!1,this.renderer=t.renderer||T.RendererType.CANVAS,this.useOnlyCssZoom=t.useOnlyCssZoom||!1,this.maxCanvasPixels=t.maxCanvasPixels,this.l10n=t.l10n||B.NullL10n,this.defaultRenderingQueue=!t.renderingQueue,this.defaultRenderingQueue?(this.renderingQueue=new E.PDFRenderingQueue,this.renderingQueue.setViewer(this)):this.renderingQueue=t.renderingQueue,this._doc=document.documentElement,this.scroll=(0,T.watchScroll)(this.container,this._scrollUpdate.bind(this)),this.presentationModeState=T.PresentationModeState.UNKNOWN,this._onBeforeDraw=this._onAfterDraw=null,this._resetView(),this.removePageBorders&&this.viewer.classList.add("removePageBorders"),Promise.resolve().then((function(){N.eventBus.dispatch("baseviewerinit",{source:N})}))}return _createClass(BaseViewer,[{key:"pagesCount",get:function get(){return this._pages.length}},{key:"getPageView",value:function getPageView(t){return this._pages[t]}},{key:"pageViewsReady",get:function get(){return!!this._pagesCapability.settled&&this._pages.every((function(t){return null==t?void 0:t.pdfPage}))}},{key:"renderForms",get:function get(){return this._annotationMode===A.AnnotationMode.ENABLE_FORMS}},{key:"enableScripting",get:function get(){return!!this._scriptingManager}},{key:"currentPageNumber",get:function get(){return this._currentPageNumber},set:function set(t){if(!Number.isInteger(t))throw new Error("Invalid page number.");this.pdfDocument&&(this._setCurrentPageNumber(t,!0)||console.error('currentPageNumber: "'.concat(t,'" is not a valid page.')))}},{key:"_setCurrentPageNumber",value:function _setCurrentPageNumber(t){var h,y,w=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this._currentPageNumber===t)return w&&this._resetCurrentPageView(),!0;if(!(0<t&&t<=this.pagesCount))return!1;var A=this._currentPageNumber;return this._currentPageNumber=t,this.eventBus.dispatch("pagechanging",{source:this,pageNumber:t,pageLabel:null!==(h=null===(y=this._pageLabels)||void 0===y?void 0:y[t-1])&&void 0!==h?h:null,previous:A}),w&&this._resetCurrentPageView(),!0}},{key:"currentPageLabel",get:function get(){var t,h;return null!==(t=null===(h=this._pageLabels)||void 0===h?void 0:h[this._currentPageNumber-1])&&void 0!==t?t:null},set:function set(t){if(this.pdfDocument){var h=0|t;if(this._pageLabels){var y=this._pageLabels.indexOf(t);y>=0&&(h=y+1)}this._setCurrentPageNumber(h,!0)||console.error('currentPageLabel: "'.concat(t,'" is not a valid page.'))}}},{key:"currentScale",get:function get(){return this._currentScale!==T.UNKNOWN_SCALE?this._currentScale:T.DEFAULT_SCALE},set:function set(t){if(isNaN(t))throw new Error("Invalid numeric scale.");this.pdfDocument&&this._setScale(t,!1)}},{key:"currentScaleValue",get:function get(){return this._currentScaleValue},set:function set(t){this.pdfDocument&&this._setScale(t,!1)}},{key:"pagesRotation",get:function get(){return this._pagesRotation},set:function set(t){if(!(0,T.isValidRotation)(t))throw new Error("Invalid pages rotation angle.");if(this.pdfDocument&&((t%=360)<0&&(t+=360),this._pagesRotation!==t)){this._pagesRotation=t;var h,y=this._currentPageNumber,w={rotation:t},A=_createForOfIteratorHelper(this._pages);try{for(A.s();!(h=A.n()).done;){h.value.update(w)}}catch(t){A.e(t)}finally{A.f()}this._currentScaleValue&&this._setScale(this._currentScaleValue,!0),this.eventBus.dispatch("rotationchanging",{source:this,pagesRotation:t,pageNumber:y}),this.defaultRenderingQueue&&this.update()}}},{key:"firstPagePromise",get:function get(){return this.pdfDocument?this._firstPageCapability.promise:null}},{key:"onePageRendered",get:function get(){return this.pdfDocument?this._onePageRenderedCapability.promise:null}},{key:"pagesPromise",get:function get(){return this.pdfDocument?this._pagesCapability.promise:null}},{key:"_onePageRenderedOrForceFetch",value:function _onePageRenderedOrForceFetch(){return this.container.offsetParent&&0!==this._getVisiblePages().views.length?this._onePageRenderedCapability.promise:Promise.resolve()}},{key:"setDocument",value:function setDocument(t){var h=this;if(this.pdfDocument&&(this.eventBus.dispatch("pagesdestroy",{source:this}),this._cancelRendering(),this._resetView(),this.findController&&this.findController.setDocument(null),this._scriptingManager&&this._scriptingManager.setDocument(null)),this.pdfDocument=t,t){var y=t.isPureXfa,w=t.numPages,E=t.getPage(1),j=t.getOptionalContentConfig();this._pagesCapability.promise.then((function(){h.eventBus.dispatch("pagesloaded",{source:h,pagesCount:w})})),this._onBeforeDraw=function(t){var y=h._pages[t.pageNumber-1];y&&_classPrivateFieldGet(h,ne).push(y)},this.eventBus._on("pagerender",this._onBeforeDraw),this._onAfterDraw=function(t){t.cssTransform||h._onePageRenderedCapability.settled||(h._onePageRenderedCapability.resolve({timestamp:t.timestamp}),h.eventBus._off("pagerendered",h._onAfterDraw),h._onAfterDraw=null)},this.eventBus._on("pagerendered",this._onAfterDraw),E.then((function(E){h._firstPageCapability.resolve(E),h._optionalContentConfigPromise=j;for(var B=h._scrollMode===T.ScrollMode.PAGE?null:h.viewer,V=h.currentScale,W=E.getViewport({scale:V*A.PixelsPerInch.PDF_TO_CSS_UNITS}),H=h.textLayerMode===T.TextLayerMode.DISABLE||y?null:h,G=h._annotationMode!==A.AnnotationMode.DISABLE?h:null,z=y?h:null,$=1;$<=w;++$){var J=new N.PDFPageView({container:B,eventBus:h.eventBus,id:$,scale:V,defaultViewport:W.clone(),optionalContentConfigPromise:j,renderingQueue:h.renderingQueue,textLayerFactory:H,textLayerMode:h.textLayerMode,annotationLayerFactory:G,annotationMode:h._annotationMode,xfaLayerFactory:z,textHighlighterFactory:h,structTreeLayerFactory:h,imageResourcesPath:h.imageResourcesPath,renderer:h.renderer,useOnlyCssZoom:h.useOnlyCssZoom,maxCanvasPixels:h.maxCanvasPixels,l10n:h.l10n});h._pages.push(J)}var X=h._pages[0];X&&(X.setPdfPage(E),h.linkService.cachePageRef(1,E.ref)),h._scrollMode===T.ScrollMode.PAGE?_classPrivateMethodGet(h,pe,_ensurePageViewVisible2).call(h):h._spreadMode!==T.SpreadMode.NONE&&h._updateSpreadMode(),h._onePageRenderedOrForceFetch().then((function(){if(h.findController&&h.findController.setDocument(t),h._scriptingManager&&h._scriptingManager.setDocument(t),t.loadingParams.disableAutoFetch||w>7500)h._pagesCapability.resolve();else{var y=w-1;if(y<=0)h._pagesCapability.resolve();else for(var A=function _loop(w){t.getPage(w).then((function(t){var A=h._pages[w-1];A.pdfPage||A.setPdfPage(t),h.linkService.cachePageRef(w,t.ref),0==--y&&h._pagesCapability.resolve()}),(function(t){console.error("Unable to get page ".concat(w," to initialize viewer"),t),0==--y&&h._pagesCapability.resolve()}))},T=2;T<=w;++T)A(T)}})),h.eventBus.dispatch("pagesinit",{source:h}),h.defaultRenderingQueue&&h.update()})).catch((function(t){console.error("Unable to initialize viewer",t)}))}}},{key:"setPageLabels",value:function setPageLabels(t){if(this.pdfDocument){t?Array.isArray(t)&&this.pdfDocument.numPages===t.length?this._pageLabels=t:(this._pageLabels=null,console.error("setPageLabels: Invalid page labels.")):this._pageLabels=null;for(var h=0,y=this._pages.length;h<y;h++){var w,A;this._pages[h].setPageLabel(null!==(w=null===(A=this._pageLabels)||void 0===A?void 0:A[h])&&void 0!==w?w:null)}}}},{key:"_resetView",value:function _resetView(){this._pages=[],this._currentPageNumber=1,this._currentScale=T.UNKNOWN_SCALE,this._currentScaleValue=null,this._pageLabels=null,_classPrivateFieldSet(this,ne,new K(10)),this._location=null,this._pagesRotation=0,this._optionalContentConfigPromise=null,this._pagesRequests=new WeakMap,this._firstPageCapability=(0,A.createPromiseCapability)(),this._onePageRenderedCapability=(0,A.createPromiseCapability)(),this._pagesCapability=(0,A.createPromiseCapability)(),this._scrollMode=T.ScrollMode.VERTICAL,this._previousScrollMode=T.ScrollMode.UNKNOWN,this._spreadMode=T.SpreadMode.NONE,_classPrivateFieldSet(this,ue,{previousPageNumber:1,scrollDown:!0,pages:[]}),this._onBeforeDraw&&(this.eventBus._off("pagerender",this._onBeforeDraw),this._onBeforeDraw=null),this._onAfterDraw&&(this.eventBus._off("pagerendered",this._onAfterDraw),this._onAfterDraw=null),this.viewer.textContent="",this._updateScrollMode()}},{key:"_scrollUpdate",value:function _scrollUpdate(){0!==this.pagesCount&&this.update()}},{key:"_scrollIntoView",value:function _scrollIntoView(t){var h=t.pageDiv,y=t.pageSpot,w=void 0===y?null:y,A=t.pageNumber,E=void 0===A?null:A;if(this._scrollMode===T.ScrollMode.PAGE&&(E&&this._setCurrentPageNumber(E),_classPrivateMethodGet(this,pe,_ensurePageViewVisible2).call(this),this.update()),!w&&!this.isInPresentationMode){var j=h.offsetLeft+h.clientLeft,B=j+h.clientWidth,N=this.container,V=N.scrollLeft,W=N.clientWidth;(this._scrollMode===T.ScrollMode.HORIZONTAL||j<V||B>V+W)&&(w={left:0,top:0})}(0,T.scrollIntoView)(h,w)}},{key:"_setScaleUpdatePages",value:function _setScaleUpdatePages(t,h){var y=arguments.length>2&&void 0!==arguments[2]&&arguments[2],w=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(this._currentScaleValue=h.toString(),function isSameScale(t,h){return h===t||Math.abs(h-t)<1e-15}(this._currentScale,t))w&&this.eventBus.dispatch("scalechanging",{source:this,scale:t,presetValue:h});else{this._doc.style.setProperty("--zoom-factor",t),this._doc.style.setProperty("--viewport-scale-factor",t*A.PixelsPerInch.PDF_TO_CSS_UNITS);var T,E={scale:t},j=_createForOfIteratorHelper(this._pages);try{for(j.s();!(T=j.n()).done;){T.value.update(E)}}catch(t){j.e(t)}finally{j.f()}if(this._currentScale=t,!y){var B,N=this._currentPageNumber;!this._location||this.isInPresentationMode||this.isChangingPresentationMode||(N=this._location.pageNumber,B=[null,{name:"XYZ"},this._location.left,this._location.top,null]),this.scrollPageIntoView({pageNumber:N,destArray:B,allowNegativeOffset:!0})}this.eventBus.dispatch("scalechanging",{source:this,scale:t,presetValue:w?h:void 0}),this.defaultRenderingQueue&&this.update()}}},{key:"_pageWidthScaleFactor",get:function get(){return this._spreadMode!==T.SpreadMode.NONE&&this._scrollMode!==T.ScrollMode.HORIZONTAL?2:1}},{key:"_setScale",value:function _setScale(t){var h=arguments.length>1&&void 0!==arguments[1]&&arguments[1],y=parseFloat(t);if(y>0)this._setScaleUpdatePages(y,t,h,!1);else{var w=this._pages[this._currentPageNumber-1];if(!w)return;var A=this.isInPresentationMode||this.removePageBorders,E=A?0:T.SCROLLBAR_PADDING,j=A?0:T.VERTICAL_PADDING;if(!A&&this._scrollMode===T.ScrollMode.HORIZONTAL){var B=[j,E];E=B[0],j=B[1]}var N=(this.container.clientWidth-E)/w.width*w.scale/this._pageWidthScaleFactor,V=(this.container.clientHeight-j)/w.height*w.scale;switch(t){case"page-actual":y=1;break;case"page-width":y=N;break;case"page-height":y=V;break;case"page-fit":y=Math.min(N,V);break;case"auto":var W=(0,T.isPortraitOrientation)(w)?N:Math.min(V,N);y=Math.min(T.MAX_AUTO_SCALE,W);break;default:return void console.error('_setScale: "'.concat(t,'" is an unknown zoom value.'))}this._setScaleUpdatePages(y,t,h,!0)}}},{key:"_resetCurrentPageView",value:function _resetCurrentPageView(){this.isInPresentationMode&&this._setScale(this._currentScaleValue,!0);var t=this._pages[this._currentPageNumber-1];this._scrollIntoView({pageDiv:t.div})}},{key:"pageLabelToPageNumber",value:function pageLabelToPageNumber(t){if(!this._pageLabels)return null;var h=this._pageLabels.indexOf(t);return h<0?null:h+1}},{key:"scrollPageIntoView",value:function scrollPageIntoView(t){var h=t.pageNumber,y=t.destArray,w=void 0===y?null:y,E=t.allowNegativeOffset,j=void 0!==E&&E,B=t.ignoreDestinationZoom,N=void 0!==B&&B;if(this.pdfDocument){var V=Number.isInteger(h)&&this._pages[h-1];if(V)if(!this.isInPresentationMode&&w){var W,H,G=0,z=0,$=0,J=0,X=V.rotation%180!=0,K=(X?V.height:V.width)/V.scale/A.PixelsPerInch.PDF_TO_CSS_UNITS,ne=(X?V.width:V.height)/V.scale/A.PixelsPerInch.PDF_TO_CSS_UNITS,ue=0;switch(w[1].name){case"XYZ":G=w[2],z=w[3],ue=w[4],G=null!==G?G:0,z=null!==z?z:ne;break;case"Fit":case"FitB":ue="page-fit";break;case"FitH":case"FitBH":ue="page-width",null===(z=w[2])&&this._location?(G=this._location.left,z=this._location.top):"number"!=typeof z&&(z=ne);break;case"FitV":case"FitBV":G=w[2],$=K,J=ne,ue="page-height";break;case"FitR":G=w[2],z=w[3],$=w[4]-G,J=w[5]-z;var pe=this.removePageBorders?0:T.SCROLLBAR_PADDING,me=this.removePageBorders?0:T.VERTICAL_PADDING;W=(this.container.clientWidth-pe)/$/A.PixelsPerInch.PDF_TO_CSS_UNITS,H=(this.container.clientHeight-me)/J/A.PixelsPerInch.PDF_TO_CSS_UNITS,ue=Math.min(Math.abs(W),Math.abs(H));break;default:return void console.error('scrollPageIntoView: "'.concat(w[1].name,'" is not a valid destination type.'))}if(N||(ue&&ue!==this._currentScale?this.currentScaleValue=ue:this._currentScale===T.UNKNOWN_SCALE&&(this.currentScaleValue=T.DEFAULT_SCALE_VALUE)),"page-fit"!==ue||w[4]){var ge=[V.viewport.convertToViewportPoint(G,z),V.viewport.convertToViewportPoint(G+$,z+J)],we=Math.min(ge[0][0],ge[1][0]),Ce=Math.min(ge[0][1],ge[1][1]);j||(we=Math.max(we,0),Ce=Math.max(Ce,0)),this._scrollIntoView({pageDiv:V.div,pageSpot:{left:we,top:Ce},pageNumber:h})}else this._scrollIntoView({pageDiv:V.div,pageNumber:h})}else this._setCurrentPageNumber(h,!0);else console.error('scrollPageIntoView: "'.concat(h,'" is not a valid pageNumber parameter.'))}}},{key:"_updateLocation",value:function _updateLocation(t){var h=this._currentScale,y=this._currentScaleValue,w=parseFloat(y)===h?Math.round(1e4*h)/100:y,A=t.id,T="#page="+A;T+="&zoom="+w;var E=this._pages[A-1],j=this.container,B=E.getPagePoint(j.scrollLeft-t.x,j.scrollTop-t.y),N=Math.round(B[0]),V=Math.round(B[1]);T+=","+N+","+V,this._location={pageNumber:A,scale:w,top:V,left:N,rotation:this._pagesRotation,pdfOpenParams:T}}},{key:"update",value:function update(){var t=this._getVisiblePages(),h=t.views,y=h.length;if(0!==y){var w=Math.max(10,2*y+1);if(_classPrivateFieldGet(this,ne).resize(w,t.ids),this.renderingQueue.renderHighestPriority(t),!this.isInPresentationMode){var A,E=this._spreadMode===T.SpreadMode.NONE&&(this._scrollMode===T.ScrollMode.PAGE||this._scrollMode===T.ScrollMode.VERTICAL),j=this._currentPageNumber,B=!1,N=_createForOfIteratorHelper(h);try{for(N.s();!(A=N.n()).done;){var V=A.value;if(V.percent<100)break;if(V.id===j&&E){B=!0;break}}}catch(t){N.e(t)}finally{N.f()}B||(j=h[0].id),this._setCurrentPageNumber(j)}this._updateLocation(t.first),this.eventBus.dispatch("updateviewarea",{source:this,location:this._location})}}},{key:"containsElement",value:function containsElement(t){return this.container.contains(t)}},{key:"focus",value:function focus(){this.container.focus()}},{key:"_isContainerRtl",get:function get(){return"rtl"===getComputedStyle(this.container).direction}},{key:"isInPresentationMode",get:function get(){return this.presentationModeState===T.PresentationModeState.FULLSCREEN}},{key:"isChangingPresentationMode",get:function get(){return this.presentationModeState===T.PresentationModeState.CHANGING}},{key:"isHorizontalScrollbarEnabled",get:function get(){return!this.isInPresentationMode&&this.container.scrollWidth>this.container.clientWidth}},{key:"isVerticalScrollbarEnabled",get:function get(){return!this.isInPresentationMode&&this.container.scrollHeight>this.container.clientHeight}},{key:"_getCurrentVisiblePage",value:function _getCurrentVisiblePage(){if(!this.pagesCount)return{views:[]};var t=this._pages[this._currentPageNumber-1],h=t.div,y={id:t.id,x:h.offsetLeft+h.clientLeft,y:h.offsetTop+h.clientTop,view:t};return{first:y,last:y,views:[y],ids:new Set([t.id])}}},{key:"_getVisiblePages",value:function _getVisiblePages(){if(this.isInPresentationMode)return this._getCurrentVisiblePage();var t=this._scrollMode===T.ScrollMode.PAGE?_classPrivateFieldGet(this,ue).pages:this._pages,h=this._scrollMode===T.ScrollMode.HORIZONTAL,y=h&&this._isContainerRtl;return(0,T.getVisibleElements)({scrollEl:this.container,views:t,sortByVisibility:!0,horizontal:h,rtl:y})}},{key:"isPageVisible",value:function isPageVisible(t){return!!this.pdfDocument&&(Number.isInteger(t)&&t>0&&t<=this.pagesCount?this._getVisiblePages().ids.has(t):(console.error('isPageVisible: "'.concat(t,'" is not a valid page.')),!1))}},{key:"isPageCached",value:function isPageCached(t){if(!this.pdfDocument)return!1;if(!(Number.isInteger(t)&&t>0&&t<=this.pagesCount))return console.error('isPageCached: "'.concat(t,'" is not a valid page.')),!1;var h=this._pages[t-1];return _classPrivateFieldGet(this,ne).has(h)}},{key:"cleanup",value:function cleanup(){for(var t=0,h=this._pages.length;t<h;t++)this._pages[t]&&this._pages[t].renderingState!==E.RenderingStates.FINISHED&&this._pages[t].reset()}},{key:"_cancelRendering",value:function _cancelRendering(){for(var t=0,h=this._pages.length;t<h;t++)this._pages[t]&&this._pages[t].cancelRendering()}},{key:"_ensurePdfPageLoaded",value:function _ensurePdfPageLoaded(t){var h=this;if(t.pdfPage)return Promise.resolve(t.pdfPage);if(this._pagesRequests.has(t))return this._pagesRequests.get(t);var y=this.pdfDocument.getPage(t.id).then((function(y){return t.pdfPage||t.setPdfPage(y),h._pagesRequests.delete(t),y})).catch((function(y){console.error("Unable to get page for page view",y),h._pagesRequests.delete(t)}));return this._pagesRequests.set(t,y),y}},{key:"forceRendering",value:function forceRendering(t){var h=this,y=t||this._getVisiblePages(),w=_classPrivateMethodGet(this,me,_getScrollAhead2).call(this,y),A=this._spreadMode!==T.SpreadMode.NONE&&this._scrollMode!==T.ScrollMode.HORIZONTAL,E=this.renderingQueue.getHighestPriority(y,this._pages,w,A);return _classPrivateMethodGet(this,ge,_toggleLoadingIconSpinner2).call(this,y.ids),!!E&&(this._ensurePdfPageLoaded(E).then((function(){h.renderingQueue.renderView(E)})),!0)}},{key:"createTextLayerBuilder",value:function createTextLayerBuilder(t,h,y){var w=arguments.length>3&&void 0!==arguments[3]&&arguments[3],A=arguments.length>4?arguments[4]:void 0,T=arguments.length>5?arguments[5]:void 0;return new G.TextLayerBuilder({textLayerDiv:t,eventBus:A,pageIndex:h,viewport:y,enhanceTextSelection:!this.isInPresentationMode&&w,highlighter:T})}},{key:"createTextHighlighter",value:function createTextHighlighter(t,h){return new H.TextHighlighter({eventBus:h,pageIndex:t,findController:this.isInPresentationMode?null:this.findController})}},{key:"createAnnotationLayerBuilder",value:function createAnnotationLayerBuilder(t,h){var y,w,A,T,E=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,N=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",V=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],W=arguments.length>5&&void 0!==arguments[5]?arguments[5]:B.NullL10n,H=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,G=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null,z=arguments.length>8&&void 0!==arguments[8]?arguments[8]:null,$=arguments.length>9&&void 0!==arguments[9]?arguments[9]:null,J=arguments.length>10&&void 0!==arguments[10]?arguments[10]:null;return new j.AnnotationLayerBuilder({pageDiv:t,pdfPage:h,annotationStorage:E||(null===(y=this.pdfDocument)||void 0===y?void 0:y.annotationStorage),imageResourcesPath:N,renderForms:V,linkService:this.linkService,downloadManager:this.downloadManager,l10n:W,enableScripting:null!=H?H:this.enableScripting,hasJSActionsPromise:G||(null===(w=this.pdfDocument)||void 0===w?void 0:w.hasJSActions()),fieldObjectsPromise:$||(null===(A=this.pdfDocument)||void 0===A?void 0:A.getFieldObjects()),mouseState:z||(null===(T=this._scriptingManager)||void 0===T?void 0:T.mouseState),annotationCanvasMap:J})}},{key:"createXfaLayerBuilder",value:function createXfaLayerBuilder(t,h){var y,w=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return new z.XfaLayerBuilder({pageDiv:t,pdfPage:h,annotationStorage:w||(null===(y=this.pdfDocument)||void 0===y?void 0:y.annotationStorage),linkService:this.linkService})}},{key:"createStructTreeLayerBuilder",value:function createStructTreeLayerBuilder(t){return new W.StructTreeLayerBuilder({pdfPage:t})}},{key:"hasEqualPageSizes",get:function get(){for(var t=this._pages[0],h=1,y=this._pages.length;h<y;++h){var w=this._pages[h];if(w.width!==t.width||w.height!==t.height)return!1}return!0}},{key:"getPagesOverview",value:function getPagesOverview(){var t=this;return this._pages.map((function(h){var y=h.pdfPage.getViewport({scale:1});return!t.enablePrintAutoRotate||(0,T.isPortraitOrientation)(y)?{width:y.width,height:y.height,rotation:y.rotation}:{width:y.height,height:y.width,rotation:(y.rotation-90)%360}}))}},{key:"optionalContentConfigPromise",get:function get(){return this.pdfDocument?this._optionalContentConfigPromise?this._optionalContentConfigPromise:this.pdfDocument.getOptionalContentConfig():Promise.resolve(null)},set:function set(t){if(!(t instanceof Promise))throw new Error("Invalid optionalContentConfigPromise: ".concat(t));if(this.pdfDocument&&this._optionalContentConfigPromise){this._optionalContentConfigPromise=t;var h,y={optionalContentConfigPromise:t},w=_createForOfIteratorHelper(this._pages);try{for(w.s();!(h=w.n()).done;){h.value.update(y)}}catch(t){w.e(t)}finally{w.f()}this.update(),this.eventBus.dispatch("optionalcontentconfigchanged",{source:this,promise:t})}}},{key:"scrollMode",get:function get(){return this._scrollMode},set:function set(t){if(this._scrollMode!==t){if(!(0,T.isValidScrollMode)(t))throw new Error("Invalid scroll mode: ".concat(t));this._previousScrollMode=this._scrollMode,this._scrollMode=t,this.eventBus.dispatch("scrollmodechanged",{source:this,mode:t}),this._updateScrollMode(this._currentPageNumber)}}},{key:"_updateScrollMode",value:function _updateScrollMode(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,h=this._scrollMode,y=this.viewer;y.classList.toggle("scrollHorizontal",h===T.ScrollMode.HORIZONTAL),y.classList.toggle("scrollWrapped",h===T.ScrollMode.WRAPPED),this.pdfDocument&&t&&(h===T.ScrollMode.PAGE?_classPrivateMethodGet(this,pe,_ensurePageViewVisible2).call(this):this._previousScrollMode===T.ScrollMode.PAGE&&this._updateSpreadMode(),this._currentScaleValue&&isNaN(this._currentScaleValue)&&this._setScale(this._currentScaleValue,!0),this._setCurrentPageNumber(t,!0),this.update())}},{key:"spreadMode",get:function get(){return this._spreadMode},set:function set(t){if(this._spreadMode!==t){if(!(0,T.isValidSpreadMode)(t))throw new Error("Invalid spread mode: ".concat(t));this._spreadMode=t,this.eventBus.dispatch("spreadmodechanged",{source:this,mode:t}),this._updateSpreadMode(this._currentPageNumber)}}},{key:"_updateSpreadMode",value:function _updateSpreadMode(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(this.pdfDocument){var h=this.viewer,y=this._pages;if(this._scrollMode===T.ScrollMode.PAGE)_classPrivateMethodGet(this,pe,_ensurePageViewVisible2).call(this);else if(h.textContent="",this._spreadMode===T.SpreadMode.NONE)for(var w=0,A=y.length;w<A;++w)h.appendChild(y[w].div);else for(var E=this._spreadMode-1,j=null,B=0,N=y.length;B<N;++B)null===j?((j=document.createElement("div")).className="spread",h.appendChild(j)):B%2===E&&(j=j.cloneNode(!1),h.appendChild(j)),j.appendChild(y[B].div);t&&(this._currentScaleValue&&isNaN(this._currentScaleValue)&&this._setScale(this._currentScaleValue,!0),this._setCurrentPageNumber(t,!0),this.update())}}},{key:"_getPageAdvance",value:function _getPageAdvance(t){var h=arguments.length>1&&void 0!==arguments[1]&&arguments[1];switch(this._scrollMode){case T.ScrollMode.WRAPPED:var y,w=this._getVisiblePages().views,A=new Map,E=_createForOfIteratorHelper(w);try{for(E.s();!(y=E.n()).done;){var j=y.value,B=j.id,N=j.y,V=j.percent,W=j.widthPercent;if(!(0===V||W<100)){var H=A.get(N);H||A.set(N,H||(H=[])),H.push(B)}}}catch(t){E.e(t)}finally{E.f()}var G,z=_createForOfIteratorHelper(A.values());try{for(z.s();!(G=z.n()).done;){var $=G.value,J=$.indexOf(t);if(-1!==J){var X=$.length;if(1===X)break;if(h)for(var K=J-1;K>=0;K--){var ne=$[K],ue=$[K+1]-1;if(ne<ue)return t-ue}else for(var pe=J+1,me=X;pe<me;pe++){var ge=$[pe],we=$[pe-1]+1;if(ge>we)return we-t}if(h){var Ce=$[0];if(Ce<t)return t-Ce+1}else{var ke=$[X-1];if(ke>t)return ke-t+1}break}}}catch(t){z.e(t)}finally{z.f()}break;case T.ScrollMode.HORIZONTAL:break;case T.ScrollMode.PAGE:case T.ScrollMode.VERTICAL:if(this._spreadMode===T.SpreadMode.NONE)break;var Ie=this._spreadMode-1;if(h&&t%2!==Ie)break;if(!h&&t%2===Ie)break;var Te,Ee=h?t-1:t+1,Me=_createForOfIteratorHelper(this._getVisiblePages().views);try{for(Me.s();!(Te=Me.n()).done;){var Be=Te.value,Ne=Be.id,Ze=Be.percent,et=Be.widthPercent;if(Ne===Ee){if(Ze>0&&100===et)return 2;break}}}catch(t){Me.e(t)}finally{Me.f()}}return 1}},{key:"nextPage",value:function nextPage(){var t=this._currentPageNumber,h=this.pagesCount;if(t>=h)return!1;var y=this._getPageAdvance(t,!1)||1;return this.currentPageNumber=Math.min(t+y,h),!0}},{key:"previousPage",value:function previousPage(){var t=this._currentPageNumber;if(t<=1)return!1;var h=this._getPageAdvance(t,!0)||1;return this.currentPageNumber=Math.max(t-h,1),!0}},{key:"increaseScale",value:function increaseScale(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,h=this._currentScale;do{h=(h*T.DEFAULT_SCALE_DELTA).toFixed(2),h=Math.ceil(10*h)/10,h=Math.min(T.MAX_SCALE,h)}while(--t>0&&h<T.MAX_SCALE);this.currentScaleValue=h}},{key:"decreaseScale",value:function decreaseScale(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,h=this._currentScale;do{h=(h/T.DEFAULT_SCALE_DELTA).toFixed(2),h=Math.floor(10*h)/10,h=Math.max(T.MIN_SCALE,h)}while(--t>0&&h>T.MIN_SCALE);this.currentScaleValue=h}}]),BaseViewer}();function _ensurePageViewVisible2(){if(this._scrollMode!==T.ScrollMode.PAGE)throw new Error("#ensurePageViewVisible: Invalid scrollMode value.");var t=this._currentPageNumber,h=_classPrivateFieldGet(this,ue),y=this.viewer;if(y.textContent="",h.pages.length=0,this._spreadMode===T.SpreadMode.NONE){var w=this._pages[t-1];y.appendChild(w.div),h.pages.push(w)}else{var A=new Set,E=this._spreadMode-1;t%2!==E?(A.add(t-1),A.add(t)):(A.add(t-2),A.add(t-1));var j,B=null,N=_createForOfIteratorHelper(A);try{for(N.s();!(j=N.n()).done;){var V=j.value,W=this._pages[V];W&&(null===B?((B=document.createElement("div")).className="spread",y.appendChild(B)):V%2===E&&(B=B.cloneNode(!1),y.appendChild(B)),B.appendChild(W.div),h.pages.push(W))}}catch(t){N.e(t)}finally{N.f()}}h.scrollDown=t>=h.previousPageNumber,h.previousPageNumber=t}function _getScrollAhead2(t){var h,y;if(1===(null===(h=t.first)||void 0===h?void 0:h.id))return!0;if((null===(y=t.last)||void 0===y?void 0:y.id)===this.pagesCount)return!1;switch(this._scrollMode){case T.ScrollMode.PAGE:return _classPrivateFieldGet(this,ue).scrollDown;case T.ScrollMode.HORIZONTAL:return this.scroll.right}return this.scroll.down}function _toggleLoadingIconSpinner2(t){var h,y=_createForOfIteratorHelper(t);try{for(y.s();!(h=y.n()).done;){var w=h.value,A=this._pages[w-1];null==A||A.toggleLoadingIconSpinner(!0)}}catch(t){y.e(t)}finally{y.f()}var T,E=_createForOfIteratorHelper(_classPrivateFieldGet(this,ne));try{for(E.s();!(T=E.n()).done;){var j=T.value;t.has(j.id)||j.toggleLoadingIconSpinner(!1)}}catch(t){E.e(t)}finally{E.f()}}h.BaseViewer=we},(t,h,y)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.RenderingStates=h.PDFRenderingQueue=void 0;var w=y(4);function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _defineProperties(t,h){for(var y=0;y<h.length;y++){var w=h[y];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(t,(A=w.key,T=void 0,T=function _toPrimitive(t,h){if("object"!==_typeof(t)||null===t)return t;var y=t[Symbol.toPrimitive];if(void 0!==y){var w=y.call(t,h||"default");if("object"!==_typeof(w))return w;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===h?String:Number)(t)}(A,"string"),"symbol"===_typeof(T)?T:String(T)),w)}var A,T}var A={INITIAL:0,RUNNING:1,PAUSED:2,FINISHED:3};h.RenderingStates=A;var T=function(){function PDFRenderingQueue(){!function _classCallCheck(t,h){if(!(t instanceof h))throw new TypeError("Cannot call a class as a function")}(this,PDFRenderingQueue),this.pdfViewer=null,this.pdfThumbnailViewer=null,this.onIdle=null,this.highestPriorityPage=null,this.idleTimeout=null,this.printing=!1,this.isThumbnailViewEnabled=!1}return function _createClass(t,h,y){return h&&_defineProperties(t.prototype,h),y&&_defineProperties(t,y),Object.defineProperty(t,"prototype",{writable:!1}),t}(PDFRenderingQueue,[{key:"setViewer",value:function setViewer(t){this.pdfViewer=t}},{key:"setThumbnailViewer",value:function setThumbnailViewer(t){this.pdfThumbnailViewer=t}},{key:"isHighestPriority",value:function isHighestPriority(t){return this.highestPriorityPage===t.renderingId}},{key:"hasViewer",value:function hasViewer(){return!!this.pdfViewer}},{key:"renderHighestPriority",value:function renderHighestPriority(t){var h;this.idleTimeout&&(clearTimeout(this.idleTimeout),this.idleTimeout=null),this.pdfViewer.forceRendering(t)||this.isThumbnailViewEnabled&&null!==(h=this.pdfThumbnailViewer)&&void 0!==h&&h.forceRendering()||this.printing||this.onIdle&&(this.idleTimeout=setTimeout(this.onIdle.bind(this),3e4))}},{key:"getHighestPriority",value:function getHighestPriority(t,h,y){var w=arguments.length>3&&void 0!==arguments[3]&&arguments[3],A=t.views,T=A.length;if(0===T)return null;for(var E=0;E<T;E++){var j=A[E].view;if(!this.isViewFinished(j))return j}var B=t.first.id,N=t.last.id;if(N-B+1>T)for(var V=t.ids,W=1,H=N-B;W<H;W++){var G=y?B+W:N-W;if(!V.has(G)){var z=h[G-1];if(!this.isViewFinished(z))return z}}var $=y?N:B-2,J=h[$];return J&&!this.isViewFinished(J)||w&&(J=h[$+=y?1:-1])&&!this.isViewFinished(J)?J:null}},{key:"isViewFinished",value:function isViewFinished(t){return t.renderingState===A.FINISHED}},{key:"renderView",value:function renderView(t){var h=this;switch(t.renderingState){case A.FINISHED:return!1;case A.PAUSED:this.highestPriorityPage=t.renderingId,t.resume();break;case A.RUNNING:this.highestPriorityPage=t.renderingId;break;case A.INITIAL:this.highestPriorityPage=t.renderingId,t.draw().finally((function(){h.renderHighestPriority()})).catch((function(t){t instanceof w.RenderingCancelledException||console.error('renderView: "'.concat(t,'"'))}))}return!0}}]),PDFRenderingQueue}();h.PDFRenderingQueue=T},(t,h,y)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.PDFPageView=void 0;var w=function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}(y(2)),A=y(4),T=y(7),E=y(15),j=y(5),B=y(13);function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _createForOfIteratorHelper(t,h){var y="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!y){if(Array.isArray(t)||(y=function _unsupportedIterableToArray(t,h){if(!t)return;if("string"==typeof t)return _arrayLikeToArray(t,h);var y=Object.prototype.toString.call(t).slice(8,-1);"Object"===y&&t.constructor&&(y=t.constructor.name);if("Map"===y||"Set"===y)return Array.from(t);if("Arguments"===y||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(y))return _arrayLikeToArray(t,h)}(t))||h&&t&&"number"==typeof t.length){y&&(t=y);var w=0,A=function F(){};return{s:A,n:function n(){return w>=t.length?{done:!0}:{done:!1,value:t[w++]}},e:function e(t){throw t},f:A}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var T,E=!0,j=!1;return{s:function s(){y=y.call(t)},n:function n(){var t=y.next();return E=t.done,t},e:function e(t){j=!0,T=t},f:function f(){try{E||null==y.return||y.return()}finally{if(j)throw T}}}}function _arrayLikeToArray(t,h){(null==h||h>t.length)&&(h=t.length);for(var y=0,w=new Array(h);y<h;y++)w[y]=t[y];return w}function asyncGeneratorStep(t,h,y,w,A,T,E){try{var j=t[T](E),B=j.value}catch(t){return void y(t)}j.done?h(B):Promise.resolve(B).then(w,A)}function _asyncToGenerator(t){return function(){var h=this,y=arguments;return new Promise((function(w,A){var T=t.apply(h,y);function _next(t){asyncGeneratorStep(T,w,A,_next,_throw,"next",t)}function _throw(t){asyncGeneratorStep(T,w,A,_next,_throw,"throw",t)}_next(void 0)}))}}function _defineProperties(t,h){for(var y=0;y<h.length;y++){var w=h[y];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(t,(A=w.key,T=void 0,T=function _toPrimitive(t,h){if("object"!==_typeof(t)||null===t)return t;var y=t[Symbol.toPrimitive];if(void 0!==y){var w=y.call(t,h||"default");if("object"!==_typeof(w))return w;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===h?String:Number)(t)}(A,"string"),"symbol"===_typeof(T)?T:String(T)),w)}var A,T}var N=E.compatibilityParams.maxCanvasPixels||16777216,V=function(){function PDFPageView(t){var h,y,w,E;!function _classCallCheck(t,h){if(!(t instanceof h))throw new TypeError("Cannot call a class as a function")}(this,PDFPageView);var V=t.container,W=t.defaultViewport;this.id=t.id,this.renderingId="page"+this.id,this.pdfPage=null,this.pageLabel=null,this.rotation=0,this.scale=t.scale||T.DEFAULT_SCALE,this.viewport=W,this.pdfPageRotate=W.rotation,this._optionalContentConfigPromise=t.optionalContentConfigPromise||null,this.hasRestrictedScaling=!1,this.textLayerMode=null!==(h=t.textLayerMode)&&void 0!==h?h:T.TextLayerMode.ENABLE,this._annotationMode=null!==(y=t.annotationMode)&&void 0!==y?y:A.AnnotationMode.ENABLE_FORMS,this.imageResourcesPath=t.imageResourcesPath||"",this.useOnlyCssZoom=t.useOnlyCssZoom||!1,this.maxCanvasPixels=t.maxCanvasPixels||N,this.eventBus=t.eventBus,this.renderingQueue=t.renderingQueue,this.textLayerFactory=t.textLayerFactory,this.annotationLayerFactory=t.annotationLayerFactory,this.xfaLayerFactory=t.xfaLayerFactory,this.textHighlighter=null===(w=t.textHighlighterFactory)||void 0===w?void 0:w.createTextHighlighter(this.id-1,this.eventBus),this.structTreeLayerFactory=t.structTreeLayerFactory,this.renderer=t.renderer||T.RendererType.CANVAS,this.l10n=t.l10n||j.NullL10n,this.paintTask=null,this.paintedViewportMap=new WeakMap,this.renderingState=B.RenderingStates.INITIAL,this.resume=null,this._renderError=null,this._isStandalone=!(null!==(E=this.renderingQueue)&&void 0!==E&&E.hasViewer()),this._annotationCanvasMap=null,this.annotationLayer=null,this.textLayer=null,this.zoomLayer=null,this.xfaLayer=null,this.structTreeLayer=null;var H=document.createElement("div");H.className="page",H.style.width=Math.floor(this.viewport.width)+"px",H.style.height=Math.floor(this.viewport.height)+"px",H.setAttribute("data-page-number",this.id),H.setAttribute("role","region"),this.l10n.get("page_landmark",{page:this.id}).then((function(t){H.setAttribute("aria-label",t)})),this.div=H,null==V||V.appendChild(H)}var t,h,y;return function _createClass(t,h,y){return h&&_defineProperties(t.prototype,h),y&&_defineProperties(t,y),Object.defineProperty(t,"prototype",{writable:!1}),t}(PDFPageView,[{key:"setPdfPage",value:function setPdfPage(t){this.pdfPage=t,this.pdfPageRotate=t.rotate;var h=(this.rotation+this.pdfPageRotate)%360;this.viewport=t.getViewport({scale:this.scale*A.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:h}),this.reset()}},{key:"destroy",value:function destroy(){this.reset(),this.pdfPage&&this.pdfPage.cleanup()}},{key:"_renderAnnotationLayer",value:(y=_asyncToGenerator(w.default.mark((function _callee(){var t;return w.default.wrap((function _callee$(h){for(;;)switch(h.prev=h.next){case 0:return t=null,h.prev=1,h.next=4,this.annotationLayer.render(this.viewport,"display");case 4:h.next=9;break;case 6:h.prev=6,h.t0=h.catch(1),t=h.t0;case 9:return h.prev=9,this.eventBus.dispatch("annotationlayerrendered",{source:this,pageNumber:this.id,error:t}),h.finish(9);case 12:case"end":return h.stop()}}),_callee,this,[[1,6,9,12]])}))),function _renderAnnotationLayer(){return y.apply(this,arguments)})},{key:"_renderXfaLayer",value:(h=_asyncToGenerator(w.default.mark((function _callee2(){var t,h;return w.default.wrap((function _callee2$(y){for(;;)switch(y.prev=y.next){case 0:return t=null,y.prev=1,y.next=4,this.xfaLayer.render(this.viewport,"display");case 4:h=y.sent,this.textHighlighter&&this._buildXfaTextContentItems(h.textDivs),y.next=11;break;case 8:y.prev=8,y.t0=y.catch(1),t=y.t0;case 11:return y.prev=11,this.eventBus.dispatch("xfalayerrendered",{source:this,pageNumber:this.id,error:t}),y.finish(11);case 14:case"end":return y.stop()}}),_callee2,this,[[1,8,11,14]])}))),function _renderXfaLayer(){return h.apply(this,arguments)})},{key:"_buildXfaTextContentItems",value:(t=_asyncToGenerator(w.default.mark((function _callee3(t){var h,y,A,T,E;return w.default.wrap((function _callee3$(w){for(;;)switch(w.prev=w.next){case 0:return w.next=2,this.pdfPage.getTextContent();case 2:h=w.sent,y=[],A=_createForOfIteratorHelper(h.items);try{for(A.s();!(T=A.n()).done;)E=T.value,y.push(E.str)}catch(t){A.e(t)}finally{A.f()}this.textHighlighter.setTextMapping(t,y),this.textHighlighter.enable();case 8:case"end":return w.stop()}}),_callee3,this)}))),function _buildXfaTextContentItems(h){return t.apply(this,arguments)})},{key:"_resetZoomLayer",value:function _resetZoomLayer(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.zoomLayer){var h=this.zoomLayer.firstChild;this.paintedViewportMap.delete(h),h.width=0,h.height=0,t&&this.zoomLayer.remove(),this.zoomLayer=null}}},{key:"reset",value:function reset(){var t,h,y=this,w=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},A=w.keepZoomLayer,T=void 0!==A&&A,E=w.keepAnnotationLayer,j=void 0!==E&&E,N=w.keepXfaLayer,V=void 0!==N&&N;this.cancelRendering({keepAnnotationLayer:j,keepXfaLayer:V}),this.renderingState=B.RenderingStates.INITIAL;var W=this.div;W.style.width=Math.floor(this.viewport.width)+"px",W.style.height=Math.floor(this.viewport.height)+"px";for(var H=W.childNodes,G=T&&this.zoomLayer||null,z=j&&(null===(t=this.annotationLayer)||void 0===t?void 0:t.div)||null,$=V&&(null===(h=this.xfaLayer)||void 0===h?void 0:h.div)||null,J=H.length-1;J>=0;J--){var X=H[J];switch(X){case G:case z:case $:continue}X.remove()}W.removeAttribute("data-loaded"),z&&this.annotationLayer.hide(),$&&this.xfaLayer.hide(),G||(this.canvas&&(this.paintedViewportMap.delete(this.canvas),this.canvas.width=0,this.canvas.height=0,delete this.canvas),this._resetZoomLayer()),this.svg&&(this.paintedViewportMap.delete(this.svg),delete this.svg),this.loadingIconDiv=document.createElement("div"),this.loadingIconDiv.className="loadingIcon notVisible",this._isStandalone&&this.toggleLoadingIconSpinner(!0),this.loadingIconDiv.setAttribute("role","img"),this.l10n.get("loading").then((function(t){var h;null===(h=y.loadingIconDiv)||void 0===h||h.setAttribute("aria-label",t)})),W.appendChild(this.loadingIconDiv)}},{key:"update",value:function update(t){var h=t.scale,y=void 0===h?0:h,w=t.rotation,T=void 0===w?null:w,E=t.optionalContentConfigPromise,j=void 0===E?null:E;if("object"!==_typeof(arguments[0]))return console.error("PDFPageView.update called with separate parameters, please use an object instead."),void this.update({scale:arguments[0],rotation:arguments[1],optionalContentConfigPromise:arguments[2]});this.scale=y||this.scale,"number"==typeof T&&(this.rotation=T),j instanceof Promise&&(this._optionalContentConfigPromise=j);var B=(this.rotation+this.pdfPageRotate)%360,N=this.scale*A.PixelsPerInch.PDF_TO_CSS_UNITS;if(this.viewport=this.viewport.clone({scale:N,rotation:B}),this._isStandalone){var V=document.documentElement.style;V.setProperty("--zoom-factor",this.scale),V.setProperty("--viewport-scale-factor",N)}if(this.svg)return this.cssTransform({target:this.svg,redrawAnnotationLayer:!0,redrawXfaLayer:!0}),void this.eventBus.dispatch("pagerendered",{source:this,pageNumber:this.id,cssTransform:!0,timestamp:performance.now(),error:this._renderError});var W=!1;if(this.canvas&&this.maxCanvasPixels>0){var H=this.outputScale;(Math.floor(this.viewport.width)*H.sx|0)*(Math.floor(this.viewport.height)*H.sy|0)>this.maxCanvasPixels&&(W=!0)}if(this.canvas){if(this.useOnlyCssZoom||this.hasRestrictedScaling&&W)return this.cssTransform({target:this.canvas,redrawAnnotationLayer:!0,redrawXfaLayer:!0}),void this.eventBus.dispatch("pagerendered",{source:this,pageNumber:this.id,cssTransform:!0,timestamp:performance.now(),error:this._renderError});this.zoomLayer||this.canvas.hidden||(this.zoomLayer=this.canvas.parentNode,this.zoomLayer.style.position="absolute")}this.zoomLayer&&this.cssTransform({target:this.zoomLayer.firstChild}),this.reset({keepZoomLayer:!0,keepAnnotationLayer:!0,keepXfaLayer:!0})}},{key:"cancelRendering",value:function cancelRendering(){var t,h=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},y=h.keepAnnotationLayer,w=void 0!==y&&y,A=h.keepXfaLayer,T=void 0!==A&&A;(this.paintTask&&(this.paintTask.cancel(),this.paintTask=null),this.resume=null,this.textLayer&&(this.textLayer.cancel(),this.textLayer=null),!this.annotationLayer||w&&this.annotationLayer.div||(this.annotationLayer.cancel(),this.annotationLayer=null,this._annotationCanvasMap=null),!this.xfaLayer||T&&this.xfaLayer.div)||(this.xfaLayer.cancel(),this.xfaLayer=null,null===(t=this.textHighlighter)||void 0===t||t.disable());this._onTextLayerRendered&&(this.eventBus._off("textlayerrendered",this._onTextLayerRendered),this._onTextLayerRendered=null)}},{key:"cssTransform",value:function cssTransform(t){var h=t.target,y=t.redrawAnnotationLayer,w=void 0!==y&&y,A=t.redrawXfaLayer,T=void 0!==A&&A,E=this.viewport.width,j=this.viewport.height,B=this.div;h.style.width=h.parentNode.style.width=B.style.width=Math.floor(E)+"px",h.style.height=h.parentNode.style.height=B.style.height=Math.floor(j)+"px";var N=this.viewport.rotation-this.paintedViewportMap.get(h).rotation,V=Math.abs(N),W=1,H=1;if(90!==V&&270!==V||(W=j/E,H=E/j),h.style.transform="rotate(".concat(N,"deg) scale(").concat(W,", ").concat(H,")"),this.textLayer){var G=this.textLayer.viewport,z=this.viewport.rotation-G.rotation,$=Math.abs(z),J=E/G.width;90!==$&&270!==$||(J=E/G.height);var X,K,ne=this.textLayer.textLayerDiv;switch($){case 0:X=K=0;break;case 90:X=0,K="-"+ne.style.height;break;case 180:X="-"+ne.style.width,K="-"+ne.style.height;break;case 270:X="-"+ne.style.width,K=0;break;default:console.error("Bad rotation value.")}ne.style.transform="rotate(".concat($,"deg) ")+"scale(".concat(J,") ")+"translate(".concat(X,", ").concat(K,")"),ne.style.transformOrigin="0% 0%"}w&&this.annotationLayer&&this._renderAnnotationLayer(),T&&this.xfaLayer&&this._renderXfaLayer()}},{key:"width",get:function get(){return this.viewport.width}},{key:"height",get:function get(){return this.viewport.height}},{key:"getPagePoint",value:function getPagePoint(t,h){return this.viewport.convertToPdfPoint(t,h)}},{key:"toggleLoadingIconSpinner",value:function toggleLoadingIconSpinner(){var t,h=arguments.length>0&&void 0!==arguments[0]&&arguments[0];null===(t=this.loadingIconDiv)||void 0===t||t.classList.toggle("notVisible",!h)}},{key:"draw",value:function draw(){var t,h,y=this;this.renderingState!==B.RenderingStates.INITIAL&&(console.error("Must be in new state before drawing"),this.reset());var E=this.div,j=this.pdfPage;if(!j)return this.renderingState=B.RenderingStates.FINISHED,this.loadingIconDiv&&(this.loadingIconDiv.remove(),delete this.loadingIconDiv),Promise.reject(new Error("pdfPage is not loaded"));this.renderingState=B.RenderingStates.RUNNING;var N=document.createElement("div");N.style.width=E.style.width,N.style.height=E.style.height,N.classList.add("canvasWrapper"),null!==(t=this.annotationLayer)&&void 0!==t&&t.div?E.insertBefore(N,this.annotationLayer.div):E.appendChild(N);var V=null;if(this.textLayerMode!==T.TextLayerMode.DISABLE&&this.textLayerFactory){var W,H=document.createElement("div");H.className="textLayer",H.style.width=N.style.width,H.style.height=N.style.height,null!==(W=this.annotationLayer)&&void 0!==W&&W.div?E.insertBefore(H,this.annotationLayer.div):E.appendChild(H),V=this.textLayerFactory.createTextLayerBuilder(H,this.id-1,this.viewport,this.textLayerMode===T.TextLayerMode.ENABLE_ENHANCE,this.eventBus,this.textHighlighter)}this.textLayer=V,this._annotationMode!==A.AnnotationMode.DISABLE&&this.annotationLayerFactory&&(this._annotationCanvasMap||(this._annotationCanvasMap=new Map),this.annotationLayer||(this.annotationLayer=this.annotationLayerFactory.createAnnotationLayerBuilder(E,j,null,this.imageResourcesPath,this._annotationMode===A.AnnotationMode.ENABLE_FORMS,this.l10n,null,null,null,null,this._annotationCanvasMap))),null!==(h=this.xfaLayer)&&void 0!==h&&h.div&&E.appendChild(this.xfaLayer.div);var G=null;this.renderingQueue&&(G=function renderContinueCallback(t){if(!y.renderingQueue.isHighestPriority(y))return y.renderingState=B.RenderingStates.PAUSED,void(y.resume=function(){y.renderingState=B.RenderingStates.RUNNING,t()});t()});var z=function(){var t=_asyncToGenerator(w.default.mark((function _callee4(){var t,h=arguments;return w.default.wrap((function _callee4$(w){for(;;)switch(w.prev=w.next){case 0:if(t=h.length>0&&void 0!==h[0]?h[0]:null,$===y.paintTask&&(y.paintTask=null),!(t instanceof A.RenderingCancelledException)){w.next=5;break}return y._renderError=null,w.abrupt("return");case 5:if(y._renderError=t,y.renderingState=B.RenderingStates.FINISHED,y.loadingIconDiv&&(y.loadingIconDiv.remove(),delete y.loadingIconDiv),y._resetZoomLayer(!0),y.eventBus.dispatch("pagerendered",{source:y,pageNumber:y.id,cssTransform:!1,timestamp:performance.now(),error:y._renderError}),!t){w.next=12;break}throw t;case 12:case"end":return w.stop()}}),_callee4)})));return function finishPaintTask(){return t.apply(this,arguments)}}(),$=this.renderer===T.RendererType.SVG?this.paintOnSvg(N):this.paintOnCanvas(N);$.onRenderContinue=G,this.paintTask=$;var J=$.promise.then((function(){return z(null).then((function(){if(V){var t=j.streamTextContent({normalizeWhitespace:!0,includeMarkedContent:!0});V.setTextContentStream(t),V.render()}y.annotationLayer&&y._renderAnnotationLayer()}))}),(function(t){return z(t)}));return this.xfaLayerFactory&&(this.xfaLayer||(this.xfaLayer=this.xfaLayerFactory.createXfaLayerBuilder(E,j,null)),this._renderXfaLayer()),this.structTreeLayerFactory&&this.textLayer&&this.canvas&&(this._onTextLayerRendered=function(t){t.pageNumber===y.id&&(y.eventBus._off("textlayerrendered",y._onTextLayerRendered),y._onTextLayerRendered=null,y.canvas&&y.pdfPage.getStructTree().then((function(t){if(t&&y.canvas){var h=y.structTreeLayer.render(t);h.classList.add("structTree"),y.canvas.appendChild(h)}})))},this.eventBus._on("textlayerrendered",this._onTextLayerRendered),this.structTreeLayer=this.structTreeLayerFactory.createStructTreeLayerBuilder(j)),E.setAttribute("data-loaded",!0),this.eventBus.dispatch("pagerender",{source:this,pageNumber:this.id}),J}},{key:"paintOnCanvas",value:function paintOnCanvas(t){var h=(0,A.createPromiseCapability)(),y={promise:h.promise,onRenderContinue:function onRenderContinue(t){t()},cancel:function cancel(){X.cancel()}},w=this.viewport,E=document.createElement("canvas");E.hidden=!0;var j=!0,B=function showCanvas(){j&&(E.hidden=!1,j=!1)};t.appendChild(E),this.canvas=E,E.mozOpaque=!0;var N=E.getContext("2d",{alpha:!1}),V=(0,T.getOutputScale)(N);if(this.outputScale=V,this.useOnlyCssZoom){var W=w.clone({scale:A.PixelsPerInch.PDF_TO_CSS_UNITS});V.sx*=W.width/w.width,V.sy*=W.height/w.height,V.scaled=!0}if(this.maxCanvasPixels>0){var H=w.width*w.height,G=Math.sqrt(this.maxCanvasPixels/H);V.sx>G||V.sy>G?(V.sx=G,V.sy=G,V.scaled=!0,this.hasRestrictedScaling=!0):this.hasRestrictedScaling=!1}var z=(0,T.approximateFraction)(V.sx),$=(0,T.approximateFraction)(V.sy);E.width=(0,T.roundToDivide)(w.width*V.sx,z[0]),E.height=(0,T.roundToDivide)(w.height*V.sy,$[0]),E.style.width=(0,T.roundToDivide)(w.width,z[1])+"px",E.style.height=(0,T.roundToDivide)(w.height,$[1])+"px",this.paintedViewportMap.set(E,w);var J={canvasContext:N,transform:V.scaled?[V.sx,0,0,V.sy,0,0]:null,viewport:this.viewport,annotationMode:this._annotationMode,optionalContentConfigPromise:this._optionalContentConfigPromise,annotationCanvasMap:this._annotationCanvasMap},X=this.pdfPage.render(J);return X.onContinue=function(t){B(),y.onRenderContinue?y.onRenderContinue(t):t()},X.promise.then((function(){B(),h.resolve()}),(function(t){B(),h.reject(t)})),y}},{key:"paintOnSvg",value:function paintOnSvg(t){var h=this,y=!1,w=function ensureNotCancelled(){if(y)throw new A.RenderingCancelledException("Rendering cancelled, page ".concat(h.id),"svg")},T=this.pdfPage,j=this.viewport.clone({scale:A.PixelsPerInch.PDF_TO_CSS_UNITS});return{promise:T.getOperatorList({annotationMode:this._annotationMode}).then((function(y){return w(),new A.SVGGraphics(T.commonObjs,T.objs,E.compatibilityParams.disableCreateObjectURL).getSVG(y,j).then((function(y){w(),h.svg=y,h.paintedViewportMap.set(y,j),y.style.width=t.style.width,y.style.height=t.style.height,h.renderingState=B.RenderingStates.FINISHED,t.appendChild(y)}))})),onRenderContinue:function onRenderContinue(t){t()},cancel:function cancel(){y=!0}}}},{key:"setPageLabel",value:function setPageLabel(t){this.pageLabel="string"==typeof t?t:null,null!==this.pageLabel?this.div.setAttribute("data-page-label",this.pageLabel):this.div.removeAttribute("data-page-label")}}]),PDFPageView}();h.PDFPageView=V},(t,h)=>{function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _defineProperties(t,h){for(var y=0;y<h.length;y++){var w=h[y];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(t,(A=w.key,T=void 0,T=function _toPrimitive(t,h){if("object"!==_typeof(t)||null===t)return t;var y=t[Symbol.toPrimitive];if(void 0!==y){var w=y.call(t,h||"default");if("object"!==_typeof(w))return w;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===h?String:Number)(t)}(A,"string"),"symbol"===_typeof(T)?T:String(T)),w)}var A,T}Object.defineProperty(h,"__esModule",{value:!0}),h.compatibilityParams=h.OptionKind=h.AppOptions=void 0;var y=Object.create(null);h.compatibilityParams=y;var w="undefined"!=typeof navigator&&navigator.userAgent||"",A="undefined"!=typeof navigator&&navigator.platform||"",T="undefined"!=typeof navigator&&navigator.maxTouchPoints||1,E=/Android/.test(w),j=/\b(iPad|iPhone|iPod)(?=;)/.test(w)||"MacIntel"===A&&T>1,B=/CriOS/.test(w);!function checkOnBlobSupport(){B&&(y.disableCreateObjectURL=!0)}(),function checkCanvasSizeLimitation(){(j||E)&&(y.maxCanvasPixels=5242880)}();var N={VIEWER:2,API:4,WORKER:8,PREFERENCE:128};h.OptionKind=N;var V={annotationMode:{value:2,kind:N.VIEWER+N.PREFERENCE},cursorToolOnLoad:{value:0,kind:N.VIEWER+N.PREFERENCE},defaultUrl:{value:"compressed.tracemonkey-pldi-09.pdf",kind:N.VIEWER},defaultZoomValue:{value:"",kind:N.VIEWER+N.PREFERENCE},disableHistory:{value:!1,kind:N.VIEWER},disablePageLabels:{value:!1,kind:N.VIEWER+N.PREFERENCE},enablePermissions:{value:!1,kind:N.VIEWER+N.PREFERENCE},enablePrintAutoRotate:{value:!0,kind:N.VIEWER+N.PREFERENCE},enableScripting:{value:!0,kind:N.VIEWER+N.PREFERENCE},externalLinkRel:{value:"noopener noreferrer nofollow",kind:N.VIEWER},externalLinkTarget:{value:0,kind:N.VIEWER+N.PREFERENCE},historyUpdateUrl:{value:!1,kind:N.VIEWER+N.PREFERENCE},ignoreDestinationZoom:{value:!1,kind:N.VIEWER+N.PREFERENCE},imageResourcesPath:{value:"./images/",kind:N.VIEWER},maxCanvasPixels:{value:16777216,compatibility:y.maxCanvasPixels,kind:N.VIEWER},pdfBugEnabled:{value:!1,kind:N.VIEWER+N.PREFERENCE},printResolution:{value:150,kind:N.VIEWER},renderer:{value:"canvas",kind:N.VIEWER},sidebarViewOnLoad:{value:-1,kind:N.VIEWER+N.PREFERENCE},scrollModeOnLoad:{value:-1,kind:N.VIEWER+N.PREFERENCE},spreadModeOnLoad:{value:-1,kind:N.VIEWER+N.PREFERENCE},textLayerMode:{value:1,kind:N.VIEWER+N.PREFERENCE},useOnlyCssZoom:{value:!1,kind:N.VIEWER+N.PREFERENCE},viewerCssTheme:{value:0,kind:N.VIEWER+N.PREFERENCE},viewOnLoad:{value:0,kind:N.VIEWER+N.PREFERENCE},cMapPacked:{value:!0,kind:N.API},cMapUrl:{value:"../web/cmaps/",kind:N.API},disableAutoFetch:{value:!1,kind:N.API+N.PREFERENCE},disableFontFace:{value:!1,kind:N.API+N.PREFERENCE},disableRange:{value:!1,kind:N.API+N.PREFERENCE},disableStream:{value:!1,kind:N.API+N.PREFERENCE},docBaseUrl:{value:"",kind:N.API},enableXfa:{value:!0,kind:N.API+N.PREFERENCE},fontExtraProperties:{value:!1,kind:N.API},isEvalSupported:{value:!0,kind:N.API},maxImageSize:{value:-1,kind:N.API},pdfBug:{value:!1,kind:N.API},standardFontDataUrl:{value:"../web/standard_fonts/",kind:N.API},verbosity:{value:1,kind:N.API},workerPort:{value:null,kind:N.WORKER},workerSrc:{value:"../build/pdf.worker.js",kind:N.WORKER}};V.disablePreferences={value:!1,kind:N.VIEWER},V.locale={value:"undefined"!=typeof navigator?navigator.language:"en-US",kind:N.VIEWER},V.sandboxBundleSrc={value:"../build/pdf.sandbox.js",kind:N.VIEWER},V.renderer.kind+=N.PREFERENCE;var W=Object.create(null),H=function(){function AppOptions(){throw function _classCallCheck(t,h){if(!(t instanceof h))throw new TypeError("Cannot call a class as a function")}(this,AppOptions),new Error("Cannot initialize AppOptions.")}return function _createClass(t,h,y){return h&&_defineProperties(t.prototype,h),y&&_defineProperties(t,y),Object.defineProperty(t,"prototype",{writable:!1}),t}(AppOptions,null,[{key:"get",value:function get(t){var h=W[t];if(void 0!==h)return h;var y,w=V[t];return void 0!==w?null!==(y=w.compatibility)&&void 0!==y?y:w.value:void 0}},{key:"getAll",value:function getAll(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,h=Object.create(null);for(var y in V){var w,A=V[y];if(t){if(0==(t&A.kind))continue;if(t===N.PREFERENCE){var T=A.value,E=_typeof(T);if("boolean"===E||"string"===E||"number"===E&&Number.isInteger(T)){h[y]=T;continue}throw new Error("Invalid type for preference: ".concat(y))}}var j=W[y];h[y]=void 0!==j?j:null!==(w=A.compatibility)&&void 0!==w?w:A.value}return h}},{key:"set",value:function set(t,h){W[t]=h}},{key:"setAll",value:function setAll(t){for(var h in t)W[h]=t[h]}},{key:"remove",value:function remove(t){delete W[t]}},{key:"_hasUserOptions",value:function _hasUserOptions(){return Object.keys(W).length>0}}]),AppOptions}();h.AppOptions=H},(t,h)=>{function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _defineProperties(t,h){for(var y=0;y<h.length;y++){var w=h[y];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(t,(A=w.key,T=void 0,T=function _toPrimitive(t,h){if("object"!==_typeof(t)||null===t)return t;var y=t[Symbol.toPrimitive];if(void 0!==y){var w=y.call(t,h||"default");if("object"!==_typeof(w))return w;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===h?String:Number)(t)}(A,"string"),"symbol"===_typeof(T)?T:String(T)),w)}var A,T}Object.defineProperty(h,"__esModule",{value:!0}),h.TextHighlighter=void 0;var y=function(){function TextHighlighter(t){var h=t.findController,y=t.eventBus,w=t.pageIndex;!function _classCallCheck(t,h){if(!(t instanceof h))throw new TypeError("Cannot call a class as a function")}(this,TextHighlighter),this.findController=h,this.matches=[],this.eventBus=y,this.pageIdx=w,this._onUpdateTextLayerMatches=null,this.textDivs=null,this.textContentItemsStr=null,this.enabled=!1}return function _createClass(t,h,y){return h&&_defineProperties(t.prototype,h),y&&_defineProperties(t,y),Object.defineProperty(t,"prototype",{writable:!1}),t}(TextHighlighter,[{key:"setTextMapping",value:function setTextMapping(t,h){this.textDivs=t,this.textContentItemsStr=h}},{key:"enable",value:function enable(){var t=this;if(!this.textDivs||!this.textContentItemsStr)throw new Error("Text divs and strings have not been set.");if(this.enabled)throw new Error("TextHighlighter is already enabled.");this.enabled=!0,this._onUpdateTextLayerMatches||(this._onUpdateTextLayerMatches=function(h){h.pageIndex!==t.pageIdx&&-1!==h.pageIndex||t._updateMatches()},this.eventBus._on("updatetextlayermatches",this._onUpdateTextLayerMatches)),this._updateMatches()}},{key:"disable",value:function disable(){this.enabled&&(this.enabled=!1,this._onUpdateTextLayerMatches&&(this.eventBus._off("updatetextlayermatches",this._onUpdateTextLayerMatches),this._onUpdateTextLayerMatches=null))}},{key:"_convertMatches",value:function _convertMatches(t,h){if(!t)return[];for(var y=this.textContentItemsStr,w=0,A=0,T=y.length-1,E=[],j=0,B=t.length;j<B;j++){for(var N=t[j];w!==T&&N>=A+y[w].length;)A+=y[w].length,w++;w===y.length&&console.error("Could not find a matching mapping");var V={begin:{divIdx:w,offset:N-A}};for(N+=h[j];w!==T&&N>A+y[w].length;)A+=y[w].length,w++;V.end={divIdx:w,offset:N-A},E.push(V)}return E}},{key:"_renderMatches",value:function _renderMatches(t){if(0!==t.length){var h=this.findController,y=this.pageIdx,w=this.textContentItemsStr,A=this.textDivs,T=y===h.selected.pageIdx,E=h.selected.matchIdx,j=null,B={divIdx:-1,offset:void 0},N=E,V=N+1;if(h.state.highlightAll)N=0,V=t.length;else if(!T)return;for(var W=N;W<V;W++){var H=t[W],G=H.begin,z=H.end,$=T&&W===E,J=$?" selected":"",X=0;if(j&&G.divIdx===j.divIdx?appendTextToDiv(j.divIdx,j.offset,G.offset):(null!==j&&appendTextToDiv(j.divIdx,j.offset,B.offset),beginText(G)),G.divIdx===z.divIdx)X=appendTextToDiv(G.divIdx,G.offset,z.offset,"highlight"+J);else{X=appendTextToDiv(G.divIdx,G.offset,B.offset,"highlight begin"+J);for(var K=G.divIdx+1,ne=z.divIdx;K<ne;K++)A[K].className="highlight middle"+J;beginText(z,"highlight end"+J)}j=z,$&&h.scrollMatchIntoView({element:A[G.divIdx],selectedLeft:X,pageIndex:y,matchIndex:E})}j&&appendTextToDiv(j.divIdx,j.offset,B.offset)}function beginText(t,h){var y=t.divIdx;return A[y].textContent="",appendTextToDiv(y,0,t.offset,h)}function appendTextToDiv(t,h,y,T){var E=A[t];if(E.nodeType===Node.TEXT_NODE){var j=document.createElement("span");E.parentNode.insertBefore(j,E),j.appendChild(E),A[t]=j,E=j}var B=w[t].substring(h,y),N=document.createTextNode(B);if(T){var V=document.createElement("span");return V.className="".concat(T," appended"),V.appendChild(N),E.appendChild(V),T.includes("selected")?V.offsetLeft:0}return E.appendChild(N),0}}},{key:"_updateMatches",value:function _updateMatches(){if(this.enabled){for(var t=this.findController,h=this.matches,y=this.pageIdx,w=this.textContentItemsStr,A=this.textDivs,T=-1,E=0,j=h.length;E<j;E++){for(var B=h[E],N=Math.max(T,B.begin.divIdx),V=B.end.divIdx;N<=V;N++){var W=A[N];W.textContent=w[N],W.className=""}T=B.end.divIdx+1}if(null!=t&&t.highlightMatches){var H=t.pageMatches[y]||null,G=t.pageMatchesLength[y]||null;this.matches=this._convertMatches(H,G),this._renderMatches(this.matches)}}}}]),TextHighlighter}();h.TextHighlighter=y},(t,h,y)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.DownloadManager=void 0;var w=y(4),A=y(15);function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _defineProperties(t,h){for(var y=0;y<h.length;y++){var w=h[y];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(t,(A=w.key,T=void 0,T=function _toPrimitive(t,h){if("object"!==_typeof(t)||null===t)return t;var y=t[Symbol.toPrimitive];if(void 0!==y){var w=y.call(t,h||"default");if("object"!==_typeof(w))return w;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===h?String:Number)(t)}(A,"string"),"symbol"===_typeof(T)?T:String(T)),w)}var A,T}function _download(t,h){var y=document.createElement("a");if(!y.click)throw new Error('DownloadManager: "a.click()" is not supported.');y.href=t,y.target="_parent","download"in y&&(y.download=h),(document.body||document.documentElement).appendChild(y),y.click(),y.remove()}var T=function(){function DownloadManager(){!function _classCallCheck(t,h){if(!(t instanceof h))throw new TypeError("Cannot call a class as a function")}(this,DownloadManager),this._openBlobUrls=new WeakMap}return function _createClass(t,h,y){return h&&_defineProperties(t.prototype,h),y&&_defineProperties(t,y),Object.defineProperty(t,"prototype",{writable:!1}),t}(DownloadManager,[{key:"downloadUrl",value:function downloadUrl(t,h){(0,w.createValidAbsoluteUrl)(t,"http://example.com")?_download(t+"#pdfjs.action=download",h):console.error("downloadUrl - not a valid URL: ".concat(t))}},{key:"downloadData",value:function downloadData(t,h,y){_download((0,w.createObjectURL)(t,y,A.compatibilityParams.disableCreateObjectURL),h)}},{key:"openOrDownloadData",value:function openOrDownloadData(t,h,y){var T=(0,w.isPdfFile)(y),E=T?"application/pdf":"";if(T&&!A.compatibilityParams.disableCreateObjectURL){var j,B=this._openBlobUrls.get(t);B||(B=URL.createObjectURL(new Blob([h],{type:E})),this._openBlobUrls.set(t,B)),j="?file="+encodeURIComponent(B+"#"+y);try{return window.open(j),!0}catch(h){console.error("openOrDownloadData: ".concat(h)),URL.revokeObjectURL(B),this._openBlobUrls.delete(t)}}return this.downloadData(h,y,E),!1}},{key:"download",value:function download(t,h,y){A.compatibilityParams.disableCreateObjectURL?this.downloadUrl(h,y):_download(URL.createObjectURL(t),y)}}]),DownloadManager}();h.DownloadManager=T},(t,h,y)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.GenericL10n=void 0;var w=function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}(y(2));y(19);var A=y(5);function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function asyncGeneratorStep(t,h,y,w,A,T,E){try{var j=t[T](E),B=j.value}catch(t){return void y(t)}j.done?h(B):Promise.resolve(B).then(w,A)}function _asyncToGenerator(t){return function(){var h=this,y=arguments;return new Promise((function(w,A){var T=t.apply(h,y);function _next(t){asyncGeneratorStep(T,w,A,_next,_throw,"next",t)}function _throw(t){asyncGeneratorStep(T,w,A,_next,_throw,"throw",t)}_next(void 0)}))}}function _defineProperties(t,h){for(var y=0;y<h.length;y++){var w=h[y];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(t,(A=w.key,T=void 0,T=function _toPrimitive(t,h){if("object"!==_typeof(t)||null===t)return t;var y=t[Symbol.toPrimitive];if(void 0!==y){var w=y.call(t,h||"default");if("object"!==_typeof(w))return w;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===h?String:Number)(t)}(A,"string"),"symbol"===_typeof(T)?T:String(T)),w)}var A,T}var T=document.webL10n,E=function(){function GenericL10n(t){!function _classCallCheck(t,h){if(!(t instanceof h))throw new TypeError("Cannot call a class as a function")}(this,GenericL10n),this._lang=t,this._ready=new Promise((function(h,y){T.setLanguage((0,A.fixupLangCode)(t),(function(){h(T)}))}))}var t,h,y,E;return function _createClass(t,h,y){return h&&_defineProperties(t.prototype,h),y&&_defineProperties(t,y),Object.defineProperty(t,"prototype",{writable:!1}),t}(GenericL10n,[{key:"getLanguage",value:(E=_asyncToGenerator(w.default.mark((function _callee(){var t;return w.default.wrap((function _callee$(h){for(;;)switch(h.prev=h.next){case 0:return h.next=2,this._ready;case 2:return t=h.sent,h.abrupt("return",t.getLanguage());case 4:case"end":return h.stop()}}),_callee,this)}))),function getLanguage(){return E.apply(this,arguments)})},{key:"getDirection",value:(y=_asyncToGenerator(w.default.mark((function _callee2(){var t;return w.default.wrap((function _callee2$(h){for(;;)switch(h.prev=h.next){case 0:return h.next=2,this._ready;case 2:return t=h.sent,h.abrupt("return",t.getDirection());case 4:case"end":return h.stop()}}),_callee2,this)}))),function getDirection(){return y.apply(this,arguments)})},{key:"get",value:(h=_asyncToGenerator(w.default.mark((function _callee3(t){var h,y,T,E=arguments;return w.default.wrap((function _callee3$(w){for(;;)switch(w.prev=w.next){case 0:return h=E.length>1&&void 0!==E[1]?E[1]:null,y=E.length>2&&void 0!==E[2]?E[2]:(0,A.getL10nFallback)(t,h),w.next=4,this._ready;case 4:return T=w.sent,w.abrupt("return",T.get(t,h,y));case 6:case"end":return w.stop()}}),_callee3,this)}))),function get(t){return h.apply(this,arguments)})},{key:"translate",value:(t=_asyncToGenerator(w.default.mark((function _callee4(t){var h;return w.default.wrap((function _callee4$(y){for(;;)switch(y.prev=y.next){case 0:return y.next=2,this._ready;case 2:return h=y.sent,y.abrupt("return",h.translate(t));case 4:case"end":return y.stop()}}),_callee4,this)}))),function translate(h){return t.apply(this,arguments)})}]),GenericL10n}();h.GenericL10n=E},()=>{document.webL10n=function(t,h,y){var w={},A="",T="textContent",E="",j={},B="loading",N=!0;function xhrLoadText(t,h,y){h=h||function _onSuccess(t){},y=y||function _onFailure(){};var w=new XMLHttpRequest;w.open("GET",t,N),w.overrideMimeType&&w.overrideMimeType("text/plain; charset=utf-8"),w.onreadystatechange=function(){4==w.readyState&&(200==w.status||0===w.status?h(w.responseText):y())},w.onerror=y,w.ontimeout=y;try{w.send(null)}catch(t){y()}}function parseResource(t,h,y,E){var j=t.replace(/[^\/]*$/,"")||"./";function evalString(t){return t.lastIndexOf("\\")<0?t:t.replace(/\\\\/g,"\\").replace(/\\n/g,"\n").replace(/\\r/g,"\r").replace(/\\t/g,"\t").replace(/\\b/g,"\b").replace(/\\f/g,"\f").replace(/\\{/g,"{").replace(/\\}/g,"}").replace(/\\"/g,'"').replace(/\\'/g,"'")}xhrLoadText(t,(function(t){A+=t,function parseProperties(t,y){var w={},A=/^\s*|\s*$/,T=/^\s*#|^\s*$/,E=/^\s*\[(.*)\]\s*$/,B=/^\s*@import\s+url\((.*)\)\s*$/i,N=/^([^=\s]*)\s*=\s*(.+)$/;function parseRawLines(t,y,V){var W=t.replace(A,"").split(/[\r\n]+/),H="*",G=h.split("-",1)[0],z=!1,$="";!function nextEntry(){for(;;){if(!W.length)return void V();var t=W.shift();if(!T.test(t)){if(y){if($=E.exec(t)){H=$[1].toLowerCase(),z="*"!==H&&H!==h&&H!==G;continue}if(z)continue;if($=B.exec(t))return void loadImport(j+$[1],nextEntry)}var A=t.match(N);A&&3==A.length&&(w[A[1]]=evalString(A[2]))}}}()}function loadImport(t,h){xhrLoadText(t,(function(t){parseRawLines(t,!1,h)}),(function(){console.warn(t+" not found."),h()}))}parseRawLines(t,!0,(function(){y(w)}))}(t,(function(t){for(var h in t){var A,E,j=h.lastIndexOf(".");j>0?(A=h.substring(0,j),E=h.substring(j+1)):(A=h,E=T),w[A]||(w[A]={}),w[A][E]=t[h]}y&&y()}))}),E)}function loadLocale(t,y){t&&(t=t.toLowerCase()),y=y||function _callback(){},function clear(){w={},A="",E=""}(),E=t;var T=function getL10nResourceLinks(){return h.querySelectorAll('link[type="application/l10n"]')}(),j=T.length;if(0!==j){var N,V=0;N=function onResourceLoaded(){++V>=j&&(y(),B="complete")};for(var W=0;W<j;W++){new L10nResourceLink(T[W]).load(t,N)}}else{var H=function getL10nDictionary(){var t=h.querySelector('script[type="application/l10n"]');return t?JSON.parse(t.innerHTML):null}();if(H&&H.locales&&H.default_locale){if(console.log("using the embedded JSON directory, early way out"),!(w=H.locales[t])){var G=H.default_locale.toLowerCase();for(var z in H.locales){if((z=z.toLowerCase())===t){w=H.locales[t];break}z===G&&(w=H.locales[G])}}y()}else console.log("no resource to load, early way out");B="complete"}function L10nResourceLink(t){var h=t.href;this.load=function(t,y){parseResource(h,t,y,(function(){console.warn(h+" not found."),console.warn('"'+t+'" resource not found'),E="",y()}))}}}function getL10nData(t,h,y){var A=w[t];if(!A){if(console.warn("#"+t+" is undefined."),!y)return null;A=y}var T={};for(var E in A){var j=A[E];j=substArguments(j=substIndexes(j,h,t,E),h,t),T[E]=j}return T}function substIndexes(t,h,y,A){var T=/\{\[\s*([a-zA-Z]+)\(([a-zA-Z]+)\)\s*\]\}/.exec(t);if(!T||!T.length)return t;var E,B=T[1],N=T[2];(h&&N in h?E=h[N]:N in w&&(E=w[N]),B in j)&&(t=(0,j[B])(t,E,y,A));return t}function substArguments(t,h,y){return t.replace(/\{\{\s*(.+?)\s*\}\}/g,(function(t,A){return h&&A in h?h[A]:A in w?w[A]:(console.log("argument {{"+A+"}} for #"+y+" is undefined."),t)}))}function translateElement(t){var y=function getL10nAttributes(t){if(!t)return{};var h=t.getAttribute("data-l10n-id"),y=t.getAttribute("data-l10n-args"),w={};if(y)try{w=JSON.parse(y)}catch(t){console.warn("could not parse arguments for #"+h)}return{id:h,args:w}}(t);if(y.id){var w=getL10nData(y.id,y.args);if(w){if(w[T]){if(0===function getChildElementCount(t){if(t.children)return t.children.length;if(void 0!==t.childElementCount)return t.childElementCount;for(var h=0,y=0;y<t.childNodes.length;y++)h+=1===t.nodeType?1:0;return h}(t))t[T]=w[T];else{for(var A=t.childNodes,E=!1,j=0,B=A.length;j<B;j++)3===A[j].nodeType&&/\S/.test(A[j].nodeValue)&&(E?A[j].nodeValue="":(A[j].nodeValue=w[T],E=!0));if(!E){var N=h.createTextNode(w[T]);t.insertBefore(N,t.firstChild)}}delete w[T]}for(var V in w)t[V]=w[V]}else console.warn("#"+y.id+" is undefined.")}}return j.plural=function(t,h,y,A){var B=parseFloat(h);if(isNaN(B))return t;if(A!=T)return t;j._pluralRules||(j._pluralRules=function getPluralRules(t){function isIn(t,h){return-1!==h.indexOf(t)}function isBetween(t,h,y){return h<=t&&t<=y}var h={0:function _(t){return"other"},1:function _(t){return isBetween(t%100,3,10)?"few":0===t?"zero":isBetween(t%100,11,99)?"many":2==t?"two":1==t?"one":"other"},2:function _(t){return 0!==t&&t%10==0?"many":2==t?"two":1==t?"one":"other"},3:function _(t){return 1==t?"one":"other"},4:function _(t){return isBetween(t,0,1)?"one":"other"},5:function _(t){return isBetween(t,0,2)&&2!=t?"one":"other"},6:function _(t){return 0===t?"zero":t%10==1&&t%100!=11?"one":"other"},7:function _(t){return 2==t?"two":1==t?"one":"other"},8:function _(t){return isBetween(t,3,6)?"few":isBetween(t,7,10)?"many":2==t?"two":1==t?"one":"other"},9:function _(t){return 0===t||1!=t&&isBetween(t%100,1,19)?"few":1==t?"one":"other"},10:function _(t){return isBetween(t%10,2,9)&&!isBetween(t%100,11,19)?"few":t%10!=1||isBetween(t%100,11,19)?"other":"one"},11:function _(t){return isBetween(t%10,2,4)&&!isBetween(t%100,12,14)?"few":t%10==0||isBetween(t%10,5,9)||isBetween(t%100,11,14)?"many":t%10==1&&t%100!=11?"one":"other"},12:function _(t){return isBetween(t,2,4)?"few":1==t?"one":"other"},13:function _(t){return isBetween(t%10,2,4)&&!isBetween(t%100,12,14)?"few":1!=t&&isBetween(t%10,0,1)||isBetween(t%10,5,9)||isBetween(t%100,12,14)?"many":1==t?"one":"other"},14:function _(t){return isBetween(t%100,3,4)?"few":t%100==2?"two":t%100==1?"one":"other"},15:function _(t){return 0===t||isBetween(t%100,2,10)?"few":isBetween(t%100,11,19)?"many":1==t?"one":"other"},16:function _(t){return t%10==1&&11!=t?"one":"other"},17:function _(t){return 3==t?"few":0===t?"zero":6==t?"many":2==t?"two":1==t?"one":"other"},18:function _(t){return 0===t?"zero":isBetween(t,0,2)&&0!==t&&2!=t?"one":"other"},19:function _(t){return isBetween(t,2,10)?"few":isBetween(t,0,1)?"one":"other"},20:function _(t){return!isBetween(t%10,3,4)&&t%10!=9||isBetween(t%100,10,19)||isBetween(t%100,70,79)||isBetween(t%100,90,99)?t%1e6==0&&0!==t?"many":t%10!=2||isIn(t%100,[12,72,92])?t%10!=1||isIn(t%100,[11,71,91])?"other":"one":"two":"few"},21:function _(t){return 0===t?"zero":1==t?"one":"other"},22:function _(t){return isBetween(t,0,1)||isBetween(t,11,99)?"one":"other"},23:function _(t){return isBetween(t%10,1,2)||t%20==0?"one":"other"},24:function _(t){return isBetween(t,3,10)||isBetween(t,13,19)?"few":isIn(t,[2,12])?"two":isIn(t,[1,11])?"one":"other"}},y={af:3,ak:4,am:4,ar:1,asa:3,az:0,be:11,bem:3,bez:3,bg:3,bh:4,bm:0,bn:3,bo:0,br:20,brx:3,bs:11,ca:3,cgg:3,chr:3,cs:12,cy:17,da:3,de:3,dv:3,dz:0,ee:3,el:3,en:3,eo:3,es:3,et:3,eu:3,fa:0,ff:5,fi:3,fil:4,fo:3,fr:5,fur:3,fy:3,ga:8,gd:24,gl:3,gsw:3,gu:3,guw:4,gv:23,ha:3,haw:3,he:2,hi:4,hr:11,hu:0,id:0,ig:0,ii:0,is:3,it:3,iu:7,ja:0,jmc:3,jv:0,ka:0,kab:5,kaj:3,kcg:3,kde:0,kea:0,kk:3,kl:3,km:0,kn:0,ko:0,ksb:3,ksh:21,ku:3,kw:7,lag:18,lb:3,lg:3,ln:4,lo:0,lt:10,lv:6,mas:3,mg:4,mk:16,ml:3,mn:3,mo:9,mr:3,ms:0,mt:15,my:0,nah:3,naq:7,nb:3,nd:3,ne:3,nl:3,nn:3,no:3,nr:3,nso:4,ny:3,nyn:3,om:3,or:3,pa:3,pap:3,pl:13,ps:3,pt:3,rm:3,ro:9,rof:3,ru:11,rwk:3,sah:0,saq:3,se:7,seh:3,ses:0,sg:0,sh:11,shi:19,sk:12,sl:14,sma:7,smi:7,smj:7,smn:7,sms:7,sn:3,so:3,sq:3,sr:11,ss:3,ssy:3,st:3,sv:3,sw:3,syr:3,ta:3,te:3,teo:3,th:0,ti:4,tig:3,tk:3,tl:4,tn:3,to:0,tr:0,ts:3,tzm:22,uk:11,ur:3,ve:3,vi:0,vun:3,wa:4,wae:3,wo:0,xh:3,xog:3,yo:0,zh:0,zu:3}[t.replace(/-.*$/,"")];return y in h?h[y]:(console.warn("plural form unknown for ["+t+"]"),function(){return"other"})}(E));var N="["+j._pluralRules(B)+"]";return 0===B&&y+"[zero]"in w?t=w[y+"[zero]"][A]:1==B&&y+"[one]"in w?t=w[y+"[one]"][A]:2==B&&y+"[two]"in w?t=w[y+"[two]"][A]:y+N in w?t=w[y+N][A]:y+"[other]"in w&&(t=w[y+"[other]"][A]),t},{get:function get(t,h,y){var w,A=t.lastIndexOf("."),E=T;A>0&&(E=t.substring(A+1),t=t.substring(0,A)),y&&((w={})[E]=y);var j=getL10nData(t,h,w);return j&&E in j?j[E]:"{{"+t+"}}"},getData:function getData(){return w},getText:function getText(){return A},getLanguage:function getLanguage(){return E},setLanguage:function setLanguage(t,h){loadLocale(t,(function(){h&&h()}))},getDirection:function getDirection(){var t=E.split("-",1)[0];return["ar","he","fa","ps","ur"].indexOf(t)>=0?"rtl":"ltr"},translate:function translateFragment(t){for(var y=function getTranslatableChildren(t){return t?t.querySelectorAll("*[data-l10n-id]"):[]}(t=t||h.documentElement),w=y.length,A=0;A<w;A++)translateElement(y[A]);translateElement(t)},getReadyState:function getReadyState(){return B},ready:function ready(y){y&&("complete"==B||"interactive"==B?t.setTimeout((function(){y()})):h.addEventListener&&h.addEventListener("localized",(function once(){h.removeEventListener("localized",once),y()})))}}}(window,document)},(t,h,y)=>{function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}Object.defineProperty(h,"__esModule",{value:!0}),h.PDFFindController=h.FindState=void 0;var w=y(4),A=y(21),T=y(7);function _defineProperties(t,h){for(var y=0;y<h.length;y++){var w=h[y];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(t,(A=w.key,T=void 0,T=function _toPrimitive(t,h){if("object"!==_typeof(t)||null===t)return t;var y=t[Symbol.toPrimitive];if(void 0!==y){var w=y.call(t,h||"default");if("object"!==_typeof(w))return w;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===h?String:Number)(t)}(A,"string"),"symbol"===_typeof(T)?T:String(T)),w)}var A,T}function _slicedToArray(t,h){return function _arrayWithHoles(t){if(Array.isArray(t))return t}(t)||function _iterableToArrayLimit(t,h){var y=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=y){var w,A,T,E,j=[],B=!0,N=!1;try{if(T=(y=y.call(t)).next,0===h){if(Object(y)!==y)return;B=!1}else for(;!(B=(w=T.call(y)).done)&&(j.push(w.value),j.length!==h);B=!0);}catch(t){N=!0,A=t}finally{try{if(!B&&null!=y.return&&(E=y.return(),Object(E)!==E))return}finally{if(N)throw A}}return j}}(t,h)||_unsupportedIterableToArray(t,h)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _unsupportedIterableToArray(t,h){if(t){if("string"==typeof t)return _arrayLikeToArray(t,h);var y=Object.prototype.toString.call(t).slice(8,-1);return"Object"===y&&t.constructor&&(y=t.constructor.name),"Map"===y||"Set"===y?Array.from(t):"Arguments"===y||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(y)?_arrayLikeToArray(t,h):void 0}}function _arrayLikeToArray(t,h){(null==h||h>t.length)&&(h=t.length);for(var y=0,w=new Array(h);y<h;y++)w[y]=t[y];return w}var E={FOUND:0,NOT_FOUND:1,WRAPPED:2,PENDING:3};h.FindState=E;var j={"‐":"-","‘":"'","’":"'","‚":"'","‛":"'","“":'"',"”":'"',"„":'"',"‟":'"',"¼":"1/4","½":"1/2","¾":"3/4"},B=null;function normalize(t){if(!B){var h=Object.keys(j).join("");B=new RegExp("[".concat(h,"]"),"g")}var y=null;return[t.replace(B,(function(t,h){var w=j[t],A=w.length-t.length;return 0!==A&&(y||(y=[])).push([h,A]),w})),y]}function getOriginalIndex(t){var h=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!h)return t;var y,w=0,A=function _createForOfIteratorHelper(t,h){var y="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!y){if(Array.isArray(t)||(y=_unsupportedIterableToArray(t))||h&&t&&"number"==typeof t.length){y&&(t=y);var w=0,A=function F(){};return{s:A,n:function n(){return w>=t.length?{done:!0}:{done:!1,value:t[w++]}},e:function e(t){throw t},f:A}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var T,E=!0,j=!1;return{s:function s(){y=y.call(t)},n:function n(){var t=y.next();return E=t.done,t},e:function e(t){j=!0,T=t},f:function f(){try{E||null==y.return||y.return()}finally{if(j)throw T}}}}(h);try{for(A.s();!(y=A.n()).done;){var T=_slicedToArray(y.value,2),E=T[0],j=T[1],B=E+w;if(B>=t)break;if(B+j>t){w+=t-B;break}w+=j}}catch(t){A.e(t)}finally{A.f()}return t-w}var N=function(){function PDFFindController(t){var h=this,y=t.linkService,w=t.eventBus;!function _classCallCheck(t,h){if(!(t instanceof h))throw new TypeError("Cannot call a class as a function")}(this,PDFFindController),this._linkService=y,this._eventBus=w,this._reset(),w._on("find",this._onFind.bind(this)),w._on("findbarclose",this._onFindBarClose.bind(this)),this.executeCommand=function(t,y){console.error('Deprecated method `PDFFindController.executeCommand` called, please dispatch a "find"-event using the EventBus instead.');var w=_extends(Object.create(null),y,{type:t.substring(4)});h._onFind(w)}}return function _createClass(t,h,y){return h&&_defineProperties(t.prototype,h),y&&_defineProperties(t,y),Object.defineProperty(t,"prototype",{writable:!1}),t}(PDFFindController,[{key:"highlightMatches",get:function get(){return this._highlightMatches}},{key:"pageMatches",get:function get(){return this._pageMatches}},{key:"pageMatchesLength",get:function get(){return this._pageMatchesLength}},{key:"selected",get:function get(){return this._selected}},{key:"state",get:function get(){return this._state}},{key:"setDocument",value:function setDocument(t){this._pdfDocument&&this._reset(),t&&(this._pdfDocument=t,this._firstPageCapability.resolve())}},{key:"_onFind",value:function _onFind(t){var h=this;if(t){var y=this._pdfDocument,w=t.type;(null===this._state||this._shouldDirtyMatch(t))&&(this._dirtyMatch=!0),this._state=t,"highlightallchange"!==w&&this._updateUIState(E.PENDING),this._firstPageCapability.promise.then((function(){if(h._pdfDocument&&(!y||h._pdfDocument===y)){h._extractText();var t=!h._highlightMatches,A=!!h._findTimeout;h._findTimeout&&(clearTimeout(h._findTimeout),h._findTimeout=null),w?h._dirtyMatch?h._nextMatch():"again"===w?(h._nextMatch(),t&&h._state.highlightAll&&h._updateAllPages()):"highlightallchange"===w?(A?h._nextMatch():h._highlightMatches=!0,h._updateAllPages()):h._nextMatch():h._findTimeout=setTimeout((function(){h._nextMatch(),h._findTimeout=null}),250)}}))}}},{key:"scrollMatchIntoView",value:function scrollMatchIntoView(t){var h=t.element,y=void 0===h?null:h,w=t.selectedLeft,A=void 0===w?0:w,E=t.pageIndex,j=void 0===E?-1:E,B=t.matchIndex,N=void 0===B?-1:B;if(this._scrollMatches&&y&&-1!==N&&N===this._selected.matchIdx&&-1!==j&&j===this._selected.pageIdx){this._scrollMatches=!1;var V={top:-50,left:A+-400};(0,T.scrollIntoView)(y,V,!0)}}},{key:"_reset",value:function _reset(){this._highlightMatches=!1,this._scrollMatches=!1,this._pdfDocument=null,this._pageMatches=[],this._pageMatchesLength=[],this._state=null,this._selected={pageIdx:-1,matchIdx:-1},this._offset={pageIdx:null,matchIdx:null,wrapped:!1},this._extractTextPromises=[],this._pageContents=[],this._pageDiffs=[],this._matchesCountTotal=0,this._pagesToSearch=null,this._pendingFindMatches=new Set,this._resumePageIdx=null,this._dirtyMatch=!1,clearTimeout(this._findTimeout),this._findTimeout=null,this._firstPageCapability=(0,w.createPromiseCapability)()}},{key:"_query",get:function get(){if(this._state.query!==this._rawQuery){this._rawQuery=this._state.query;var t=_slicedToArray(normalize(this._state.query),1);this._normalizedQuery=t[0]}return this._normalizedQuery}},{key:"_shouldDirtyMatch",value:function _shouldDirtyMatch(t){if(t.query!==this._state.query)return!0;switch(t.type){case"again":var h=this._selected.pageIdx+1,y=this._linkService;return h>=1&&h<=y.pagesCount&&h!==y.page&&!y.isPageVisible(h);case"highlightallchange":return!1}return!0}},{key:"_prepareMatches",value:function _prepareMatches(t,h,y){function isSubTerm(h){var y=t[h],w=t[h+1];if(h<t.length-1&&y.match===w.match)return y.skipped=!0,!0;for(var A=h-1;A>=0;A--){var T=t[A];if(!T.skipped){if(T.match+T.matchLength<y.match)break;if(T.match+T.matchLength>=y.match+y.matchLength)return y.skipped=!0,!0}}return!1}t.sort((function(t,h){return t.match===h.match?t.matchLength-h.matchLength:t.match-h.match}));for(var w=0,A=t.length;w<A;w++)isSubTerm(w)||(h.push(t[w].match),y.push(t[w].matchLength))}},{key:"_isEntireWord",value:function _isEntireWord(t,h,y){if(h>0){var w=t.charCodeAt(h),T=t.charCodeAt(h-1);if((0,A.getCharacterType)(w)===(0,A.getCharacterType)(T))return!1}var E=h+y-1;if(E<t.length-1){var j=t.charCodeAt(E),B=t.charCodeAt(E+1);if((0,A.getCharacterType)(j)===(0,A.getCharacterType)(B))return!1}return!0}},{key:"_calculatePhraseMatch",value:function _calculatePhraseMatch(t,h,y,w,A){for(var T=[],E=[],j=t.length,B=-j;-1!==(B=y.indexOf(t,B+j));)if(!A||this._isEntireWord(y,B,j)){var N=getOriginalIndex(B,w),V=getOriginalIndex(B+j-1,w)-N+1;T.push(N),E.push(V)}this._pageMatches[h]=T,this._pageMatchesLength[h]=E}},{key:"_calculateWordMatch",value:function _calculateWordMatch(t,h,y,w,A){for(var T=[],E=t.match(/\S+/g),j=0,B=E.length;j<B;j++)for(var N=E[j],V=N.length,W=-V;-1!==(W=y.indexOf(N,W+V));)if(!A||this._isEntireWord(y,W,V)){var H=getOriginalIndex(W,w),G=getOriginalIndex(W+V-1,w)-H+1;T.push({match:H,matchLength:G,skipped:!1})}this._pageMatchesLength[h]=[],this._pageMatches[h]=[],this._prepareMatches(T,this._pageMatches[h],this._pageMatchesLength[h])}},{key:"_calculateMatch",value:function _calculateMatch(t){var h=this._pageContents[t],y=this._pageDiffs[t],w=this._query,A=this._state,T=A.caseSensitive,E=A.entireWord,j=A.phraseSearch;if(0!==w.length){T||(h=h.toLowerCase(),w=w.toLowerCase()),j?this._calculatePhraseMatch(w,t,h,y,E):this._calculateWordMatch(w,t,h,y,E),this._state.highlightAll&&this._updatePage(t),this._resumePageIdx===t&&(this._resumePageIdx=null,this._nextPageMatch());var B=this._pageMatches[t].length;B>0&&(this._matchesCountTotal+=B,this._updateUIResultsCount())}}},{key:"_extractText",value:function _extractText(){var t=this;if(!(this._extractTextPromises.length>0))for(var h=Promise.resolve(),y=function _loop(y,A){var T=(0,w.createPromiseCapability)();t._extractTextPromises[y]=T.promise,h=h.then((function(){return t._pdfDocument.getPage(y+1).then((function(t){return t.getTextContent({normalizeWhitespace:!0})})).then((function(h){for(var w=h.items,A=[],E=0,j=w.length;E<j;E++)A.push(w[E].str);var B=_slicedToArray(normalize(A.join("")),2);t._pageContents[y]=B[0],t._pageDiffs[y]=B[1],T.resolve(y)}),(function(h){console.error("Unable to get text content for page ".concat(y+1),h),t._pageContents[y]="",t._pageDiffs[y]=null,T.resolve(y)}))}))},A=0,T=this._linkService.pagesCount;A<T;A++)y(A)}},{key:"_updatePage",value:function _updatePage(t){this._scrollMatches&&this._selected.pageIdx===t&&(this._linkService.page=t+1),this._eventBus.dispatch("updatetextlayermatches",{source:this,pageIndex:t})}},{key:"_updateAllPages",value:function _updateAllPages(){this._eventBus.dispatch("updatetextlayermatches",{source:this,pageIndex:-1})}},{key:"_nextMatch",value:function _nextMatch(){var t=this,h=this._state.findPrevious,y=this._linkService.page-1,w=this._linkService.pagesCount;if(this._highlightMatches=!0,this._dirtyMatch){this._dirtyMatch=!1,this._selected.pageIdx=this._selected.matchIdx=-1,this._offset.pageIdx=y,this._offset.matchIdx=null,this._offset.wrapped=!1,this._resumePageIdx=null,this._pageMatches.length=0,this._pageMatchesLength.length=0,this._matchesCountTotal=0,this._updateAllPages();for(var A=0;A<w;A++)this._pendingFindMatches.has(A)||(this._pendingFindMatches.add(A),this._extractTextPromises[A].then((function(h){t._pendingFindMatches.delete(h),t._calculateMatch(h)})))}if(""!==this._query){if(!this._resumePageIdx){var T=this._offset;if(this._pagesToSearch=w,null!==T.matchIdx){var j=this._pageMatches[T.pageIdx].length;if(!h&&T.matchIdx+1<j||h&&T.matchIdx>0)return T.matchIdx=h?T.matchIdx-1:T.matchIdx+1,void this._updateMatch(!0);this._advanceOffsetPage(h)}this._nextPageMatch()}}else this._updateUIState(E.FOUND)}},{key:"_matchesReady",value:function _matchesReady(t){var h=this._offset,y=t.length,w=this._state.findPrevious;return y?(h.matchIdx=w?y-1:0,this._updateMatch(!0),!0):(this._advanceOffsetPage(w),!!(h.wrapped&&(h.matchIdx=null,this._pagesToSearch<0))&&(this._updateMatch(!1),!0))}},{key:"_nextPageMatch",value:function _nextPageMatch(){null!==this._resumePageIdx&&console.error("There can only be one pending page.");var t=null;do{var h=this._offset.pageIdx;if(!(t=this._pageMatches[h])){this._resumePageIdx=h;break}}while(!this._matchesReady(t))}},{key:"_advanceOffsetPage",value:function _advanceOffsetPage(t){var h=this._offset,y=this._linkService.pagesCount;h.pageIdx=t?h.pageIdx-1:h.pageIdx+1,h.matchIdx=null,this._pagesToSearch--,(h.pageIdx>=y||h.pageIdx<0)&&(h.pageIdx=t?y-1:0,h.wrapped=!0)}},{key:"_updateMatch",value:function _updateMatch(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],h=E.NOT_FOUND,y=this._offset.wrapped;if(this._offset.wrapped=!1,t){var w=this._selected.pageIdx;this._selected.pageIdx=this._offset.pageIdx,this._selected.matchIdx=this._offset.matchIdx,h=y?E.WRAPPED:E.FOUND,-1!==w&&w!==this._selected.pageIdx&&this._updatePage(w)}this._updateUIState(h,this._state.findPrevious),-1!==this._selected.pageIdx&&(this._scrollMatches=!0,this._updatePage(this._selected.pageIdx))}},{key:"_onFindBarClose",value:function _onFindBarClose(t){var h=this,y=this._pdfDocument;this._firstPageCapability.promise.then((function(){!h._pdfDocument||y&&h._pdfDocument!==y||(h._findTimeout&&(clearTimeout(h._findTimeout),h._findTimeout=null),h._resumePageIdx&&(h._resumePageIdx=null,h._dirtyMatch=!0),h._updateUIState(E.FOUND),h._highlightMatches=!1,h._updateAllPages())}))}},{key:"_requestMatchesCount",value:function _requestMatchesCount(){var t=this._selected,h=t.pageIdx,y=t.matchIdx,w=0,A=this._matchesCountTotal;if(-1!==y){for(var T=0;T<h;T++){var E;w+=(null===(E=this._pageMatches[T])||void 0===E?void 0:E.length)||0}w+=y+1}return(w<1||w>A)&&(w=A=0),{current:w,total:A}}},{key:"_updateUIResultsCount",value:function _updateUIResultsCount(){this._eventBus.dispatch("updatefindmatchescount",{source:this,matchesCount:this._requestMatchesCount()})}},{key:"_updateUIState",value:function _updateUIState(t){var h,y,w=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this._eventBus.dispatch("updatefindcontrolstate",{source:this,state:t,previous:w,matchesCount:this._requestMatchesCount(),rawQuery:null!==(h=null===(y=this._state)||void 0===y?void 0:y.query)&&void 0!==h?h:null})}}]),PDFFindController}();h.PDFFindController=N},(t,h)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.CharacterType=void 0,h.getCharacterType=function getCharacterType(t){if(function isAlphabeticalScript(t){return t<11904}(t))return function isAscii(t){return 0==(65408&t)}(t)?function isAsciiSpace(t){return 32===t||9===t||13===t||10===t}(t)?y.SPACE:function isAsciiAlpha(t){return t>=97&&t<=122||t>=65&&t<=90}(t)||function isAsciiDigit(t){return t>=48&&t<=57}(t)||95===t?y.ALPHA_LETTER:y.PUNCT:function isThai(t){return 3584==(65408&t)}(t)?y.THAI_LETTER:160===t?y.SPACE:y.ALPHA_LETTER;if(function isHan(t){return t>=13312&&t<=40959||t>=63744&&t<=64255}(t))return y.HAN_LETTER;if(function isKatakana(t){return t>=12448&&t<=12543}(t))return y.KATAKANA_LETTER;if(function isHiragana(t){return t>=12352&&t<=12447}(t))return y.HIRAGANA_LETTER;if(function isHalfwidthKatakana(t){return t>=65376&&t<=65439}(t))return y.HALFWIDTH_KATAKANA_LETTER;return y.ALPHA_LETTER};var y={SPACE:0,ALPHA_LETTER:1,PUNCT:2,HAN_LETTER:3,KATAKANA_LETTER:4,HIRAGANA_LETTER:5,HALFWIDTH_KATAKANA_LETTER:6,THAI_LETTER:7};h.CharacterType=y},(t,h,y)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.PDFHistory=void 0,h.isDestArraysEqual=isDestArraysEqual,h.isDestHashesEqual=isDestHashesEqual;var w=y(7);function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _slicedToArray(t,h){return function _arrayWithHoles(t){if(Array.isArray(t))return t}(t)||function _iterableToArrayLimit(t,h){var y=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=y){var w,A,T,E,j=[],B=!0,N=!1;try{if(T=(y=y.call(t)).next,0===h){if(Object(y)!==y)return;B=!1}else for(;!(B=(w=T.call(y)).done)&&(j.push(w.value),j.length!==h);B=!0);}catch(t){N=!0,A=t}finally{try{if(!B&&null!=y.return&&(E=y.return(),Object(E)!==E))return}finally{if(N)throw A}}return j}}(t,h)||function _unsupportedIterableToArray(t,h){if(!t)return;if("string"==typeof t)return _arrayLikeToArray(t,h);var y=Object.prototype.toString.call(t).slice(8,-1);"Object"===y&&t.constructor&&(y=t.constructor.name);if("Map"===y||"Set"===y)return Array.from(t);if("Arguments"===y||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(y))return _arrayLikeToArray(t,h)}(t,h)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(t,h){(null==h||h>t.length)&&(h=t.length);for(var y=0,w=new Array(h);y<h;y++)w[y]=t[y];return w}function _defineProperties(t,h){for(var y=0;y<h.length;y++){var w=h[y];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(t,(A=w.key,T=void 0,T=function _toPrimitive(t,h){if("object"!==_typeof(t)||null===t)return t;var y=t[Symbol.toPrimitive];if(void 0!==y){var w=y.call(t,h||"default");if("object"!==_typeof(w))return w;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===h?String:Number)(t)}(A,"string"),"symbol"===_typeof(T)?T:String(T)),w)}var A,T}function getCurrentHash(){return document.location.hash}var A=function(){function PDFHistory(t){var h=this,y=t.linkService,A=t.eventBus;!function _classCallCheck(t,h){if(!(t instanceof h))throw new TypeError("Cannot call a class as a function")}(this,PDFHistory),this.linkService=y,this.eventBus=A,this._initialized=!1,this._fingerprint="",this.reset(),this._boundEvents=null,this._isViewerInPresentationMode=!1,this.eventBus._on("presentationmodechanged",(function(t){h._isViewerInPresentationMode=t.state!==w.PresentationModeState.NORMAL})),this.eventBus._on("pagesinit",(function(){h._isPagesLoaded=!1,h.eventBus._on("pagesloaded",(function(t){h._isPagesLoaded=!!t.pagesCount}),{once:!0})}))}return function _createClass(t,h,y){return h&&_defineProperties(t.prototype,h),y&&_defineProperties(t,y),Object.defineProperty(t,"prototype",{writable:!1}),t}(PDFHistory,[{key:"initialize",value:function initialize(t){var h=t.fingerprint,y=t.resetHistory,w=void 0!==y&&y,A=t.updateUrl,T=void 0!==A&&A;if(h&&"string"==typeof h){this._initialized&&this.reset();var E=""!==this._fingerprint&&this._fingerprint!==h;this._fingerprint=h,this._updateUrl=!0===T,this._initialized=!0,this._bindEvents();var j=window.history.state;if(this._popStateInProgress=!1,this._blockHashChange=0,this._currentHash=getCurrentHash(),this._numPositionUpdates=0,this._uid=this._maxUid=0,this._destination=null,this._position=null,!this._isValidState(j,!0)||w){var B=this._parseCurrentHash(!0),N=B.hash,V=B.page,W=B.rotation;return!N||E||w?void this._pushOrReplaceState(null,!0):void this._pushOrReplaceState({hash:N,page:V,rotation:W},!0)}var H=j.destination;this._updateInternalState(H,j.uid,!0),void 0!==H.rotation&&(this._initialRotation=H.rotation),H.dest?(this._initialBookmark=JSON.stringify(H.dest),this._destination.page=null):H.hash?this._initialBookmark=H.hash:H.page&&(this._initialBookmark="page=".concat(H.page))}else console.error('PDFHistory.initialize: The "fingerprint" must be a non-empty string.')}},{key:"reset",value:function reset(){this._initialized&&(this._pageHide(),this._initialized=!1,this._unbindEvents()),this._updateViewareaTimeout&&(clearTimeout(this._updateViewareaTimeout),this._updateViewareaTimeout=null),this._initialBookmark=null,this._initialRotation=null}},{key:"push",value:function push(t){var h=this,y=t.namedDest,w=void 0===y?null:y,A=t.explicitDest,T=t.pageNumber;if(this._initialized)if(w&&"string"!=typeof w)console.error("PDFHistory.push: "+'"'.concat(w,'" is not a valid namedDest parameter.'));else if(Array.isArray(A))if(this._isValidPage(T)||null===T&&!this._destination){var E=w||JSON.stringify(A);if(E){var j=!1;if(this._destination&&(isDestHashesEqual(this._destination.hash,E)||isDestArraysEqual(this._destination.dest,A))){if(this._destination.page)return;j=!0}this._popStateInProgress&&!j||(this._pushOrReplaceState({dest:A,hash:E,page:T,rotation:this.linkService.rotation},j),this._popStateInProgress||(this._popStateInProgress=!0,Promise.resolve().then((function(){h._popStateInProgress=!1}))))}}else console.error("PDFHistory.push: "+'"'.concat(T,'" is not a valid pageNumber parameter.'));else console.error("PDFHistory.push: "+'"'.concat(A,'" is not a valid explicitDest parameter.'))}},{key:"pushPage",value:function pushPage(t){var h,y=this;this._initialized&&(this._isValidPage(t)?(null===(h=this._destination)||void 0===h?void 0:h.page)!==t&&(this._popStateInProgress||(this._pushOrReplaceState({dest:null,hash:"page=".concat(t),page:t,rotation:this.linkService.rotation}),this._popStateInProgress||(this._popStateInProgress=!0,Promise.resolve().then((function(){y._popStateInProgress=!1}))))):console.error('PDFHistory.pushPage: "'.concat(t,'" is not a valid page number.')))}},{key:"pushCurrentPosition",value:function pushCurrentPosition(){this._initialized&&!this._popStateInProgress&&this._tryPushCurrentPosition()}},{key:"back",value:function back(){if(this._initialized&&!this._popStateInProgress){var t=window.history.state;this._isValidState(t)&&t.uid>0&&window.history.back()}}},{key:"forward",value:function forward(){if(this._initialized&&!this._popStateInProgress){var t=window.history.state;this._isValidState(t)&&t.uid<this._maxUid&&window.history.forward()}}},{key:"popStateInProgress",get:function get(){return this._initialized&&(this._popStateInProgress||this._blockHashChange>0)}},{key:"initialBookmark",get:function get(){return this._initialized?this._initialBookmark:null}},{key:"initialRotation",get:function get(){return this._initialized?this._initialRotation:null}},{key:"_pushOrReplaceState",value:function _pushOrReplaceState(t){var h,y=arguments.length>1&&void 0!==arguments[1]&&arguments[1]||!this._destination,w={fingerprint:this._fingerprint,uid:y?this._uid:this._uid+1,destination:t};if(this._updateInternalState(t,w.uid),this._updateUrl&&null!=t&&t.hash){var A=document.location.href.split("#")[0];A.startsWith("file://")||(h="".concat(A,"#").concat(t.hash))}y?window.history.replaceState(w,"",h):window.history.pushState(w,"",h)}},{key:"_tryPushCurrentPosition",value:function _tryPushCurrentPosition(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this._position){var h=this._position;if(t&&((h=_extends(Object.create(null),this._position)).temporary=!0),this._destination){if(this._destination.temporary)this._pushOrReplaceState(h,!0);else if(this._destination.hash!==h.hash&&(this._destination.page||!(this._numPositionUpdates<=50))){var y=!1;if(this._destination.page>=h.first&&this._destination.page<=h.page){if(void 0!==this._destination.dest||!this._destination.first)return;y=!0}this._pushOrReplaceState(h,y)}}else this._pushOrReplaceState(h)}}},{key:"_isValidPage",value:function _isValidPage(t){return Number.isInteger(t)&&t>0&&t<=this.linkService.pagesCount}},{key:"_isValidState",value:function _isValidState(t){var h=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!t)return!1;if(t.fingerprint!==this._fingerprint){if(!h)return!1;if("string"!=typeof t.fingerprint||t.fingerprint.length!==this._fingerprint.length)return!1;var y=_slicedToArray(performance.getEntriesByType("navigation"),1)[0];if("reload"!==(null==y?void 0:y.type))return!1}return!(!Number.isInteger(t.uid)||t.uid<0)&&(null!==t.destination&&"object"===_typeof(t.destination))}},{key:"_updateInternalState",value:function _updateInternalState(t,h){var y=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this._updateViewareaTimeout&&(clearTimeout(this._updateViewareaTimeout),this._updateViewareaTimeout=null),y&&null!=t&&t.temporary&&delete t.temporary,this._destination=t,this._uid=h,this._maxUid=Math.max(this._maxUid,h),this._numPositionUpdates=0}},{key:"_parseCurrentHash",value:function _parseCurrentHash(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],h=unescape(getCurrentHash()).substring(1),y=(0,w.parseQueryString)(h),A=y.get("nameddest")||"",T=0|y.get("page");return(!this._isValidPage(T)||t&&A.length>0)&&(T=null),{hash:h,page:T,rotation:this.linkService.rotation}}},{key:"_updateViewarea",value:function _updateViewarea(t){var h=this,y=t.location;this._updateViewareaTimeout&&(clearTimeout(this._updateViewareaTimeout),this._updateViewareaTimeout=null),this._position={hash:this._isViewerInPresentationMode?"page=".concat(y.pageNumber):y.pdfOpenParams.substring(1),page:this.linkService.page,first:y.pageNumber,rotation:y.rotation},this._popStateInProgress||(this._isPagesLoaded&&this._destination&&!this._destination.page&&this._numPositionUpdates++,this._updateViewareaTimeout=setTimeout((function(){h._popStateInProgress||h._tryPushCurrentPosition(!0),h._updateViewareaTimeout=null}),1e3))}},{key:"_popState",value:function _popState(t){var h=this,y=t.state,A=getCurrentHash(),T=this._currentHash!==A;if(this._currentHash=A,y){if(this._isValidState(y)){this._popStateInProgress=!0,T&&(this._blockHashChange++,(0,w.waitOnEventOrTimeout)({target:window,name:"hashchange",delay:1e3}).then((function(){h._blockHashChange--})));var E=y.destination;this._updateInternalState(E,y.uid,!0),(0,w.isValidRotation)(E.rotation)&&(this.linkService.rotation=E.rotation),E.dest?this.linkService.goToDestination(E.dest):E.hash?this.linkService.setHash(E.hash):E.page&&(this.linkService.page=E.page),Promise.resolve().then((function(){h._popStateInProgress=!1}))}}else{this._uid++;var j=this._parseCurrentHash(),B=j.hash,N=j.page,V=j.rotation;this._pushOrReplaceState({hash:B,page:N,rotation:V},!0)}}},{key:"_pageHide",value:function _pageHide(){this._destination&&!this._destination.temporary||this._tryPushCurrentPosition()}},{key:"_bindEvents",value:function _bindEvents(){this._boundEvents||(this._boundEvents={updateViewarea:this._updateViewarea.bind(this),popState:this._popState.bind(this),pageHide:this._pageHide.bind(this)},this.eventBus._on("updateviewarea",this._boundEvents.updateViewarea),window.addEventListener("popstate",this._boundEvents.popState),window.addEventListener("pagehide",this._boundEvents.pageHide))}},{key:"_unbindEvents",value:function _unbindEvents(){this._boundEvents&&(this.eventBus._off("updateviewarea",this._boundEvents.updateViewarea),window.removeEventListener("popstate",this._boundEvents.popState),window.removeEventListener("pagehide",this._boundEvents.pageHide),this._boundEvents=null)}}]),PDFHistory}();function isDestHashesEqual(t,h){return"string"==typeof t&&"string"==typeof h&&(t===h||(0,w.parseQueryString)(t).get("nameddest")===h)}function isDestArraysEqual(t,h){function isEntryEqual(t,h){if(_typeof(t)!==_typeof(h))return!1;if(Array.isArray(t)||Array.isArray(h))return!1;if(null!==t&&"object"===_typeof(t)&&null!==h){if(Object.keys(t).length!==Object.keys(h).length)return!1;for(var y in t)if(!isEntryEqual(t[y],h[y]))return!1;return!0}return t===h||Number.isNaN(t)&&Number.isNaN(h)}if(!Array.isArray(t)||!Array.isArray(h))return!1;if(t.length!==h.length)return!1;for(var y=0,w=t.length;y<w;y++)if(!isEntryEqual(t[y],h[y]))return!1;return!0}h.PDFHistory=A},(t,h,y)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.PDFScriptingManager=void 0;var w=function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}(y(2)),A=y(4),T=y(7),E=y(13);function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _toConsumableArray(t){return function _arrayWithoutHoles(t){if(Array.isArray(t))return _arrayLikeToArray(t)}(t)||function _iterableToArray(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||_unsupportedIterableToArray(t)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ownKeys(t,h){var y=Object.keys(t);if(Object.getOwnPropertySymbols){var w=Object.getOwnPropertySymbols(t);h&&(w=w.filter((function(h){return Object.getOwnPropertyDescriptor(t,h).enumerable}))),y.push.apply(y,w)}return y}function _objectSpread(t){for(var h=1;h<arguments.length;h++){var y=null!=arguments[h]?arguments[h]:{};h%2?ownKeys(Object(y),!0).forEach((function(h){_defineProperty(t,h,y[h])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(y)):ownKeys(Object(y)).forEach((function(h){Object.defineProperty(t,h,Object.getOwnPropertyDescriptor(y,h))}))}return t}function _defineProperty(t,h,y){return(h=_toPropertyKey(h))in t?Object.defineProperty(t,h,{value:y,enumerable:!0,configurable:!0,writable:!0}):t[h]=y,t}function _createForOfIteratorHelper(t,h){var y="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!y){if(Array.isArray(t)||(y=_unsupportedIterableToArray(t))||h&&t&&"number"==typeof t.length){y&&(t=y);var w=0,A=function F(){};return{s:A,n:function n(){return w>=t.length?{done:!0}:{done:!1,value:t[w++]}},e:function e(t){throw t},f:A}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var T,E=!0,j=!1;return{s:function s(){y=y.call(t)},n:function n(){var t=y.next();return E=t.done,t},e:function e(t){j=!0,T=t},f:function f(){try{E||null==y.return||y.return()}finally{if(j)throw T}}}}function _slicedToArray(t,h){return function _arrayWithHoles(t){if(Array.isArray(t))return t}(t)||function _iterableToArrayLimit(t,h){var y=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=y){var w,A,T,E,j=[],B=!0,N=!1;try{if(T=(y=y.call(t)).next,0===h){if(Object(y)!==y)return;B=!1}else for(;!(B=(w=T.call(y)).done)&&(j.push(w.value),j.length!==h);B=!0);}catch(t){N=!0,A=t}finally{try{if(!B&&null!=y.return&&(E=y.return(),Object(E)!==E))return}finally{if(N)throw A}}return j}}(t,h)||_unsupportedIterableToArray(t,h)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _unsupportedIterableToArray(t,h){if(t){if("string"==typeof t)return _arrayLikeToArray(t,h);var y=Object.prototype.toString.call(t).slice(8,-1);return"Object"===y&&t.constructor&&(y=t.constructor.name),"Map"===y||"Set"===y?Array.from(t):"Arguments"===y||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(y)?_arrayLikeToArray(t,h):void 0}}function _arrayLikeToArray(t,h){(null==h||h>t.length)&&(h=t.length);for(var y=0,w=new Array(h);y<h;y++)w[y]=t[y];return w}function asyncGeneratorStep(t,h,y,w,A,T,E){try{var j=t[T](E),B=j.value}catch(t){return void y(t)}j.done?h(B):Promise.resolve(B).then(w,A)}function _asyncToGenerator(t){return function(){var h=this,y=arguments;return new Promise((function(w,A){var T=t.apply(h,y);function _next(t){asyncGeneratorStep(T,w,A,_next,_throw,"next",t)}function _throw(t){asyncGeneratorStep(T,w,A,_next,_throw,"throw",t)}_next(void 0)}))}}function _defineProperties(t,h){for(var y=0;y<h.length;y++){var w=h[y];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(t,_toPropertyKey(w.key),w)}}function _toPropertyKey(t){var h=function _toPrimitive(t,h){if("object"!==_typeof(t)||null===t)return t;var y=t[Symbol.toPrimitive];if(void 0!==y){var w=y.call(t,h||"default");if("object"!==_typeof(w))return w;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===h?String:Number)(t)}(t,"string");return"symbol"===_typeof(h)?h:String(h)}var j=function(){function PDFScriptingManager(t){var h=this,y=t.eventBus,w=t.sandboxBundleSrc,A=void 0===w?null:w,T=t.scriptingFactory,E=void 0===T?null:T,j=t.docPropertiesLookup,B=void 0===j?null:j;!function _classCallCheck(t,h){if(!(t instanceof h))throw new TypeError("Cannot call a class as a function")}(this,PDFScriptingManager),this._pdfDocument=null,this._pdfViewer=null,this._closeCapability=null,this._destroyCapability=null,this._scripting=null,this._mouseState=Object.create(null),this._ready=!1,this._eventBus=y,this._sandboxBundleSrc=A,this._scriptingFactory=E,this._docPropertiesLookup=B,this._scriptingFactory||window.addEventListener("updatefromsandbox",(function(t){h._eventBus.dispatch("updatefromsandbox",{source:window,detail:t.detail})}))}var t,h,j,B,N,V,W,H,G,z;return function _createClass(t,h,y){return h&&_defineProperties(t.prototype,h),y&&_defineProperties(t,y),Object.defineProperty(t,"prototype",{writable:!1}),t}(PDFScriptingManager,[{key:"setViewer",value:function setViewer(t){this._pdfViewer=t}},{key:"setDocument",value:(z=_asyncToGenerator(w.default.mark((function _callee2(t){var h,y,A,T,E,j,B,N,V,W,H,G,z,$,J,X,K,ne=this;return w.default.wrap((function _callee2$(ue){for(;;)switch(ue.prev=ue.next){case 0:if(!this._pdfDocument){ue.next=3;break}return ue.next=3,this._destroyScripting();case 3:if(this._pdfDocument=t,t){ue.next=6;break}return ue.abrupt("return");case 6:return ue.next=8,Promise.all([t.getFieldObjects(),t.getCalculationOrderIds(),t.getJSActions()]);case 8:if(y=ue.sent,A=_slicedToArray(y,3),T=A[0],E=A[1],j=A[2],T||j){ue.next=17;break}return ue.next=16,this._destroyScripting();case 16:return ue.abrupt("return");case 17:if(t===this._pdfDocument){ue.next=19;break}return ue.abrupt("return");case 19:ue.prev=19,this._scripting=this._createScripting(),ue.next=29;break;case 23:return ue.prev=23,ue.t0=ue.catch(19),console.error('PDFScriptingManager.setDocument: "'.concat(null===ue.t0||void 0===ue.t0?void 0:ue.t0.message,'".')),ue.next=28,this._destroyScripting();case 28:return ue.abrupt("return");case 29:this._internalEvents.set("updatefromsandbox",(function(t){(null==t?void 0:t.source)===window&&ne._updateFromSandbox(t.detail)})),this._internalEvents.set("dispatcheventinsandbox",(function(t){var h;null===(h=ne._scripting)||void 0===h||h.dispatchEventInSandbox(t.detail)})),this._internalEvents.set("pagechanging",(function(t){var h=t.pageNumber,y=t.previous;h!==y&&(ne._dispatchPageClose(y),ne._dispatchPageOpen(h))})),this._internalEvents.set("pagerendered",(function(t){var h=t.pageNumber;ne._pageOpenPending.has(h)&&h===ne._pdfViewer.currentPageNumber&&ne._dispatchPageOpen(h)})),this._internalEvents.set("pagesdestroy",function(){var t=_asyncToGenerator(w.default.mark((function _callee(t){var h,y;return w.default.wrap((function _callee$(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ne._dispatchPageClose(ne._pdfViewer.currentPageNumber);case 2:return t.next=4,null===(h=ne._scripting)||void 0===h?void 0:h.dispatchEventInSandbox({id:"doc",name:"WillClose"});case 4:null===(y=ne._closeCapability)||void 0===y||y.resolve();case 5:case"end":return t.stop()}}),_callee)})));return function(h){return t.apply(this,arguments)}}()),this._domEvents.set("mousedown",(function(t){ne._mouseState.isDown=!0})),this._domEvents.set("mouseup",(function(t){ne._mouseState.isDown=!1})),B=_createForOfIteratorHelper(this._internalEvents);try{for(B.s();!(N=B.n()).done;)V=_slicedToArray(N.value,2),W=V[0],H=V[1],this._eventBus._on(W,H)}catch(t){B.e(t)}finally{B.f()}G=_createForOfIteratorHelper(this._domEvents);try{for(G.s();!(z=G.n()).done;)$=_slicedToArray(z.value,2),J=$[0],X=$[1],window.addEventListener(J,X)}catch(t){G.e(t)}finally{G.f()}return ue.prev=40,ue.next=43,this._getDocProperties();case 43:if(K=ue.sent,t===this._pdfDocument){ue.next=46;break}return ue.abrupt("return");case 46:return ue.next=48,this._scripting.createSandbox({objects:T,calculationOrder:E,appInfo:{platform:navigator.platform,language:navigator.language},docInfo:_objectSpread(_objectSpread({},K),{},{actions:j})});case 48:this._eventBus.dispatch("sandboxcreated",{source:this}),ue.next=57;break;case 51:return ue.prev=51,ue.t1=ue.catch(40),console.error('PDFScriptingManager.setDocument: "'.concat(null===ue.t1||void 0===ue.t1?void 0:ue.t1.message,'".')),ue.next=56,this._destroyScripting();case 56:return ue.abrupt("return");case 57:return ue.next=59,null===(h=this._scripting)||void 0===h?void 0:h.dispatchEventInSandbox({id:"doc",name:"Open"});case 59:return ue.next=61,this._dispatchPageOpen(this._pdfViewer.currentPageNumber,!0);case 61:Promise.resolve().then((function(){t===ne._pdfDocument&&(ne._ready=!0)}));case 62:case"end":return ue.stop()}}),_callee2,this,[[19,23],[40,51]])}))),function setDocument(t){return z.apply(this,arguments)})},{key:"dispatchWillSave",value:(G=_asyncToGenerator(w.default.mark((function _callee3(t){var h;return w.default.wrap((function _callee3$(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",null===(h=this._scripting)||void 0===h?void 0:h.dispatchEventInSandbox({id:"doc",name:"WillSave"}));case 1:case"end":return t.stop()}}),_callee3,this)}))),function dispatchWillSave(t){return G.apply(this,arguments)})},{key:"dispatchDidSave",value:(H=_asyncToGenerator(w.default.mark((function _callee4(t){var h;return w.default.wrap((function _callee4$(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",null===(h=this._scripting)||void 0===h?void 0:h.dispatchEventInSandbox({id:"doc",name:"DidSave"}));case 1:case"end":return t.stop()}}),_callee4,this)}))),function dispatchDidSave(t){return H.apply(this,arguments)})},{key:"dispatchWillPrint",value:(W=_asyncToGenerator(w.default.mark((function _callee5(t){var h;return w.default.wrap((function _callee5$(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",null===(h=this._scripting)||void 0===h?void 0:h.dispatchEventInSandbox({id:"doc",name:"WillPrint"}));case 1:case"end":return t.stop()}}),_callee5,this)}))),function dispatchWillPrint(t){return W.apply(this,arguments)})},{key:"dispatchDidPrint",value:(V=_asyncToGenerator(w.default.mark((function _callee6(t){var h;return w.default.wrap((function _callee6$(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",null===(h=this._scripting)||void 0===h?void 0:h.dispatchEventInSandbox({id:"doc",name:"DidPrint"}));case 1:case"end":return t.stop()}}),_callee6,this)}))),function dispatchDidPrint(t){return V.apply(this,arguments)})},{key:"mouseState",get:function get(){return this._mouseState}},{key:"destroyPromise",get:function get(){var t;return(null===(t=this._destroyCapability)||void 0===t?void 0:t.promise)||null}},{key:"ready",get:function get(){return this._ready}},{key:"_internalEvents",get:function get(){return(0,A.shadow)(this,"_internalEvents",new Map)}},{key:"_domEvents",get:function get(){return(0,A.shadow)(this,"_domEvents",new Map)}},{key:"_pageOpenPending",get:function get(){return(0,A.shadow)(this,"_pageOpenPending",new Set)}},{key:"_visitedPages",get:function get(){return(0,A.shadow)(this,"_visitedPages",new Map)}},{key:"_updateFromSandbox",value:(N=_asyncToGenerator(w.default.mark((function _callee7(t){var h,y,A,E,j,B,N,V,W,H,G,z;return w.default.wrap((function _callee7$(w){for(;;)switch(w.prev=w.next){case 0:if(h=this._pdfViewer.isInPresentationMode||this._pdfViewer.isChangingPresentationMode,y=t.id,A=t.siblings,E=t.command,j=t.value,y){w.next=46;break}w.t0=E,w.next="clear"===w.t0?6:"error"===w.t0?8:"layout"===w.t0?10:"page-num"===w.t0?15:"print"===w.t0?17:"println"===w.t0?21:"zoom"===w.t0?23:"SaveAs"===w.t0?27:"FirstPage"===w.t0?29:"LastPage"===w.t0?31:"NextPage"===w.t0?33:"PrevPage"===w.t0?35:"ZoomViewIn"===w.t0?37:"ZoomViewOut"===w.t0?41:45;break;case 6:return console.clear(),w.abrupt("break",45);case 8:return console.error(j),w.abrupt("break",45);case 10:if(!h){w.next=12;break}return w.abrupt("return");case 12:return B=(0,T.apiPageLayoutToViewerModes)(j),this._pdfViewer.spreadMode=B.spreadMode,w.abrupt("break",45);case 15:return this._pdfViewer.currentPageNumber=j+1,w.abrupt("break",45);case 17:return w.next=19,this._pdfViewer.pagesPromise;case 19:return this._eventBus.dispatch("print",{source:this}),w.abrupt("break",45);case 21:return console.log(j),w.abrupt("break",45);case 23:if(!h){w.next=25;break}return w.abrupt("return");case 25:return this._pdfViewer.currentScaleValue=j,w.abrupt("break",45);case 27:return this._eventBus.dispatch("save",{source:this}),w.abrupt("break",45);case 29:return this._pdfViewer.currentPageNumber=1,w.abrupt("break",45);case 31:return this._pdfViewer.currentPageNumber=this._pdfViewer.pagesCount,w.abrupt("break",45);case 33:return this._pdfViewer.nextPage(),w.abrupt("break",45);case 35:return this._pdfViewer.previousPage(),w.abrupt("break",45);case 37:if(!h){w.next=39;break}return w.abrupt("return");case 39:return this._pdfViewer.increaseScale(),w.abrupt("break",45);case 41:if(!h){w.next=43;break}return w.abrupt("return");case 43:return this._pdfViewer.decreaseScale(),w.abrupt("break",45);case 45:return w.abrupt("return");case 46:if(!h){w.next=49;break}if(!t.focus){w.next=49;break}return w.abrupt("return");case 49:delete t.id,delete t.siblings,N=A?[y].concat(_toConsumableArray(A)):[y],V=_createForOfIteratorHelper(N);try{for(V.s();!(W=V.n()).done;)H=W.value,(G=document.getElementById(H))?G.dispatchEvent(new CustomEvent("updatefromsandbox",{detail:t})):null===(z=this._pdfDocument)||void 0===z||z.annotationStorage.setValue(H,t)}catch(t){V.e(t)}finally{V.f()}case 54:case"end":return w.stop()}}),_callee7,this)}))),function _updateFromSandbox(t){return N.apply(this,arguments)})},{key:"_dispatchPageOpen",value:(B=_asyncToGenerator(w.default.mark((function _callee9(t){var h,y,T,j,B,N=this,V=arguments;return w.default.wrap((function _callee9$(W){for(;;)switch(W.prev=W.next){case 0:if(h=V.length>1&&void 0!==V[1]&&V[1],y=this._pdfDocument,T=this._visitedPages,h&&(this._closeCapability=(0,A.createPromiseCapability)()),this._closeCapability){W.next=5;break}return W.abrupt("return");case 5:if((null==(j=this._pdfViewer.getPageView(t-1))?void 0:j.renderingState)===E.RenderingStates.FINISHED){W.next=9;break}return this._pageOpenPending.add(t),W.abrupt("return");case 9:this._pageOpenPending.delete(t),B=_asyncToGenerator(w.default.mark((function _callee8(){var h,A,E;return w.default.wrap((function _callee8$(w){for(;;)switch(w.prev=w.next){case 0:return w.next=2,T.has(t)?null:null===(h=j.pdfPage)||void 0===h?void 0:h.getJSActions();case 2:if(E=w.sent,y===N._pdfDocument){w.next=5;break}return w.abrupt("return");case 5:return w.next=7,null===(A=N._scripting)||void 0===A?void 0:A.dispatchEventInSandbox({id:"page",name:"PageOpen",pageNumber:t,actions:E});case 7:case"end":return w.stop()}}),_callee8)})))(),T.set(t,B);case 12:case"end":return W.stop()}}),_callee9,this)}))),function _dispatchPageOpen(t){return B.apply(this,arguments)})},{key:"_dispatchPageClose",value:(j=_asyncToGenerator(w.default.mark((function _callee10(t){var h,y,A,T;return w.default.wrap((function _callee10$(w){for(;;)switch(w.prev=w.next){case 0:if(y=this._pdfDocument,A=this._visitedPages,this._closeCapability){w.next=3;break}return w.abrupt("return");case 3:if(!this._pageOpenPending.has(t)){w.next=5;break}return w.abrupt("return");case 5:if(T=A.get(t)){w.next=8;break}return w.abrupt("return");case 8:return A.set(t,null),w.next=11,T;case 11:if(y===this._pdfDocument){w.next=13;break}return w.abrupt("return");case 13:return w.next=15,null===(h=this._scripting)||void 0===h?void 0:h.dispatchEventInSandbox({id:"page",name:"PageClose",pageNumber:t});case 15:case"end":return w.stop()}}),_callee10,this)}))),function _dispatchPageClose(t){return j.apply(this,arguments)})},{key:"_getDocProperties",value:(h=_asyncToGenerator(w.default.mark((function _callee11(){var t,h;return w.default.wrap((function _callee11$(w){for(;;)switch(w.prev=w.next){case 0:if(!this._docPropertiesLookup){w.next=2;break}return w.abrupt("return",this._docPropertiesLookup(this._pdfDocument));case 2:return t=y(24),h=t.docPropertiesLookup,w.abrupt("return",h(this._pdfDocument));case 4:case"end":return w.stop()}}),_callee11,this)}))),function _getDocProperties(){return h.apply(this,arguments)})},{key:"_createScripting",value:function _createScripting(){if(this._destroyCapability=(0,A.createPromiseCapability)(),this._scripting)throw new Error("_createScripting: Scripting already exists.");return this._scriptingFactory?this._scriptingFactory.createScripting({sandboxBundleSrc:this._sandboxBundleSrc}):new(0,y(24).GenericScripting)(this._sandboxBundleSrc)}},{key:"_destroyScripting",value:(t=_asyncToGenerator(w.default.mark((function _callee12(){var t,h,y,A,T,E,j,B,N,V,W,H;return w.default.wrap((function _callee12$(w){for(;;)switch(w.prev=w.next){case 0:if(this._scripting){w.next=4;break}return this._pdfDocument=null,null===(h=this._destroyCapability)||void 0===h||h.resolve(),w.abrupt("return");case 4:if(!this._closeCapability){w.next=8;break}return w.next=7,Promise.race([this._closeCapability.promise,new Promise((function(t){setTimeout(t,1e3)}))]).catch((function(t){}));case 7:this._closeCapability=null;case 8:return this._pdfDocument=null,w.prev=9,w.next=12,this._scripting.destroySandbox();case 12:w.next=16;break;case 14:w.prev=14,w.t0=w.catch(9);case 16:y=_createForOfIteratorHelper(this._internalEvents);try{for(y.s();!(A=y.n()).done;)T=_slicedToArray(A.value,2),E=T[0],j=T[1],this._eventBus._off(E,j)}catch(t){y.e(t)}finally{y.f()}this._internalEvents.clear(),B=_createForOfIteratorHelper(this._domEvents);try{for(B.s();!(N=B.n()).done;)V=_slicedToArray(N.value,2),W=V[0],H=V[1],window.removeEventListener(W,H)}catch(t){B.e(t)}finally{B.f()}this._domEvents.clear(),this._pageOpenPending.clear(),this._visitedPages.clear(),this._scripting=null,delete this._mouseState.isDown,this._ready=!1,null===(t=this._destroyCapability)||void 0===t||t.resolve();case 28:case"end":return w.stop()}}),_callee12,this,[[9,14]])}))),function _destroyScripting(){return t.apply(this,arguments)})}]),PDFScriptingManager}();h.PDFScriptingManager=j},(t,h,y)=>{function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}Object.defineProperty(h,"__esModule",{value:!0}),h.GenericScripting=void 0,h.docPropertiesLookup=function docPropertiesLookup(t){return _docPropertiesLookup.apply(this,arguments)};var w=function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}(y(2)),A=y(4);function ownKeys(t,h){var y=Object.keys(t);if(Object.getOwnPropertySymbols){var w=Object.getOwnPropertySymbols(t);h&&(w=w.filter((function(h){return Object.getOwnPropertyDescriptor(t,h).enumerable}))),y.push.apply(y,w)}return y}function _objectSpread(t){for(var h=1;h<arguments.length;h++){var y=null!=arguments[h]?arguments[h]:{};h%2?ownKeys(Object(y),!0).forEach((function(h){_defineProperty(t,h,y[h])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(y)):ownKeys(Object(y)).forEach((function(h){Object.defineProperty(t,h,Object.getOwnPropertyDescriptor(y,h))}))}return t}function _defineProperty(t,h,y){return(h=_toPropertyKey(h))in t?Object.defineProperty(t,h,{value:y,enumerable:!0,configurable:!0,writable:!0}):t[h]=y,t}function _defineProperties(t,h){for(var y=0;y<h.length;y++){var w=h[y];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(t,_toPropertyKey(w.key),w)}}function _toPropertyKey(t){var h=function _toPrimitive(t,h){if("object"!==_typeof(t)||null===t)return t;var y=t[Symbol.toPrimitive];if(void 0!==y){var w=y.call(t,h||"default");if("object"!==_typeof(w))return w;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===h?String:Number)(t)}(t,"string");return"symbol"===_typeof(h)?h:String(h)}function asyncGeneratorStep(t,h,y,w,A,T,E){try{var j=t[T](E),B=j.value}catch(t){return void y(t)}j.done?h(B):Promise.resolve(B).then(w,A)}function _asyncToGenerator(t){return function(){var h=this,y=arguments;return new Promise((function(w,A){var T=t.apply(h,y);function _next(t){asyncGeneratorStep(T,w,A,_next,_throw,"next",t)}function _throw(t){asyncGeneratorStep(T,w,A,_next,_throw,"throw",t)}_next(void 0)}))}}function _docPropertiesLookup(){return(_docPropertiesLookup=_asyncToGenerator(w.default.mark((function _callee4(t){var h,y,T,E,j,B,N,V,W;return w.default.wrap((function _callee4$(w){for(;;)switch(w.prev=w.next){case 0:return y=(h="").split("#")[0],w.next=3,t.getMetadata();case 3:if(T=w.sent,E=T.info,j=T.metadata,B=T.contentDispositionFilename,N=T.contentLength){w.next=14;break}return w.next=11,t.getDownloadInfo();case 11:V=w.sent,W=V.length,N=W;case 14:return w.abrupt("return",_objectSpread(_objectSpread({},E),{},{baseURL:y,filesize:N,filename:B||(0,A.getPdfFilenameFromUrl)(h),metadata:null==j?void 0:j.getRaw(),authors:null==j?void 0:j.get("dc:creator"),numPages:t.numPages,URL:h}));case 15:case"end":return w.stop()}}),_callee4)})))).apply(this,arguments)}var T=function(){function GenericScripting(t){!function _classCallCheck(t,h){if(!(t instanceof h))throw new TypeError("Cannot call a class as a function")}(this,GenericScripting),this._ready=(0,A.loadScript)(t,!0).then((function(){return window.pdfjsSandbox.QuickJSSandbox()}))}var t,h,y;return function _createClass(t,h,y){return h&&_defineProperties(t.prototype,h),y&&_defineProperties(t,y),Object.defineProperty(t,"prototype",{writable:!1}),t}(GenericScripting,[{key:"createSandbox",value:(y=_asyncToGenerator(w.default.mark((function _callee(t){return w.default.wrap((function _callee$(h){for(;;)switch(h.prev=h.next){case 0:return h.next=2,this._ready;case 2:h.sent.create(t);case 4:case"end":return h.stop()}}),_callee,this)}))),function createSandbox(t){return y.apply(this,arguments)})},{key:"dispatchEventInSandbox",value:(h=_asyncToGenerator(w.default.mark((function _callee2(t){return w.default.wrap((function _callee2$(h){for(;;)switch(h.prev=h.next){case 0:return h.next=2,this._ready;case 2:h.sent.dispatchEvent(t);case 4:case"end":return h.stop()}}),_callee2,this)}))),function dispatchEventInSandbox(t){return h.apply(this,arguments)})},{key:"destroySandbox",value:(t=_asyncToGenerator(w.default.mark((function _callee3(){return w.default.wrap((function _callee3$(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._ready;case 2:t.sent.nukeSandbox();case 4:case"end":return t.stop()}}),_callee3,this)}))),function destroySandbox(){return t.apply(this,arguments)})}]),GenericScripting}();h.GenericScripting=T}],h={};function __w_pdfjs_require__(y){var w=h[y];if(void 0!==w)return w.exports;var A=h[y]={id:y,loaded:!1,exports:{}};return t[y](A,A.exports,__w_pdfjs_require__),A.loaded=!0,A.exports}__w_pdfjs_require__.nmd=t=>(t.paths=[],t.children||(t.children=[]),t);var w={};return(()=>{var t=w;Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"AnnotationLayerBuilder",{enumerable:!0,get:function get(){return h.AnnotationLayerBuilder}}),Object.defineProperty(t,"DefaultAnnotationLayerFactory",{enumerable:!0,get:function get(){return h.DefaultAnnotationLayerFactory}}),Object.defineProperty(t,"DefaultStructTreeLayerFactory",{enumerable:!0,get:function get(){return y.DefaultStructTreeLayerFactory}}),Object.defineProperty(t,"DefaultTextLayerFactory",{enumerable:!0,get:function get(){return A.DefaultTextLayerFactory}}),Object.defineProperty(t,"DefaultXfaLayerFactory",{enumerable:!0,get:function get(){return T.DefaultXfaLayerFactory}}),Object.defineProperty(t,"DownloadManager",{enumerable:!0,get:function get(){return N.DownloadManager}}),Object.defineProperty(t,"EventBus",{enumerable:!0,get:function get(){return E.EventBus}}),Object.defineProperty(t,"GenericL10n",{enumerable:!0,get:function get(){return V.GenericL10n}}),Object.defineProperty(t,"NullL10n",{enumerable:!0,get:function get(){return W.NullL10n}}),Object.defineProperty(t,"PDFFindController",{enumerable:!0,get:function get(){return H.PDFFindController}}),Object.defineProperty(t,"PDFHistory",{enumerable:!0,get:function get(){return G.PDFHistory}}),Object.defineProperty(t,"PDFLinkService",{enumerable:!0,get:function get(){return j.PDFLinkService}}),Object.defineProperty(t,"PDFPageView",{enumerable:!0,get:function get(){return z.PDFPageView}}),Object.defineProperty(t,"PDFScriptingManager",{enumerable:!0,get:function get(){return $.PDFScriptingManager}}),Object.defineProperty(t,"PDFSinglePageViewer",{enumerable:!0,get:function get(){return B.PDFSinglePageViewer}}),Object.defineProperty(t,"PDFViewer",{enumerable:!0,get:function get(){return B.PDFViewer}}),Object.defineProperty(t,"ProgressBar",{enumerable:!0,get:function get(){return E.ProgressBar}}),Object.defineProperty(t,"SimpleLinkService",{enumerable:!0,get:function get(){return j.SimpleLinkService}}),Object.defineProperty(t,"StructTreeLayerBuilder",{enumerable:!0,get:function get(){return y.StructTreeLayerBuilder}}),Object.defineProperty(t,"TextLayerBuilder",{enumerable:!0,get:function get(){return A.TextLayerBuilder}}),Object.defineProperty(t,"XfaLayerBuilder",{enumerable:!0,get:function get(){return T.XfaLayerBuilder}});var h=__w_pdfjs_require__(1),y=__w_pdfjs_require__(8),A=__w_pdfjs_require__(9),T=__w_pdfjs_require__(10),E=__w_pdfjs_require__(7),j=__w_pdfjs_require__(6),B=__w_pdfjs_require__(11),N=__w_pdfjs_require__(17),V=__w_pdfjs_require__(18),W=__w_pdfjs_require__(5),H=__w_pdfjs_require__(20),G=__w_pdfjs_require__(22),z=__w_pdfjs_require__(14),$=__w_pdfjs_require__(23)})(),w})()}))},23562:function(t,h,y){var w=y(97096),A=y(31781),T=y(27024),E=y(66417),j=y(55830),B=y(8093),N=y(25996),V=y(66028);function _interopDefaultLegacy(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var W=_interopDefaultLegacy(w),H=_interopDefaultLegacy(A),G=_interopDefaultLegacy(T),z=_interopDefaultLegacy(E),$=_interopDefaultLegacy(j),J=_interopDefaultLegacy(B),X=_interopDefaultLegacy(N),K=_interopDefaultLegacy(V).default.File,ne=K;try{void 0!==K&&new K([],"")}catch(t){ne=function FilePonyfill(t,h,y){var w=new Blob(t,y||{});return w.name=h,w.lastModified=y&&y.lastModified||X.default(),w.lastModifiedDate=new Date(w.lastModified),J.default(w,$.default(this)),w};var ue=z.default(K.prototype);G.default(ue,"size",H.default(Blob.prototype,"size")),G.default(ue,"type",H.default(Blob.prototype,"type")),ue.slice=W.default(Blob.prototype)||Blob.prototype.mozSlice||Blob.prototype.webkitSlice,ue.constructor=ne,ne.prototype=ue}var pe=ne;h.Z=pe},66028:function(t,h,y){function _interopDefaultLegacy(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}Object.defineProperty(h,"__esModule",{value:!0});var w=_interopDefaultLegacy(y(27024));function getGlobalThis(){if("undefined"!=typeof globalThis)return globalThis;if("undefined"!=typeof window)return window;if("undefined"!=typeof WorkerGlobalScope)return self;if(void 0!==y.g)return y.g;if(this)return this;w.default(Object.prototype,"__global_this__",{get:function get(){return this},configurable:!0});try{return __global_this__}finally{delete Object.prototype.__global_this__}}var A=getGlobalThis();h.default=A,h.getGlobalThis=getGlobalThis,h.globalThis=A},68788:function(t){const toBlob=function(t){const h=t.split(",")[0].split(":")[1].split(";")[0],y=atob(t.split(",")[1]),w=y.length,A=new window.ArrayBuffer(w),T=new window.Uint8Array(A);for(let t=0;t<w;t++)T[t]=y.charCodeAt(t);return new Blob([T],{type:h})},h=void 0!==window.HTMLCanvasElement&&void 0!==window.atob&&void 0!==window.Blob&&void 0!==window.ArrayBuffer&&void 0!==window.Uint8Array;t.exports=toBlob,t.exports.init=function(){if(!t.exports.supported)return;const h=window.HTMLCanvasElement.prototype;!h.toBlob&&h.toDataURL&&(h.toBlob=function(t,h,y){t(toBlob(this.toDataURL(h,y)))})},t.exports.supported=h},13031:function(t,h,y){y(53271);var w=y(81148);t.exports=w("Array").slice},53812:function(t,h,y){y(17833);var w=y(52501);t.exports=w.Date.now},87285:function(t,h,y){var w=y(13031),A=Array.prototype;t.exports=function(t){var h=t.slice;return t===A||t instanceof Array&&h===A.slice?w:h}},62414:function(t,h,y){y(28145);var w=y(52501).Object;t.exports=function create(t,h){return w.create(t,h)}},23908:function(t,h,y){y(39224);var w=y(52501).Object,A=t.exports=function defineProperty(t,h,y){return w.defineProperty(t,h,y)};w.defineProperty.sham&&(A.sham=!0)},68786:function(t,h,y){y(87058);var w=y(52501).Object,A=t.exports=function getOwnPropertyDescriptor(t,h){return w.getOwnPropertyDescriptor(t,h)};w.getOwnPropertyDescriptor.sham&&(A.sham=!0)},86450:function(t,h,y){y(57059);var w=y(52501);t.exports=w.Object.getPrototypeOf},25708:function(t,h,y){y(46719);var w=y(52501);t.exports=w.Object.setPrototypeOf},18222:function(t){t.exports=function(t){if("function"!=typeof t)throw TypeError(String(t)+" is not a function");return t}},84046:function(t,h,y){var w=y(46868);t.exports=function(t){if(!w(t)&&null!==t)throw TypeError("Can't set "+String(t)+" as a prototype");return t}},4665:function(t,h,y){var w=y(46868);t.exports=function(t){if(!w(t))throw TypeError(String(t)+" is not an object");return t}},40268:function(t,h,y){var w=y(8252),A=y(76781),T=y(55636),createMethod=function(t){return function(h,y,E){var j,B=w(h),N=A(B.length),V=T(E,N);if(t&&y!=y){for(;N>V;)if((j=B[V++])!=j)return!0}else for(;N>V;V++)if((t||V in B)&&B[V]===y)return t||V||0;return!t&&-1}};t.exports={includes:createMethod(!0),indexOf:createMethod(!1)}},44472:function(t,h,y){var w=y(76637),A=y(1012),T=y(26859),E=A("species");t.exports=function(t){return T>=51||!w((function(){var h=[];return(h.constructor={})[E]=function(){return{foo:1}},1!==h[t](Boolean).foo}))}},54621:function(t){var h={}.toString;t.exports=function(t){return h.call(t).slice(8,-1)}},62059:function(t,h,y){var w=y(76637);t.exports=!w((function(){function F(){}return F.prototype.constructor=null,Object.getPrototypeOf(new F)!==F.prototype}))},2976:function(t,h,y){var w=y(58222),A=y(39139),T=y(39182);t.exports=w?function(t,h,y){return A.f(t,h,T(1,y))}:function(t,h,y){return t[h]=y,t}},39182:function(t){t.exports=function(t,h){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:h}}},85565:function(t,h,y){var w=y(89519),A=y(39139),T=y(39182);t.exports=function(t,h,y){var E=w(h);E in t?A.f(t,E,T(0,y)):t[E]=y}},58222:function(t,h,y){var w=y(76637);t.exports=!w((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},73050:function(t,h,y){var w=y(55394),A=y(46868),T=w.document,E=A(T)&&A(T.createElement);t.exports=function(t){return E?T.createElement(t):{}}},94924:function(t,h,y){var w=y(54621),A=y(55394);t.exports="process"==w(A.process)},25915:function(t,h,y){var w=y(95873);t.exports=w("navigator","userAgent")||""},26859:function(t,h,y){var w,A,T=y(55394),E=y(25915),j=T.process,B=j&&j.versions,N=B&&B.v8;N?A=(w=N.split("."))[0]+w[1]:E&&(!(w=E.match(/Edge\/(\d+)/))||w[1]>=74)&&(w=E.match(/Chrome\/(\d+)/))&&(A=w[1]),t.exports=A&&+A},81148:function(t,h,y){var w=y(52501);t.exports=function(t){return w[t+"Prototype"]}},63228:function(t){t.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},12225:function(t,h,y){var w=y(55394),A=y(52249).f,T=y(44767),E=y(52501),j=y(28303),B=y(2976),N=y(21470),wrapConstructor=function(t){var Wrapper=function(h,y,w){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(h);case 2:return new t(h,y)}return new t(h,y,w)}return t.apply(this,arguments)};return Wrapper.prototype=t.prototype,Wrapper};t.exports=function(t,h){var y,V,W,H,G,z,$,J,X=t.target,K=t.global,ne=t.stat,ue=t.proto,pe=K?w:ne?w[X]:(w[X]||{}).prototype,me=K?E:E[X]||(E[X]={}),ge=me.prototype;for(W in h)y=!T(K?W:X+(ne?".":"#")+W,t.forced)&&pe&&N(pe,W),G=me[W],y&&(z=t.noTargetGet?(J=A(pe,W))&&J.value:pe[W]),H=y&&z?z:h[W],y&&typeof G==typeof H||($=t.bind&&y?j(H,w):t.wrap&&y?wrapConstructor(H):ue&&"function"==typeof H?j(Function.call,H):H,(t.sham||H&&H.sham||G&&G.sham)&&B($,"sham",!0),me[W]=$,ue&&(N(E,V=X+"Prototype")||B(E,V,{}),E[V][W]=H,t.real&&ge&&!ge[W]&&B(ge,W,H)))}},76637:function(t){t.exports=function(t){try{return!!t()}catch(t){return!0}}},28303:function(t,h,y){var w=y(18222);t.exports=function(t,h,y){if(w(t),void 0===h)return t;switch(y){case 0:return function(){return t.call(h)};case 1:return function(y){return t.call(h,y)};case 2:return function(y,w){return t.call(h,y,w)};case 3:return function(y,w,A){return t.call(h,y,w,A)}}return function(){return t.apply(h,arguments)}}},95873:function(t,h,y){var w=y(52501),A=y(55394),aFunction=function(t){return"function"==typeof t?t:void 0};t.exports=function(t,h){return arguments.length<2?aFunction(w[t])||aFunction(A[t]):w[t]&&w[t][h]||A[t]&&A[t][h]}},55394:function(t,h,y){var check=function(t){return t&&t.Math==Math&&t};t.exports=check("object"==typeof globalThis&&globalThis)||check("object"==typeof window&&window)||check("object"==typeof self&&self)||check("object"==typeof y.g&&y.g)||function(){return this}()||Function("return this")()},21470:function(t){var h={}.hasOwnProperty;t.exports=function(t,y){return h.call(t,y)}},76265:function(t){t.exports={}},98442:function(t,h,y){var w=y(95873);t.exports=w("document","documentElement")},34409:function(t,h,y){var w=y(58222),A=y(76637),T=y(73050);t.exports=!w&&!A((function(){return 7!=Object.defineProperty(T("div"),"a",{get:function(){return 7}}).a}))},19682:function(t,h,y){var w=y(76637),A=y(54621),T="".split;t.exports=w((function(){return!Object("z").propertyIsEnumerable(0)}))?function(t){return"String"==A(t)?T.call(t,""):Object(t)}:Object},6317:function(t,h,y){var w=y(54621);t.exports=Array.isArray||function isArray(t){return"Array"==w(t)}},44767:function(t,h,y){var w=y(76637),A=/#|\.prototype\./,isForced=function(t,h){var y=E[T(t)];return y==B||y!=j&&("function"==typeof h?w(h):!!h)},T=isForced.normalize=function(t){return String(t).replace(A,".").toLowerCase()},E=isForced.data={},j=isForced.NATIVE="N",B=isForced.POLYFILL="P";t.exports=isForced},46868:function(t){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},33770:function(t){t.exports=!0},69419:function(t,h,y){var w=y(94924),A=y(26859),T=y(76637);t.exports=!!Object.getOwnPropertySymbols&&!T((function(){return!Symbol.sham&&(w?38===A:A>37&&A<41)}))},8877:function(t,h,y){var w,A=y(4665),T=y(15935),E=y(63228),j=y(76265),B=y(98442),N=y(73050),V=y(88908),W="prototype",H="script",G=V("IE_PROTO"),EmptyConstructor=function(){},scriptTag=function(t){return"<"+H+">"+t+"</"+H+">"},NullProtoObject=function(){try{w=document.domain&&new ActiveXObject("htmlfile")}catch(t){}var t,h,y;NullProtoObject=w?function(t){t.write(scriptTag("")),t.close();var h=t.parentWindow.Object;return t=null,h}(w):(h=N("iframe"),y="java"+H+":",h.style.display="none",B.appendChild(h),h.src=String(y),(t=h.contentWindow.document).open(),t.write(scriptTag("document.F=Object")),t.close(),t.F);for(var A=E.length;A--;)delete NullProtoObject[W][E[A]];return NullProtoObject()};j[G]=!0,t.exports=Object.create||function create(t,h){var y;return null!==t?(EmptyConstructor[W]=A(t),y=new EmptyConstructor,EmptyConstructor[W]=null,y[G]=t):y=NullProtoObject(),void 0===h?y:T(y,h)}},15935:function(t,h,y){var w=y(58222),A=y(39139),T=y(4665),E=y(15839);t.exports=w?Object.defineProperties:function defineProperties(t,h){T(t);for(var y,w=E(h),j=w.length,B=0;j>B;)A.f(t,y=w[B++],h[y]);return t}},39139:function(t,h,y){var w=y(58222),A=y(34409),T=y(4665),E=y(89519),j=Object.defineProperty;h.f=w?j:function defineProperty(t,h,y){if(T(t),h=E(h,!0),T(y),A)try{return j(t,h,y)}catch(t){}if("get"in y||"set"in y)throw TypeError("Accessors not supported");return"value"in y&&(t[h]=y.value),t}},52249:function(t,h,y){var w=y(58222),A=y(93960),T=y(39182),E=y(8252),j=y(89519),B=y(21470),N=y(34409),V=Object.getOwnPropertyDescriptor;h.f=w?V:function getOwnPropertyDescriptor(t,h){if(t=E(t),h=j(h,!0),N)try{return V(t,h)}catch(t){}if(B(t,h))return T(!A.f.call(t,h),t[h])}},66664:function(t,h,y){var w=y(21470),A=y(35401),T=y(88908),E=y(62059),j=T("IE_PROTO"),B=Object.prototype;t.exports=E?Object.getPrototypeOf:function(t){return t=A(t),w(t,j)?t[j]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?B:null}},80614:function(t,h,y){var w=y(21470),A=y(8252),T=y(40268).indexOf,E=y(76265);t.exports=function(t,h){var y,j=A(t),B=0,N=[];for(y in j)!w(E,y)&&w(j,y)&&N.push(y);for(;h.length>B;)w(j,y=h[B++])&&(~T(N,y)||N.push(y));return N}},15839:function(t,h,y){var w=y(80614),A=y(63228);t.exports=Object.keys||function keys(t){return w(t,A)}},93960:function(t,h){var y={}.propertyIsEnumerable,w=Object.getOwnPropertyDescriptor,A=w&&!y.call({1:2},1);h.f=A?function propertyIsEnumerable(t){var h=w(this,t);return!!h&&h.enumerable}:y},14117:function(t,h,y){var w=y(4665),A=y(84046);t.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var t,h=!1,y={};try{(t=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(y,[]),h=y instanceof Array}catch(t){}return function setPrototypeOf(y,T){return w(y),A(T),h?t.call(y,T):y.__proto__=T,y}}():void 0)},52501:function(t){t.exports={}},16697:function(t){t.exports=function(t){if(null==t)throw TypeError("Can't call method on "+t);return t}},20607:function(t,h,y){var w=y(55394),A=y(2976);t.exports=function(t,h){try{A(w,t,h)}catch(y){w[t]=h}return h}},88908:function(t,h,y){var w=y(96323),A=y(80191),T=w("keys");t.exports=function(t){return T[t]||(T[t]=A(t))}},65251:function(t,h,y){var w=y(55394),A=y(20607),T="__core-js_shared__",E=w[T]||A(T,{});t.exports=E},96323:function(t,h,y){var w=y(33770),A=y(65251);(t.exports=function(t,h){return A[t]||(A[t]=void 0!==h?h:{})})("versions",[]).push({version:"3.9.1",mode:w?"pure":"global",copyright:"© 2021 Denis Pushkarev (zloirock.ru)"})},55636:function(t,h,y){var w=y(71487),A=Math.max,T=Math.min;t.exports=function(t,h){var y=w(t);return y<0?A(y+h,0):T(y,h)}},8252:function(t,h,y){var w=y(19682),A=y(16697);t.exports=function(t){return w(A(t))}},71487:function(t){var h=Math.ceil,y=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?y:h)(t)}},76781:function(t,h,y){var w=y(71487),A=Math.min;t.exports=function(t){return t>0?A(w(t),9007199254740991):0}},35401:function(t,h,y){var w=y(16697);t.exports=function(t){return Object(w(t))}},89519:function(t,h,y){var w=y(46868);t.exports=function(t,h){if(!w(t))return t;var y,A;if(h&&"function"==typeof(y=t.toString)&&!w(A=y.call(t)))return A;if("function"==typeof(y=t.valueOf)&&!w(A=y.call(t)))return A;if(!h&&"function"==typeof(y=t.toString)&&!w(A=y.call(t)))return A;throw TypeError("Can't convert object to primitive value")}},80191:function(t){var h=0,y=Math.random();t.exports=function(t){return"Symbol("+String(void 0===t?"":t)+")_"+(++h+y).toString(36)}},19002:function(t,h,y){var w=y(69419);t.exports=w&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},1012:function(t,h,y){var w=y(55394),A=y(96323),T=y(21470),E=y(80191),j=y(69419),B=y(19002),N=A("wks"),V=w.Symbol,W=B?V:V&&V.withoutSetter||E;t.exports=function(t){return T(N,t)&&(j||"string"==typeof N[t])||(j&&T(V,t)?N[t]=V[t]:N[t]=W("Symbol."+t)),N[t]}},53271:function(t,h,y){var w=y(12225),A=y(46868),T=y(6317),E=y(55636),j=y(76781),B=y(8252),N=y(85565),V=y(1012),W=y(44472)("slice"),H=V("species"),G=[].slice,z=Math.max;w({target:"Array",proto:!0,forced:!W},{slice:function slice(t,h){var y,w,V,W=B(this),$=j(W.length),J=E(t,$),X=E(void 0===h?$:h,$);if(T(W)&&("function"!=typeof(y=W.constructor)||y!==Array&&!T(y.prototype)?A(y)&&null===(y=y[H])&&(y=void 0):y=void 0,y===Array||void 0===y))return G.call(W,J,X);for(w=new(void 0===y?Array:y)(z(X-J,0)),V=0;J<X;J++,V++)J in W&&N(w,V,W[J]);return w.length=V,w}})},17833:function(t,h,y){y(12225)({target:"Date",stat:!0},{now:function now(){return(new Date).getTime()}})},28145:function(t,h,y){y(12225)({target:"Object",stat:!0,sham:!y(58222)},{create:y(8877)})},39224:function(t,h,y){var w=y(12225),A=y(58222);w({target:"Object",stat:!0,forced:!A,sham:!A},{defineProperty:y(39139).f})},87058:function(t,h,y){var w=y(12225),A=y(76637),T=y(8252),E=y(52249).f,j=y(58222),B=A((function(){E(1)}));w({target:"Object",stat:!0,forced:!j||B,sham:!j},{getOwnPropertyDescriptor:function getOwnPropertyDescriptor(t,h){return E(T(t),h)}})},57059:function(t,h,y){var w=y(12225),A=y(76637),T=y(35401),E=y(66664),j=y(62059);w({target:"Object",stat:!0,forced:A((function(){E(1)})),sham:!j},{getPrototypeOf:function getPrototypeOf(t){return E(T(t))}})},46719:function(t,h,y){y(12225)({target:"Object",stat:!0},{setPrototypeOf:y(14117)})},45359:function(t,h,y){var w=y(53812);t.exports=w},12229:function(t,h,y){var w=y(87285);t.exports=w},64347:function(t,h,y){var w=y(62414);t.exports=w},37934:function(t,h,y){var w=y(23908);t.exports=w},98786:function(t,h,y){var w=y(68786);t.exports=w},76085:function(t,h,y){var w=y(86450);t.exports=w},43661:function(t,h,y){var w=y(25708);t.exports=w},11895:function(t,h,y){y(75729),y(6331),y(4262),y(73272),y(55842);var w=y(88936).Promise,A=w.allSettled;t.exports=function allSettled(t){return A.call("function"==typeof this?this:w,t)}},6451:function(t,h,y){y(58444);var w=y(59956);t.exports=w},88178:function(t){t.exports=function(t){if("function"!=typeof t)throw TypeError(String(t)+" is not a function");return t}},5615:function(t,h,y){var w=y(19578);t.exports=function(t){if(!w(t)&&null!==t)throw TypeError("Can't set "+String(t)+" as a prototype");return t}},11713:function(t,h,y){var w=y(92469),A=y(28376),T=y(20728),E=w("unscopables"),j=Array.prototype;null==j[E]&&T.f(j,E,{configurable:!0,value:A(null)}),t.exports=function(t){j[E][t]=!0}},79895:function(t){t.exports=function(t,h,y){if(!(t instanceof h))throw TypeError("Incorrect "+(y?y+" ":"")+"invocation");return t}},57772:function(t,h,y){var w=y(19578);t.exports=function(t){if(!w(t))throw TypeError(String(t)+" is not an object");return t}},67381:function(t,h,y){var w=y(76370),A=y(80609),T=y(13748),createMethod=function(t){return function(h,y,E){var j,B=w(h),N=A(B.length),V=T(E,N);if(t&&y!=y){for(;N>V;)if((j=B[V++])!=j)return!0}else for(;N>V;V++)if((t||V in B)&&B[V]===y)return t||V||0;return!t&&-1}};t.exports={includes:createMethod(!0),indexOf:createMethod(!1)}},2153:function(t,h,y){var w=y(92469)("iterator"),A=!1;try{var T=0,E={next:function(){return{done:!!T++}},return:function(){A=!0}};E[w]=function(){return this},Array.from(E,(function(){throw 2}))}catch(t){}t.exports=function(t,h){if(!h&&!A)return!1;var y=!1;try{var T={};T[w]=function(){return{next:function(){return{done:y=!0}}}},t(T)}catch(t){}return y}},37897:function(t){var h={}.toString;t.exports=function(t){return h.call(t).slice(8,-1)}},81707:function(t,h,y){var w=y(43231),A=y(37897),T=y(92469)("toStringTag"),E="Arguments"==A(function(){return arguments}());t.exports=w?A:function(t){var h,y,w;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(y=function(t,h){try{return t[h]}catch(t){}}(h=Object(t),T))?y:E?A(h):"Object"==(w=A(h))&&"function"==typeof h.callee?"Arguments":w}},81542:function(t,h,y){var w=y(87238),A=y(35560),T=y(49376),E=y(20728);t.exports=function(t,h){for(var y=A(h),j=E.f,B=T.f,N=0;N<y.length;N++){var V=y[N];w(t,V)||j(t,V,B(h,V))}}},14215:function(t,h,y){var w=y(43100);t.exports=!w((function(){function F(){}return F.prototype.constructor=null,Object.getPrototypeOf(new F)!==F.prototype}))},99471:function(t,h,y){var w=y(72776).IteratorPrototype,A=y(28376),T=y(33022),E=y(53593),j=y(84194),returnThis=function(){return this};t.exports=function(t,h,y){var B=h+" Iterator";return t.prototype=A(w,{next:T(1,y)}),E(t,B,!1,!0),j[B]=returnThis,t}},63494:function(t,h,y){var w=y(90358),A=y(20728),T=y(33022);t.exports=w?function(t,h,y){return A.f(t,h,T(1,y))}:function(t,h,y){return t[h]=y,t}},33022:function(t){t.exports=function(t,h){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:h}}},95508:function(t,h,y){var w=y(20664),A=y(99471),T=y(26711),E=y(30173),j=y(53593),B=y(63494),N=y(81235),V=y(92469),W=y(78207),H=y(84194),G=y(72776),z=G.IteratorPrototype,$=G.BUGGY_SAFARI_ITERATORS,J=V("iterator"),X="keys",K="values",ne="entries",returnThis=function(){return this};t.exports=function(t,h,y,V,G,ue,pe){A(y,h,V);var me,ge,we,getIterationMethod=function(t){if(t===G&&Ee)return Ee;if(!$&&t in Ie)return Ie[t];switch(t){case X:return function keys(){return new y(this,t)};case K:return function values(){return new y(this,t)};case ne:return function entries(){return new y(this,t)}}return function(){return new y(this)}},Ce=h+" Iterator",ke=!1,Ie=t.prototype,Te=Ie[J]||Ie["@@iterator"]||G&&Ie[G],Ee=!$&&Te||getIterationMethod(G),Me="Array"==h&&Ie.entries||Te;if(Me&&(me=T(Me.call(new t)),z!==Object.prototype&&me.next&&(W||T(me)===z||(E?E(me,z):"function"!=typeof me[J]&&B(me,J,returnThis)),j(me,Ce,!0,!0),W&&(H[Ce]=returnThis))),G==K&&Te&&Te.name!==K&&(ke=!0,Ee=function values(){return Te.call(this)}),W&&!pe||Ie[J]===Ee||B(Ie,J,Ee),H[h]=Ee,G)if(ge={values:getIterationMethod(K),keys:ue?Ee:getIterationMethod(X),entries:getIterationMethod(ne)},pe)for(we in ge)($||ke||!(we in Ie))&&N(Ie,we,ge[we]);else w({target:h,proto:!0,forced:$||ke},ge);return ge}},90358:function(t,h,y){var w=y(43100);t.exports=!w((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},44456:function(t,h,y){var w=y(68666),A=y(19578),T=w.document,E=A(T)&&A(T.createElement);t.exports=function(t){return E?T.createElement(t):{}}},70990:function(t){t.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},89681:function(t){t.exports="object"==typeof window},77401:function(t,h,y){var w=y(43340),A=y(68666);t.exports=/iphone|ipod|ipad/i.test(w)&&void 0!==A.Pebble},49546:function(t,h,y){var w=y(43340);t.exports=/(?:iphone|ipod|ipad).*applewebkit/i.test(w)},81897:function(t,h,y){var w=y(37897),A=y(68666);t.exports="process"==w(A.process)},56447:function(t,h,y){var w=y(43340);t.exports=/web0s(?!.*chrome)/i.test(w)},43340:function(t,h,y){var w=y(10715);t.exports=w("navigator","userAgent")||""},88263:function(t,h,y){var w,A,T=y(68666),E=y(43340),j=T.process,B=T.Deno,N=j&&j.versions||B&&B.version,V=N&&N.v8;V?A=(w=V.split("."))[0]<4?1:w[0]+w[1]:E&&(!(w=E.match(/Edge\/(\d+)/))||w[1]>=74)&&(w=E.match(/Chrome\/(\d+)/))&&(A=w[1]),t.exports=A&&+A},30364:function(t){t.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},20664:function(t,h,y){var w=y(68666),A=y(49376).f,T=y(63494),E=y(81235),j=y(84053),B=y(81542),N=y(21022);t.exports=function(t,h){var y,V,W,H,G,z=t.target,$=t.global,J=t.stat;if(y=$?w:J?w[z]||j(z,{}):(w[z]||{}).prototype)for(V in h){if(H=h[V],W=t.noTargetGet?(G=A(y,V))&&G.value:y[V],!N($?V:z+(J?".":"#")+V,t.forced)&&void 0!==W){if(typeof H==typeof W)continue;B(H,W)}(t.sham||W&&W.sham)&&T(H,"sham",!0),E(y,V,H,t)}}},43100:function(t){t.exports=function(t){try{return!!t()}catch(t){return!0}}},82974:function(t,h,y){var w=y(88178);t.exports=function(t,h,y){if(w(t),void 0===h)return t;switch(y){case 0:return function(){return t.call(h)};case 1:return function(y){return t.call(h,y)};case 2:return function(y,w){return t.call(h,y,w)};case 3:return function(y,w,A){return t.call(h,y,w,A)}}return function(){return t.apply(h,arguments)}}},10715:function(t,h,y){var w=y(68666);t.exports=function(t,h){return arguments.length<2?"function"==typeof(y=w[t])?y:void 0:w[t]&&w[t][h];var y}},1608:function(t,h,y){var w=y(81707),A=y(84194),T=y(92469)("iterator");t.exports=function(t){if(null!=t)return t[T]||t["@@iterator"]||A[w(t)]}},68666:function(t,h,y){var check=function(t){return t&&t.Math==Math&&t};t.exports=check("object"==typeof globalThis&&globalThis)||check("object"==typeof window&&window)||check("object"==typeof self&&self)||check("object"==typeof y.g&&y.g)||function(){return this}()||Function("return this")()},87238:function(t,h,y){var w=y(857),A={}.hasOwnProperty;t.exports=Object.hasOwn||function hasOwn(t,h){return A.call(w(t),h)}},17362:function(t){t.exports={}},16548:function(t,h,y){var w=y(68666);t.exports=function(t,h){var y=w.console;y&&y.error&&(1===arguments.length?y.error(t):y.error(t,h))}},77896:function(t,h,y){var w=y(10715);t.exports=w("document","documentElement")},1843:function(t,h,y){var w=y(90358),A=y(43100),T=y(44456);t.exports=!w&&!A((function(){return 7!=Object.defineProperty(T("div"),"a",{get:function(){return 7}}).a}))},79327:function(t,h,y){var w=y(43100),A=y(37897),T="".split;t.exports=w((function(){return!Object("z").propertyIsEnumerable(0)}))?function(t){return"String"==A(t)?T.call(t,""):Object(t)}:Object},87413:function(t,h,y){var w=y(25018),A=Function.toString;"function"!=typeof w.inspectSource&&(w.inspectSource=function(t){return A.call(t)}),t.exports=w.inspectSource},72955:function(t,h,y){var w,A,T,E=y(35359),j=y(68666),B=y(19578),N=y(63494),V=y(87238),W=y(25018),H=y(74798),G=y(17362),z="Object already initialized",$=j.WeakMap;if(E||W.state){var J=W.state||(W.state=new $),X=J.get,K=J.has,ne=J.set;w=function(t,h){if(K.call(J,t))throw new TypeError(z);return h.facade=t,ne.call(J,t,h),h},A=function(t){return X.call(J,t)||{}},T=function(t){return K.call(J,t)}}else{var ue=H("state");G[ue]=!0,w=function(t,h){if(V(t,ue))throw new TypeError(z);return h.facade=t,N(t,ue,h),h},A=function(t){return V(t,ue)?t[ue]:{}},T=function(t){return V(t,ue)}}t.exports={set:w,get:A,has:T,enforce:function(t){return T(t)?A(t):w(t,{})},getterFor:function(t){return function(h){var y;if(!B(h)||(y=A(h)).type!==t)throw TypeError("Incompatible receiver, "+t+" required");return y}}}},81049:function(t,h,y){var w=y(92469),A=y(84194),T=w("iterator"),E=Array.prototype;t.exports=function(t){return void 0!==t&&(A.Array===t||E[T]===t)}},21022:function(t,h,y){var w=y(43100),A=/#|\.prototype\./,isForced=function(t,h){var y=E[T(t)];return y==B||y!=j&&("function"==typeof h?w(h):!!h)},T=isForced.normalize=function(t){return String(t).replace(A,".").toLowerCase()},E=isForced.data={},j=isForced.NATIVE="N",B=isForced.POLYFILL="P";t.exports=isForced},19578:function(t){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},78207:function(t){t.exports=!1},94986:function(t,h,y){var w=y(10715),A=y(67086);t.exports=A?function(t){return"symbol"==typeof t}:function(t){var h=w("Symbol");return"function"==typeof h&&Object(t)instanceof h}},46459:function(t,h,y){var w=y(57772),A=y(81049),T=y(80609),E=y(82974),j=y(1608),B=y(12053),Result=function(t,h){this.stopped=t,this.result=h};t.exports=function(t,h,y){var N,V,W,H,G,z,$,J=y&&y.that,X=!(!y||!y.AS_ENTRIES),K=!(!y||!y.IS_ITERATOR),ne=!(!y||!y.INTERRUPTED),ue=E(h,J,1+X+ne),stop=function(t){return N&&B(N),new Result(!0,t)},callFn=function(t){return X?(w(t),ne?ue(t[0],t[1],stop):ue(t[0],t[1])):ne?ue(t,stop):ue(t)};if(K)N=t;else{if("function"!=typeof(V=j(t)))throw TypeError("Target is not iterable");if(A(V)){for(W=0,H=T(t.length);H>W;W++)if((G=callFn(t[W]))&&G instanceof Result)return G;return new Result(!1)}N=V.call(t)}for(z=N.next;!($=z.call(N)).done;){try{G=callFn($.value)}catch(t){throw B(N),t}if("object"==typeof G&&G&&G instanceof Result)return G}return new Result(!1)}},12053:function(t,h,y){var w=y(57772);t.exports=function(t){var h=t.return;if(void 0!==h)return w(h.call(t)).value}},72776:function(t,h,y){var w,A,T,E=y(43100),j=y(26711),B=y(63494),N=y(87238),V=y(92469),W=y(78207),H=V("iterator"),G=!1;[].keys&&("next"in(T=[].keys())?(A=j(j(T)))!==Object.prototype&&(w=A):G=!0);var z=null==w||E((function(){var t={};return w[H].call(t)!==t}));z&&(w={}),W&&!z||N(w,H)||B(w,H,(function(){return this})),t.exports={IteratorPrototype:w,BUGGY_SAFARI_ITERATORS:G}},84194:function(t){t.exports={}},94849:function(t,h,y){var w,A,T,E,j,B,N,V,W=y(68666),H=y(49376).f,G=y(38483).set,z=y(49546),$=y(77401),J=y(56447),X=y(81897),K=W.MutationObserver||W.WebKitMutationObserver,ne=W.document,ue=W.process,pe=W.Promise,me=H(W,"queueMicrotask"),ge=me&&me.value;ge||(w=function(){var t,h;for(X&&(t=ue.domain)&&t.exit();A;){h=A.fn,A=A.next;try{h()}catch(t){throw A?E():T=void 0,t}}T=void 0,t&&t.enter()},z||X||J||!K||!ne?!$&&pe&&pe.resolve?((N=pe.resolve(void 0)).constructor=pe,V=N.then,E=function(){V.call(N,w)}):E=X?function(){ue.nextTick(w)}:function(){G.call(W,w)}:(j=!0,B=ne.createTextNode(""),new K(w).observe(B,{characterData:!0}),E=function(){B.data=j=!j})),t.exports=ge||function(t){var h={fn:t,next:void 0};T&&(T.next=h),A||(A=h,E()),T=h}},60384:function(t,h,y){var w=y(68666);t.exports=w.Promise},93379:function(t,h,y){var w=y(88263),A=y(43100);t.exports=!!Object.getOwnPropertySymbols&&!A((function(){var t=Symbol();return!String(t)||!(Object(t)instanceof Symbol)||!Symbol.sham&&w&&w<41}))},35359:function(t,h,y){var w=y(68666),A=y(87413),T=w.WeakMap;t.exports="function"==typeof T&&/native code/.test(A(T))},9755:function(t,h,y){var w=y(88178),PromiseCapability=function(t){var h,y;this.promise=new t((function(t,w){if(void 0!==h||void 0!==y)throw TypeError("Bad Promise constructor");h=t,y=w})),this.resolve=w(h),this.reject=w(y)};t.exports.f=function(t){return new PromiseCapability(t)}},28376:function(t,h,y){var w,A=y(57772),T=y(73006),E=y(30364),j=y(17362),B=y(77896),N=y(44456),V=y(74798),W="prototype",H="script",G=V("IE_PROTO"),EmptyConstructor=function(){},scriptTag=function(t){return"<"+H+">"+t+"</"+H+">"},NullProtoObjectViaActiveX=function(t){t.write(scriptTag("")),t.close();var h=t.parentWindow.Object;return t=null,h},NullProtoObject=function(){try{w=new ActiveXObject("htmlfile")}catch(t){}NullProtoObject=document.domain&&w?NullProtoObjectViaActiveX(w):function(){var t,h=N("iframe"),y="java"+H+":";if(h.style)return h.style.display="none",B.appendChild(h),h.src=String(y),(t=h.contentWindow.document).open(),t.write(scriptTag("document.F=Object")),t.close(),t.F}()||NullProtoObjectViaActiveX(w);for(var t=E.length;t--;)delete NullProtoObject[W][E[t]];return NullProtoObject()};j[G]=!0,t.exports=Object.create||function create(t,h){var y;return null!==t?(EmptyConstructor[W]=A(t),y=new EmptyConstructor,EmptyConstructor[W]=null,y[G]=t):y=NullProtoObject(),void 0===h?y:T(y,h)}},73006:function(t,h,y){var w=y(90358),A=y(20728),T=y(57772),E=y(35815);t.exports=w?Object.defineProperties:function defineProperties(t,h){T(t);for(var y,w=E(h),j=w.length,B=0;j>B;)A.f(t,y=w[B++],h[y]);return t}},20728:function(t,h,y){var w=y(90358),A=y(1843),T=y(57772),E=y(41396),j=Object.defineProperty;h.f=w?j:function defineProperty(t,h,y){if(T(t),h=E(h),T(y),A)try{return j(t,h,y)}catch(t){}if("get"in y||"set"in y)throw TypeError("Accessors not supported");return"value"in y&&(t[h]=y.value),t}},49376:function(t,h,y){var w=y(90358),A=y(14040),T=y(33022),E=y(76370),j=y(41396),B=y(87238),N=y(1843),V=Object.getOwnPropertyDescriptor;h.f=w?V:function getOwnPropertyDescriptor(t,h){if(t=E(t),h=j(h),N)try{return V(t,h)}catch(t){}if(B(t,h))return T(!A.f.call(t,h),t[h])}},29154:function(t,h,y){var w=y(7159),A=y(30364).concat("length","prototype");h.f=Object.getOwnPropertyNames||function getOwnPropertyNames(t){return w(t,A)}},84065:function(t,h){h.f=Object.getOwnPropertySymbols},26711:function(t,h,y){var w=y(87238),A=y(857),T=y(74798),E=y(14215),j=T("IE_PROTO"),B=Object.prototype;t.exports=E?Object.getPrototypeOf:function(t){return t=A(t),w(t,j)?t[j]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?B:null}},7159:function(t,h,y){var w=y(87238),A=y(76370),T=y(67381).indexOf,E=y(17362);t.exports=function(t,h){var y,j=A(t),B=0,N=[];for(y in j)!w(E,y)&&w(j,y)&&N.push(y);for(;h.length>B;)w(j,y=h[B++])&&(~T(N,y)||N.push(y));return N}},35815:function(t,h,y){var w=y(7159),A=y(30364);t.exports=Object.keys||function keys(t){return w(t,A)}},14040:function(t,h){var y={}.propertyIsEnumerable,w=Object.getOwnPropertyDescriptor,A=w&&!y.call({1:2},1);h.f=A?function propertyIsEnumerable(t){var h=w(this,t);return!!h&&h.enumerable}:y},30173:function(t,h,y){var w=y(57772),A=y(5615);t.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var t,h=!1,y={};try{(t=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(y,[]),h=y instanceof Array}catch(t){}return function setPrototypeOf(y,T){return w(y),A(T),h?t.call(y,T):y.__proto__=T,y}}():void 0)},86037:function(t,h,y){var w=y(43231),A=y(81707);t.exports=w?{}.toString:function toString(){return"[object "+A(this)+"]"}},22427:function(t,h,y){var w=y(19578);t.exports=function(t,h){var y,A;if("string"===h&&"function"==typeof(y=t.toString)&&!w(A=y.call(t)))return A;if("function"==typeof(y=t.valueOf)&&!w(A=y.call(t)))return A;if("string"!==h&&"function"==typeof(y=t.toString)&&!w(A=y.call(t)))return A;throw TypeError("Can't convert object to primitive value")}},35560:function(t,h,y){var w=y(10715),A=y(29154),T=y(84065),E=y(57772);t.exports=w("Reflect","ownKeys")||function ownKeys(t){var h=A.f(E(t)),y=T.f;return y?h.concat(y(t)):h}},88936:function(t,h,y){var w=y(68666);t.exports=w},21593:function(t){t.exports=function(t){try{return{error:!1,value:t()}}catch(t){return{error:!0,value:t}}}},88598:function(t,h,y){var w=y(57772),A=y(19578),T=y(9755);t.exports=function(t,h){if(w(t),A(h)&&h.constructor===t)return h;var y=T.f(t);return(0,y.resolve)(h),y.promise}},52791:function(t,h,y){var w=y(81235);t.exports=function(t,h,y){for(var A in h)w(t,A,h[A],y);return t}},81235:function(t,h,y){var w=y(68666),A=y(63494),T=y(87238),E=y(84053),j=y(87413),B=y(72955),N=B.get,V=B.enforce,W=String(String).split("String");(t.exports=function(t,h,y,j){var B,N=!!j&&!!j.unsafe,H=!!j&&!!j.enumerable,G=!!j&&!!j.noTargetGet;"function"==typeof y&&("string"!=typeof h||T(y,"name")||A(y,"name",h),(B=V(y)).source||(B.source=W.join("string"==typeof h?h:""))),t!==w?(N?!G&&t[h]&&(H=!0):delete t[h],H?t[h]=y:A(t,h,y)):H?t[h]=y:E(h,y)})(Function.prototype,"toString",(function toString(){return"function"==typeof this&&N(this).source||j(this)}))},63093:function(t){t.exports=function(t){if(null==t)throw TypeError("Can't call method on "+t);return t}},84053:function(t,h,y){var w=y(68666);t.exports=function(t,h){try{Object.defineProperty(w,t,{value:h,configurable:!0,writable:!0})}catch(y){w[t]=h}return h}},80894:function(t,h,y){var w=y(10715),A=y(20728),T=y(92469),E=y(90358),j=T("species");t.exports=function(t){var h=w(t),y=A.f;E&&h&&!h[j]&&y(h,j,{configurable:!0,get:function(){return this}})}},53593:function(t,h,y){var w=y(20728).f,A=y(87238),T=y(92469)("toStringTag");t.exports=function(t,h,y){t&&!A(t=y?t:t.prototype,T)&&w(t,T,{configurable:!0,value:h})}},74798:function(t,h,y){var w=y(58585),A=y(49057),T=w("keys");t.exports=function(t){return T[t]||(T[t]=A(t))}},25018:function(t,h,y){var w=y(68666),A=y(84053),T="__core-js_shared__",E=w[T]||A(T,{});t.exports=E},58585:function(t,h,y){var w=y(78207),A=y(25018);(t.exports=function(t,h){return A[t]||(A[t]=void 0!==h?h:{})})("versions",[]).push({version:"3.16.1",mode:w?"pure":"global",copyright:"© 2021 Denis Pushkarev (zloirock.ru)"})},29703:function(t,h,y){var w=y(57772),A=y(88178),T=y(92469)("species");t.exports=function(t,h){var y,E=w(t).constructor;return void 0===E||null==(y=w(E)[T])?h:A(y)}},89512:function(t,h,y){var w=y(97678),A=y(14764),T=y(63093),createMethod=function(t){return function(h,y){var E,j,B=A(T(h)),N=w(y),V=B.length;return N<0||N>=V?t?"":void 0:(E=B.charCodeAt(N))<55296||E>56319||N+1===V||(j=B.charCodeAt(N+1))<56320||j>57343?t?B.charAt(N):E:t?B.slice(N,N+2):j-56320+(E-55296<<10)+65536}};t.exports={codeAt:createMethod(!1),charAt:createMethod(!0)}},38483:function(t,h,y){var w,A,T,E,j=y(68666),B=y(43100),N=y(82974),V=y(77896),W=y(44456),H=y(49546),G=y(81897),z=j.setImmediate,$=j.clearImmediate,J=j.process,X=j.MessageChannel,K=j.Dispatch,ne=0,ue={},pe="onreadystatechange";try{w=j.location}catch(t){}var run=function(t){if(ue.hasOwnProperty(t)){var h=ue[t];delete ue[t],h()}},runner=function(t){return function(){run(t)}},listener=function(t){run(t.data)},post=function(t){j.postMessage(String(t),w.protocol+"//"+w.host)};z&&$||(z=function setImmediate(t){for(var h=[],y=arguments.length,w=1;y>w;)h.push(arguments[w++]);return ue[++ne]=function(){("function"==typeof t?t:Function(t)).apply(void 0,h)},A(ne),ne},$=function clearImmediate(t){delete ue[t]},G?A=function(t){J.nextTick(runner(t))}:K&&K.now?A=function(t){K.now(runner(t))}:X&&!H?(E=(T=new X).port2,T.port1.onmessage=listener,A=N(E.postMessage,E,1)):j.addEventListener&&"function"==typeof postMessage&&!j.importScripts&&w&&"file:"!==w.protocol&&!B(post)?(A=post,j.addEventListener("message",listener,!1)):A=pe in W("script")?function(t){V.appendChild(W("script"))[pe]=function(){V.removeChild(this),run(t)}}:function(t){setTimeout(runner(t),0)}),t.exports={set:z,clear:$}},13748:function(t,h,y){var w=y(97678),A=Math.max,T=Math.min;t.exports=function(t,h){var y=w(t);return y<0?A(y+h,0):T(y,h)}},76370:function(t,h,y){var w=y(79327),A=y(63093);t.exports=function(t){return w(A(t))}},97678:function(t){var h=Math.ceil,y=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?y:h)(t)}},80609:function(t,h,y){var w=y(97678),A=Math.min;t.exports=function(t){return t>0?A(w(t),9007199254740991):0}},857:function(t,h,y){var w=y(63093);t.exports=function(t){return Object(w(t))}},22183:function(t,h,y){var w=y(19578),A=y(94986),T=y(22427),E=y(92469)("toPrimitive");t.exports=function(t,h){if(!w(t)||A(t))return t;var y,j=t[E];if(void 0!==j){if(void 0===h&&(h="default"),y=j.call(t,h),!w(y)||A(y))return y;throw TypeError("Can't convert object to primitive value")}return void 0===h&&(h="number"),T(t,h)}},41396:function(t,h,y){var w=y(22183),A=y(94986);t.exports=function(t){var h=w(t,"string");return A(h)?h:String(h)}},43231:function(t,h,y){var w={};w[y(92469)("toStringTag")]="z",t.exports="[object z]"===String(w)},14764:function(t,h,y){var w=y(94986);t.exports=function(t){if(w(t))throw TypeError("Cannot convert a Symbol value to a string");return String(t)}},49057:function(t){var h=0,y=Math.random();t.exports=function(t){return"Symbol("+String(void 0===t?"":t)+")_"+(++h+y).toString(36)}},67086:function(t,h,y){var w=y(93379);t.exports=w&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},92469:function(t,h,y){var w=y(68666),A=y(58585),T=y(87238),E=y(49057),j=y(93379),B=y(67086),N=A("wks"),V=w.Symbol,W=B?V:V&&V.withoutSetter||E;t.exports=function(t){return T(N,t)&&(j||"string"==typeof N[t])||(j&&T(V,t)?N[t]=V[t]:N[t]=W("Symbol."+t)),N[t]}},75729:function(t,h,y){var w=y(76370),A=y(11713),T=y(84194),E=y(72955),j=y(95508),B="Array Iterator",N=E.set,V=E.getterFor(B);t.exports=j(Array,"Array",(function(t,h){N(this,{type:B,target:w(t),index:0,kind:h})}),(function(){var t=V(this),h=t.target,y=t.kind,w=t.index++;return!h||w>=h.length?(t.target=void 0,{value:void 0,done:!0}):"keys"==y?{value:w,done:!1}:"values"==y?{value:h[w],done:!1}:{value:[w,h[w]],done:!1}}),"values"),T.Arguments=T.Array,A("keys"),A("values"),A("entries")},6331:function(t,h,y){var w=y(43231),A=y(81235),T=y(86037);w||A(Object.prototype,"toString",T,{unsafe:!0})},73272:function(t,h,y){var w=y(20664),A=y(88178),T=y(9755),E=y(21593),j=y(46459);w({target:"Promise",stat:!0},{allSettled:function allSettled(t){var h=this,y=T.f(h),w=y.resolve,B=y.reject,N=E((function(){var y=A(h.resolve),T=[],E=0,B=1;j(t,(function(t){var A=E++,j=!1;T.push(void 0),B++,y.call(h,t).then((function(t){j||(j=!0,T[A]={status:"fulfilled",value:t},--B||w(T))}),(function(t){j||(j=!0,T[A]={status:"rejected",reason:t},--B||w(T))}))})),--B||w(T)}));return N.error&&B(N.value),y.promise}})},4262:function(t,h,y){var w,A,T,E,j=y(20664),B=y(78207),N=y(68666),V=y(10715),W=y(60384),H=y(81235),G=y(52791),z=y(30173),$=y(53593),J=y(80894),X=y(19578),K=y(88178),ne=y(79895),ue=y(87413),pe=y(46459),me=y(2153),ge=y(29703),we=y(38483).set,Ce=y(94849),ke=y(88598),Ie=y(16548),Te=y(9755),Ee=y(21593),Me=y(72955),Be=y(21022),Ne=y(92469),Ze=y(89681),et=y(81897),tt=y(88263),rt=Ne("species"),nt="Promise",it=Me.get,at=Me.set,st=Me.getterFor(nt),lt=W&&W.prototype,ct=W,ht=lt,vt=N.TypeError,gt=N.document,bt=N.process,_t=Te.f,St=_t,wt=!!(gt&&gt.createEvent&&N.dispatchEvent),Ct="function"==typeof PromiseRejectionEvent,Pt="unhandledrejection",kt=!1,xt=Be(nt,(function(){var t=ue(ct),h=t!==String(ct);if(!h&&66===tt)return!0;if(B&&!ht.finally)return!0;if(tt>=51&&/native code/.test(t))return!1;var y=new ct((function(t){t(1)})),FakePromise=function(t){t((function(){}),(function(){}))};return(y.constructor={})[rt]=FakePromise,!(kt=y.then((function(){}))instanceof FakePromise)||!h&&Ze&&!Ct})),At=xt||!me((function(t){ct.all(t).catch((function(){}))})),isThenable=function(t){var h;return!(!X(t)||"function"!=typeof(h=t.then))&&h},notify=function(t,h){if(!t.notified){t.notified=!0;var y=t.reactions;Ce((function(){for(var w=t.value,A=1==t.state,T=0;y.length>T;){var E,j,B,N=y[T++],V=A?N.ok:N.fail,W=N.resolve,H=N.reject,G=N.domain;try{V?(A||(2===t.rejection&&onHandleUnhandled(t),t.rejection=1),!0===V?E=w:(G&&G.enter(),E=V(w),G&&(G.exit(),B=!0)),E===N.promise?H(vt("Promise-chain cycle")):(j=isThenable(E))?j.call(E,W,H):W(E)):H(w)}catch(t){G&&!B&&G.exit(),H(t)}}t.reactions=[],t.notified=!1,h&&!t.rejection&&onUnhandled(t)}))}},dispatchEvent=function(t,h,y){var w,A;wt?((w=gt.createEvent("Event")).promise=h,w.reason=y,w.initEvent(t,!1,!0),N.dispatchEvent(w)):w={promise:h,reason:y},!Ct&&(A=N["on"+t])?A(w):t===Pt&&Ie("Unhandled promise rejection",y)},onUnhandled=function(t){we.call(N,(function(){var h,y=t.facade,w=t.value;if(isUnhandled(t)&&(h=Ee((function(){et?bt.emit("unhandledRejection",w,y):dispatchEvent(Pt,y,w)})),t.rejection=et||isUnhandled(t)?2:1,h.error))throw h.value}))},isUnhandled=function(t){return 1!==t.rejection&&!t.parent},onHandleUnhandled=function(t){we.call(N,(function(){var h=t.facade;et?bt.emit("rejectionHandled",h):dispatchEvent("rejectionhandled",h,t.value)}))},bind=function(t,h,y){return function(w){t(h,w,y)}},internalReject=function(t,h,y){t.done||(t.done=!0,y&&(t=y),t.value=h,t.state=2,notify(t,!0))},internalResolve=function(t,h,y){if(!t.done){t.done=!0,y&&(t=y);try{if(t.facade===h)throw vt("Promise can't be resolved itself");var w=isThenable(h);w?Ce((function(){var y={done:!1};try{w.call(h,bind(internalResolve,y,t),bind(internalReject,y,t))}catch(h){internalReject(y,h,t)}})):(t.value=h,t.state=1,notify(t,!1))}catch(h){internalReject({done:!1},h,t)}}};if(xt&&(ht=(ct=function Promise(t){ne(this,ct,nt),K(t),w.call(this);var h=it(this);try{t(bind(internalResolve,h),bind(internalReject,h))}catch(t){internalReject(h,t)}}).prototype,(w=function Promise(t){at(this,{type:nt,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=G(ht,{then:function then(t,h){var y=st(this),w=_t(ge(this,ct));return w.ok="function"!=typeof t||t,w.fail="function"==typeof h&&h,w.domain=et?bt.domain:void 0,y.parent=!0,y.reactions.push(w),0!=y.state&&notify(y,!1),w.promise},catch:function(t){return this.then(void 0,t)}}),A=function(){var t=new w,h=it(t);this.promise=t,this.resolve=bind(internalResolve,h),this.reject=bind(internalReject,h)},Te.f=_t=function(t){return t===ct||t===T?new A(t):St(t)},!B&&"function"==typeof W&&lt!==Object.prototype)){E=lt.then,kt||(H(lt,"then",(function then(t,h){var y=this;return new ct((function(t,h){E.call(y,t,h)})).then(t,h)}),{unsafe:!0}),H(lt,"catch",ht.catch,{unsafe:!0}));try{delete lt.constructor}catch(t){}z&&z(lt,ht)}j({global:!0,wrap:!0,forced:xt},{Promise:ct}),$(ct,nt,!1,!0),J(nt),T=V(nt),j({target:nt,stat:!0,forced:xt},{reject:function reject(t){var h=_t(this);return h.reject.call(void 0,t),h.promise}}),j({target:nt,stat:!0,forced:B||xt},{resolve:function resolve(t){return ke(B&&this===T?ct:this,t)}}),j({target:nt,stat:!0,forced:At},{all:function all(t){var h=this,y=_t(h),w=y.resolve,A=y.reject,T=Ee((function(){var y=K(h.resolve),T=[],E=0,j=1;pe(t,(function(t){var B=E++,N=!1;T.push(void 0),j++,y.call(h,t).then((function(t){N||(N=!0,T[B]=t,--j||w(T))}),A)})),--j||w(T)}));return T.error&&A(T.value),y.promise},race:function race(t){var h=this,y=_t(h),w=y.reject,A=Ee((function(){var A=K(h.resolve);pe(t,(function(t){A.call(h,t).then(y.resolve,w)}))}));return A.error&&w(A.value),y.promise}})},55842:function(t,h,y){var w=y(89512).charAt,A=y(14764),T=y(72955),E=y(95508),j="String Iterator",B=T.set,N=T.getterFor(j);E(String,"String",(function(t){B(this,{type:j,string:A(t),index:0})}),(function next(){var t,h=N(this),y=h.string,A=h.index;return A>=y.length?{value:void 0,done:!0}:(t=w(y,A),h.index+=t.length,{value:t,done:!1})}))},58444:function(t,h,y){y(73272)},31230:function(t,h,y){var w=y(68666),A=y(70990),T=y(75729),E=y(63494),j=y(92469),B=j("iterator"),N=j("toStringTag"),V=T.values;for(var W in A){var H=w[W],G=H&&H.prototype;if(G){if(G[B]!==V)try{E(G,B,V)}catch(t){G[B]=V}if(G[N]||E(G,N,W),A[W])for(var z in T)if(G[z]!==T[z])try{E(G,z,T[z])}catch(t){G[z]=T[z]}}}},59956:function(t,h,y){var w=y(11895);y(31230),t.exports=w},50578:function(){try{var t=new window.CustomEvent("test");if(t.preventDefault(),!0!==t.defaultPrevented)throw new Error("Could not prevent default")}catch(t){var CustomEvent=function(t,h){var y,w;return h=h||{bubbles:!1,cancelable:!1,detail:void 0},(y=document.createEvent("CustomEvent")).initCustomEvent(t,h.bubbles,h.cancelable,h.detail),w=y.preventDefault,y.preventDefault=function(){w.call(this);try{Object.defineProperty(this,"defaultPrevented",{get:function(){return!0}})}catch(t){this.defaultPrevented=!0}},y};CustomEvent.prototype=window.Event.prototype,window.CustomEvent=CustomEvent}},88584:function(t,h,y){var w=Object.assign||function(t){for(var h=1;h<arguments.length;h++){var y=arguments[h];for(var w in y)Object.prototype.hasOwnProperty.call(y,w)&&(t[w]=y[w])}return t},_slicedToArray=function(t,h){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function sliceIterator(t,h){var y=[],w=!0,A=!1,T=void 0;try{for(var E,j=t[Symbol.iterator]();!(w=(E=j.next()).done)&&(y.push(E.value),!h||y.length!==h);w=!0);}catch(t){A=!0,T=t}finally{try{!w&&j.return&&j.return()}finally{if(A)throw T}}return y}(t,h);throw new TypeError("Invalid attempt to destructure non-iterable instance")};h.Z=function customSelect(t,h){var y=[],T=[];return function init(){if(t&&t instanceof HTMLElement&&"SELECT"===t.tagName.toUpperCase())y.push(t);else if(t&&"string"==typeof t)for(var E=document.querySelectorAll(t),j=0,B=E.length;j<B;++j)E[j]instanceof HTMLElement&&"SELECT"===E[j].tagName.toUpperCase()&&y.push(E[j]);else if(t&&t.length)for(var N=0,V=t.length;N<V;++N)t[N]instanceof HTMLElement&&"SELECT"===t[N].tagName.toUpperCase()&&y.push(t[N]);for(var W=0,H=y.length;W<H;++W)T.push(builder(y[W],w({},A,h)));return T}()},y(50578);var A={containerClass:"custom-select-container",openerClass:"custom-select-opener",panelClass:"custom-select-panel",optionClass:"custom-select-option",optgroupClass:"custom-select-optgroup",isSelectedClass:"is-selected",hasFocusClass:"has-focus",isDisabledClass:"is-disabled",isOpenClass:"is-open"};function builder(t,h){var y="customSelect",w=!1,A="",T=t,E=void 0,j=void 0,B=void 0,N=void 0,V=void 0,W=void 0,H=void 0,G="";function setFocusedElement(t){B&&B.classList.remove(h.hasFocusClass),void 0!==t?((B=t).classList.add(h.hasFocusClass),w&&(t.offsetTop<t.offsetParent.scrollTop||t.offsetTop>t.offsetParent.scrollTop+t.offsetParent.clientHeight-t.clientHeight)&&t.dispatchEvent(new CustomEvent("custom-select:focus-outside-panel",{bubbles:!0}))):B=void 0}function setSelectedElement(t){N&&(N.classList.remove(h.isSelectedClass),N.removeAttribute("id"),j.removeAttribute("aria-activedescendant")),void 0!==t?(t.classList.add(h.isSelectedClass),t.setAttribute("id",y+"-"+A+"-selectedOption"),j.setAttribute("aria-activedescendant",y+"-"+A+"-selectedOption"),N=t,j.children[0].textContent=N.customSelectOriginalOption.text):(N=void 0,j.children[0].textContent=""),setFocusedElement(t)}function moveFocuesedElement(t){var h=[].indexOf.call(T.options,B.customSelectOriginalOption);T.options[h+t]&&setFocusedElement(T.options[h+t].customSelectCstOption)}function open(t){if(t||void 0===t){var A=document.querySelector("."+y+"."+h.isOpenClass);A&&(A.customSelect.open=!1),E.classList.add(h.isOpenClass),E.classList.add(h.isOpenClass),j.setAttribute("aria-expanded","true"),N&&(V.scrollTop=N.offsetTop),E.dispatchEvent(new CustomEvent("custom-select:open")),w=!0}else E.classList.remove(h.isOpenClass),j.setAttribute("aria-expanded","false"),w=!1,setFocusedElement(N),E.dispatchEvent(new CustomEvent("custom-select:close"));return w}function clickEvent(t){t.target===j||j.contains(t.target)?w?open(!1):open():t.target.classList&&t.target.classList.contains(h.optionClass)&&V.contains(t.target)?(setSelectedElement(t.target),N.customSelectOriginalOption.selected=!0,open(!1),T.dispatchEvent(new CustomEvent("change"))):t.target===T?j!==document.activeElement&&T!==document.activeElement&&j.focus():w&&!E.contains(t.target)&&open(!1)}function mouseoverEvent(t){t.target.classList&&t.target.classList.contains(h.optionClass)&&setFocusedElement(t.target)}function keydownEvent(t){if(w)switch(t.keyCode){case 13:case 32:setSelectedElement(B),N.customSelectOriginalOption.selected=!0,T.dispatchEvent(new CustomEvent("change")),open(!1);break;case 27:open(!1);break;case 38:moveFocuesedElement(-1);break;case 40:moveFocuesedElement(1);break;default:if(t.keyCode>=48&&t.keyCode<=90){H&&clearTimeout(H),H=setTimeout((function(){G=""}),1500),G+=String.fromCharCode(t.keyCode);for(var h=0,y=T.options.length;h<y;h++)if(T.options[h].text.toUpperCase().substr(0,G.length)===G){setFocusedElement(T.options[h].customSelectCstOption);break}}}else 40!==t.keyCode&&38!==t.keyCode&&32!==t.keyCode||open()}function changeEvent(){var t=T.selectedIndex;setSelectedElement(-1===t?void 0:T.options[t].customSelectCstOption)}function scrollToFocused(t){var h=t.currentTarget,y=t.target;y.offsetTop<h.scrollTop?h.scrollTop=y.offsetTop:h.scrollTop=y.offsetTop+y.clientHeight-h.clientHeight}function addEvents(){document.addEventListener("click",clickEvent),V.addEventListener("mouseover",mouseoverEvent),V.addEventListener("custom-select:focus-outside-panel",scrollToFocused),T.addEventListener("change",changeEvent),E.addEventListener("keydown",keydownEvent)}function removeEvents(){document.removeEventListener("click",clickEvent),V.removeEventListener("mouseover",mouseoverEvent),V.removeEventListener("custom-select:focus-outside-panel",scrollToFocused),T.removeEventListener("change",changeEvent),E.removeEventListener("keydown",keydownEvent)}function parseMarkup(t){var y=t,w=[];if(void 0===y.length)throw new TypeError("Invalid Argument");for(var A=0,T=y.length;A<T;A++)if(y[A]instanceof HTMLElement&&"OPTGROUP"===y[A].tagName.toUpperCase()){var E=document.createElement("div");E.classList.add(h.optgroupClass),E.setAttribute("data-label",y[A].label),E.customSelectOriginalOptgroup=y[A],y[A].customSelectCstOptgroup=E;for(var j=parseMarkup(y[A].children),B=0,N=j.length;B<N;B++)E.appendChild(j[B]);w.push(E)}else{if(!(y[A]instanceof HTMLElement&&"OPTION"===y[A].tagName.toUpperCase()))throw new TypeError("Invalid Argument");var V=document.createElement("div");V.classList.add(h.optionClass),V.textContent=y[A].text,V.setAttribute("data-value",y[A].value),V.setAttribute("role","option"),V.customSelectOriginalOption=y[A],y[A].customSelectCstOption=V,y[A].selected&&setSelectedElement(V),w.push(V)}return w}function _append(t,h,y){var w=void 0;if(void 0===y||y===T)w=V;else{if(!(y instanceof HTMLElement&&"OPTGROUP"===y.tagName.toUpperCase()&&T.contains(y)))throw new TypeError("Invalid Argument");w=y.customSelectCstOptgroup}var A=t instanceof HTMLElement?[t]:t;if(h)for(var E=0,j=A.length;E<j;E++)w===V?T.appendChild(A[E]):w.customSelectOriginalOptgroup.appendChild(A[E]);for(var B=parseMarkup(A),N=0,W=B.length;N<W;N++)w.appendChild(B[N]);return A}(E=document.createElement("div")).classList.add(h.containerClass,y),(j=document.createElement("span")).className=h.openerClass,j.setAttribute("role","combobox"),j.setAttribute("aria-autocomplete","list"),j.setAttribute("aria-expanded","false"),j.innerHTML="<span>\n   "+(-1!==T.selectedIndex?T.options[T.selectedIndex].text:"")+"\n   </span>",V=document.createElement("div");for(var z="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",$=0;$<5;$++)A+=z.charAt(Math.floor(62*Math.random()));return V.id=y+"-"+A+"-panel",V.className=h.panelClass,V.setAttribute("role","listbox"),j.setAttribute("aria-owns",V.id),_append(T.children,!1),E.appendChild(j),T.parentNode.replaceChild(E,T),E.appendChild(T),E.appendChild(V),document.querySelector('label[for="'+T.id+'"]')?W=document.querySelector('label[for="'+T.id+'"]'):"LABEL"===E.parentNode.tagName.toUpperCase()&&(W=E.parentNode),void 0!==W&&(W.setAttribute("id",y+"-"+A+"-label"),j.setAttribute("aria-labelledby",y+"-"+A+"-label")),T.disabled?E.classList.add(h.isDisabledClass):(j.setAttribute("tabindex","0"),T.setAttribute("tabindex","-1"),addEvents()),E.customSelect=Object.defineProperties({append:function append(t,h){return _append(t,!0,h)},insertBefore:function insertBefore(t,h){return function _insertBefore(t,h){var y=void 0;if(h instanceof HTMLElement&&"OPTION"===h.tagName.toUpperCase()&&T.contains(h))y=h.customSelectCstOption;else{if(!(h instanceof HTMLElement&&"OPTGROUP"===h.tagName.toUpperCase()&&T.contains(h)))throw new TypeError("Invalid Argument");y=h.customSelectCstOptgroup}var w=parseMarkup(t.length?t:[t]);return y.parentNode.insertBefore(w[0],y),h.parentNode.insertBefore(t.length?t[0]:t,h)}(t,h)},remove:function remove(t){var h=void 0;if(t instanceof HTMLElement&&"OPTION"===t.tagName.toUpperCase()&&T.contains(t))h=t.customSelectCstOption;else{if(!(t instanceof HTMLElement&&"OPTGROUP"===t.tagName.toUpperCase()&&T.contains(t)))throw new TypeError("Invalid Argument");h=t.customSelectCstOptgroup}h.parentNode.removeChild(h);var y=t.parentNode.removeChild(t);return changeEvent(),y},empty:function empty(){for(var t=[];T.children.length;)V.removeChild(V.children[0]),t.push(T.removeChild(T.children[0]));return setSelectedElement(),t},destroy:function destroy(){for(var t=0,h=T.options.length;t<h;t++)delete T.options[t].customSelectCstOption;for(var y=T.getElementsByTagName("optgroup"),w=0,A=y.length;w<A;w++)delete y.customSelectCstOptgroup;return removeEvents(),E.parentNode.replaceChild(T,E)},opener:j,select:T,panel:V,container:E},{pluginOptions:{get:function(){return h},configurable:!0,enumerable:!0},open:{get:function(){return w},set:function(t){open(t)},configurable:!0,enumerable:!0},disabled:{get:function(){return T.disabled},set:function(t){!function disabled(t){t&&!T.disabled?(E.classList.add(h.isDisabledClass),T.disabled=!0,j.removeAttribute("tabindex"),E.dispatchEvent(new CustomEvent("custom-select:disabled")),removeEvents()):!t&&T.disabled&&(E.classList.remove(h.isDisabledClass),T.disabled=!1,j.setAttribute("tabindex","0"),E.dispatchEvent(new CustomEvent("custom-select:enabled")),addEvents())}(t)},configurable:!0,enumerable:!0},value:{get:function(){return T.value},set:function(t){!function setValue(t){var h=T.querySelector("option[value='"+t+"']");h||(h=_slicedToArray(T.options,1)[0]),h.selected=!0,setSelectedElement(T.options[T.selectedIndex].customSelectCstOption)}(t)},configurable:!0,enumerable:!0}}),T.customSelect=E.customSelect,E.customSelect}},70551:function(t){var naiveFallback=function(){if("object"==typeof self&&self)return self;if("object"==typeof window&&window)return window;throw new Error("Unable to resolve global `this`")};t.exports=function(){if(this)return this;if("object"==typeof globalThis&&globalThis)return globalThis;try{Object.defineProperty(Object.prototype,"__global__",{get:function(){return this},configurable:!0})}catch(t){return naiveFallback()}try{return __global__||naiveFallback()}finally{delete Object.prototype.__global__}}()},60686:function(t,h,y){t.exports=y(96379).polyfill()},96379:function(t,h,y){t.exports=function(){"use strict";function objectOrFunction(t){var h=typeof t;return null!==t&&("object"===h||"function"===h)}function isFunction(t){return"function"==typeof t}var t=Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)},h=0,w=void 0,A=void 0,T=function asap(t,y){W[h]=t,W[h+1]=y,2===(h+=2)&&(A?A(flush):H())};function setScheduler(t){A=t}function setAsap(t){T=t}var E="undefined"!=typeof window?window:void 0,j=E||{},B=j.MutationObserver||j.WebKitMutationObserver,N="undefined"==typeof self&&"undefined"!=typeof process&&"[object process]"==={}.toString.call(process),V="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel;function useNextTick(){return function(){return process.nextTick(flush)}}function useVertxTimer(){return void 0!==w?function(){w(flush)}:useSetTimeout()}function useMutationObserver(){var t=0,h=new B(flush),y=document.createTextNode("");return h.observe(y,{characterData:!0}),function(){y.data=t=++t%2}}function useMessageChannel(){var t=new MessageChannel;return t.port1.onmessage=flush,function(){return t.port2.postMessage(0)}}function useSetTimeout(){var t=setTimeout;return function(){return t(flush,1)}}var W=new Array(1e3);function flush(){for(var t=0;t<h;t+=2)(0,W[t])(W[t+1]),W[t]=void 0,W[t+1]=void 0;h=0}function attemptVertx(){try{var t=Function("return this")().require("vertx");return w=t.runOnLoop||t.runOnContext,useVertxTimer()}catch(t){return useSetTimeout()}}var H=void 0;function then(t,h){var y=this,w=new this.constructor(noop);void 0===w[G]&&makePromise(w);var A=y._state;if(A){var E=arguments[A-1];T((function(){return invokeCallback(A,w,E,y._result)}))}else subscribe(y,w,t,h);return w}function resolve$1(t){var h=this;if(t&&"object"==typeof t&&t.constructor===h)return t;var y=new h(noop);return resolve(y,t),y}H=N?useNextTick():B?useMutationObserver():V?useMessageChannel():void 0===E?attemptVertx():useSetTimeout();var G=Math.random().toString(36).substring(2);function noop(){}var z=void 0,$=1,J=2;function selfFulfillment(){return new TypeError("You cannot resolve a promise with itself")}function cannotReturnOwn(){return new TypeError("A promises callback cannot return that same promise.")}function tryThen(t,h,y,w){try{t.call(h,y,w)}catch(t){return t}}function handleForeignThenable(t,h,y){T((function(t){var w=!1,A=tryThen(y,h,(function(y){w||(w=!0,h!==y?resolve(t,y):fulfill(t,y))}),(function(h){w||(w=!0,reject(t,h))}),"Settle: "+(t._label||" unknown promise"));!w&&A&&(w=!0,reject(t,A))}),t)}function handleOwnThenable(t,h){h._state===$?fulfill(t,h._result):h._state===J?reject(t,h._result):subscribe(h,void 0,(function(h){return resolve(t,h)}),(function(h){return reject(t,h)}))}function handleMaybeThenable(t,h,y){h.constructor===t.constructor&&y===then&&h.constructor.resolve===resolve$1?handleOwnThenable(t,h):void 0===y?fulfill(t,h):isFunction(y)?handleForeignThenable(t,h,y):fulfill(t,h)}function resolve(t,h){if(t===h)reject(t,selfFulfillment());else if(objectOrFunction(h)){var y=void 0;try{y=h.then}catch(h){return void reject(t,h)}handleMaybeThenable(t,h,y)}else fulfill(t,h)}function publishRejection(t){t._onerror&&t._onerror(t._result),publish(t)}function fulfill(t,h){t._state===z&&(t._result=h,t._state=$,0!==t._subscribers.length&&T(publish,t))}function reject(t,h){t._state===z&&(t._state=J,t._result=h,T(publishRejection,t))}function subscribe(t,h,y,w){var A=t._subscribers,E=A.length;t._onerror=null,A[E]=h,A[E+$]=y,A[E+J]=w,0===E&&t._state&&T(publish,t)}function publish(t){var h=t._subscribers,y=t._state;if(0!==h.length){for(var w=void 0,A=void 0,T=t._result,E=0;E<h.length;E+=3)w=h[E],A=h[E+y],w?invokeCallback(y,w,A,T):A(T);t._subscribers.length=0}}function invokeCallback(t,h,y,w){var A=isFunction(y),T=void 0,E=void 0,j=!0;if(A){try{T=y(w)}catch(t){j=!1,E=t}if(h===T)return void reject(h,cannotReturnOwn())}else T=w;h._state!==z||(A&&j?resolve(h,T):!1===j?reject(h,E):t===$?fulfill(h,T):t===J&&reject(h,T))}function initializePromise(t,h){try{h((function resolvePromise(h){resolve(t,h)}),(function rejectPromise(h){reject(t,h)}))}catch(h){reject(t,h)}}var X=0;function nextId(){return X++}function makePromise(t){t[G]=X++,t._state=void 0,t._result=void 0,t._subscribers=[]}function validationError(){return new Error("Array Methods must be provided an Array")}var K=function(){function Enumerator(h,y){this._instanceConstructor=h,this.promise=new h(noop),this.promise[G]||makePromise(this.promise),t(y)?(this.length=y.length,this._remaining=y.length,this._result=new Array(this.length),0===this.length?fulfill(this.promise,this._result):(this.length=this.length||0,this._enumerate(y),0===this._remaining&&fulfill(this.promise,this._result))):reject(this.promise,validationError())}return Enumerator.prototype._enumerate=function _enumerate(t){for(var h=0;this._state===z&&h<t.length;h++)this._eachEntry(t[h],h)},Enumerator.prototype._eachEntry=function _eachEntry(t,h){var y=this._instanceConstructor,w=y.resolve;if(w===resolve$1){var A=void 0,T=void 0,E=!1;try{A=t.then}catch(t){E=!0,T=t}if(A===then&&t._state!==z)this._settledAt(t._state,h,t._result);else if("function"!=typeof A)this._remaining--,this._result[h]=t;else if(y===ne){var j=new y(noop);E?reject(j,T):handleMaybeThenable(j,t,A),this._willSettleAt(j,h)}else this._willSettleAt(new y((function(h){return h(t)})),h)}else this._willSettleAt(w(t),h)},Enumerator.prototype._settledAt=function _settledAt(t,h,y){var w=this.promise;w._state===z&&(this._remaining--,t===J?reject(w,y):this._result[h]=y),0===this._remaining&&fulfill(w,this._result)},Enumerator.prototype._willSettleAt=function _willSettleAt(t,h){var y=this;subscribe(t,void 0,(function(t){return y._settledAt($,h,t)}),(function(t){return y._settledAt(J,h,t)}))},Enumerator}();function all(t){return new K(this,t).promise}function race(h){var y=this;return t(h)?new y((function(t,w){for(var A=h.length,T=0;T<A;T++)y.resolve(h[T]).then(t,w)})):new y((function(t,h){return h(new TypeError("You must pass an array to race."))}))}function reject$1(t){var h=new this(noop);return reject(h,t),h}function needsResolver(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function needsNew(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}var ne=function(){function Promise(t){this[G]=nextId(),this._result=this._state=void 0,this._subscribers=[],noop!==t&&("function"!=typeof t&&needsResolver(),this instanceof Promise?initializePromise(this,t):needsNew())}return Promise.prototype.catch=function _catch(t){return this.then(null,t)},Promise.prototype.finally=function _finally(t){var h=this,y=h.constructor;return isFunction(t)?h.then((function(h){return y.resolve(t()).then((function(){return h}))}),(function(h){return y.resolve(t()).then((function(){throw h}))})):h.then(t,t)},Promise}();function polyfill(){var t=void 0;if(void 0!==y.g)t=y.g;else if("undefined"!=typeof self)t=self;else try{t=Function("return this")()}catch(t){throw new Error("polyfill failed because global object is unavailable in this environment")}var h=t.Promise;if(h){var w=null;try{w=Object.prototype.toString.call(h.resolve())}catch(t){}if("[object Promise]"===w&&!h.cast)return}t.Promise=ne}return ne.prototype.then=then,ne.all=all,ne.race=race,ne.resolve=resolve$1,ne.reject=reject$1,ne._setScheduler=setScheduler,ne._setAsap=setAsap,ne._asap=T,ne.polyfill=polyfill,ne.Promise=ne,ne}()},35608:function(t,h,y){y(57341),t.exports=self.fetch.bind(self)},80766:function(t){var h=function(t){"use strict";var h,y=Object.prototype,w=y.hasOwnProperty,A="function"==typeof Symbol?Symbol:{},T=A.iterator||"@@iterator",E=A.asyncIterator||"@@asyncIterator",j=A.toStringTag||"@@toStringTag";function wrap(t,h,y,w){var A=h&&h.prototype instanceof Generator?h:Generator,T=Object.create(A.prototype),E=new Context(w||[]);return T._invoke=function makeInvokeMethod(t,h,y){var w=B;return function invoke(A,T){if(w===V)throw new Error("Generator is already running");if(w===W){if("throw"===A)throw T;return doneResult()}for(y.method=A,y.arg=T;;){var E=y.delegate;if(E){var j=maybeInvokeDelegate(E,y);if(j){if(j===H)continue;return j}}if("next"===y.method)y.sent=y._sent=y.arg;else if("throw"===y.method){if(w===B)throw w=W,y.arg;y.dispatchException(y.arg)}else"return"===y.method&&y.abrupt("return",y.arg);w=V;var G=tryCatch(t,h,y);if("normal"===G.type){if(w=y.done?W:N,G.arg===H)continue;return{value:G.arg,done:y.done}}"throw"===G.type&&(w=W,y.method="throw",y.arg=G.arg)}}}(t,y,E),T}function tryCatch(t,h,y){try{return{type:"normal",arg:t.call(h,y)}}catch(t){return{type:"throw",arg:t}}}t.wrap=wrap;var B="suspendedStart",N="suspendedYield",V="executing",W="completed",H={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var G={};G[T]=function(){return this};var z=Object.getPrototypeOf,$=z&&z(z(values([])));$&&$!==y&&w.call($,T)&&(G=$);var J=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(G);function defineIteratorMethods(t){["next","throw","return"].forEach((function(h){t[h]=function(t){return this._invoke(h,t)}}))}function AsyncIterator(t,h){function invoke(y,A,T,E){var j=tryCatch(t[y],t,A);if("throw"!==j.type){var B=j.arg,N=B.value;return N&&"object"==typeof N&&w.call(N,"__await")?h.resolve(N.__await).then((function(t){invoke("next",t,T,E)}),(function(t){invoke("throw",t,T,E)})):h.resolve(N).then((function(t){B.value=t,T(B)}),(function(t){return invoke("throw",t,T,E)}))}E(j.arg)}var y;this._invoke=function enqueue(t,w){function callInvokeWithMethodAndArg(){return new h((function(h,y){invoke(t,w,h,y)}))}return y=y?y.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}}function maybeInvokeDelegate(t,y){var w=t.iterator[y.method];if(w===h){if(y.delegate=null,"throw"===y.method){if(t.iterator.return&&(y.method="return",y.arg=h,maybeInvokeDelegate(t,y),"throw"===y.method))return H;y.method="throw",y.arg=new TypeError("The iterator does not provide a 'throw' method")}return H}var A=tryCatch(w,t.iterator,y.arg);if("throw"===A.type)return y.method="throw",y.arg=A.arg,y.delegate=null,H;var T=A.arg;return T?T.done?(y[t.resultName]=T.value,y.next=t.nextLoc,"return"!==y.method&&(y.method="next",y.arg=h),y.delegate=null,H):T:(y.method="throw",y.arg=new TypeError("iterator result is not an object"),y.delegate=null,H)}function pushTryEntry(t){var h={tryLoc:t[0]};1 in t&&(h.catchLoc=t[1]),2 in t&&(h.finallyLoc=t[2],h.afterLoc=t[3]),this.tryEntries.push(h)}function resetTryEntry(t){var h=t.completion||{};h.type="normal",delete h.arg,t.completion=h}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0)}function values(t){if(t){var y=t[T];if(y)return y.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var A=-1,E=function next(){for(;++A<t.length;)if(w.call(t,A))return next.value=t[A],next.done=!1,next;return next.value=h,next.done=!0,next};return E.next=E}}return{next:doneResult}}function doneResult(){return{value:h,done:!0}}return GeneratorFunction.prototype=J.constructor=GeneratorFunctionPrototype,GeneratorFunctionPrototype.constructor=GeneratorFunction,GeneratorFunctionPrototype[j]=GeneratorFunction.displayName="GeneratorFunction",t.isGeneratorFunction=function(t){var h="function"==typeof t&&t.constructor;return!!h&&(h===GeneratorFunction||"GeneratorFunction"===(h.displayName||h.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,j in t||(t[j]="GeneratorFunction")),t.prototype=Object.create(J),t},t.awrap=function(t){return{__await:t}},defineIteratorMethods(AsyncIterator.prototype),AsyncIterator.prototype[E]=function(){return this},t.AsyncIterator=AsyncIterator,t.async=function(h,y,w,A,T){void 0===T&&(T=Promise);var E=new AsyncIterator(wrap(h,y,w,A),T);return t.isGeneratorFunction(y)?E:E.next().then((function(t){return t.done?t.value:E.next()}))},defineIteratorMethods(J),J[j]="Generator",J[T]=function(){return this},J.toString=function(){return"[object Generator]"},t.keys=function(t){var h=[];for(var y in t)h.push(y);return h.reverse(),function next(){for(;h.length;){var y=h.pop();if(y in t)return next.value=y,next.done=!1,next}return next.done=!0,next}},t.values=values,Context.prototype={constructor:Context,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=h,this.done=!1,this.delegate=null,this.method="next",this.arg=h,this.tryEntries.forEach(resetTryEntry),!t)for(var y in this)"t"===y.charAt(0)&&w.call(this,y)&&!isNaN(+y.slice(1))&&(this[y]=h)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var y=this;function handle(w,A){return E.type="throw",E.arg=t,y.next=w,A&&(y.method="next",y.arg=h),!!A}for(var A=this.tryEntries.length-1;A>=0;--A){var T=this.tryEntries[A],E=T.completion;if("root"===T.tryLoc)return handle("end");if(T.tryLoc<=this.prev){var j=w.call(T,"catchLoc"),B=w.call(T,"finallyLoc");if(j&&B){if(this.prev<T.catchLoc)return handle(T.catchLoc,!0);if(this.prev<T.finallyLoc)return handle(T.finallyLoc)}else if(j){if(this.prev<T.catchLoc)return handle(T.catchLoc,!0)}else{if(!B)throw new Error("try statement without catch or finally");if(this.prev<T.finallyLoc)return handle(T.finallyLoc)}}}},abrupt:function(t,h){for(var y=this.tryEntries.length-1;y>=0;--y){var A=this.tryEntries[y];if(A.tryLoc<=this.prev&&w.call(A,"finallyLoc")&&this.prev<A.finallyLoc){var T=A;break}}T&&("break"===t||"continue"===t)&&T.tryLoc<=h&&h<=T.finallyLoc&&(T=null);var E=T?T.completion:{};return E.type=t,E.arg=h,T?(this.method="next",this.next=T.finallyLoc,H):this.complete(E)},complete:function(t,h){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&h&&(this.next=h),H},finish:function(t){for(var h=this.tryEntries.length-1;h>=0;--h){var y=this.tryEntries[h];if(y.finallyLoc===t)return this.complete(y.completion,y.afterLoc),resetTryEntry(y),H}},catch:function(t){for(var h=this.tryEntries.length-1;h>=0;--h){var y=this.tryEntries[h];if(y.tryLoc===t){var w=y.completion;if("throw"===w.type){var A=w.arg;resetTryEntry(y)}return A}}throw new Error("illegal catch attempt")},delegateYield:function(t,y,w){return this.delegate={iterator:values(t),resultName:y,nextLoc:w},"next"===this.method&&(this.arg=h),H}},t}(t.exports);try{regeneratorRuntime=h}catch(t){Function("r","regeneratorRuntime = r")(h)}},22366:function(t,h,y){var w=this&&this.__values||function(t){var h="function"==typeof Symbol&&Symbol.iterator,y=h&&t[h],w=0;if(y)return y.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&w>=t.length&&(t=void 0),{value:t&&t[w++],done:!t}}};throw new TypeError(h?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(h,"__esModule",{value:!0}),h.Container=void 0;var A=y(24323),T=function(){function Container(){}return Container.prototype.empty=function(){return 0===this.size()},Container.prototype.rbegin=function(){return this.end().reverse()},Container.prototype.rend=function(){return this.begin().reverse()},Container.prototype[Symbol.iterator]=function(){return new A.ForOfAdaptor(this.begin(),this.end())},Container.prototype.toJSON=function(){var t,h,y=[];try{for(var A=w(this),T=A.next();!T.done;T=A.next()){var E=T.value;y.push(E)}}catch(h){t={error:h}}finally{try{T&&!T.done&&(h=A.return)&&h.call(A)}finally{if(t)throw t.error}}return y},Container}();h.Container=T},28221:function(t,h,y){var w,A=this&&this.__extends||(w=function(t,h){return w=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,h){t.__proto__=h}||function(t,h){for(var y in h)h.hasOwnProperty(y)&&(t[y]=h[y])},w(t,h)},function(t,h){function __(){this.constructor=t}w(t,h),t.prototype=null===h?Object.create(h):(__.prototype=h.prototype,new __)});Object.defineProperty(h,"__esModule",{value:!0}),h.MapContainer=void 0;var T=y(22366),E=y(48442),j=function(t){function MapContainer(h){var y=t.call(this)||this;return y.data_=h(y),y}return A(MapContainer,t),MapContainer.prototype.assign=function(t,h){this.clear(),this.insert(t,h)},MapContainer.prototype.clear=function(){this.data_.clear()},MapContainer.prototype.begin=function(){return this.data_.begin()},MapContainer.prototype.end=function(){return this.data_.end()},MapContainer.prototype.has=function(t){return!this.find(t).equals(this.end())},MapContainer.prototype.size=function(){return this.data_.size()},MapContainer.prototype.push=function(){for(var t=[],h=0;h<arguments.length;h++)t[h]=arguments[h];var y=new E.NativeArrayIterator(t,0),w=new E.NativeArrayIterator(t,t.length);return this.insert(y,w),this.size()},MapContainer.prototype.insert=function(){for(var t=[],h=0;h<arguments.length;h++)t[h]=arguments[h];return 1===t.length?this.emplace(t[0].first,t[0].second):t[0].next instanceof Function&&t[1].next instanceof Function?this._Insert_by_range(t[0],t[1]):this.emplace_hint(t[0],t[1].first,t[1].second)},MapContainer.prototype.erase=function(){for(var t=[],h=0;h<arguments.length;h++)t[h]=arguments[h];return 1!==t.length||t[0]instanceof this.end().constructor!=!1&&t[0].source()===this?1===t.length?this._Erase_by_range(t[0]):this._Erase_by_range(t[0],t[1]):this._Erase_by_key(t[0])},MapContainer.prototype._Erase_by_range=function(t,h){void 0===h&&(h=t.next());var y=this.data_.erase(t,h);return this._Handle_erase(t,h),y},MapContainer}(T.Container);h.MapContainer=j},67667:function(t,h,y){var w,A=this&&this.__extends||(w=function(t,h){return w=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,h){t.__proto__=h}||function(t,h){for(var y in h)h.hasOwnProperty(y)&&(t[y]=h[y])},w(t,h)},function(t,h){function __(){this.constructor=t}w(t,h),t.prototype=null===h?Object.create(h):(__.prototype=h.prototype,new __)});Object.defineProperty(h,"__esModule",{value:!0}),h.SetContainer=void 0;var T=y(22366),E=y(48442),j=function(t){function SetContainer(h){var y=t.call(this)||this;return y.data_=h(y),y}return A(SetContainer,t),SetContainer.prototype.assign=function(t,h){this.clear(),this.insert(t,h)},SetContainer.prototype.clear=function(){this.data_.clear()},SetContainer.prototype.begin=function(){return this.data_.begin()},SetContainer.prototype.end=function(){return this.data_.end()},SetContainer.prototype.has=function(t){return!this.find(t).equals(this.end())},SetContainer.prototype.size=function(){return this.data_.size()},SetContainer.prototype.push=function(){for(var t=[],h=0;h<arguments.length;h++)t[h]=arguments[h];if(0===t.length)return this.size();var y=new E.NativeArrayIterator(t,0),w=new E.NativeArrayIterator(t,t.length);return this._Insert_by_range(y,w),this.size()},SetContainer.prototype.insert=function(){for(var t=[],h=0;h<arguments.length;h++)t[h]=arguments[h];return 1===t.length?this._Insert_by_key(t[0]):t[0].next instanceof Function&&t[1].next instanceof Function?this._Insert_by_range(t[0],t[1]):this._Insert_by_hint(t[0],t[1])},SetContainer.prototype.erase=function(){for(var t=[],h=0;h<arguments.length;h++)t[h]=arguments[h];return 1!==t.length||t[0]instanceof this.end().constructor&&t[0].source()===this?1===t.length?this._Erase_by_range(t[0]):this._Erase_by_range(t[0],t[1]):this._Erase_by_val(t[0])},SetContainer.prototype._Erase_by_range=function(t,h){void 0===h&&(h=t.next());var y=this.data_.erase(t,h);return this._Handle_erase(t,h),y},SetContainer}(T.Container);h.SetContainer=j},9002:function(t,h,y){var w,A=this&&this.__extends||(w=function(t,h){return w=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,h){t.__proto__=h}||function(t,h){for(var y in h)h.hasOwnProperty(y)&&(t[y]=h[y])},w(t,h)},function(t,h){function __(){this.constructor=t}w(t,h),t.prototype=null===h?Object.create(h):(__.prototype=h.prototype,new __)}),T=this&&this.__read||function(t,h){var y="function"==typeof Symbol&&t[Symbol.iterator];if(!y)return t;var w,A,T=y.call(t),E=[];try{for(;(void 0===h||h-- >0)&&!(w=T.next()).done;)E.push(w.value)}catch(t){A={error:t}}finally{try{w&&!w.done&&(y=T.return)&&y.call(T)}finally{if(A)throw A.error}}return E},E=this&&this.__spread||function(){for(var t=[],h=0;h<arguments.length;h++)t=t.concat(T(arguments[h]));return t};Object.defineProperty(h,"__esModule",{value:!0}),h.UniqueMap=void 0;var j=y(28221),B=y(44351),N=function(t){function UniqueMap(){return null!==t&&t.apply(this,arguments)||this}return A(UniqueMap,t),UniqueMap.prototype.count=function(t){return this.find(t).equals(this.end())?0:1},UniqueMap.prototype.get=function(t){var h=this.find(t);if(!0===h.equals(this.end()))throw B.ErrorGenerator.key_nout_found(this,"get",t);return h.second},UniqueMap.prototype.set=function(t,h){this.insert_or_assign(t,h)},UniqueMap.prototype.insert=function(){for(var h=[],y=0;y<arguments.length;y++)h[y]=arguments[y];return t.prototype.insert.apply(this,E(h))},UniqueMap.prototype._Insert_by_range=function(t,h){for(var y=t;!y.equals(h);y=y.next())this.emplace(y.value.first,y.value.second)},UniqueMap.prototype.insert_or_assign=function(){for(var t=[],h=0;h<arguments.length;h++)t[h]=arguments[h];return 2===t.length?this._Insert_or_assign_with_key_value(t[0],t[1]):3===t.length?this._Insert_or_assign_with_hint(t[0],t[1],t[2]):void 0},UniqueMap.prototype._Insert_or_assign_with_key_value=function(t,h){var y=this.emplace(t,h);return!1===y.second&&(y.first.second=h),y},UniqueMap.prototype._Insert_or_assign_with_hint=function(t,h,y){var w=this.emplace_hint(t,h,y);return w.second!==y&&(w.second=y),w},UniqueMap.prototype.extract=function(t){return t instanceof this.end().constructor?this._Extract_by_iterator(t):this._Extract_by_key(t)},UniqueMap.prototype._Extract_by_key=function(t){var h=this.find(t);if(!0===h.equals(this.end()))throw B.ErrorGenerator.key_nout_found(this,"extract",t);var y=h.value;return this._Erase_by_range(h),y},UniqueMap.prototype._Extract_by_iterator=function(t){return!0===t.equals(this.end())?this.end():(this._Erase_by_range(t),t)},UniqueMap.prototype._Erase_by_key=function(t){var h=this.find(t);return!0===h.equals(this.end())?0:(this._Erase_by_range(h),1)},UniqueMap.prototype.merge=function(t){for(var h=t.begin();!h.equals(t.end());)!1===this.has(h.first)?(this.insert(h.value),h=t.erase(h)):h=h.next()},UniqueMap}(j.MapContainer);h.UniqueMap=N},52673:function(t,h,y){var w,A=this&&this.__extends||(w=function(t,h){return w=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,h){t.__proto__=h}||function(t,h){for(var y in h)h.hasOwnProperty(y)&&(t[y]=h[y])},w(t,h)},function(t,h){function __(){this.constructor=t}w(t,h),t.prototype=null===h?Object.create(h):(__.prototype=h.prototype,new __)}),T=this&&this.__read||function(t,h){var y="function"==typeof Symbol&&t[Symbol.iterator];if(!y)return t;var w,A,T=y.call(t),E=[];try{for(;(void 0===h||h-- >0)&&!(w=T.next()).done;)E.push(w.value)}catch(t){A={error:t}}finally{try{w&&!w.done&&(y=T.return)&&y.call(T)}finally{if(A)throw A.error}}return E},E=this&&this.__spread||function(){for(var t=[],h=0;h<arguments.length;h++)t=t.concat(T(arguments[h]));return t};Object.defineProperty(h,"__esModule",{value:!0}),h.UniqueSet=void 0;var j=y(67667),B=y(44351),N=function(t){function UniqueSet(){return null!==t&&t.apply(this,arguments)||this}return A(UniqueSet,t),UniqueSet.prototype.count=function(t){return this.find(t).equals(this.end())?0:1},UniqueSet.prototype.insert=function(){for(var h=[],y=0;y<arguments.length;y++)h[y]=arguments[y];return t.prototype.insert.apply(this,E(h))},UniqueSet.prototype._Insert_by_range=function(t,h){for(;!t.equals(h);t=t.next())this._Insert_by_key(t.value)},UniqueSet.prototype.extract=function(t){return t instanceof this.end().constructor?this._Extract_by_iterator(t):this._Extract_by_val(t)},UniqueSet.prototype._Extract_by_val=function(t){var h=this.find(t);if(!0===h.equals(this.end()))throw B.ErrorGenerator.key_nout_found(this,"extract",t);return this._Erase_by_range(h),t},UniqueSet.prototype._Extract_by_iterator=function(t){return!0===t.equals(this.end())||!1===this.has(t.value)?this.end():(this._Erase_by_range(t),t)},UniqueSet.prototype._Erase_by_val=function(t){var h=this.find(t);return!0===h.equals(this.end())?0:(this._Erase_by_range(h),1)},UniqueSet.prototype.merge=function(t){for(var h=t.begin();!h.equals(t.end());)!1===this.has(h.value)?(this.insert(h.value),h=t.erase(h)):h=h.next()},UniqueSet}(j.SetContainer);h.UniqueSet=N},41562:function(t,h,y){var w,A=this&&this.__extends||(w=function(t,h){return w=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,h){t.__proto__=h}||function(t,h){for(var y in h)h.hasOwnProperty(y)&&(t[y]=h[y])},w(t,h)},function(t,h){function __(){this.constructor=t}w(t,h),t.prototype=null===h?Object.create(h):(__.prototype=h.prototype,new __)}),T=this&&this.__read||function(t,h){var y="function"==typeof Symbol&&t[Symbol.iterator];if(!y)return t;var w,A,T=y.call(t),E=[];try{for(;(void 0===h||h-- >0)&&!(w=T.next()).done;)E.push(w.value)}catch(t){A={error:t}}finally{try{w&&!w.done&&(y=T.return)&&y.call(T)}finally{if(A)throw A.error}}return E},E=this&&this.__spread||function(){for(var t=[],h=0;h<arguments.length;h++)t=t.concat(T(arguments[h]));return t};Object.defineProperty(h,"__esModule",{value:!0}),h.HashMap=void 0;var j=y(9002),B=y(73141),N=y(47473),V=y(19641),W=y(89052),H=y(38490),G=function(t){function HashMap(){for(var h=[],y=0;y<arguments.length;y++)h[y]=arguments[y];var w=t.call(this,(function(t){return new N.MapElementList(t)}))||this;return B.IHashContainer.construct.apply(B.IHashContainer,E([w,HashMap,function(t,h){w.buckets_=new V.MapHashBuckets(w,t,h)}],h)),w}return A(HashMap,t),HashMap.prototype.clear=function(){this.buckets_.clear(),t.prototype.clear.call(this)},HashMap.prototype.swap=function(t){var h,y;h=T([t.data_,this.data_],2),this.data_=h[0],t.data_=h[1],N.MapElementList._Swap_associative(this.data_,t.data_),V.MapHashBuckets._Swap_source(this.buckets_,t.buckets_),y=T([t.buckets_,this.buckets_],2),this.buckets_=y[0],t.buckets_=y[1]},HashMap.prototype.find=function(t){return this.buckets_.find(t)},HashMap.prototype.begin=function(h){return void 0===h&&(h=null),null===h?t.prototype.begin.call(this):this.buckets_.at(h)[0]},HashMap.prototype.end=function(h){if(void 0===h&&(h=null),null===h)return t.prototype.end.call(this);var y=this.buckets_.at(h);return y[y.length-1].next()},HashMap.prototype.rbegin=function(t){return void 0===t&&(t=null),this.end(t).reverse()},HashMap.prototype.rend=function(t){return void 0===t&&(t=null),this.begin(t).reverse()},HashMap.prototype.bucket_count=function(){return this.buckets_.size()},HashMap.prototype.bucket_size=function(t){return this.buckets_.at(t).length},HashMap.prototype.load_factor=function(){return this.buckets_.load_factor()},HashMap.prototype.hash_function=function(){return this.buckets_.hash_function()},HashMap.prototype.key_eq=function(){return this.buckets_.key_eq()},HashMap.prototype.bucket=function(t){return this.hash_function()(t)%this.buckets_.size()},HashMap.prototype.max_load_factor=function(t){return void 0===t&&(t=null),this.buckets_.max_load_factor(t)},HashMap.prototype.reserve=function(t){this.buckets_.reserve(t)},HashMap.prototype.rehash=function(t){t<=this.bucket_count()||this.buckets_.rehash(t)},HashMap.prototype.emplace=function(t,h){var y=this.find(t);return!1===y.equals(this.end())?new H.Pair(y,!1):(this.data_.push(new W.Entry(t,h)),y=y.prev(),this._Handle_insert(y,y.next()),new H.Pair(y,!0))},HashMap.prototype.emplace_hint=function(t,h,y){var w=this.find(h);return!0===w.equals(this.end())&&(w=this.data_.insert(t,new W.Entry(h,y)),this._Handle_insert(w,w.next())),w},HashMap.prototype._Handle_insert=function(t,h){for(;!t.equals(h);t=t.next())this.buckets_.insert(t)},HashMap.prototype._Handle_erase=function(t,h){for(;!t.equals(h);t=t.next())this.buckets_.erase(t)},HashMap}(j.UniqueMap);h.HashMap=G,function(t){t.Iterator=N.MapElementList.Iterator,t.ReverseIterator=N.MapElementList.ReverseIterator}(G=h.HashMap||(h.HashMap={})),h.HashMap=G},11104:function(t,h,y){var w,A=this&&this.__extends||(w=function(t,h){return w=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,h){t.__proto__=h}||function(t,h){for(var y in h)h.hasOwnProperty(y)&&(t[y]=h[y])},w(t,h)},function(t,h){function __(){this.constructor=t}w(t,h),t.prototype=null===h?Object.create(h):(__.prototype=h.prototype,new __)}),T=this&&this.__read||function(t,h){var y="function"==typeof Symbol&&t[Symbol.iterator];if(!y)return t;var w,A,T=y.call(t),E=[];try{for(;(void 0===h||h-- >0)&&!(w=T.next()).done;)E.push(w.value)}catch(t){A={error:t}}finally{try{w&&!w.done&&(y=T.return)&&y.call(T)}finally{if(A)throw A.error}}return E},E=this&&this.__spread||function(){for(var t=[],h=0;h<arguments.length;h++)t=t.concat(T(arguments[h]));return t};Object.defineProperty(h,"__esModule",{value:!0}),h.HashSet=void 0;var j=y(52673),B=y(73141),N=y(48194),V=y(61476),W=y(38490),H=function(t){function HashSet(){for(var h=[],y=0;y<arguments.length;y++)h[y]=arguments[y];var w=t.call(this,(function(t){return new N.SetElementList(t)}))||this;return B.IHashContainer.construct.apply(B.IHashContainer,E([w,HashSet,function(t,h){w.buckets_=new V.SetHashBuckets(w,t,h)}],h)),w}return A(HashSet,t),HashSet.prototype.clear=function(){this.buckets_.clear(),t.prototype.clear.call(this)},HashSet.prototype.swap=function(t){var h,y;h=T([t.data_,this.data_],2),this.data_=h[0],t.data_=h[1],N.SetElementList._Swap_associative(this.data_,t.data_),V.SetHashBuckets._Swap_source(this.buckets_,t.buckets_),y=T([t.buckets_,this.buckets_],2),this.buckets_=y[0],t.buckets_=y[1]},HashSet.prototype.find=function(t){return this.buckets_.find(t)},HashSet.prototype.begin=function(h){return void 0===h&&(h=null),null===h?t.prototype.begin.call(this):this.buckets_.at(h)[0]},HashSet.prototype.end=function(h){if(void 0===h&&(h=null),null===h)return t.prototype.end.call(this);var y=this.buckets_.at(h);return y[y.length-1].next()},HashSet.prototype.rbegin=function(t){return void 0===t&&(t=null),this.end(t).reverse()},HashSet.prototype.rend=function(t){return void 0===t&&(t=null),this.begin(t).reverse()},HashSet.prototype.bucket_count=function(){return this.buckets_.size()},HashSet.prototype.bucket_size=function(t){return this.buckets_.at(t).length},HashSet.prototype.load_factor=function(){return this.buckets_.load_factor()},HashSet.prototype.hash_function=function(){return this.buckets_.hash_function()},HashSet.prototype.key_eq=function(){return this.buckets_.key_eq()},HashSet.prototype.bucket=function(t){return this.hash_function()(t)%this.buckets_.size()},HashSet.prototype.max_load_factor=function(t){return void 0===t&&(t=null),this.buckets_.max_load_factor(t)},HashSet.prototype.reserve=function(t){this.buckets_.rehash(Math.ceil(t*this.max_load_factor()))},HashSet.prototype.rehash=function(t){t<=this.bucket_count()||this.buckets_.rehash(t)},HashSet.prototype._Insert_by_key=function(t){var h=this.find(t);return!1===h.equals(this.end())?new W.Pair(h,!1):(this.data_.push(t),h=h.prev(),this._Handle_insert(h,h.next()),new W.Pair(h,!0))},HashSet.prototype._Insert_by_hint=function(t,h){var y=this.find(h);return!0===y.equals(this.end())&&(y=this.data_.insert(t,h),this._Handle_insert(y,y.next())),y},HashSet.prototype._Handle_insert=function(t,h){for(;!t.equals(h);t=t.next())this.buckets_.insert(t)},HashSet.prototype._Handle_erase=function(t,h){for(;!t.equals(h);t=t.next())this.buckets_.erase(t)},HashSet}(j.UniqueSet);h.HashSet=H,function(t){t.Iterator=N.SetElementList.Iterator,t.ReverseIterator=N.SetElementList.ReverseIterator}(H=h.HashSet||(h.HashSet={})),h.HashSet=H},66166:function(t,h){var y,w=this&&this.__extends||(y=function(t,h){return y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,h){t.__proto__=h}||function(t,h){for(var y in h)h.hasOwnProperty(y)&&(t[y]=h[y])},y(t,h)},function(t,h){function __(){this.constructor=t}y(t,h),t.prototype=null===h?Object.create(h):(__.prototype=h.prototype,new __)});Object.defineProperty(h,"__esModule",{value:!0}),h.Exception=void 0;var A=function(t){function Exception(h){var y=this.constructor,w=t.call(this,h)||this,A=y.prototype;return Object.setPrototypeOf?Object.setPrototypeOf(w,A):w.__proto__=A,w}return w(Exception,t),Object.defineProperty(Exception.prototype,"name",{get:function(){return this.constructor.name},enumerable:!1,configurable:!0}),Exception.prototype.what=function(){return this.message},Exception.prototype.toJSON=function(){return{name:this.name,message:this.message,stack:this.stack}},Exception}(Error);h.Exception=A},59611:function(t,h,y){var w,A=this&&this.__extends||(w=function(t,h){return w=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,h){t.__proto__=h}||function(t,h){for(var y in h)h.hasOwnProperty(y)&&(t[y]=h[y])},w(t,h)},function(t,h){function __(){this.constructor=t}w(t,h),t.prototype=null===h?Object.create(h):(__.prototype=h.prototype,new __)});Object.defineProperty(h,"__esModule",{value:!0}),h.InvalidArgument=void 0;var T=function(t){function InvalidArgument(h){return t.call(this,h)||this}return A(InvalidArgument,t),InvalidArgument}(y(45309).LogicError);h.InvalidArgument=T},45309:function(t,h,y){var w,A=this&&this.__extends||(w=function(t,h){return w=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,h){t.__proto__=h}||function(t,h){for(var y in h)h.hasOwnProperty(y)&&(t[y]=h[y])},w(t,h)},function(t,h){function __(){this.constructor=t}w(t,h),t.prototype=null===h?Object.create(h):(__.prototype=h.prototype,new __)});Object.defineProperty(h,"__esModule",{value:!0}),h.LogicError=void 0;var T=function(t){function LogicError(h){return t.call(this,h)||this}return A(LogicError,t),LogicError}(y(66166).Exception);h.LogicError=T},68517:function(t,h,y){var w,A=this&&this.__extends||(w=function(t,h){return w=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,h){t.__proto__=h}||function(t,h){for(var y in h)h.hasOwnProperty(y)&&(t[y]=h[y])},w(t,h)},function(t,h){function __(){this.constructor=t}w(t,h),t.prototype=null===h?Object.create(h):(__.prototype=h.prototype,new __)});Object.defineProperty(h,"__esModule",{value:!0}),h.OutOfRange=void 0;var T=function(t){function OutOfRange(h){return t.call(this,h)||this}return A(OutOfRange,t),OutOfRange}(y(45309).LogicError);h.OutOfRange=T},42586:function(t,h,y){Object.defineProperty(h,"__esModule",{value:!0}),h.greater_equal=h.greater=h.less_equal=h.less=h.not_equal_to=h.equal_to=void 0;var w=y(12941);function equal_to(t,h){return t=t?t.valueOf():t,h=h?h.valueOf():h,t instanceof Object&&t.equals instanceof Function?t.equals(h):t===h}function less(t,h){return t=t.valueOf(),h=h.valueOf(),t instanceof Object?t.less instanceof Function?t.less(h):w.get_uid(t)<w.get_uid(h):t<h}function less_equal(t,h){return less(t,h)||equal_to(t,h)}h.equal_to=equal_to,h.not_equal_to=function not_equal_to(t,h){return!equal_to(t,h)},h.less=less,h.less_equal=less_equal,h.greater=function greater(t,h){return!less_equal(t,h)},h.greater_equal=function greater_equal(t,h){return!less(t,h)}},71868:function(t,h,y){var w=this&&this.__values||function(t){var h="function"==typeof Symbol&&Symbol.iterator,y=h&&t[h],w=0;if(y)return y.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&w>=t.length&&(t=void 0),{value:t&&t[w++],done:!t}}};throw new TypeError(h?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(h,"__esModule",{value:!0}),h.hash=void 0;var A=y(12941);function _Hash_boolean(t,h){return h^=t?1:0,h*=E}function _Hash_number(t,h){return _Hash_string(t.toString(),h)}function _Hash_string(t,h){for(var y=0;y<t.length;++y)h^=t.charCodeAt(y),h*=E;return Math.abs(h)}h.hash=function hash(){for(var t,h,y=[],j=0;j<arguments.length;j++)y[j]=arguments[j];var B=T;try{for(var N=w(y),V=N.next();!V.done;V=N.next()){var W=V.value,H=typeof(W=W?W.valueOf():W);if("boolean"===H)B=_Hash_boolean(W,B);else if("number"===H||"bigint"===H)B=_Hash_number(W,B);else if("string"===H)B=_Hash_string(W,B);else if(W instanceof Object&&W.hashCode instanceof Function){var G=W.hashCode();if(1===y.length)return G;B^=G,B*=E}else B=_Hash_number(A.get_uid(W),B)}}catch(h){t={error:h}}finally{try{V&&!V.done&&(h=N.return)&&h.call(N)}finally{if(t)throw t.error}}return Math.abs(B)};var T=2166136261,E=16777619},12941:function(t,h,y){Object.defineProperty(h,"__esModule",{value:!0}),h.get_uid=void 0;var w=y(34643);h.get_uid=function get_uid(t){if(t instanceof Object){if(!1===t.hasOwnProperty("__get_m_iUID")){var h=++w._Get_root().__s_iUID;Object.defineProperty(t,"__get_m_iUID",{value:function(){return h}})}return t.__get_m_iUID()}return void 0===t?-1:0}},34643:function(t,h,y){Object.defineProperty(h,"__esModule",{value:!0}),h._Get_root=void 0;var w=y(24469);h._Get_root=function _Get_root(){return null===A&&void 0===(A=w.is_node()?y.g:self).__s_iUID&&(A.__s_iUID=0),A};var A=null},26878:function(t,h){var y=this&&this.__read||function(t,h){var y="function"==typeof Symbol&&t[Symbol.iterator];if(!y)return t;var w,A,T=y.call(t),E=[];try{for(;(void 0===h||h-- >0)&&!(w=T.next()).done;)E.push(w.value)}catch(t){A={error:t}}finally{try{w&&!w.done&&(y=T.return)&&y.call(T)}finally{if(A)throw A.error}}return E},w=this&&this.__spread||function(){for(var t=[],h=0;h<arguments.length;h++)t=t.concat(y(arguments[h]));return t};Object.defineProperty(h,"__esModule",{value:!0}),h.IAssociativeContainer=void 0,function(t){t.construct=function construct(t){for(var h,y,A=[],T=1;T<arguments.length;T++)A[T-1]=arguments[T];return A.length>=1&&A[0]instanceof Array?(h=function(){var h=A[0];t.push.apply(t,w(h))},y=A.slice(1)):A.length>=2&&A[0].next instanceof Function&&A[1].next instanceof Function?(h=function(){var h=A[0],y=A[1];t.assign(h,y)},y=A.slice(2)):(h=null,y=A),{ramda:h,tail:y}}}(h.IAssociativeContainer||(h.IAssociativeContainer={}))},73141:function(t,h,y){var w=this&&this.__read||function(t,h){var y="function"==typeof Symbol&&t[Symbol.iterator];if(!y)return t;var w,A,T=y.call(t),E=[];try{for(;(void 0===h||h-- >0)&&!(w=T.next()).done;)E.push(w.value)}catch(t){A={error:t}}finally{try{w&&!w.done&&(y=T.return)&&y.call(T)}finally{if(A)throw A.error}}return E},A=this&&this.__spread||function(){for(var t=[],h=0;h<arguments.length;h++)t=t.concat(w(arguments[h]));return t};Object.defineProperty(h,"__esModule",{value:!0}),h.IHashContainer=void 0;var T=y(26878),E=y(71868),j=y(42586);!function(t){t.construct=function construct(t,h,y){for(var w=[],B=3;B<arguments.length;B++)w[B-3]=arguments[B];var N=null,V=E.hash,W=j.equal_to;if(1===w.length&&w[0]instanceof h){var H=w[0];V=H.hash_function(),W=H.key_eq(),N=function(){var h=H.begin(),y=H.end();t.assign(h,y)}}else{var G=T.IAssociativeContainer.construct.apply(T.IAssociativeContainer,A([t],w));N=G.ramda,G.tail.length>=1&&(V=G.tail[0]),G.tail.length>=2&&(W=G.tail[1])}y(V,W),null!==N&&N()}}(h.IHashContainer||(h.IHashContainer={}))},47473:function(t,h,y){var w,A=this&&this.__extends||(w=function(t,h){return w=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,h){t.__proto__=h}||function(t,h){for(var y in h)h.hasOwnProperty(y)&&(t[y]=h[y])},w(t,h)},function(t,h){function __(){this.constructor=t}w(t,h),t.prototype=null===h?Object.create(h):(__.prototype=h.prototype,new __)}),T=this&&this.__read||function(t,h){var y="function"==typeof Symbol&&t[Symbol.iterator];if(!y)return t;var w,A,T=y.call(t),E=[];try{for(;(void 0===h||h-- >0)&&!(w=T.next()).done;)E.push(w.value)}catch(t){A={error:t}}finally{try{w&&!w.done&&(y=T.return)&&y.call(T)}finally{if(A)throw A.error}}return E};Object.defineProperty(h,"__esModule",{value:!0}),h.MapElementList=void 0;var E=y(69589),j=y(55353),B=y(563),N=function(t){function MapElementList(h){var y=t.call(this)||this;return y.associative_=h,y}return A(MapElementList,t),MapElementList.prototype._Create_iterator=function(t,h,y){return MapElementList.Iterator.create(this,t,h,y)},MapElementList._Swap_associative=function(t,h){var y;y=T([h.associative_,t.associative_],2),t.associative_=y[0],h.associative_=y[1]},MapElementList.prototype.associative=function(){return this.associative_},MapElementList}(E.ListContainer);h.MapElementList=N,function(t){var h=function(t){function Iterator(h,y,w,A){var T=t.call(this,y,w,A)||this;return T.list_=h,T}return A(Iterator,t),Iterator.create=function(t,h,y,w){return new Iterator(t,h,y,w)},Iterator.prototype.reverse=function(){return new y(this)},Iterator.prototype.source=function(){return this.list_.associative()},Object.defineProperty(Iterator.prototype,"first",{get:function(){return this.value.first},enumerable:!1,configurable:!0}),Object.defineProperty(Iterator.prototype,"second",{get:function(){return this.value.second},set:function(t){this.value.second=t},enumerable:!1,configurable:!0}),Iterator}(j.ListIterator);t.Iterator=h;var y=function(t){function ReverseIterator(){return null!==t&&t.apply(this,arguments)||this}return A(ReverseIterator,t),ReverseIterator.prototype._Create_neighbor=function(t){return new ReverseIterator(t)},Object.defineProperty(ReverseIterator.prototype,"first",{get:function(){return this.base_.first},enumerable:!1,configurable:!0}),Object.defineProperty(ReverseIterator.prototype,"second",{get:function(){return this.base_.second},set:function(t){this.base_.second=t},enumerable:!1,configurable:!0}),ReverseIterator}(B.ReverseIterator);t.ReverseIterator=y}(N=h.MapElementList||(h.MapElementList={})),h.MapElementList=N},48194:function(t,h,y){var w,A=this&&this.__extends||(w=function(t,h){return w=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,h){t.__proto__=h}||function(t,h){for(var y in h)h.hasOwnProperty(y)&&(t[y]=h[y])},w(t,h)},function(t,h){function __(){this.constructor=t}w(t,h),t.prototype=null===h?Object.create(h):(__.prototype=h.prototype,new __)}),T=this&&this.__read||function(t,h){var y="function"==typeof Symbol&&t[Symbol.iterator];if(!y)return t;var w,A,T=y.call(t),E=[];try{for(;(void 0===h||h-- >0)&&!(w=T.next()).done;)E.push(w.value)}catch(t){A={error:t}}finally{try{w&&!w.done&&(y=T.return)&&y.call(T)}finally{if(A)throw A.error}}return E};Object.defineProperty(h,"__esModule",{value:!0}),h.SetElementList=void 0;var E=y(69589),j=y(55353),B=y(563),N=function(t){function SetElementList(h){var y=t.call(this)||this;return y.associative_=h,y}return A(SetElementList,t),SetElementList.prototype._Create_iterator=function(t,h,y){return SetElementList.Iterator.create(this,t,h,y)},SetElementList._Swap_associative=function(t,h){var y;y=T([h.associative_,t.associative_],2),t.associative_=y[0],h.associative_=y[1]},SetElementList.prototype.associative=function(){return this.associative_},SetElementList}(E.ListContainer);h.SetElementList=N,function(t){var h=function(t){function Iterator(h,y,w,A){var T=t.call(this,y,w,A)||this;return T.source_=h,T}return A(Iterator,t),Iterator.create=function(t,h,y,w){return new Iterator(t,h,y,w)},Iterator.prototype.reverse=function(){return new y(this)},Iterator.prototype.source=function(){return this.source_.associative()},Iterator}(j.ListIterator);t.Iterator=h;var y=function(t){function ReverseIterator(){return null!==t&&t.apply(this,arguments)||this}return A(ReverseIterator,t),ReverseIterator.prototype._Create_neighbor=function(t){return new ReverseIterator(t)},ReverseIterator}(B.ReverseIterator);t.ReverseIterator=y}(N=h.SetElementList||(h.SetElementList={})),h.SetElementList=N},69589:function(t,h,y){var w,A=this&&this.__extends||(w=function(t,h){return w=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,h){t.__proto__=h}||function(t,h){for(var y in h)h.hasOwnProperty(y)&&(t[y]=h[y])},w(t,h)},function(t,h){function __(){this.constructor=t}w(t,h),t.prototype=null===h?Object.create(h):(__.prototype=h.prototype,new __)}),T=this&&this.__read||function(t,h){var y="function"==typeof Symbol&&t[Symbol.iterator];if(!y)return t;var w,A,T=y.call(t),E=[];try{for(;(void 0===h||h-- >0)&&!(w=T.next()).done;)E.push(w.value)}catch(t){A={error:t}}finally{try{w&&!w.done&&(y=T.return)&&y.call(T)}finally{if(A)throw A.error}}return E};Object.defineProperty(h,"__esModule",{value:!0}),h.ListContainer=void 0;var E=y(22366),j=y(55353),B=y(46158),N=y(48442),V=y(46826),W=y(44351),H=function(t){function ListContainer(){var h=t.call(this)||this;return h.end_=h._Create_iterator(null,null),h.clear(),h}return A(ListContainer,t),ListContainer.prototype.assign=function(t,h){this.clear(),this.insert(this.end(),t,h)},ListContainer.prototype.clear=function(){j.ListIterator._Set_prev(this.end_,this.end_),j.ListIterator._Set_next(this.end_,this.end_),this.begin_=this.end_,this.size_=0},ListContainer.prototype.resize=function(t){var h=t-this.size();h>0?this.insert(this.end(),h,void 0):h<0&&this.erase(V.advance(this.end(),-h),this.end())},ListContainer.prototype.begin=function(){return this.begin_},ListContainer.prototype.end=function(){return this.end_},ListContainer.prototype.size=function(){return this.size_},ListContainer.prototype.push_front=function(t){this.insert(this.begin_,t)},ListContainer.prototype.push_back=function(t){this.insert(this.end_,t)},ListContainer.prototype.pop_front=function(){if(!0===this.empty())throw W.ErrorGenerator.empty(this.end_.source().constructor.name,"pop_front");this.erase(this.begin_)},ListContainer.prototype.pop_back=function(){if(!0===this.empty())throw W.ErrorGenerator.empty(this.end_.source().constructor.name,"pop_back");this.erase(this.end_.prev())},ListContainer.prototype.push=function(){for(var t=[],h=0;h<arguments.length;h++)t[h]=arguments[h];if(0===t.length)return this.size();var y=new N.NativeArrayIterator(t,0),w=new N.NativeArrayIterator(t,t.length);return this._Insert_by_range(this.end(),y,w),this.size()},ListContainer.prototype.insert=function(t){for(var h=[],y=1;y<arguments.length;y++)h[y-1]=arguments[y];if(t.source()!==this.end_.source())throw W.ErrorGenerator.not_my_iterator(this.end_.source(),"insert");if(!0===t.erased_)throw W.ErrorGenerator.erased_iterator(this.end_.source(),"insert");return 1===h.length?this._Insert_by_repeating_val(t,1,h[0]):2===h.length&&"number"==typeof h[0]?this._Insert_by_repeating_val(t,h[0],h[1]):this._Insert_by_range(t,h[0],h[1])},ListContainer.prototype._Insert_by_repeating_val=function(t,h,y){var w=new B.Repeater(0,y),A=new B.Repeater(h);return this._Insert_by_range(t,w,A)},ListContainer.prototype._Insert_by_range=function(t,h,y){for(var w=t.prev(),A=null,T=0,E=h;!1===E.equals(y);E=E.next()){var B=this._Create_iterator(w,null,E.value);0===T&&(A=B),j.ListIterator._Set_next(w,B),w=B,++T}return!0===t.equals(this.begin())&&(this.begin_=A),j.ListIterator._Set_next(w,t),j.ListIterator._Set_prev(t,w),this.size_+=T,A},ListContainer.prototype.erase=function(t,h){return void 0===h&&(h=t.next()),this._Erase_by_range(t,h)},ListContainer.prototype._Erase_by_range=function(t,h){if(t.source()!==this.end_.source())throw W.ErrorGenerator.not_my_iterator(this.end_.source(),"insert");if(!0===t.erased_)throw W.ErrorGenerator.erased_iterator(this.end_.source(),"insert");if(t.equals(this.end_))return this.end_;var y=t.prev();j.ListIterator._Set_next(y,h),j.ListIterator._Set_prev(h,y);for(var w=t;!w.equals(h);w=w.next())w.erased_=!0,--this.size_;return t.equals(this.begin_)&&(this.begin_=h),h},ListContainer.prototype.swap=function(t){var h,y,w;h=T([t.begin_,this.begin_],2),this.begin_=h[0],t.begin_=h[1],y=T([t.end_,this.end_],2),this.end_=y[0],t.end_=y[1],w=T([t.size_,this.size_],2),this.size_=w[0],t.size_=w[1]},ListContainer}(E.Container);h.ListContainer=H},44351:function(t,h,y){Object.defineProperty(h,"__esModule",{value:!0}),h.ErrorGenerator=void 0;var w=y(59611),A=y(68517);!function(t){function get_class_name(t){if("string"==typeof t)return t;var h=t.constructor.name;return t.constructor.__MODULE&&(h=t.constructor.__MODULE+"."+h),"std."+h}t.get_class_name=get_class_name,t.empty=function empty(t,h){return new A.OutOfRange("Error on "+get_class_name(t)+"."+h+"(): it's empty container.")},t.negative_index=function negative_index(t,h,y){return new A.OutOfRange("Error on "+get_class_name(t)+"."+h+"(): parametric index is negative -> (index = "+y+").")},t.excessive_index=function excessive_index(t,h,y,w){return new A.OutOfRange("Error on "+get_class_name(t)+"."+h+"(): parametric index is equal or greater than size -> (index = "+y+", size: "+w+").")},t.not_my_iterator=function not_my_iterator(t,h){return new w.InvalidArgument("Error on "+get_class_name(t)+"."+h+"(): parametric iterator is not this container's own.")},t.erased_iterator=function erased_iterator(t,h){return new w.InvalidArgument("Error on "+get_class_name(t)+"."+h+"(): parametric iterator, it already has been erased.")},t.negative_iterator=function negative_iterator(t,h,y){return new A.OutOfRange("Error on "+get_class_name(t)+"."+h+"(): parametric iterator is directing negative position -> (index = "+y+").")},t.iterator_end_value=function iterator_end_value(t,h){void 0===h&&(h="end");var y=get_class_name(t);return new A.OutOfRange("Error on "+y+".Iterator.value: cannot access to the "+y+"."+h+"().value.")},t.key_nout_found=function key_nout_found(t,h,y){throw new A.OutOfRange("Error on "+get_class_name(t)+"."+h+"(): unable to find the matched key -> "+y)}}(h.ErrorGenerator||(h.ErrorGenerator={}))},26194:function(t,h){var y=this&&this.__values||function(t){var h="function"==typeof Symbol&&Symbol.iterator,y=h&&t[h],w=0;if(y)return y.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&w>=t.length&&(t=void 0),{value:t&&t[w++],done:!t}}};throw new TypeError(h?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(h,"__esModule",{value:!0}),h.HashBuckets=void 0;var w=function(){function HashBuckets(){this.clear(),this.max_load_factor_=T}return HashBuckets.prototype.clear=function(){this.buckets_=[],this.item_size_=0;for(var t=0;t<A;++t)this.buckets_.push([])},HashBuckets.prototype.rehash=function(t){var h,w,T,E;t<A&&(t=A);var j=this.buckets_;this.buckets_=[];for(var B=0;B<t;++B)this.buckets_.push([]);try{for(var N=y(j),V=N.next();!V.done;V=N.next()){var W=V.value;try{for(var H=(T=void 0,y(W)),G=H.next();!G.done;G=H.next()){var z=G.value,$=this.hash_index(z);this.buckets_[$].push(z),++this.item_size_}}catch(t){T={error:t}}finally{try{G&&!G.done&&(E=H.return)&&E.call(H)}finally{if(T)throw T.error}}}}catch(t){h={error:t}}finally{try{V&&!V.done&&(w=N.return)&&w.call(N)}finally{if(h)throw h.error}}},HashBuckets.prototype.reserve=function(t){this.item_size_+=t,this.item_size_>this.capacity()&&this.rehash(Math.max(this.item_size_,2*this.capacity()))},HashBuckets.prototype.size=function(){return this.buckets_.length},HashBuckets.prototype.capacity=function(){return this.buckets_.length*this.max_load_factor_},HashBuckets.prototype.at=function(t){return this.buckets_[t]},HashBuckets.prototype.load_factor=function(){return this.item_size_/this.size()},HashBuckets.prototype.max_load_factor=function(t){if(void 0===t&&(t=null),null===t)return this.max_load_factor_;this.max_load_factor_=t},HashBuckets.prototype.insert=function(t){var h=this.capacity();++this.item_size_>h&&this.rehash(2*h);var y=this.hash_index(t);this.buckets_[y].push(t)},HashBuckets.prototype.erase=function(t){for(var h=this.hash_index(t),y=this.buckets_[h],w=0;w<y.length;++w)if(y[w]===t){y.splice(w,1),--this.item_size_;break}},HashBuckets}();h.HashBuckets=w;var A=10,T=1},19641:function(t,h,y){var w,A=this&&this.__extends||(w=function(t,h){return w=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,h){t.__proto__=h}||function(t,h){for(var y in h)h.hasOwnProperty(y)&&(t[y]=h[y])},w(t,h)},function(t,h){function __(){this.constructor=t}w(t,h),t.prototype=null===h?Object.create(h):(__.prototype=h.prototype,new __)}),T=this&&this.__read||function(t,h){var y="function"==typeof Symbol&&t[Symbol.iterator];if(!y)return t;var w,A,T=y.call(t),E=[];try{for(;(void 0===h||h-- >0)&&!(w=T.next()).done;)E.push(w.value)}catch(t){A={error:t}}finally{try{w&&!w.done&&(y=T.return)&&y.call(T)}finally{if(A)throw A.error}}return E},E=this&&this.__values||function(t){var h="function"==typeof Symbol&&Symbol.iterator,y=h&&t[h],w=0;if(y)return y.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&w>=t.length&&(t=void 0),{value:t&&t[w++],done:!t}}};throw new TypeError(h?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(h,"__esModule",{value:!0}),h.MapHashBuckets=void 0;var j=function(t){function MapHashBuckets(h,y,w){var A=t.call(this)||this;return A.source_=h,A.hash_function_=y,A.key_eq_=w,A}return A(MapHashBuckets,t),MapHashBuckets._Swap_source=function(t,h){var y;y=T([h.source_,t.source_],2),t.source_=y[0],h.source_=y[1]},MapHashBuckets.prototype.hash_function=function(){return this.hash_function_},MapHashBuckets.prototype.key_eq=function(){return this.key_eq_},MapHashBuckets.prototype.find=function(t){var h,y,w=this.hash_function_(t)%this.size(),A=this.at(w);try{for(var T=E(A),j=T.next();!j.done;j=T.next()){var B=j.value;if(this.key_eq_(B.first,t))return B}}catch(t){h={error:t}}finally{try{j&&!j.done&&(y=T.return)&&y.call(T)}finally{if(h)throw h.error}}return this.source_.end()},MapHashBuckets.prototype.hash_index=function(t){return this.hash_function_(t.first)%this.size()},MapHashBuckets}(y(26194).HashBuckets);h.MapHashBuckets=j},61476:function(t,h,y){var w,A=this&&this.__extends||(w=function(t,h){return w=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,h){t.__proto__=h}||function(t,h){for(var y in h)h.hasOwnProperty(y)&&(t[y]=h[y])},w(t,h)},function(t,h){function __(){this.constructor=t}w(t,h),t.prototype=null===h?Object.create(h):(__.prototype=h.prototype,new __)}),T=this&&this.__read||function(t,h){var y="function"==typeof Symbol&&t[Symbol.iterator];if(!y)return t;var w,A,T=y.call(t),E=[];try{for(;(void 0===h||h-- >0)&&!(w=T.next()).done;)E.push(w.value)}catch(t){A={error:t}}finally{try{w&&!w.done&&(y=T.return)&&y.call(T)}finally{if(A)throw A.error}}return E},E=this&&this.__values||function(t){var h="function"==typeof Symbol&&Symbol.iterator,y=h&&t[h],w=0;if(y)return y.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&w>=t.length&&(t=void 0),{value:t&&t[w++],done:!t}}};throw new TypeError(h?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(h,"__esModule",{value:!0}),h.SetHashBuckets=void 0;var j=function(t){function SetHashBuckets(h,y,w){var A=t.call(this)||this;return A.source_=h,A.hash_function_=y,A.key_eq_=w,A}return A(SetHashBuckets,t),SetHashBuckets._Swap_source=function(t,h){var y;y=T([h.source_,t.source_],2),t.source_=y[0],h.source_=y[1]},SetHashBuckets.prototype.hash_function=function(){return this.hash_function_},SetHashBuckets.prototype.key_eq=function(){return this.key_eq_},SetHashBuckets.prototype.find=function(t){var h,y,w=this.hash_function_(t)%this.size(),A=this.at(w);try{for(var T=E(A),j=T.next();!j.done;j=T.next()){var B=j.value;if(this.key_eq_(B.value,t))return B}}catch(t){h={error:t}}finally{try{j&&!j.done&&(y=T.return)&&y.call(T)}finally{if(h)throw h.error}}return this.source_.end()},SetHashBuckets.prototype.hash_index=function(t){return this.hash_function_(t.value)%this.size()},SetHashBuckets}(y(26194).HashBuckets);h.SetHashBuckets=j},55353:function(t,h,y){Object.defineProperty(h,"__esModule",{value:!0}),h.ListIterator=void 0;var w=y(44351),A=function(){function ListIterator(t,h,y){this.prev_=t,this.next_=h,this.value_=y}return ListIterator._Set_prev=function(t,h){t.prev_=h},ListIterator._Set_next=function(t,h){t.next_=h},ListIterator.prototype.prev=function(){return this.prev_},ListIterator.prototype.next=function(){return this.next_},Object.defineProperty(ListIterator.prototype,"value",{get:function(){return this._Try_value(),this.value_},enumerable:!1,configurable:!0}),ListIterator.prototype._Try_value=function(){if(void 0===this.value_&&!0===this.equals(this.source().end()))throw w.ErrorGenerator.iterator_end_value(this.source())},ListIterator.prototype.equals=function(t){return this===t},ListIterator}();h.ListIterator=A},563:function(t,h){Object.defineProperty(h,"__esModule",{value:!0}),h.ReverseIterator=void 0;var y=function(){function ReverseIterator(t){this.base_=t.prev()}return ReverseIterator.prototype.source=function(){return this.base_.source()},ReverseIterator.prototype.base=function(){return this.base_.next()},Object.defineProperty(ReverseIterator.prototype,"value",{get:function(){return this.base_.value},enumerable:!1,configurable:!0}),ReverseIterator.prototype.prev=function(){return this._Create_neighbor(this.base().next())},ReverseIterator.prototype.next=function(){return this._Create_neighbor(this.base_)},ReverseIterator.prototype.equals=function(t){return this.base_.equals(t.base_)},ReverseIterator}();h.ReverseIterator=y},24323:function(t,h){Object.defineProperty(h,"__esModule",{value:!0}),h.ForOfAdaptor=void 0;var y=function(){function ForOfAdaptor(t,h){this.it_=t,this.last_=h}return ForOfAdaptor.prototype.next=function(){if(this.it_.equals(this.last_))return{done:!0,value:void 0};var t=this.it_;return this.it_=this.it_.next(),{done:!1,value:t.value}},ForOfAdaptor.prototype[Symbol.iterator]=function(){return this},ForOfAdaptor}();h.ForOfAdaptor=y},48442:function(t,h){var y=this&&this.__read||function(t,h){var y="function"==typeof Symbol&&t[Symbol.iterator];if(!y)return t;var w,A,T=y.call(t),E=[];try{for(;(void 0===h||h-- >0)&&!(w=T.next()).done;)E.push(w.value)}catch(t){A={error:t}}finally{try{w&&!w.done&&(y=T.return)&&y.call(T)}finally{if(A)throw A.error}}return E};Object.defineProperty(h,"__esModule",{value:!0}),h.NativeArrayIterator=void 0;var w=function(){function NativeArrayIterator(t,h){this.data_=t,this.index_=h}return NativeArrayIterator.prototype.index=function(){return this.index_},Object.defineProperty(NativeArrayIterator.prototype,"value",{get:function(){return this.data_[this.index_]},enumerable:!1,configurable:!0}),NativeArrayIterator.prototype.prev=function(){return--this.index_,this},NativeArrayIterator.prototype.next=function(){return++this.index_,this},NativeArrayIterator.prototype.advance=function(t){return this.index_+=t,this},NativeArrayIterator.prototype.equals=function(t){return this.data_===t.data_&&this.index_===t.index_},NativeArrayIterator.prototype.swap=function(t){var h,w;h=y([t.data_,this.data_],2),this.data_=h[0],t.data_=h[1],w=y([t.index_,this.index_],2),this.index_=w[0],t.index_=w[1]},NativeArrayIterator}();h.NativeArrayIterator=w},46158:function(t,h){Object.defineProperty(h,"__esModule",{value:!0}),h.Repeater=void 0;var y=function(){function Repeater(t,h){this.index_=t,this.value_=h}return Repeater.prototype.index=function(){return this.index_},Object.defineProperty(Repeater.prototype,"value",{get:function(){return this.value_},enumerable:!1,configurable:!0}),Repeater.prototype.next=function(){return++this.index_,this},Repeater.prototype.equals=function(t){return this.index_===t.index_},Repeater}();h.Repeater=y},46826:function(t,h,y){Object.defineProperty(h,"__esModule",{value:!0}),h.next=h.prev=h.advance=h.distance=h.size=h.empty=void 0;var w=y(59611);function advance(t,h){if(0===h)return t;if(t.advance instanceof Function)return t.advance(h);var y;if(h<0){if(!(t.prev instanceof Function))throw new w.InvalidArgument("Error on std.advance(): parametric iterator is not a bi-directional iterator, thus advancing to negative direction is not possible.");y=function(t){return t.prev()},h=-h}else y=function(t){return t.next()};for(;h-- >0;)t=y(t);return t}h.empty=function empty(t){return t instanceof Array?0!==t.length:t.empty()},h.size=function size(t){return t instanceof Array?t.length:t.size()},h.distance=function distance(t,h){if(t.index instanceof Function)return function _Distance_via_index(t,h){var y=t.index(),w=h.index();return t.base instanceof Function?y-w:w-y}(t,h);for(var y=0;!t.equals(h);t=t.next())++y;return y},h.advance=advance,h.prev=function prev(t,h){return void 0===h&&(h=1),1===h?t.prev():advance(t,-h)},h.next=function next(t,h){return void 0===h&&(h=1),1===h?t.next():advance(t,h)}},89052:function(t,h,y){Object.defineProperty(h,"__esModule",{value:!0}),h.Entry=void 0;var w=y(71868),A=y(42586),T=function(){function Entry(t,h){this.first=t,this.second=h}return Entry.prototype.equals=function(t){return A.equal_to(this.first,t.first)},Entry.prototype.less=function(t){return A.less(this.first,t.first)},Entry.prototype.hashCode=function(){return w.hash(this.first)},Entry}();h.Entry=T},38490:function(t,h,y){Object.defineProperty(h,"__esModule",{value:!0}),h.make_pair=h.Pair=void 0;var w=y(71868),A=y(42586),T=function(){function Pair(t,h){this.first=t,this.second=h}return Pair.prototype.equals=function(t){return A.equal_to(this.first,t.first)&&A.equal_to(this.second,t.second)},Pair.prototype.less=function(t){return!1===A.equal_to(this.first,t.first)?A.less(this.first,t.first):A.less(this.second,t.second)},Pair.prototype.hashCode=function(){return w.hash(this.first,this.second)},Pair}();h.Pair=T,h.make_pair=function make_pair(t,h){return new T(t,h)}},24469:function(t,h,y){Object.defineProperty(h,"__esModule",{value:!0}),h.is_node=void 0;var w=null;h.is_node=function is_node(){return null===w&&(w="object"==typeof y.g&&"object"==typeof y.g.process&&"object"==typeof y.g.process.versions&&void 0!==y.g.process.versions.node),w}},73870:function(t,h,y){var w,A=this&&this.__extends||(w=function(t,h){return w=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,h){t.__proto__=h}||function(t,h){for(var y in h)h.hasOwnProperty(y)&&(t[y]=h[y])},w(t,h)},function(t,h){function __(){this.constructor=t}w(t,h),t.prototype=null===h?Object.create(h):(__.prototype=h.prototype,new __)}),T=this&&this.__assign||function(){return T=Object.assign||function(t){for(var h,y=1,w=arguments.length;y<w;y++)for(var A in h=arguments[y])Object.prototype.hasOwnProperty.call(h,A)&&(t[A]=h[A]);return t},T.apply(this,arguments)};Object.defineProperty(h,"__esModule",{value:!0});var E=y(96524),j=y(97859),B=y(62903),N=y(35838),V=y(6027),W=y(27334),H=function(t){function WebSocket(h,y){var w=t.call(this)||this;return w.on_={},w.state_=WebSocket.CONNECTING,w.client_=new E.client,w.client_.on("connect",w._Handle_connect.bind(w)),w.client_.on("connectFailed",w._Handle_error.bind(w)),"string"==typeof y&&(y=[y]),w.client_.connect(h,y),w}return A(WebSocket,t),WebSocket.prototype.close=function(t,h){this.state_=WebSocket.CLOSING,void 0===t?this.connection_.sendCloseFrame():this.connection_.sendCloseFrame(t,h,!0)},WebSocket.prototype.send=function(t){if("string"==typeof t.valueOf())this.connection_.sendUTF(t);else{var h=void 0;h=t instanceof Buffer?t:t instanceof Blob?new Buffer(t,"blob"):t.buffer?new Buffer(t.buffer):new Buffer(t),this.connection_.sendBytes(h)}},Object.defineProperty(WebSocket.prototype,"url",{get:function(){return this.client_.url.href},enumerable:!0,configurable:!0}),Object.defineProperty(WebSocket.prototype,"protocol",{get:function(){return this.client_.protocols?this.client_.protocols[0]:""},enumerable:!0,configurable:!0}),Object.defineProperty(WebSocket.prototype,"extensions",{get:function(){return this.connection_&&this.connection_.extensions?this.connection_.extensions[0].name:""},enumerable:!0,configurable:!0}),Object.defineProperty(WebSocket.prototype,"readyState",{get:function(){return this.state_},enumerable:!0,configurable:!0}),Object.defineProperty(WebSocket.prototype,"bufferedAmount",{get:function(){return this.connection_.bytesWaitingToFlush},enumerable:!0,configurable:!0}),Object.defineProperty(WebSocket.prototype,"binaryType",{get:function(){return"arraybuffer"},enumerable:!0,configurable:!0}),Object.defineProperty(WebSocket.prototype,"onopen",{get:function(){return this.on_.open},set:function(t){this._Set_on("open",t)},enumerable:!0,configurable:!0}),Object.defineProperty(WebSocket.prototype,"onclose",{get:function(){return this.on_.close},set:function(t){this._Set_on("close",t)},enumerable:!0,configurable:!0}),Object.defineProperty(WebSocket.prototype,"onmessage",{get:function(){return this.on_.message},set:function(t){this._Set_on("message",t)},enumerable:!0,configurable:!0}),Object.defineProperty(WebSocket.prototype,"onerror",{get:function(){return this.on_.error},set:function(t){this._Set_on("error",t)},enumerable:!0,configurable:!0}),WebSocket.prototype._Set_on=function(t,h){this.on_[t]&&this.removeEventListener(t,this.on_[t]),this.addEventListener(t,h),this.on_[t]=h},WebSocket.prototype._Handle_connect=function(t){this.connection_=t,this.state_=WebSocket.OPEN,this.connection_.on("message",this._Handle_message.bind(this)),this.connection_.on("error",this._Handle_error.bind(this)),this.connection_.on("close",this._Handle_close.bind(this));var h=new B.Event("open",G);this.dispatchEvent(h)},WebSocket.prototype._Handle_close=function(t,h){var y=new N.CloseEvent("close",T({},G,{code:t,reason:h}));this.state_=WebSocket.CLOSED,this.dispatchEvent(y)},WebSocket.prototype._Handle_message=function(t){var h=new V.MessageEvent("message",T({},G,{data:t.binaryData?t.binaryData:t.utf8Data}));this.dispatchEvent(h)},WebSocket.prototype._Handle_error=function(t){var h=new W.ErrorEvent("error",T({},G,{error:t,message:t.message}));this.state_===WebSocket.CONNECTING&&(this.state_=WebSocket.CLOSED),this.dispatchEvent(h)},WebSocket}(j.EventTarget);h.WebSocket=H,function(t){t.CONNECTING=0,t.OPEN=1,t.CLOSING=2,t.CLOSED=3}(H=h.WebSocket||(h.WebSocket={})),h.WebSocket=H;var G={bubbles:!1,cancelable:!1}},35838:function(t,h,y){var w,A=this&&this.__extends||(w=function(t,h){return w=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,h){t.__proto__=h}||function(t,h){for(var y in h)h.hasOwnProperty(y)&&(t[y]=h[y])},w(t,h)},function(t,h){function __(){this.constructor=t}w(t,h),t.prototype=null===h?Object.create(h):(__.prototype=h.prototype,new __)});Object.defineProperty(h,"__esModule",{value:!0});var T=function(t){function CloseEvent(h,y){return t.call(this,h,y)||this}return A(CloseEvent,t),CloseEvent}(y(62903).Event);h.CloseEvent=T},27334:function(t,h,y){var w,A=this&&this.__extends||(w=function(t,h){return w=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,h){t.__proto__=h}||function(t,h){for(var y in h)h.hasOwnProperty(y)&&(t[y]=h[y])},w(t,h)},function(t,h){function __(){this.constructor=t}w(t,h),t.prototype=null===h?Object.create(h):(__.prototype=h.prototype,new __)});Object.defineProperty(h,"__esModule",{value:!0});var T=function(t){function ErrorEvent(h,y){return t.call(this,h,y)||this}return A(ErrorEvent,t),ErrorEvent}(y(62903).Event);h.ErrorEvent=T},62903:function(t,h){function _extends(){return _extends=Object.assign||function(t){for(var h=1;h<arguments.length;h++){var y=arguments[h];for(var w in y)Object.prototype.hasOwnProperty.call(y,w)&&(t[w]=y[w])}return t},_extends.apply(this,arguments)}Object.defineProperty(h,"__esModule",{value:!0});var y=function y(t,h){this.type=t,h&&_extends(this,h)};h.Event=y},97859:function(t,h,y){var w=this&&this.__values||function(t){var h="function"==typeof Symbol&&t[Symbol.iterator],y=0;return h?h.call(t):{next:function(){return t&&y>=t.length&&(t=void 0),{value:t&&t[y++],done:!t}}}};Object.defineProperty(h,"__esModule",{value:!0});var A=y(11104),T=y(41562),E=function(){function EventTarget(){this.listeners_=new T.HashMap,this.created_at_=new Date}return EventTarget.prototype.dispatchEvent=function(t){var h,y,A=this.listeners_.find(t.type);if(!A.equals(this.listeners_.end())){t.target=this,t.timeStamp=(new Date).getTime()-this.created_at_.getTime();try{for(var T=w(A.second),E=T.next();!E.done;E=T.next()){(0,E.value)(t)}}catch(t){h={error:t}}finally{try{E&&!E.done&&(y=T.return)&&y.call(T)}finally{if(h)throw h.error}}}},EventTarget.prototype.addEventListener=function(t,h){var y=this.listeners_.find(t);y.equals(this.listeners_.end())&&(y=this.listeners_.emplace(t,new A.HashSet).first),y.second.insert(h)},EventTarget.prototype.removeEventListener=function(t,h){var y=this.listeners_.find(t);y.equals(this.listeners_.end())||(y.second.erase(h),y.second.empty()&&this.listeners_.erase(y))},EventTarget}();h.EventTarget=E},6027:function(t,h,y){var w,A=this&&this.__extends||(w=function(t,h){return w=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,h){t.__proto__=h}||function(t,h){for(var y in h)h.hasOwnProperty(y)&&(t[y]=h[y])},w(t,h)},function(t,h){function __(){this.constructor=t}w(t,h),t.prototype=null===h?Object.create(h):(__.prototype=h.prototype,new __)});Object.defineProperty(h,"__esModule",{value:!0});var T=function(t){function MessageEvent(h,y){return t.call(this,h,y)||this}return A(MessageEvent,t),MessageEvent}(y(62903).Event);h.MessageEvent=T},90869:function(t,h,y){y(24469).is_node()&&(y.g.WebSocket=y(73870).WebSocket)},96524:function(t,h,y){var w;try{w=y(70551)}catch(t){}finally{if(w||"undefined"==typeof window||(w=window),!w)throw new Error("Could not determine global this")}var A=w.WebSocket||w.MozWebSocket,T=y(78444);function W3CWebSocket(t,h){return h?new A(t,h):new A(t)}A&&["CONNECTING","OPEN","CLOSING","CLOSED"].forEach((function(t){Object.defineProperty(W3CWebSocket,t,{get:function(){return A[t]}})})),t.exports={w3cwebsocket:A?W3CWebSocket:null,version:T}},78444:function(t,h,y){t.exports=y(19794).version},57341:function(t,h,y){y.r(h),y.d(h,{DOMException:function(){return N},Headers:function(){return Headers},Request:function(){return Request},Response:function(){return Response},fetch:function(){return fetch}});var w="undefined"!=typeof self?self:void 0,A={searchParams:"URLSearchParams"in w,iterable:"Symbol"in w&&"iterator"in Symbol,blob:"FileReader"in w&&"Blob"in w&&function(){try{return new Blob,!0}catch(t){return!1}}(),formData:"FormData"in w,arrayBuffer:"ArrayBuffer"in w};if(A.arrayBuffer)var T=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],E=ArrayBuffer.isView||function(t){return t&&T.indexOf(Object.prototype.toString.call(t))>-1};function normalizeName(t){if("string"!=typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(t)||""===t)throw new TypeError("Invalid character in header field name");return t.toLowerCase()}function normalizeValue(t){return"string"!=typeof t&&(t=String(t)),t}function iteratorFor(t){var h={next:function(){var h=t.shift();return{done:void 0===h,value:h}}};return A.iterable&&(h[Symbol.iterator]=function(){return h}),h}function Headers(t){this.map={},t instanceof Headers?t.forEach((function(t,h){this.append(h,t)}),this):Array.isArray(t)?t.forEach((function(t){this.append(t[0],t[1])}),this):t&&Object.getOwnPropertyNames(t).forEach((function(h){this.append(h,t[h])}),this)}function consumed(t){if(t.bodyUsed)return Promise.reject(new TypeError("Already read"));t.bodyUsed=!0}function fileReaderReady(t){return new Promise((function(h,y){t.onload=function(){h(t.result)},t.onerror=function(){y(t.error)}}))}function readBlobAsArrayBuffer(t){var h=new FileReader,y=fileReaderReady(h);return h.readAsArrayBuffer(t),y}function bufferClone(t){if(t.slice)return t.slice(0);var h=new Uint8Array(t.byteLength);return h.set(new Uint8Array(t)),h.buffer}function Body(){return this.bodyUsed=!1,this._initBody=function(t){this.bodyUsed=this.bodyUsed,this._bodyInit=t,t?"string"==typeof t?this._bodyText=t:A.blob&&Blob.prototype.isPrototypeOf(t)?this._bodyBlob=t:A.formData&&FormData.prototype.isPrototypeOf(t)?this._bodyFormData=t:A.searchParams&&URLSearchParams.prototype.isPrototypeOf(t)?this._bodyText=t.toString():A.arrayBuffer&&A.blob&&function isDataView(t){return t&&DataView.prototype.isPrototypeOf(t)}(t)?(this._bodyArrayBuffer=bufferClone(t.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):A.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(t)||E(t))?this._bodyArrayBuffer=bufferClone(t):this._bodyText=t=Object.prototype.toString.call(t):this._bodyText="",this.headers.get("content-type")||("string"==typeof t?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):A.searchParams&&URLSearchParams.prototype.isPrototypeOf(t)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},A.blob&&(this.blob=function(){var t=consumed(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?consumed(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(readBlobAsArrayBuffer)}),this.text=function(){var t=consumed(this);if(t)return t;if(this._bodyBlob)return function readBlobAsText(t){var h=new FileReader,y=fileReaderReady(h);return h.readAsText(t),y}(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(function readArrayBufferAsText(t){for(var h=new Uint8Array(t),y=new Array(h.length),w=0;w<h.length;w++)y[w]=String.fromCharCode(h[w]);return y.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},A.formData&&(this.formData=function(){return this.text().then(decode)}),this.json=function(){return this.text().then(JSON.parse)},this}Headers.prototype.append=function(t,h){t=normalizeName(t),h=normalizeValue(h);var y=this.map[t];this.map[t]=y?y+", "+h:h},Headers.prototype.delete=function(t){delete this.map[normalizeName(t)]},Headers.prototype.get=function(t){return t=normalizeName(t),this.has(t)?this.map[t]:null},Headers.prototype.has=function(t){return this.map.hasOwnProperty(normalizeName(t))},Headers.prototype.set=function(t,h){this.map[normalizeName(t)]=normalizeValue(h)},Headers.prototype.forEach=function(t,h){for(var y in this.map)this.map.hasOwnProperty(y)&&t.call(h,this.map[y],y,this)},Headers.prototype.keys=function(){var t=[];return this.forEach((function(h,y){t.push(y)})),iteratorFor(t)},Headers.prototype.values=function(){var t=[];return this.forEach((function(h){t.push(h)})),iteratorFor(t)},Headers.prototype.entries=function(){var t=[];return this.forEach((function(h,y){t.push([y,h])})),iteratorFor(t)},A.iterable&&(Headers.prototype[Symbol.iterator]=Headers.prototype.entries);var j=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function Request(t,h){var y=(h=h||{}).body;if(t instanceof Request){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,h.headers||(this.headers=new Headers(t.headers)),this.method=t.method,this.mode=t.mode,this.signal=t.signal,y||null==t._bodyInit||(y=t._bodyInit,t.bodyUsed=!0)}else this.url=String(t);if(this.credentials=h.credentials||this.credentials||"same-origin",!h.headers&&this.headers||(this.headers=new Headers(h.headers)),this.method=function normalizeMethod(t){var h=t.toUpperCase();return j.indexOf(h)>-1?h:t}(h.method||this.method||"GET"),this.mode=h.mode||this.mode||null,this.signal=h.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&y)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(y),!("GET"!==this.method&&"HEAD"!==this.method||"no-store"!==h.cache&&"no-cache"!==h.cache)){var w=/([?&])_=[^&]*/;if(w.test(this.url))this.url=this.url.replace(w,"$1_="+(new Date).getTime());else{this.url+=(/\?/.test(this.url)?"&":"?")+"_="+(new Date).getTime()}}}function decode(t){var h=new FormData;return t.trim().split("&").forEach((function(t){if(t){var y=t.split("="),w=y.shift().replace(/\+/g," "),A=y.join("=").replace(/\+/g," ");h.append(decodeURIComponent(w),decodeURIComponent(A))}})),h}function Response(t,h){h||(h={}),this.type="default",this.status=void 0===h.status?200:h.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in h?h.statusText:"",this.headers=new Headers(h.headers),this.url=h.url||"",this._initBody(t)}Request.prototype.clone=function(){return new Request(this,{body:this._bodyInit})},Body.call(Request.prototype),Body.call(Response.prototype),Response.prototype.clone=function(){return new Response(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new Headers(this.headers),url:this.url})},Response.error=function(){var t=new Response(null,{status:0,statusText:""});return t.type="error",t};var B=[301,302,303,307,308];Response.redirect=function(t,h){if(-1===B.indexOf(h))throw new RangeError("Invalid status code");return new Response(null,{status:h,headers:{location:t}})};var N=w.DOMException;function fetch(t,h){return new Promise((function(y,T){var E=new Request(t,h);if(E.signal&&E.signal.aborted)return T(new N("Aborted","AbortError"));var j=new XMLHttpRequest;function abortXhr(){j.abort()}j.onload=function(){var t,h,w={status:j.status,statusText:j.statusText,headers:(t=j.getAllResponseHeaders()||"",h=new Headers,t.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach((function(t){var y=t.split(":"),w=y.shift().trim();if(w){var A=y.join(":").trim();h.append(w,A)}})),h)};w.url="responseURL"in j?j.responseURL:w.headers.get("X-Request-URL");var A="response"in j?j.response:j.responseText;setTimeout((function(){y(new Response(A,w))}),0)},j.onerror=function(){setTimeout((function(){T(new TypeError("Network request failed"))}),0)},j.ontimeout=function(){setTimeout((function(){T(new TypeError("Network request failed"))}),0)},j.onabort=function(){setTimeout((function(){T(new N("Aborted","AbortError"))}),0)},j.open(E.method,function fixUrl(t){try{return""===t&&w.location.href?w.location.href:t}catch(h){return t}}(E.url),!0),"include"===E.credentials?j.withCredentials=!0:"omit"===E.credentials&&(j.withCredentials=!1),"responseType"in j&&(A.blob?j.responseType="blob":A.arrayBuffer&&E.headers.get("Content-Type")&&-1!==E.headers.get("Content-Type").indexOf("application/octet-stream")&&(j.responseType="arraybuffer")),E.headers.forEach((function(t,h){j.setRequestHeader(h,t)})),E.signal&&(E.signal.addEventListener("abort",abortXhr),j.onreadystatechange=function(){4===j.readyState&&E.signal.removeEventListener("abort",abortXhr)}),j.send(void 0===E._bodyInit?null:E._bodyInit)}))}"function"!=typeof N&&((N=function(t,h){this.message=t,this.name=h;var y=Error(t);this.stack=y.stack}).prototype=Object.create(Error.prototype),N.prototype.constructor=N),fetch.polyfill=!0,w.fetch||(w.fetch=fetch,w.Headers=Headers,w.Request=Request,w.Response=Response)},63978:function(t,h,y){t.exports=function Worker_fn(){return new Worker(y.p+"workers/5baf/pdf.worker.js")}},78274:function(t){var h=function toBlob(t){for(var h=t.split(",")[0].split(":")[1].split(";")[0],y=atob(t.split(",")[1]),w=y.length,A=new window.ArrayBuffer(w),T=new window.Uint8Array(A),E=0;E<w;E++)T[E]=y.charCodeAt(E);return new Blob([T],{type:h})},y=void 0!==window.HTMLCanvasElement&&void 0!==window.atob&&void 0!==window.Blob&&void 0!==window.ArrayBuffer&&void 0!==window.Uint8Array;t.exports=h,t.exports.init=function init(){if(t.exports.supported){var y=window.HTMLCanvasElement.prototype;!y.toBlob&&y.toDataURL&&(y.toBlob=function(t,y,w){t(h(this.toDataURL(y,w)))})}},t.exports.supported=y},72346:function(t){t.exports='<div id="@@componentId@@" class="form-group--datetime form-group @@formGroupCss@@"><label id="@@labelId@@" class="form-control--label" for="@@inputId@@">@@label@@</label><div class="input-wrapper"><input id="@@inputId@@" class="form-control" name="@@inputName@@" type="text" placeholder="@@placeholder@@"><div id="@@errorContainerId@@" class="form-group--error-container"></div></div></div>'},15520:function(t){t.exports='<div id="@@componentId@@" class="form-group--input form-group @@formGroupCss@@"><label id="@@labelId@@" class="form-control--label" for="@@inputId@@">@@label@@</label><div class="input-wrapper"><input id="@@inputId@@" class="form-control" name="@@inputName@@" type="@@inputType@@" placeholder="@@placeholder@@" autocomplete="off"> <span id="@@prefixBtnId@@" class="form-control--icon-prefix"></span> <span id="@@resetBtnId@@" class="form-control--icon-suffix display-none">@@iconReset@@</span></div><div id="@@errorContainerId@@" class="form-group--error-container"></div></div>'},91139:function(t){t.exports='<div id="@@componentId@@" class="form-group--select form-group @@formGroupCss@@"><label id="@@labelId@@" class="form-control--label" for="@@selectId@@">@@label@@</label><div class="app-select"><select id="@@selectId@@" class="form-control">@@options@@</select></div></div>'},34231:function(t){t.exports='<div id="@@componentId@@" class="enter-password-dialog"><div class="enter-password-dialog--header"><div id="@@btnCloseId@@" class="enter-password-dialog--btn-close">×</div><span class="enter-password-dialog--title">@@title@@</span></div><div class="enter-password-dialog--body"><div id="@@pwContainerId@@"></div></div><div class="enter-password-dialog--footer"><a id="@@btnOkId@@" class="enter-password-dialog--btn-unlock">@@btnLabelUnlock@@</a></div></div>'},45950:function(t){t.exports='<div id="@@componentId@@" class="error-dialog"><div class="error-dialog--header"><div class="error-dialog--candy">@@candyIcon@@</div><div id="@@btnCloseId@@" class="error-dialog--close">×</div><div class="error-dialog--title">@@title@@</div><div class="error-dialog--message">@@message@@</div></div><div class="error-dialog--body"><a id="@@btnOkId@@" class="error-dialog--btn-ok-close">@@btnOkLabel@@</a></div><div class="error-dialog--footer"><div class="error-dialog--or-try only-windows"><span class="">@@tryLabel@@</span></div><div class="windows-ads only-windows">@@tryCandyDesktopLabel@@</div></div></div>'},41320:function(t){t.exports='<div id="@@componentId@@" class="error-dialog error-dialog_free"><div class="error-dialog--header"><div id="@@btnCloseId@@" class="error-dialog--close">×</div><div class="error-dialog--icon">@@freeLimitIcon@@</div><div class="error-dialog--title">@@title@@</div><div class="error-dialog--message">@@message@@</div></div><div class="error-dialog--body"><a id="@@btnSignupId@@" href="@@btnSignupUrl@@" class="error-dialog--btn-ok-close">@@btnSignupLabel@@</a></div></div>'},35960:function(t){t.exports='<div id="@@componentId@@" class="dialog-settings"><div class="dialog-settings--header"><div class="dialog-settings--title">@@title@@</div><div id="@@btnCloseId@@" class="dialog-settings--btn-close">×</div></div><div class="dialog-settings--body"><div id="@@formContainerId@@" class="dialog-settings--form-list"></div></div><div class="dialog-settings--footer"><a id="@@btnOkId@@" class="dialog-settings--btn-ok">@@btnOkLabel@@</a></div></div>'},64508:function(t){t.exports='<div id="@@componentId@@" class="unlock-files-dialog"><div class="unlock-files-dialog--header"><div id="@@btnCloseId@@" class="unlock-files-dialog--btn-close">×</div><div class="unlock-files-dialog--title">@@title@@</div></div><div class="unlock-files-dialog--body"><div id="@@listId@@" class="unlock-files-dialog--list"></div></div><div class="unlock-files-dialog--footer"><a id="@@btnOkId@@" class="unlock-files-dialog--btn-unlock">@@btnLabelUnlock@@</a></div></div>'},62452:function(t){t.exports='<div id="@@componentId@@" class="unlock-file--item"><div class="unlock-file--view"><div class="unlock-file--icon">@@pdfIcon@@</div></div><div class="unlock-file--form"><div id="@@passwordContainerId@@"></div><span id="@@deleteId@@" class="display-none unlock-file--item-btn-delete"><svg width="25" height="25"><use href="@@closeIconUrl@@" xlink:href="@@closeIconUrl@@"></use></svg></span></div></div><hr class="unlock-file--separator">'},6343:function(t){t.exports='<div id="@@componentId@@" class="zoom-dialog"><span id="@@btnCloseId@@" class="zoom-dialog--btn-close dialog--btn-close">×</span><div id="@@workCanvasContainerId@@" class="zoom-dialog--canvas-container"><div class="zoom-dialog--canvas-wrapper"><canvas id="@@workCanvasId@@" class="zoom-dialog--canvas"></canvas></div></div></div>'},62461:function(t){t.exports='<div id="@@componentId@@" class="drop-zone app-state--inner"><div id="@@dropZoneContentId@@" class="drop-zone--inner"><div class="drop-zone--content"><div class="drop-zone--buttons"><a id="@@btnAddLocalId@@" class="btn btn-add-local addbutton">+ @@btnAddLocalLabel@@</a><div class="drop-zone--import-buttons"><a id="@@btnAddGdriveId@@" class="btn btn-picker" title="From Google Drive"><span class="btn-icon">@@gDriveIcon@@</span> <span class="btn-text">@@gDriveLabel@@</span> </a><a id="@@btnAddDropBoxId@@" class="btn btn-picker" title="From Dropbox"><span class="btn-icon">@@dropBoxIcon@@</span> <span class="btn-text">@@dropBoxLabel@@</span></a></div></div><div class="drop-zone--text">@@dragAndDropText@@</div></div></div></div>'},25143:function(t){t.exports='<div id="@@componentId@@" class="drop-zone-select app-state--inner"><div id="@@dropZoneContentId@@" class="drop-zone-select--inner"><div class="drop-zone-select--content"><div class="drop-zone-select--select"><div class="drop-zone-select--buttons"><a id="@@btnAddLocalId@@" class="btn btn-add-local addbutton"><svg width="32" height="32" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg"><rect x="14" y="4" width="4" height="24" rx="2" fill="white"></rect><rect x="28" y="14" width="4" height="24" rx="2" transform="rotate(90 28 14)" fill="white"></rect></svg> <span>@@btnAddLocalLabel@@</span> </a><a id="@@btnSelectId@@" class="btn btn-select @@useSelect@@"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M4 8L12 16L20 8" stroke="white" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"></path></svg></a></div><div id="@@dropZoneImportButtonsId@@" class="drop-zone-select--import-buttons @@useSelect@@"><a id="@@btnAddDropBoxId@@" class="btn btn-picker" title="From Dropbox"><span class="btn-icon">@@dropBoxIcon@@</span> <span class="btn-text">@@dropBoxLabel@@</span> </a><a id="@@btnAddGdriveId@@" class="btn btn-picker" title="From Google Drive"><span class="btn-icon">@@gDriveIcon@@</span> <span class="btn-text">@@gDriveLabel@@</span></a></div></div><div class="drop-zone-select--text @@displayNone@@">@@dragAndDropText@@</div></div></div></div>'},66270:function(t){t.exports='<span class="error-view--error-link-container"><span class="error-view--icon">@@iconRotate@@</span> <a id="@@btnStartOverId@@" href="javascript:void(0)" class="error-view--link error-start-over">@@labelStartOver@@</a> </span><span class="error-view--error-link-container"><span class="error-view--icon">@@iconBug@@</span> <a href="@@errUrl@@" class="error-view--link error-report-a-bug">@@labelReportBug@@</a></span>'},62074:function(t){t.exports='<div id="@@componentId@@" class="error-view--container"><div class="error-view--error-content"><div class="error-view--error-icon-container">@@iconAttention@@</div><div class="error-view--error-text-container"><p>@@message@@</p></div><div class="error-view--error-actions">@@actions@@</div></div></div>'},50970:function(t){t.exports='<span class="error-view--error-link-container"><span class="error-view--icon">@@iconRotate@@</span> <a id="@@btnStartOverId@@" href="javascript:void(0)" class="error-view--link error-start-over">@@labelStartOver@@</a></span>'},30597:function(t){t.exports='<div id="@@componentId@@" class="global-drop-zone"><div class="global-dropzone-box"><div class="global-dropzone-label">@@dropzoneLabel@@</div></div></div>'},91597:function(t){t.exports='<div class="pending-component app-state--inner" id="@@componentId@@"><div class="lds-facebook"><div class="lds-facebook--item"></div><div class="lds-facebook--item"></div><div class="lds-facebook--item"></div></div></div>'},23005:function(t){t.exports='<div id="@@componentId@@" class="progress-view app-state--inner"><div class="progress-content"><div class="progress-percent"><span id="@@percentValueId@@">0</span>%</div><div class="progress-uploaded">@@uploadedMessage@@</div><div class="progress-bar"><div class="progress-fill" id="@@percentFillId@@"></div></div></div><div class="windows-ads only-windows">@@windowsIcon@@ @@windowsMessage@@</div></div>'},85104:function(t){t.exports='<div id="@@componentId@@" class="app-queue app-state--inner"><div class="queue-label" id="@@timerId@@">@@queueLabel@@</div><div id="@@canvasContainerId@@" class="queue-icons"></div><div class="windows-ads only-windows">@@windowsIcon@@ @@windowsMessage@@</div></div>'},53037:function(t){t.exports='<div id="@@componentId@@" class="job-animation app-state--inner"><div class="job-animation--label">@@jobLabel@@ <span id="@@progressPercentId@@"></span></div><div id="@@canvasContainerId@@" class="job-animation--container job-animation--canvas" style="display: none"></div><div id="@@iconsContainerId@@" class="job-animation--container job-animation--icons" style="display: none"><div class="job-animation-icon">@@convertFromIcon@@</div><div class="job-animation-arrows">@@arrowsIcon@@</div><div class="job-animation-icon">@@convertToIcon@@</div></div><div class="windows-ads only-windows">@@windowsIcon@@ @@windowsMessage@@</div></div>'},64797:function(t){t.exports='<div id="@@componentId@@" class="app-footer"><div id="@@popoverContainerId@@" class="display-none"></div><div id="@@formContainerId@@" class="actions-container display-none"><a id="@@btnToDocId@@" class="btn btn-converter btn--blue" href="javascript:void(0)">@@btnToDoc@@</a> <a id="@@btnToDocXId@@" class="btn btn-converter btn--blue" href="javascript:void(0)">@@btnToDocX@@</a> <a id="@@btnToJpgId@@" class="btn btn-converter btn--blue" href="javascript:void(0)">@@btnToJpg@@</a></div><a id="@@btnNextId@@" class="btn btn-converter btn--blue display-none"></a></div>'},39378:function(t){t.exports='<div id="@@componentId@@" class="app-footer"><div id="@@popoverContainerId@@" class="display-none"></div><div id="@@formContainerId@@" class="display-none"></div><a id="@@btnRunJobId@@" class="app-footer--btn-run-job"></a></div>'},58544:function(t){t.exports='<div id="@@textContainerId@@" class="form-section"></div><div class="form-section"><div class="form-group file-group"><a id="@@btnAddFileId@@" class="btn--add-file form-control" href="javascript:void(0);">@@labelTryOrAdd@@</a> <span id="@@fileInfoContainerId@@" class="form-control file-info--container display-none"><a id="@@btnRemoveId@@" class="file-info--remove-file-btn" href="javascript:void(0);">@@iconClose@@ </a><b id="@@fileNameId@@" class="file-info--name"></b></span></div><span class="aim-icon-small">@@iconAimSmall@@</span></div><div id="@@selectContainerId@@" class="form-section"></div><input class="display-none" id="@@inputFileId@@" type="file" accept="@@accept@@" multiple="false">'},27671:function(t){t.exports='<div class="form-section"><div id="@@typeSelectorId@@" class="type-selector"><label class="type-selector--item"><input type="radio" name="method" value="text" checked="checked"> <span class="type-selector--label"><svg width="24" height="24"><use href="@@keyboardIconUrl@@" xlink:href="@@keyboardIconUrl@@"></use></svg> <span>@@labelType@@</span></span></label> <label class="type-selector--item"><input type="radio" name="method" value="image"> <span class="type-selector--label"><svg width="24" height="24"><use href="@@imageIconUrl@@" xlink:href="@@imageIconUrl@@"></use></svg> <span>@@labelImage@@</span></span></label></div></div><div id="@@selectContainerId@@" class="form-section"></div><div id="@@textContainerId@@" class="form-section"></div><div class="form-section"><a id="@@btnAddFileId@@" class="btn--add-file form-control display-none" href="javascript:void(0);"><svg width="24" height="24"><use href="@@plusIconUrl@@" xlink:href="@@plusIconUrl@@"></use></svg> <span>@@labelUploadImage@@</span></a></div><div class="form-section"><div id="@@fileInfoContainerId@@" class="form-control file-info--container display-none"><b id="@@fileNameId@@" class="file-info--name"></b> <a id="@@btnRemoveId@@" class="file-info--remove-file-btn" href="javascript:void(0);">@@iconClose@@</a></div></div><input class="display-none" id="@@inputFileId@@" type="file" accept="@@accept@@" multiple="false">'},61597:function(t){t.exports='<div id="@@componentId@@" class="rotate-pages-form"><span id="@@btnRotateLeftId@@" class="btn-rotate btn-rotate-left tooltip-element">@@btnRotateLeftIcon@@</span> <span id="@@btnRotateRightId@@" class="btn-rotate btn-rotate-right tooltip-element">@@btnRotateRightIcon@@</span> <a id="@@btnResetId@@" class="btn-reset display-none" href="javascript:void 0">@@btnResetLabel@@</a></div>'},35700:function(t){t.exports='<div id="@@componentId@@" class="app-header app-header--simple"><div class="app-header--start-over">@@btnStartOverIcon@@ <a id="@@btnStartOverId@@" class="app-header--btn-start-over" href="javascript:void(0)" draggable="false">@@btnStartOverLabel@@</a></div></div>'},48414:function(t){t.exports='<div class="app-header--order"><span class="app-header--sort-label">@@sortLabel@@</span> <a id="@@btnAskId@@" href="javascript:void(0)" class="app-header--sort-direction" draggable="false">@@ascLabel@@</a> <a id="@@btnDescId@@" href="javascript:void(0)" class="app-header--sort-direction" draggable="false">@@descLabel@@</a></div>'},89292:function(t){t.exports='<div id="@@selectContainerId@@" class="app-header--select-pages display-none">@@iconOk@@ <a id="@@btnToggleId@@" href="javascript:void(0)" class="app-header--select-toggle" draggable="false"></a></div>'},72579:function(t){t.exports='<div id="@@componentId@@" class="page-item"><div class="page-item--thumb"><div class="page-item--content"><div id="@@imageContainerId@@" class="page-item--image-container"><div style="margin: 0; padding: 0; outline: none; border: none;"><img id="@@imageId@@" class="page-item--image" width="@@imageWidth@@" height="@@imageHeight@@" alt=""></div><div class="page-item--lock-box">@@lockBoxIcon@@</div></div></div></div><div id="@@actionsId@@" class="page-item--actions"><span id="@@btnUnlockId@@" class="page-item--action page-item--btn-unlock">@@btnUnlockIcon@@</span></div></div>'},23063:function(t){t.exports='<div id="@@componentId@@" class="page-item"><div class="page-item--thumb"><div class="page-item--content"><div id="@@imageContainerId@@" class="page-item--image-container"><img id="@@imageId@@" class="page-item--image" width="@@imageWidth@@" height="@@imageHeight@@" alt=""><div id="@@pageBoxId@@" class="page-item--pages-box display-none"><div class="page-item--pages-counter"><div id="@@totalPagesId@@" class="page-item--total-pages-count">...</div><div class="page-item--total-pages-label">@@totalPagesLabel@@</div></div></div><div class="page-item--lock-box">@@lockBoxIcon@@</div><div id="@@iconBoxId@@" class="page-item--icon-box"></div></div></div><div id="@@tooltipId@@"><div id="@@nameId@@" class="page-item--name" title="@@name@@">@@name@@</div></div></div><div id="@@actionsLeftId@@" class="page-item--actions page-item--actions-left"><span id="@@btnUnlockId@@" class="page-item--action page-item--btn-unlock">@@btnUnlockIcon@@</span></div><div id="@@actionsRightId@@" class="page-item--actions page-item--actions-right"><span id="@@pageNumberId@@" class="page-item--action page-item--page-number display-none">0</span> <span id="@@deleteId@@" class="page-item--action page-item--btn-delete display-none">@@btnDeleteIcon@@</span> <span id="@@zoomId@@" class="page-item--action page-item--btn-zoom display-none">@@btnZoomIcon@@</span> <span id="@@rotateRightId@@" class="page-item--action page-item--btn-rotate-right display-none">@@btnRotateRightIcon@@</span> <span id="@@rotateLeftId@@" class="page-item--action page-item--btn-rotate-left display-none">@@btnRotateLeftIcon@@</span></div></div>'},72088:function(t){t.exports='<div id="@@componentId@@" class="app-popover"><a id="@@btnAddId@@" href="javascript:void(0)" class="app-popover--btn-add"><span class="app-popover--btn-add-text">+</span></a><div class="app-popover--box"><div class="app-popover--box-content"><div id="@@btnAddGDriveId@@" class="app-popover--item @@useExternalLinks@@">@@btnAddGDriveIcon@@ <span class="app-popover--item-label">@@btnAddGDriveLabel@@</span></div><div id="@@btnAddDropBoxId@@" class="app-popover--item @@useExternalLinks@@">@@btnAddDropBoxIcon@@ <span class="app-popover--item-label">@@btnAddDropBoxLabel@@</span></div><div id="@@btnAddLocalId@@" class="app-popover--item">@@btnAddLocalIcon@@ <span class="app-popover--item-label">@@btnAddLocalLabel@@</span></div></div><div class="app-popover--box-spacer"></div></div><span id="@@popoverLabelId@@" class="app-popover--label">@@popoverLabel@@</span></div>'},14179:function(t){t.exports='<div id="@@componentId@@" class="app-settings"><a href="javascript:void(0)" class="app-settings--btn">@@settingsIcon@@</a></div>'},3247:function(t){t.exports='<div id="@@componentId@@" class="file-viewer file-viewer--container app-state--inner"><div id="@@headerContainerId@@" class="file-viewer--header"></div><div id="@@viewerContainerId@@" class="file-viewer--content"></div><div id="@@footerContainerId@@" class="file-viewer--footer"></div><canvas width="@@canvasWidth@@" height="@@canvasHeight@@" id="@@workCanvasId@@" class="display-none"></canvas></div>'},84368:function(t){t.exports='<div id="@@componentId@@" class="per-page-viewer per-page-viewer--container app-state--inner display-none"><div id="@@headerContainerId@@" class="per-page-viewer--header"></div><div id="@@viewerContainerId@@" class="per-page-viewer--content"></div><div id="@@footerContainerId@@" class="per-page-viewer--footer"></div><canvas width="120" height="160" id="@@workCanvasId@@" class="display-none"></canvas></div>'},6971:function(){},48340:function(){},73782:function(){},53994:function(){},94604:function(){},12294:function(){},19794:function(t){t.exports={version:"1.0.31"}}},__webpack_module_cache__={},leafPrototypes,getProto,inProgress,dataWebpackPrefix;function __webpack_require__(t){var h=__webpack_module_cache__[t];if(void 0!==h)return h.exports;var y=__webpack_module_cache__[t]={exports:{}};return __webpack_modules__[t].call(y.exports,y,y.exports,__webpack_require__),y.exports}__webpack_require__.m=__webpack_modules__,getProto=Object.getPrototypeOf?function(t){return Object.getPrototypeOf(t)}:function(t){return t.__proto__},__webpack_require__.t=function(t,h){if(1&h&&(t=this(t)),8&h)return t;if("object"==typeof t&&t){if(4&h&&t.__esModule)return t;if(16&h&&"function"==typeof t.then)return t}var y=Object.create(null);__webpack_require__.r(y);var w={};leafPrototypes=leafPrototypes||[null,getProto({}),getProto([]),getProto(getProto)];for(var A=2&h&&t;"object"==typeof A&&!~leafPrototypes.indexOf(A);A=getProto(A))Object.getOwnPropertyNames(A).forEach((function(h){w[h]=function(){return t[h]}}));return w.default=function(){return t},__webpack_require__.d(y,w),y},__webpack_require__.d=function(t,h){for(var y in h)__webpack_require__.o(h,y)&&!__webpack_require__.o(t,y)&&Object.defineProperty(t,y,{enumerable:!0,get:h[y]})},__webpack_require__.f={},__webpack_require__.e=function(t){return Promise.all(Object.keys(__webpack_require__.f).reduce((function(h,y){return __webpack_require__.f[y](t,h),h}),[]))},__webpack_require__.u=function(t){return"bundle."+{28:"f4b20c0f",398:"267be04b",935:"245ee483"}[t]+".js"},__webpack_require__.miniCssF=function(t){return"main.css"},__webpack_require__.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),__webpack_require__.o=function(t,h){return Object.prototype.hasOwnProperty.call(t,h)},inProgress={},dataWebpackPrefix="candyLib:",__webpack_require__.l=function(t,h,y,w){if(inProgress[t])inProgress[t].push(h);else{var A,T;if(void 0!==y)for(var E=document.getElementsByTagName("script"),j=0;j<E.length;j++){var B=E[j];if(B.getAttribute("src")==t||B.getAttribute("data-webpack")==dataWebpackPrefix+y){A=B;break}}A||(T=!0,(A=document.createElement("script")).charset="utf-8",A.timeout=120,__webpack_require__.nc&&A.setAttribute("nonce",__webpack_require__.nc),A.setAttribute("data-webpack",dataWebpackPrefix+y),A.src=t),inProgress[t]=[h];var onScriptComplete=function(h,y){A.onerror=A.onload=null,clearTimeout(N);var w=inProgress[t];if(delete inProgress[t],A.parentNode&&A.parentNode.removeChild(A),w&&w.forEach((function(t){return t(y)})),h)return h(y)},N=setTimeout(onScriptComplete.bind(null,void 0,{type:"timeout",target:A}),12e4);A.onerror=onScriptComplete.bind(null,A.onerror),A.onload=onScriptComplete.bind(null,A.onload),T&&document.head.appendChild(A)}},__webpack_require__.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},__webpack_require__.p="",function(){var t={179:0};__webpack_require__.f.j=function(h,y){var w=__webpack_require__.o(t,h)?t[h]:void 0;if(0!==w)if(w)y.push(w[2]);else{var A=new Promise((function(y,A){w=t[h]=[y,A]}));y.push(w[2]=A);var T=__webpack_require__.p+__webpack_require__.u(h),E=new Error;__webpack_require__.l(T,(function(y){if(__webpack_require__.o(t,h)&&(0!==(w=t[h])&&(t[h]=void 0),w)){var A=y&&("load"===y.type?"missing":y.type),T=y&&y.target&&y.target.src;E.message="Loading chunk "+h+" failed.\n("+A+": "+T+")",E.name="ChunkLoadError",E.type=A,E.request=T,w[1](E)}}),"chunk-"+h,h)}};var webpackJsonpCallback=function(h,y){var w,A,T=y[0],E=y[1],j=y[2],B=0;if(T.some((function(h){return 0!==t[h]}))){for(w in E)__webpack_require__.o(E,w)&&(__webpack_require__.m[w]=E[w]);if(j)j(__webpack_require__)}for(h&&h(y);B<T.length;B++)A=T[B],__webpack_require__.o(t,A)&&t[A]&&t[A][0](),t[A]=0},h=this.webpackChunkcandyLib=this.webpackChunkcandyLib||[];h.forEach(webpackJsonpCallback.bind(null,0)),h.push=webpackJsonpCallback.bind(null,h.push.bind(h))}();var __webpack_exports__={};!function(){__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{CandyApp:function(){return Rc}});__webpack_require__(90123),__webpack_require__(60686),__webpack_require__(35608),__webpack_require__(90869),__webpack_require__(6451);var extendStatics=function(t,h){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,h){t.__proto__=h}||function(t,h){for(var y in h)h.hasOwnProperty(y)&&(t[y]=h[y])},extendStatics(t,h)};function __extends(t,h){function __(){this.constructor=t}extendStatics(t,h),t.prototype=null===h?Object.create(h):(__.prototype=h.prototype,new __)}function isFunction(t){return"function"==typeof t}var t=!1,h=Object.defineProperties({Promise:void 0},{useDeprecatedSynchronousErrorHandling:{set:function(h){h&&(new Error).stack;t=h},get:function(){return t},configurable:!0,enumerable:!0}});function hostReportError(t){setTimeout((function(){throw t}),0)}var y={closed:!0,next:function(t){},error:function(t){if(h.useDeprecatedSynchronousErrorHandling)throw t;hostReportError(t)},complete:function(){}},w=function(){return Array.isArray||function(t){return t&&"number"==typeof t.length}}();function isObject(t){return null!==t&&"object"==typeof t}var A=function(){function UnsubscriptionErrorImpl(t){return Error.call(this),this.message=t?t.length+" errors occurred during unsubscription:\n"+t.map((function(t,h){return h+1+") "+t.toString()})).join("\n  "):"",this.name="UnsubscriptionError",this.errors=t,this}return UnsubscriptionErrorImpl.prototype=Object.create(Error.prototype),UnsubscriptionErrorImpl}(),T=A,E=function(){function Subscription(t){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,t&&(this._unsubscribe=t)}return Subscription.prototype.unsubscribe=function(){var t;if(!this.closed){var h=this,y=h._parentOrParents,A=h._unsubscribe,E=h._subscriptions;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,y instanceof Subscription)y.remove(this);else if(null!==y)for(var j=0;j<y.length;++j){y[j].remove(this)}if(isFunction(A))try{A.call(this)}catch(h){t=h instanceof T?flattenUnsubscriptionErrors(h.errors):[h]}if(w(E)){j=-1;for(var B=E.length;++j<B;){var N=E[j];if(isObject(N))try{N.unsubscribe()}catch(h){t=t||[],h instanceof T?t=t.concat(flattenUnsubscriptionErrors(h.errors)):t.push(h)}}}if(t)throw new T(t)}},Subscription.prototype.add=function(t){var h=t;if(!t)return Subscription.EMPTY;switch(typeof t){case"function":h=new Subscription(t);case"object":if(h===this||h.closed||"function"!=typeof h.unsubscribe)return h;if(this.closed)return h.unsubscribe(),h;if(!(h instanceof Subscription)){var y=h;(h=new Subscription)._subscriptions=[y]}break;default:throw new Error("unrecognized teardown "+t+" added to Subscription.")}var w=h._parentOrParents;if(null===w)h._parentOrParents=this;else if(w instanceof Subscription){if(w===this)return h;h._parentOrParents=[w,this]}else{if(-1!==w.indexOf(this))return h;w.push(this)}var A=this._subscriptions;return null===A?this._subscriptions=[h]:A.push(h),h},Subscription.prototype.remove=function(t){var h=this._subscriptions;if(h){var y=h.indexOf(t);-1!==y&&h.splice(y,1)}},Subscription.EMPTY=function(t){return t.closed=!0,t}(new Subscription),Subscription}();function flattenUnsubscriptionErrors(t){return t.reduce((function(t,h){return t.concat(h instanceof T?h.errors:h)}),[])}var j=function(){return"function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()}(),B=function(t){function Subscriber(h,w,A){var T=t.call(this)||this;switch(T.syncErrorValue=null,T.syncErrorThrown=!1,T.syncErrorThrowable=!1,T.isStopped=!1,arguments.length){case 0:T.destination=y;break;case 1:if(!h){T.destination=y;break}if("object"==typeof h){h instanceof Subscriber?(T.syncErrorThrowable=h.syncErrorThrowable,T.destination=h,h.add(T)):(T.syncErrorThrowable=!0,T.destination=new N(T,h));break}default:T.syncErrorThrowable=!0,T.destination=new N(T,h,w,A)}return T}return __extends(Subscriber,t),Subscriber.prototype[j]=function(){return this},Subscriber.create=function(t,h,y){var w=new Subscriber(t,h,y);return w.syncErrorThrowable=!1,w},Subscriber.prototype.next=function(t){this.isStopped||this._next(t)},Subscriber.prototype.error=function(t){this.isStopped||(this.isStopped=!0,this._error(t))},Subscriber.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},Subscriber.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this))},Subscriber.prototype._next=function(t){this.destination.next(t)},Subscriber.prototype._error=function(t){this.destination.error(t),this.unsubscribe()},Subscriber.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},Subscriber.prototype._unsubscribeAndRecycle=function(){var t=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=t,this},Subscriber}(E),N=function(t){function SafeSubscriber(h,w,A,T){var E,j=t.call(this)||this;j._parentSubscriber=h;var B=j;return isFunction(w)?E=w:w&&(E=w.next,A=w.error,T=w.complete,w!==y&&(isFunction((B=Object.create(w)).unsubscribe)&&j.add(B.unsubscribe.bind(B)),B.unsubscribe=j.unsubscribe.bind(j))),j._context=B,j._next=E,j._error=A,j._complete=T,j}return __extends(SafeSubscriber,t),SafeSubscriber.prototype.next=function(t){if(!this.isStopped&&this._next){var y=this._parentSubscriber;h.useDeprecatedSynchronousErrorHandling&&y.syncErrorThrowable?this.__tryOrSetError(y,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}},SafeSubscriber.prototype.error=function(t){if(!this.isStopped){var y=this._parentSubscriber,w=h.useDeprecatedSynchronousErrorHandling;if(this._error)w&&y.syncErrorThrowable?(this.__tryOrSetError(y,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(y.syncErrorThrowable)w?(y.syncErrorValue=t,y.syncErrorThrown=!0):hostReportError(t),this.unsubscribe();else{if(this.unsubscribe(),w)throw t;hostReportError(t)}}},SafeSubscriber.prototype.complete=function(){var t=this;if(!this.isStopped){var y=this._parentSubscriber;if(this._complete){var wrappedComplete=function(){return t._complete.call(t._context)};h.useDeprecatedSynchronousErrorHandling&&y.syncErrorThrowable?(this.__tryOrSetError(y,wrappedComplete),this.unsubscribe()):(this.__tryOrUnsub(wrappedComplete),this.unsubscribe())}else this.unsubscribe()}},SafeSubscriber.prototype.__tryOrUnsub=function(t,y){try{t.call(this._context,y)}catch(t){if(this.unsubscribe(),h.useDeprecatedSynchronousErrorHandling)throw t;hostReportError(t)}},SafeSubscriber.prototype.__tryOrSetError=function(t,y,w){if(!h.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{y.call(this._context,w)}catch(y){return h.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=y,t.syncErrorThrown=!0,!0):(hostReportError(y),!0)}return!1},SafeSubscriber.prototype._unsubscribe=function(){var t=this._parentSubscriber;this._context=null,this._parentSubscriber=null,t.unsubscribe()},SafeSubscriber}(B);var V=function(){return"function"==typeof Symbol&&Symbol.observable||"@@observable"}();function identity(t){return t}function pipeFromArray(t){return 0===t.length?identity:1===t.length?t[0]:function piped(h){return t.reduce((function(t,h){return h(t)}),h)}}var W=function(){function Observable(t){this._isScalar=!1,t&&(this._subscribe=t)}return Observable.prototype.lift=function(t){var h=new Observable;return h.source=this,h.operator=t,h},Observable.prototype.subscribe=function(t,w,A){var T=this.operator,E=function toSubscriber(t,h,w){if(t){if(t instanceof B)return t;if(t[j])return t[j]()}return t||h||w?new B(t,h,w):new B(y)}(t,w,A);if(T?E.add(T.call(E,this.source)):E.add(this.source||h.useDeprecatedSynchronousErrorHandling&&!E.syncErrorThrowable?this._subscribe(E):this._trySubscribe(E)),h.useDeprecatedSynchronousErrorHandling&&E.syncErrorThrowable&&(E.syncErrorThrowable=!1,E.syncErrorThrown))throw E.syncErrorValue;return E},Observable.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(y){h.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=y),!function canReportError(t){for(;t;){var h=t,y=h.closed,w=h.destination,A=h.isStopped;if(y||A)return!1;t=w&&w instanceof B?w:null}return!0}(t)?console.warn(y):t.error(y)}},Observable.prototype.forEach=function(t,h){var y=this;return new(h=getPromiseCtor(h))((function(h,w){var A;A=y.subscribe((function(h){try{t(h)}catch(t){w(t),A&&A.unsubscribe()}}),w,h)}))},Observable.prototype._subscribe=function(t){var h=this.source;return h&&h.subscribe(t)},Observable.prototype[V]=function(){return this},Observable.prototype.pipe=function(){for(var t=[],h=0;h<arguments.length;h++)t[h]=arguments[h];return 0===t.length?this:pipeFromArray(t)(this)},Observable.prototype.toPromise=function(t){var h=this;return new(t=getPromiseCtor(t))((function(t,y){var w;h.subscribe((function(t){return w=t}),(function(t){return y(t)}),(function(){return t(w)}))}))},Observable.create=function(t){return new Observable(t)},Observable}();function getPromiseCtor(t){if(t||(t=h.Promise||Promise),!t)throw new Error("no Promise impl found");return t}var H=function(){function ObjectUnsubscribedErrorImpl(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return ObjectUnsubscribedErrorImpl.prototype=Object.create(Error.prototype),ObjectUnsubscribedErrorImpl}(),G=function(t){function SubjectSubscription(h,y){var w=t.call(this)||this;return w.subject=h,w.subscriber=y,w.closed=!1,w}return __extends(SubjectSubscription,t),SubjectSubscription.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var t=this.subject,h=t.observers;if(this.subject=null,h&&0!==h.length&&!t.isStopped&&!t.closed){var y=h.indexOf(this.subscriber);-1!==y&&h.splice(y,1)}}},SubjectSubscription}(E),z=function(t){function SubjectSubscriber(h){var y=t.call(this,h)||this;return y.destination=h,y}return __extends(SubjectSubscriber,t),SubjectSubscriber}(B),J=function(t){function Subject(){var h=t.call(this)||this;return h.observers=[],h.closed=!1,h.isStopped=!1,h.hasError=!1,h.thrownError=null,h}return __extends(Subject,t),Subject.prototype[j]=function(){return new z(this)},Subject.prototype.lift=function(t){var h=new X(this,this);return h.operator=t,h},Subject.prototype.next=function(t){if(this.closed)throw new H;if(!this.isStopped)for(var h=this.observers,y=h.length,w=h.slice(),A=0;A<y;A++)w[A].next(t)},Subject.prototype.error=function(t){if(this.closed)throw new H;this.hasError=!0,this.thrownError=t,this.isStopped=!0;for(var h=this.observers,y=h.length,w=h.slice(),A=0;A<y;A++)w[A].error(t);this.observers.length=0},Subject.prototype.complete=function(){if(this.closed)throw new H;this.isStopped=!0;for(var t=this.observers,h=t.length,y=t.slice(),w=0;w<h;w++)y[w].complete();this.observers.length=0},Subject.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},Subject.prototype._trySubscribe=function(h){if(this.closed)throw new H;return t.prototype._trySubscribe.call(this,h)},Subject.prototype._subscribe=function(t){if(this.closed)throw new H;return this.hasError?(t.error(this.thrownError),E.EMPTY):this.isStopped?(t.complete(),E.EMPTY):(this.observers.push(t),new G(this,t))},Subject.prototype.asObservable=function(){var t=new W;return t.source=this,t},Subject.create=function(t,h){return new X(t,h)},Subject}(W),X=function(t){function AnonymousSubject(h,y){var w=t.call(this)||this;return w.destination=h,w.source=y,w}return __extends(AnonymousSubject,t),AnonymousSubject.prototype.next=function(t){var h=this.destination;h&&h.next&&h.next(t)},AnonymousSubject.prototype.error=function(t){var h=this.destination;h&&h.error&&this.destination.error(t)},AnonymousSubject.prototype.complete=function(){var t=this.destination;t&&t.complete&&this.destination.complete()},AnonymousSubject.prototype._subscribe=function(t){return this.source?this.source.subscribe(t):E.EMPTY},AnonymousSubject}(J);function filter(t,h){return function filterOperatorFunction(y){return y.lift(new K(t,h))}}var K=function(){function FilterOperator(t,h){this.predicate=t,this.thisArg=h}return FilterOperator.prototype.call=function(t,h){return h.subscribe(new ne(t,this.predicate,this.thisArg))},FilterOperator}(),ne=function(t){function FilterSubscriber(h,y,w){var A=t.call(this,h)||this;return A.predicate=y,A.thisArg=w,A.count=0,A}return __extends(FilterSubscriber,t),FilterSubscriber.prototype._next=function(t){var h;try{h=this.predicate.call(this.thisArg,t,this.count++)}catch(t){return void this.destination.error(t)}h&&this.destination.next(t)},FilterSubscriber}(B),ue=function(t){function OuterSubscriber(){return null!==t&&t.apply(this,arguments)||this}return __extends(OuterSubscriber,t),OuterSubscriber.prototype.notifyNext=function(t,h,y,w,A){this.destination.next(h)},OuterSubscriber.prototype.notifyError=function(t,h){this.destination.error(t)},OuterSubscriber.prototype.notifyComplete=function(t){this.destination.complete()},OuterSubscriber}(B),pe=function(t){function InnerSubscriber(h,y,w){var A=t.call(this)||this;return A.parent=h,A.outerValue=y,A.outerIndex=w,A.index=0,A}return __extends(InnerSubscriber,t),InnerSubscriber.prototype._next=function(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)},InnerSubscriber.prototype._error=function(t){this.parent.notifyError(t,this),this.unsubscribe()},InnerSubscriber.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()},InnerSubscriber}(B),subscribeToArray=function(t){return function(h){for(var y=0,w=t.length;y<w&&!h.closed;y++)h.next(t[y]);h.complete()}};function getSymbolIterator(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}var me=getSymbolIterator(),isArrayLike=function(t){return t&&"number"==typeof t.length&&"function"!=typeof t};function isPromise(t){return!!t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}var subscribeTo=function(t){if(t&&"function"==typeof t[V])return w=t,function(t){var h=w[V]();if("function"!=typeof h.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return h.subscribe(t)};if(isArrayLike(t))return subscribeToArray(t);if(isPromise(t))return y=t,function(t){return y.then((function(h){t.closed||(t.next(h),t.complete())}),(function(h){return t.error(h)})).then(null,hostReportError),t};if(t&&"function"==typeof t[me])return h=t,function(t){for(var y=h[me]();;){var w=void 0;try{w=y.next()}catch(h){return t.error(h),t}if(w.done){t.complete();break}if(t.next(w.value),t.closed)break}return"function"==typeof y.return&&t.add((function(){y.return&&y.return()})),t};var h,y,w,A=isObject(t)?"an invalid object":"'"+t+"'";throw new TypeError("You provided "+A+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.")};function subscribeToResult(t,h,y,w,A){if(void 0===A&&(A=new pe(t,y,w)),!A.closed)return h instanceof W?h.subscribe(A):subscribeTo(h)(A)}function takeUntil(t){return function(h){return h.lift(new we(t))}}var ge,we=function(){function TakeUntilOperator(t){this.notifier=t}return TakeUntilOperator.prototype.call=function(t,h){var y=new Ce(t),w=subscribeToResult(y,this.notifier);return w&&!y.seenValue?(y.add(w),h.subscribe(y)):y},TakeUntilOperator}(),Ce=function(t){function TakeUntilSubscriber(h){var y=t.call(this,h)||this;return y.seenValue=!1,y}return __extends(TakeUntilSubscriber,t),TakeUntilSubscriber.prototype.notifyNext=function(t,h,y,w,A){this.seenValue=!0,this.complete()},TakeUntilSubscriber.prototype.notifyComplete=function(){},TakeUntilSubscriber}(ue);!function(t){t.init="init",t.dropZone="dropZone",t.limits="limits",t.readFiles="readFiles",t.pending="pending",t.checkFiles="checkFiles",t.selectViewerState="selectViewerState",t.instantViewer="instantViewer",t.editViewer="editViewer",t.fileViewer="fileViewer",t.pageViewer="pageViewer",t.queueState="queueState",t.uploadState="uploadState",t.runJobState="runJobState",t.errorViewer="errorViewer",t.destroy="destroy"}(ge||(ge={}));var ke=function(){function Guid(t){this._val=t}return Object.defineProperty(Guid,"empty",{get:function(){return"00000000-0000-0000-0000-000000000000"},enumerable:!1,configurable:!0}),Guid.isGuid=function(t){return t instanceof Guid},Guid.isEmpty=function(t){return!t||t.toString()===Guid.empty},Guid.create=function(t){return new Guid(t.toString())},Guid.createQuickGuid=function(){return Guid.create(Guid._createQuickGuid())},Guid.createQuickGuidAsString=function(){return Guid.create(Guid._createQuickGuid()).toString()},Guid.createGuid=function(){return Guid.create(Guid._createGuid())},Guid.createEmptyGuid=function(){return Guid.create(Guid.empty)},Guid._createQuickGuid=function(){return"c"+Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)},Guid._createGuid=function(){var t=(new Date).getTime(),h="cxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(h){var y=(t+16*Math.random())%16|0;return t=Math.floor(t/16),("x"===h?y:3&y|8).toString(16)}));return h},Guid.prototype.toString=function(){return this._val||""},Guid}(),Ie=function(){function DomHelper(){this.css={displayNone:"display-none",boxShadow:"box-shadow",perPageViewerSingle:"per-page-viewer--single"}}return DomHelper.prototype.cssToSelector=function(t){return"."+t},DomHelper.prototype.idToSelector=function(t){return"#"+t},DomHelper.prototype.getById=function(t){return $(this.idToSelector(t))},DomHelper.prototype.unbindRecursive=function(t){t&&(t.children().unbind(),t.unbind())},DomHelper.prototype.removeFromDom=function(t){t&&t.remove()},DomHelper.prototype.destroyComponent=function(t){if(t){var h=this.getById(t);h&&h.length&&(this.unbindRecursive(h),this.removeFromDom(h))}},DomHelper.prototype.toggleDisabled=function(t,h){h?t.attr("disabled","disabled"):t.removeAttr("disabled")},DomHelper.prototype.isDisabled=function(t){return!!t.attr("disabled")},DomHelper.prototype.getMatrixFromCss=function(t){return(t.css("transform")||"").replace(/^matrix(3d)?\((.*)\)$/,"$2").split(/, /).map((function(t){return parseFloat(t)}))},DomHelper.prototype.getImageSize=function(t){return{width:+t.attr("width"),height:+t.attr("height")}},DomHelper.prototype.setImageSize=function(t,h){t.attr("width",h.width).attr("height",h.height)},DomHelper.prototype.scrollTop=function(t){$(window).scrollTop(t)},DomHelper.prototype.scrollToStart=function(){this.scrollTop(0)},DomHelper.prototype.scrollMoreThan=function(t){return $(window).scrollTop()>t},DomHelper}(),Te=function(t){function BehaviorSubject(h){var y=t.call(this)||this;return y._value=h,y}return __extends(BehaviorSubject,t),Object.defineProperty(BehaviorSubject.prototype,"value",{get:function(){return this.getValue()},enumerable:!0,configurable:!0}),BehaviorSubject.prototype._subscribe=function(h){var y=t.prototype._subscribe.call(this,h);return y&&!y.closed&&h.next(this._value),y},BehaviorSubject.prototype.getValue=function(){if(this.hasError)throw this.thrownError;if(this.closed)throw new H;return this._value},BehaviorSubject.prototype.next=function(h){t.prototype.next.call(this,this._value=h)},BehaviorSubject}(J),Ee=function(t){function Action(h,y){return t.call(this)||this}return __extends(Action,t),Action.prototype.schedule=function(t,h){return void 0===h&&(h=0),this},Action}(E),Me=function(t){function AsyncAction(h,y){var w=t.call(this,h,y)||this;return w.scheduler=h,w.work=y,w.pending=!1,w}return __extends(AsyncAction,t),AsyncAction.prototype.schedule=function(t,h){if(void 0===h&&(h=0),this.closed)return this;this.state=t;var y=this.id,w=this.scheduler;return null!=y&&(this.id=this.recycleAsyncId(w,y,h)),this.pending=!0,this.delay=h,this.id=this.id||this.requestAsyncId(w,this.id,h),this},AsyncAction.prototype.requestAsyncId=function(t,h,y){return void 0===y&&(y=0),setInterval(t.flush.bind(t,this),y)},AsyncAction.prototype.recycleAsyncId=function(t,h,y){if(void 0===y&&(y=0),null!==y&&this.delay===y&&!1===this.pending)return h;clearInterval(h)},AsyncAction.prototype.execute=function(t,h){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var y=this._execute(t,h);if(y)return y;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},AsyncAction.prototype._execute=function(t,h){var y=!1,w=void 0;try{this.work(t)}catch(t){y=!0,w=!!t&&t||new Error(t)}if(y)return this.unsubscribe(),w},AsyncAction.prototype._unsubscribe=function(){var t=this.id,h=this.scheduler,y=h.actions,w=y.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==w&&y.splice(w,1),null!=t&&(this.id=this.recycleAsyncId(h,t,null)),this.delay=null},AsyncAction}(Ee),Be=function(){function Scheduler(t,h){void 0===h&&(h=Scheduler.now),this.SchedulerAction=t,this.now=h}return Scheduler.prototype.schedule=function(t,h,y){return void 0===h&&(h=0),new this.SchedulerAction(this,t).schedule(y,h)},Scheduler.now=function(){return Date.now()},Scheduler}(),Ne=function(t){function AsyncScheduler(h,y){void 0===y&&(y=Be.now);var w=t.call(this,h,(function(){return AsyncScheduler.delegate&&AsyncScheduler.delegate!==w?AsyncScheduler.delegate.now():y()}))||this;return w.actions=[],w.active=!1,w.scheduled=void 0,w}return __extends(AsyncScheduler,t),AsyncScheduler.prototype.schedule=function(h,y,w){return void 0===y&&(y=0),AsyncScheduler.delegate&&AsyncScheduler.delegate!==this?AsyncScheduler.delegate.schedule(h,y,w):t.prototype.schedule.call(this,h,y,w)},AsyncScheduler.prototype.flush=function(t){var h=this.actions;if(this.active)h.push(t);else{var y;this.active=!0;do{if(y=t.execute(t.state,t.delay))break}while(t=h.shift());if(this.active=!1,y){for(;t=h.shift();)t.unsubscribe();throw y}}},AsyncScheduler}(Be),Ze=new Ne(Me);function debounceTime(t,h){return void 0===h&&(h=Ze),function(y){return y.lift(new et(t,h))}}var et=function(){function DebounceTimeOperator(t,h){this.dueTime=t,this.scheduler=h}return DebounceTimeOperator.prototype.call=function(t,h){return h.subscribe(new tt(t,this.dueTime,this.scheduler))},DebounceTimeOperator}(),tt=function(t){function DebounceTimeSubscriber(h,y,w){var A=t.call(this,h)||this;return A.dueTime=y,A.scheduler=w,A.debouncedSubscription=null,A.lastValue=null,A.hasValue=!1,A}return __extends(DebounceTimeSubscriber,t),DebounceTimeSubscriber.prototype._next=function(t){this.clearDebounce(),this.lastValue=t,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(dispatchNext,this.dueTime,this))},DebounceTimeSubscriber.prototype._complete=function(){this.debouncedNext(),this.destination.complete()},DebounceTimeSubscriber.prototype.debouncedNext=function(){if(this.clearDebounce(),this.hasValue){var t=this.lastValue;this.lastValue=null,this.hasValue=!1,this.destination.next(t)}},DebounceTimeSubscriber.prototype.clearDebounce=function(){var t=this.debouncedSubscription;null!==t&&(this.remove(t),t.unsubscribe(),this.debouncedSubscription=null)},DebounceTimeSubscriber}(B);function dispatchNext(t){t.debouncedNext()}var rt,nt,it=__webpack_require__(23562),at=function(){function Clone(){}return Clone.asJson=function(t){return t?JSON.parse(JSON.stringify(t)):{}},Clone.asTypeRecursion=function(t){var h=this;if(null===t||"object"!=typeof t)return t;if(t instanceof Date)return new Date(t.getTime());if(Array.isArray(t)){var y=[];return t.forEach((function(t){y.push(h.asTypeRecursion(t))})),y}if(t instanceof it.Z)return new it.Z([t],t.name,{type:t.type});var w=new t.constructor;for(var A in t)t.hasOwnProperty(A)&&(w[A]=this.asTypeRecursion(t[A]));return w},Clone}();!function(t){t.portrait="portrait",t.landscape="landscape",t.any="any"}(rt||(rt={})),function(t){t.desktop="desktop",t.mobile="mobile",t.tablet="tablet",t.handset="handset"}(nt||(nt={}));var st,lt={XSmall:"(max-width: 599.99px)",Small:"(min-width: 600px) and (max-width: 959.99px)",Medium:"(min-width: 960px) and (max-width: 1279.99px)",Large:"(min-width: 1280px) and (max-width: 1919.99px)",XLarge:"(min-width: 1920px)",Handset:"(max-width: 599.99px) and (orientation: portrait), (max-width: 959.99px) and (orientation: landscape)",HandsetPortrait:"(max-width: 599.99px) and (orientation: portrait)",HandsetLandscape:"(max-width: 959.99px) and (orientation: landscape)",Tablet:"(min-width: 600px) and (max-width: 839.99px) and (orientation: portrait), (min-width: 960px) and (max-width: 1279.99px) and (orientation: landscape)",TabletPortrait:"(min-width: 600px) and (max-width: 839.99px) and (orientation: portrait)",TabletLandscape:"(min-width: 960px) and (max-width: 1279.99px) and (orientation: landscape)",Web:"(min-width: 840px) and (orientation: portrait), (min-width: 1280px) and (orientation: landscape)",WebPortrait:"(min-width: 840px) and (orientation: portrait)",WebLandscape:"(min-width: 1280px) and (orientation: landscape)"},ct=function ct(t,h,y,w){switch(void 0===w&&(w=rt.any),this.name=t,this.min=h,this.max=y,this.orientation=w,this.media=lt[t],this.media){case lt.XSmall:case lt.Small:case lt.Handset:case lt.HandsetPortrait:case lt.HandsetLandscape:this.deviceType=nt.mobile;break;case lt.Medium:case lt.Tablet:case lt.TabletPortrait:case lt.TabletLandscape:this.deviceType=nt.tablet;break;default:this.deviceType=nt.desktop}},ht=(new ct("XSmall",1,599.99),new ct("Small",600,959.99),new ct("Medium",960,1279.99),new ct("Large",1280,1919.99),new ct("XLarge",1920,8e3),new ct("Handset",1,599.99,rt.portrait),new ct("Handset",1,959.99,rt.landscape),new ct("HandsetPortrait",1,599.99,rt.portrait),new ct("HandsetLandscape",1,959.99,rt.landscape),new ct("Tablet",600,839.99,rt.portrait),new ct("Tablet",960,1279.99,rt.landscape),new ct("TabletPortrait",600,839.99,rt.portrait),new ct("TabletLandscape",960,1279.99,rt.landscape),new ct("Web",840,8e3,rt.portrait),new ct("Web",1280,8e3,rt.landscape),new ct("WebPortrait",840,8e3,rt.portrait),new ct("WebLandscape",1280,8e3,rt.landscape),function(){return ht=Object.assign||function(t){for(var h,y=1,w=arguments.length;y<w;y++)for(var A in h=arguments[y])Object.prototype.hasOwnProperty.call(h,A)&&(t[A]=h[A]);return t},ht.apply(this,arguments)});!function(t){t.mobileMax="mobileMax",t.tabletMin="tabletMin",t.tabletMax="tabletMax",t.desktopMin="desktopMin"}(st||(st={}));var vt,gt=function(){function MediaQueryHelper(){}return MediaQueryHelper.prototype.maxWidth=function(t){return this.buildProp(!1,!0,t)},MediaQueryHelper.prototype.minWidth=function(t){return this.buildProp(!0,!0,t)},MediaQueryHelper.prototype.maxHeight=function(t){return this.buildProp(!1,!1,t)},MediaQueryHelper.prototype.minHeight=function(t){return this.buildProp(!0,!1,t)},MediaQueryHelper.prototype.matchMedia=function(t){return window.matchMedia(t).matches},MediaQueryHelper.prototype.buildProp=function(t,h,y){return"("+(t?"min":"max")+"-"+(h?"width":"height")+": "+y+"px)"},MediaQueryHelper}(),bt=function(){function MediaService(){this.css={isMobile:"media--is-mobile",isTablet:"media--is-table",isDesktop:"media--is-desktop"},this.media=[],this.listeners=[],this.customMediaPoints={mobileMax:{x:599.99,y:599.99},tabletMin:{x:600,y:600},tabletMax:{x:1279.99,y:659.99},desktopMin:{x:1280,y:660}},this.change=new Te(null),this.queryHelper=new gt}return Object.defineProperty(MediaService.prototype,"change$",{get:function(){return this.change.asObservable().pipe(filter((function(t){return!!t})),debounceTime(1))},enumerable:!1,configurable:!0}),MediaService.prototype.init=function(){this.subscribe()},MediaService.prototype.dispose=function(){},MediaService.prototype.isDesktop=function(){var t=this.getSize(),h=this.customMediaPoints.desktopMin;return t.x>=h.x&&t.y>=h.y},MediaService.prototype.isTablet=function(){var t=this.getSize(),h=this.customMediaPoints.tabletMin,y=this.customMediaPoints.tabletMax;return t.x>h.x&&t.y>h.y&&t.x<y.x&&t.y<y.y},MediaService.prototype.isMobile=function(){var t=this.getSize(),h=this.customMediaPoints.mobileMax;return t.x<h.x||t.y<h.y},MediaService.prototype.isDesktopByWidth=function(){var t=this.customMediaPoints.desktopMin,h=this.queryHelper.minWidth(t.x);return this.queryHelper.matchMedia(h)},MediaService.prototype.isMobileByWidth=function(){var t=this.customMediaPoints.mobileMax,h=this.queryHelper.maxWidth(t.x);return this.queryHelper.matchMedia(h)},MediaService.prototype.isTabletByWidth=function(){var t=this.customMediaPoints.tabletMin,h=this.customMediaPoints.tabletMax,y=this.queryHelper.minWidth(t.x)+" and "+this.queryHelper.maxWidth(h.x);return this.queryHelper.matchMedia(y)},MediaService.prototype.rebuildMedia=function(t){var h=this;this.media&&(this.listeners.forEach((function(t){h.media.forEach((function(h){return h.removeListener(t)}))})),this.listeners.length=0,this.media.length=0),Object.keys(t).forEach((function(y){var w=t[y];w.query.split(",").map((function(t){return t.trim()})).forEach((function(t){h.customMediaPoints[y].x=w.x,h.customMediaPoints[y].y=w.y,h.media.push(h.addMedia(t,y,w))}))}))},MediaService.prototype.widthLessThan=function(t){return this.queryHelper.matchMedia(this.queryHelper.maxWidth(t))},MediaService.prototype.addCustomMedia=function(t,h,y){return!this.customMediaPoints[h]&&(this.customMediaPoints[h]=ht(ht({},y),{query:t}),this.addMedia(t,h,this.customMediaPoints[h]),!0)},MediaService.prototype.handle=function(t){var h=this.getSize(),y=this.getOrientation(h),w=ht(ht({},h),{orientation:y}),A=at.asJson(ht(ht({},w),{data:t}));A.isDesktop=this.isDesktop(),A.isTablet=this.isTablet(),A.isMobile=this.isMobile(),A.isDesktopByWidth=this.isDesktopByWidth(),this.change.next(A)},MediaService.prototype.subscribe=function(){var t=this,h=this.customMediaPoints,y=Object.assign({customMobile:"(max-width: "+h.mobileMax.x+"px),(max-height:"+h.mobileMax.y+"px)",customTabletMin:"(min-width:"+h.tabletMin.x+"px) and (min-height:"+h.tabletMin.y+"px)",customTabletMax:"(max-width:"+h.tabletMax.x+"px) and (max-height:"+h.tabletMax.y+"px)",desktopMin:"(min-width:"+h.desktopMin.x+"px) and (min-height:"+h.desktopMin.y+"px)"},lt);Object.keys(y).forEach((function(w){y[w].split(",").map((function(t){return t.trim()})).forEach((function(y){return t.media.push(t.addMedia(y,w,{query:y,x:h[w]?h[w].x:void 0,y:h[w]?h[w].y:void 0}))}))}))},MediaService.prototype.getOrientation=function(t){return t.x>t.y?rt.landscape:rt.portrait},MediaService.prototype.getSize=function(){return{x:window.innerWidth,y:window.innerHeight}},MediaService.prototype.addMedia=function(t,h,y){var w=this,A=window.matchMedia(t),fn=function(t){return w.handle({data:ht(ht({},t),{point:y}),key:h})};return this.listeners.push(fn),A.addListener(fn),this.handle({data:{media:t,point:y},key:h}),A},MediaService}();!function(t){t.en="en",t.de="de",t.it="it",t.fr="fr",t.es="es",t.pt="pt",t.nl="nl",t.sv="sv",t.id="id",t.zhHans="zh-Hans",t.zhTW="zh-TW",t.ja="ja",t.ko="ko",t.tr="tr",t.ru="ru",t.th="th",t.ar="ar",t.pl="pl"}(vt||(vt={}));var _t,St,wt,Ct,Pt,kt,xt,At,It,Tt,Ot,Et,Ft,Rt=function(){function TranslateService(){this.translates={}}return TranslateService.prototype.setTranslates=function(t,h){t||console.error("lang was not set to instance '"+vt.en+"' will be set as Default",{lang:t,t1:h}),this.lang=t||vt.en,this.translates=h},TranslateService.prototype.get=function(t,h,y,w){var A=this.getLocale(),T=this.translates[A+"-"+t];return T&&h&&(T=T[h]),T&&y&&(T=T[y]),T&&w&&(T=T[w]),T||t},TranslateService.prototype.has=function(t){var h=this.getLocale();return!!this.translates[h+"-"+t]},TranslateService.prototype.getLocale=function(){return this.lang||navigator.language.split("-")[0]||"en"},TranslateService}();!function(t){t.png="png",t.jpg="jpg",t.jpeg="jpeg",t.bmp="bmp",t.tiff="tiff",t.tif="tif",t.gif="gif",t.jfif="jfif",t.docx="docx",t.doc="doc",t.odt="odt",t.rtf="rtf",t.ods="ods",t.xlsx="xlsx",t.xls="xls",t.xlt="xlt",t.xla="xla",t.pptx="pptx",t.ppt="ppt",t.pdf="pdf",t.epub="epub",t.djvu="djvu",t.djv="djv",t.mobi="mobi",t.fb2="fb2",t.txt="txt",t.xml="xml",t.html="html",t.htm="htm",t.chm="chm"}(_t||(_t={})),function(t){t.instant="instant",t.file="file",t.fileConverter="fileConverter",t.fileUnlock="fileUnlock",t.fileCrop="fileCrop",t.split="split",t.delete="delete",t.rotate="rotate",t.rearrange="rearrange",t.perPage="perPage",t.editPdf="editPdf"}(St||(St={})),function(t){t.jpgToPdf="jpg-to-pdf",t.pngToPdf="png-to-pdf",t.bmpToPdf="bmp-to-pdf",t.tiffToPdf="tiff-to-pdf",t.pdfToJpg="pdf-to-jpg",t.pdfToPng="pdf-to-png",t.pdfToBmp="pdf-to-bmp",t.pdfToTiff="pdf-to-tiff",t.mergePdf="merge-pdf",t.compressPdf="compress-pdf",t.extractText="extract-text",t.extractImages="extract-images",t.pdfOcr="pdf-ocr",t.pdfResize="resize-pdf",t.protectPdf="protect-pdf",t.editPdf="edit-pdf",t.signPdf="sign-pdf",t.editMetadataPdf="edit-pdf-meta",t.addPdfPageNumbers="add-page-numbers",t.addPdfHeaderAndFooter="header-footer",t.addPdfWatermark="add-watermark",t.cropPdf="crop-pdf",t.splitPdf="split-pdf",t.deletePdf="delete-pages",t.rotatePdf="rotate-pdf",t.rearrangePdf="rearrange-pdf",t.pdfConverter="pdf-converter",t.unlockPdf="unlock-pdf",t.pdfToWord="pdf-to-word",t.pdfToDocx="pdf-to-docx",t.pdfToRtf="pdf-to-rtf",t.pdfToExcel="pdf-to-excel",t.wordToPdf="word-to-pdf",t.excelToPdf="excel-to-pdf",t.docxToPdf="docx-to-pdf",t.rtfToPdf="rtf-to-pdf",t.odtToPdf="odt-to-pdf",t.pdfToPpt="pdf-to-ppt",t.pptToPdf="ppt-to-pdf",t.htmlToPdf="html-to-pdf",t.xmlToPdf="xml-to-pdf",t.txtToPdf="txt-to-pdf",t.chmToPdf="chm-to-pdf",t.djvuToPdf="djvu-to-pdf",t.epubToPdf="epub-to-pdf",t.fb2ToPdf="fb2-to-pdf",t.mobiToPdf="mobi-to-pdf"}(wt||(wt={})),function(t){t.paperSize="paperSize",t.paperOrientation="paperOrientation",t.paperMargin="paperMargin",t.quality="quality",t.compress="compress",t.lang="lang",t.splitPdf="splitPdf",t.rotatePdf="rotatePdf",t.format="format",t.position="position"}(Ct||(Ct={})),function(t){t.a3="a3",t.a4="a4",t.a5="a5",t.original="original",t.usletter="usletter"}(Pt||(Pt={})),function(t){t.portrait="portrait",t.landscape="landscape",t.original="original"}(kt||(kt={})),function(t){t.no="no",t.small="small",t.big="big"}(xt||(xt={})),function(t){t.low="low",t.medium="medium",t.high="high"}(At||(At={})),function(t){t.maximum="maximum",t.recommended="recommended",t.minimum="minimum"}(It||(It={})),function(t){t.single="single",t.range="range",t.mergeSelected="mergeSelected",t.deleteSelected="deleteSelected"}(Tt||(Tt={})),function(t){t.all="all",t.portrait="portrait",t.landscape="landscape"}(Ot||(Ot={})),function(t){t.image="image",t.pdf="pdf",t.document="document",t.book="book",t.text="text",t.all="all"}(Et||(Et={})),function(t){t.service="service",t.object="object"}(Ft||(Ft={}));var IoCService_read=function(t,h){var y="function"==typeof Symbol&&t[Symbol.iterator];if(!y)return t;var w,A,T=y.call(t),E=[];try{for(;(void 0===h||h-- >0)&&!(w=T.next()).done;)E.push(w.value)}catch(t){A={error:t}}finally{try{w&&!w.done&&(y=T.return)&&y.call(T)}finally{if(A)throw A.error}}return E},__spreadArray=function(t,h){for(var y=0,w=h.length,A=t.length;y<w;y++,A++)t[A]=h[y];return t},Dt=function(){function IoCService(){if(this.services=new Map,IoCService.instance)throw new Error("service was registrated");IoCService.instance=this}return IoCService.prototype.registrate=function(t,h,y){this.services.set(h,{type:h,deps:y||[],instance:null,name:t})},IoCService.prototype.get=function(t){var h,y=this;if(this.hasService(t)){var w=this.services.get(t);if(w.instance)return w.instance;if(w.deps.length){var A=w.deps.map((function(t){return t.type===Ft.service?y.get(t.value):t.value}));w.instance=new((h=w.type).bind.apply(h,__spreadArray([void 0],IoCService_read(A))))}else w.instance=new w.type;return w.instance}throw new Error("Service was not registrated")},IoCService.prototype.hasService=function(t){return this.services.has(t)},IoCService.prototype.getByName=function(t){var h=Array.from(this.services.values()).find((function(h){return h.name===t}));return h?this.get(h.type):null},IoCService.prototype.hasServiceByName=function(t){return!!this.getByName(t)},IoCService.start=function(t){if(IoCService.instance)return IoCService.instance;var h=new IoCService;return t(h),h},IoCService.getContainer=function(){return this.instance},IoCService}(),Mt=function Mt(t,h){this.code=t,this.name=h},jt=function(){function LangFactory(){}return LangFactory.create=function(){var t=Dt.getContainer().getByName("TranslateService"),h=t.get("pdf-ocr-langs");"string"==typeof h&&(console.warn("langs is not correct from server",{langs:h,translate:t}),h=[]);var y=(h||[]).map((function(t){return new Mt(t.key,t.value)}));return y},LangFactory}(),Lt=function Lt(t){this.serviceProvider=Dt.getContainer().get(ys),this.helper=this.serviceProvider.domHelper,this.componentId=t||ke.createQuickGuidAsString()},Bt=function(){function ArgumentOutOfRangeErrorImpl(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return ArgumentOutOfRangeErrorImpl.prototype=Object.create(Error.prototype),ArgumentOutOfRangeErrorImpl}(),Nt=new W((function(t){return t.complete()}));function empty_empty(t){return t?function emptyScheduled(t){return new W((function(h){return t.schedule((function(){return h.complete()}))}))}(t):Nt}function take(t){return function(h){return 0===t?empty_empty():h.lift(new Vt(t))}}var Vt=function(){function TakeOperator(t){if(this.total=t,this.total<0)throw new Bt}return TakeOperator.prototype.call=function(t,h){return h.subscribe(new Ut(t,this.total))},TakeOperator}(),Ut=function(t){function TakeSubscriber(h,y){var w=t.call(this,h)||this;return w.total=y,w.count=0,w}return __extends(TakeSubscriber,t),TakeSubscriber.prototype._next=function(t){var h=this.total,y=++this.count;y<=h&&(this.destination.next(t),y===h&&(this.destination.complete(),this.unsubscribe()))},TakeSubscriber}(B),Wt=function(){var extendStatics=function(t,h){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,h){t.__proto__=h}||function(t,h){for(var y in h)Object.prototype.hasOwnProperty.call(h,y)&&(t[y]=h[y])},extendStatics(t,h)};return function(t,h){if("function"!=typeof h&&null!==h)throw new TypeError("Class extends value "+String(h)+" is not a constructor or null");function __(){this.constructor=t}extendStatics(t,h),t.prototype=null===h?Object.create(h):(__.prototype=h.prototype,new __)}}(),Ht=function(t){function BaseViewComponent(h,y){var w=t.call(this,y)||this;return w.parentId=h,w.destroyEvent=new J,w}return Wt(BaseViewComponent,t),Object.defineProperty(BaseViewComponent.prototype,"$parent",{get:function(){return this.helper.getById(this.parentId)},enumerable:!1,configurable:!0}),Object.defineProperty(BaseViewComponent.prototype,"$component",{get:function(){return this.helper.getById(this.componentId)},enumerable:!1,configurable:!0}),BaseViewComponent.prototype.init=function(){this.destroyed?console.warn("component destroyed:",{component:this}):(this.template=this.createTemplate(),this.appendTemplate(),this.bind())},BaseViewComponent.prototype.destroyComponent=function(){this.destroyEvent.next(),this.destroyEvent.complete(),this.onDestroy()},BaseViewComponent.prototype.getOnDestroy$=function(){return this.destroyEvent.asObservable().pipe(take(1))},BaseViewComponent.prototype.unbind=function(){this.helper.unbindRecursive(this.$component)},BaseViewComponent.prototype.onDestroy=function(){this.helper.destroyComponent(this.componentId),this.template="",this.destroyed=!0},BaseViewComponent.prototype.setTemplateValuesByModel=function(t,h){var y=t;return Object.keys(h).forEach((function(t){var w=new RegExp("@@"+t+"@@","g");y=y.replace(w,h[t])})),y},BaseViewComponent.prototype.appendTemplate=function(){this.helper.getById(this.parentId).append(this.template)},BaseViewComponent.prototype.createChildId=function(t,h){return(h||this.componentId)+"__"+t},BaseViewComponent.prototype.destroyChildren=function(t){var h=this;(t||[]).forEach((function(t){h[t]instanceof BaseViewComponent&&(h[t].destroyComponent(),h[t]=null)}))},BaseViewComponent}(Lt),Gt=function(){var extendStatics=function(t,h){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,h){t.__proto__=h}||function(t,h){for(var y in h)Object.prototype.hasOwnProperty.call(h,y)&&(t[y]=h[y])},extendStatics(t,h)};return function(t,h){if("function"!=typeof h&&null!==h)throw new TypeError("Class extends value "+String(h)+" is not a constructor or null");function __(){this.constructor=t}extendStatics(t,h),t.prototype=null===h?Object.create(h):(__.prototype=h.prototype,new __)}}(),zt=function(t){function BaseFooterComponent(h){var y=t.call(this,h)||this;return y.runJob=new Te(!1),y.runJob$=y.runJob.asObservable().pipe(takeUntil(y.destroyEvent),filter((function(t){return!!t}))),y.ids={componentId:y.componentId,btnRunJobId:ke.createQuickGuidAsString()},y}return Gt(BaseFooterComponent,t),BaseFooterComponent.prototype.init=function(){t.prototype.init.call(this),this.setFilesCount(0)},BaseFooterComponent.prototype.destroyComponent=function(){this.runJob.complete(),t.prototype.destroyComponent.call(this)},BaseFooterComponent.prototype.setRunJobDisabledState=function(t,h){void 0===h&&(h=!0),this.helper.toggleDisabled(this.$btnRunJob,t),h&&this.serviceProvider.viewerService.onRunJobDisabledChange(t)},BaseFooterComponent.prototype.setFilesCount=function(t,h){this.updateBtnLabel(this.getLabelKey(h),t)},BaseFooterComponent.prototype.setBtnLabel=function(t,h){this.updateBtnLabel(this.getLabelKey(t),h)},BaseFooterComponent.prototype.getDefaultLabelKey=function(){var t=this.serviceProvider.toolsConfigService.getConfigModel();return this.createLabelKey(t.toolName)},BaseFooterComponent.prototype.createLabelKey=function(t,h){return void 0===h&&(h="-start-processing"),t+h},BaseFooterComponent.prototype.bind=function(){var t=this,h=this.serviceProvider.viewerService;h.fileCountChange$.pipe(takeUntil(this.destroyEvent)).subscribe((function(h){return t.setFilesCount(h)})),h.runJobDisabledChange$.pipe(takeUntil(this.destroyEvent)).subscribe((function(h){return t.setRunJobDisabledState(h,!1)}))},Object.defineProperty(BaseFooterComponent.prototype,"$btnRunJob",{get:function(){return this.helper.getById(this.ids.btnRunJobId)},enumerable:!1,configurable:!0}),BaseFooterComponent.prototype.updateBtnLabel=function(t,h){var y=this.serviceProvider.Translate.get(t).replace("%s",h+""||"");this.$btnRunJob.html(y)},BaseFooterComponent.prototype.getLabelKey=function(t){return t||(t=this.getDefaultLabelKey()),this.lastLabelKey=t,t},BaseFooterComponent}(Ht),qt=function(){var extendStatics=function(t,h){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,h){t.__proto__=h}||function(t,h){for(var y in h)Object.prototype.hasOwnProperty.call(h,y)&&(t[y]=h[y])},extendStatics(t,h)};return function(t,h){if("function"!=typeof h&&null!==h)throw new TypeError("Class extends value "+String(h)+" is not a constructor or null");function __(){this.constructor=t}extendStatics(t,h),t.prototype=null===h?Object.create(h):(__.prototype=h.prototype,new __)}}(),$t=__webpack_require__(39378),Jt=function(t){function FooterSimpleComponent(h){var y=t.call(this,h)||this;return y.footerTypeCss="app-footer--simple",y.ids.formContainerId=ke.createQuickGuidAsString(),y.ids.popoverContainerId=ke.createQuickGuidAsString(),y}return qt(FooterSimpleComponent,t),FooterSimpleComponent.prototype.bind=function(){var h=this;t.prototype.bind.call(this),this.setFooterTypeCss(),this.$btnRunJob.on("click",(function(){h.helper.isDisabled(h.$btnRunJob)||h.runJob.next(!0)}))},FooterSimpleComponent.prototype.createTemplate=function(){return this.setTemplateValuesByModel($t,this.ids)},FooterSimpleComponent.prototype.setFooterTypeCss=function(){this.$component.addClass(this.footerTypeCss)},FooterSimpleComponent}(zt),Xt=function(){var extendStatics=function(t,h){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,h){t.__proto__=h}||function(t,h){for(var y in h)Object.prototype.hasOwnProperty.call(h,y)&&(t[y]=h[y])},extendStatics(t,h)};return function(t,h){if("function"!=typeof h&&null!==h)throw new TypeError("Class extends value "+String(h)+" is not a constructor or null");function __(){this.constructor=t}extendStatics(t,h),t.prototype=null===h?Object.create(h):(__.prototype=h.prototype,new __)}}(),Qt=function(t){function BaseHeaderComponent(h){var y=t.call(this,h)||this;return y.ids={componentId:y.componentId,btnStartOverId:ke.createQuickGuidAsString()},y}return Xt(BaseHeaderComponent,t),BaseHeaderComponent.prototype.setDisableState=function(t){},Object.defineProperty(BaseHeaderComponent.prototype,"$btnStartOver",{get:function(){return this.helper.getById(this.ids.btnStartOverId)},enumerable:!1,configurable:!0}),BaseHeaderComponent}(Ht),Kt=function(){function Icons(){}return Icons.svgSymbol=function(t,h,y){var w=this.createSvgIconUrl(y);return'<svg width="'+t+'" height="'+h+'"><use href="'+w+'" xlink:href="'+w+'"></use></svg>'},Icons.initToolIcons=function(t){this.resourcesRoot=t||this.resourcesRoot,this.GDrive=this.svgSymbol(23,20,"GDrive"),this.Rotate=this.svgSymbol(24,23,"Rotate"),this.Close=this.svgSymbol(26,26,"Close"),this.Search=this.svgSymbol(25,25,"Search"),this.DropBox=this.svgSymbol(23,22,"DropBox"),this.Device=this.svgSymbol(23,20,"Device"),this.formatPdf=this.svgSymbol(70,88,"formatPdf"),this.arrow=this.svgSymbol(42,30,"arrow"),this.lock=this.svgSymbol(15,20,"lock"),this.unlock=this.svgSymbol(15,20,"unlock"),this.Candy=this.svgSymbol(23,24,"Candy"),this.attention=this.svgSymbol(68,61,"attention"),this.bug=this.svgSymbol(19,19,"bug"),this.rotateRight=this.svgSymbol(26,26,"rotateRight"),this.rotateLeft=this.svgSymbol(26,26,"rotateLeft"),this.okGreen=this.svgSymbol(43,56,"ok-green"),this.okGray=this.svgSymbol(17,13,"ok-gray"),this.clean=this.svgSymbol(15,15,"clean"),this.trash=this.svgSymbol(36,43,"trash"),this.defaultIcon=this.svgSymbol(50,56,"defaultIcon"),this.aimSmall=this.svgSymbol(27,27,"aim"),this.aimMedium=this.svgSymbol(77,77,"aim"),this.freeLimit=this.svgSymbol(80,80,"freeLimit"),this.gear=this.svgSymbol(24,24,"gear"),this.image=this.svgSymbol(24,24,"image"),this.keyboard=this.svgSymbol(24,24,"keyboard"),this.plus=this.svgSymbol(24,24,"plus"),this.formatIcons=Object.create(null),this.formatIcons[_t.doc]=this.svgSymbol(50,56,"doc"),this.formatIcons[_t.docx]=this.svgSymbol(50,56,"docx"),this.formatIcons[_t.rtf]=this.svgSymbol(50,56,"rtf"),this.formatIcons[_t.odt]=this.svgSymbol(50,56,"odt"),this.formatIcons[_t.ods]=this.svgSymbol(50,56,"ods"),this.formatIcons[_t.xlsx]=this.svgSymbol(50,56,"xlsx"),this.formatIcons[_t.xls]=this.svgSymbol(50,56,"xls"),this.formatIcons[_t.pptx]=this.svgSymbol(50,56,"pptx"),this.formatIcons[_t.ppt]=this.svgSymbol(50,56,"ppt"),this.formatIcons[_t.pdf]=this.svgSymbol(50,56,"pdf"),this.formatIcons[_t.tiff]=this.svgSymbol(50,56,"tiff"),this.formatIcons[_t.bmp]=this.svgSymbol(50,56,"bmp"),this.formatIcons[_t.png]=this.svgSymbol(50,56,"png"),this.formatIcons[_t.jpg]=this.svgSymbol(50,56,"jpg"),this.formatIcons[_t.epub]=this.svgSymbol(49,56,"epub"),this.formatIcons[_t.mobi]=this.svgSymbol(50,56,"mobi"),this.formatIcons[_t.fb2]=this.svgSymbol(47,56,"fb2"),this.formatIcons[_t.djvu]=this.svgSymbol(50,56,"djvu"),this.formatIcons[_t.txt]=this.svgSymbol(50,56,"txt"),this.formatIcons[_t.xml]=this.svgSymbol(50,56,"xml"),this.formatIcons[_t.html]=this.svgSymbol(50,56,"html"),this.formatIcons[_t.chm]=this.svgSymbol(47,56,"chm"),this.formatIcons[_t.xlt]=this.formatIcons[_t.xla]=this.formatIcons[_t.xls],this.formatIcons[_t.tif]=this.formatIcons[_t.tiff],this.formatIcons[_t.jpeg]=this.formatIcons[_t.jpg],this.formatIcons[_t.djv]=this.formatIcons[_t.djvu]},Icons.createSvgIconUrl=function(t){return this.getIconRoot()+"/icons.svg#"+t},Icons.getIconRoot=function(){return this.resourcesRoot+"assets"},Icons.getToolIcon=function(t){return this.formatIcons[t]||this.defaultIcon},Icons.setDimensions=function(t,h){return $(t).attr("width",h.width).attr("height",h.height).get(0).outerHTML},Icons.resourcesRoot="",Icons}(),Yt=function(){var extendStatics=function(t,h){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,h){t.__proto__=h}||function(t,h){for(var y in h)Object.prototype.hasOwnProperty.call(h,y)&&(t[y]=h[y])},extendStatics(t,h)};return function(t,h){if("function"!=typeof h&&null!==h)throw new TypeError("Class extends value "+String(h)+" is not a constructor or null");function __(){this.constructor=t}extendStatics(t,h),t.prototype=null===h?Object.create(h):(__.prototype=h.prototype,new __)}}(),Zt=__webpack_require__(35700),er=function(t){function SimpleHeaderComponent(h,y){var w=t.call(this,h)||this;return w.state=y,w.hasSortable=!1,w}return Yt(SimpleHeaderComponent,t),SimpleHeaderComponent.prototype.startOver=function(){this.$btnStartOver.click()},SimpleHeaderComponent.prototype.bind=function(){var t=this;this.$btnStartOver.click((function(h){return h&&!h.isDefaultPrevented()&&(h.preventDefault(),t.serviceProvider.appService.onStartOver(t.state)),!1})),this.serviceProvider.appService.startOver$.subscribe()},SimpleHeaderComponent.prototype.createTemplate=function(){var t=this.serviceProvider.Translate,h=this.setTemplateValuesByModel(Zt,this.ids),y={btnStartOverIcon:Kt.Rotate,btnStartOverLabel:t.get("component-start-over")};return this.setTemplateValuesByModel(h,y)},SimpleHeaderComponent}(Qt);function map(t,h){return function mapOperation(y){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return y.lift(new rr(t,h))}}var tr,rr=function(){function MapOperator(t,h){this.project=t,this.thisArg=h}return MapOperator.prototype.call=function(t,h){return h.subscribe(new nr(t,this.project,this.thisArg))},MapOperator}(),nr=function(t){function MapSubscriber(h,y,w){var A=t.call(this,h)||this;return A.project=y,A.count=0,A.thisArg=w||A,A}return __extends(MapSubscriber,t),MapSubscriber.prototype._next=function(t){var h;try{h=this.project.call(this.thisArg,t,this.count++)}catch(t){return void this.destination.error(t)}this.destination.next(h)},MapSubscriber}(B);function fromEvent(t,h,y,A){return isFunction(y)&&(A=y,y=void 0),A?fromEvent(t,h,y).pipe(map((function(t){return w(t)?A.apply(void 0,t):A(t)}))):new W((function(w){setupSubscription(t,h,(function handler(t){arguments.length>1?w.next(Array.prototype.slice.call(arguments)):w.next(t)}),w,y)}))}function setupSubscription(t,h,y,w,A){var T;if(function isEventTarget(t){return t&&"function"==typeof t.addEventListener&&"function"==typeof t.removeEventListener}(t)){var E=t;t.addEventListener(h,y,A),T=function(){return E.removeEventListener(h,y,A)}}else if(function isJQueryStyleEventEmitter(t){return t&&"function"==typeof t.on&&"function"==typeof t.off}(t)){var j=t;t.on(h,y),T=function(){return j.off(h,y)}}else if(function isNodeStyleEventEmitter(t){return t&&"function"==typeof t.addListener&&"function"==typeof t.removeListener}(t)){var B=t;t.addListener(h,y),T=function(){return B.removeListener(h,y)}}else{if(!t||!t.length)throw new TypeError("Invalid event target");for(var N=0,V=t.length;N<V;N++)setupSubscription(t[N],h,y,w,A)}w.add(T)}!function(t){t.device="device",t.gDrive="gDrive",t.dropBox="dropBox"}(tr||(tr={}));var or,ir=function(){var extendStatics=function(t,h){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,h){t.__proto__=h}||function(t,h){for(var y in h)Object.prototype.hasOwnProperty.call(h,y)&&(t[y]=h[y])},extendStatics(t,h)};return function(t,h){if("function"!=typeof h&&null!==h)throw new TypeError("Class extends value "+String(h)+" is not a constructor or null");function __(){this.constructor=t}extendStatics(t,h),t.prototype=null===h?Object.create(h):(__.prototype=h.prototype,new __)}}(),ar=__webpack_require__(72088),sr={useExternalLink:!0},lr=function(t){function PopoverComponent(h,y){void 0===y&&(y={});var w=t.call(this,h)||this;w.css={hover:"--hover"};var A=w.serviceProvider.toolsConfigService.getConfigModel().use_external_services;return w.config=Object.assign({},sr,y,{useExternalLink:null==A||A}),w.ids={componentId:w.componentId,btnAddId:ke.createQuickGuidAsString(),btnAddLocalId:ke.createQuickGuidAsString(),btnAddGDriveId:ke.createQuickGuidAsString(),btnAddDropBoxId:ke.createQuickGuidAsString(),popoverLabelId:ke.createQuickGuidAsString()},w}return ir(PopoverComponent,t),PopoverComponent.prototype.setDisabledState=function(t){this.isDisabled=t},PopoverComponent.prototype.bind=function(){var t=this;this.initMedia();var clickHandler=function(h,y){if(!t.isDisabled)return h.isDefaultPrevented()||(h.preventDefault(),t.toggleHover(!1),t.serviceProvider.inputService.selectFile(y)),!1},click$=function(h){return fromEvent(t.helper.getById(h),"click").pipe(takeUntil(t.destroyEvent),map((function(t){return t})))};click$(this.ids.btnAddLocalId).subscribe((function(t){return clickHandler(t,tr.device)})),click$(this.ids.btnAddDropBoxId).subscribe((function(t){return clickHandler(t,tr.dropBox)})),click$(this.ids.btnAddGDriveId).subscribe((function(t){return clickHandler(t,tr.gDrive)}));var instantClick=function(h){t.serviceProvider.mediaService.isDesktopByWidth()?t.helper.getById(t.ids.btnAddLocalId).click():t.toggleHover(!t.isOpened())};click$(this.ids.btnAddId).subscribe((function(t){return instantClick()})),click$(this.ids.popoverLabelId).subscribe((function(t){return instantClick()})),fromEvent($(".app-popover--box-spacer"),"click").pipe(takeUntil(this.destroyEvent),map((function(t){return t})),filter((function(t){return!t.isDefaultPrevented()}))).subscribe((function(t){return instantClick()}));var onHover=function(h){t.serviceProvider.mediaService.isDesktopByWidth()&&t.toggleHover(h)};this.$component.hover((function(){return onHover(!0)}),(function(){return onHover(!1)}))},PopoverComponent.prototype.createTemplate=function(){var t=this.setTemplateValuesByModel(ar,this.ids),h=this.serviceProvider.Translate,y={popoverLabel:h.get("component-add-more-files"),useExternalLinks:this.config.useExternalLink?"":"display-none",btnAddGDriveIcon:Kt.GDrive,btnAddGDriveLabel:h.get("tooltip-from-gdrive"),btnAddDropBoxIcon:Kt.DropBox,btnAddDropBoxLabel:h.get("tooltip-from-dropbox"),btnAddLocalIcon:Kt.Device,btnAddLocalLabel:h.get("tooltip-from-device")};return this.setTemplateValuesByModel(t,y)},PopoverComponent.prototype.toggleHover=function(t){this.$component.toggleClass(this.css.hover,t)},PopoverComponent.prototype.initMedia=function(){var t=this;this.serviceProvider.mediaService.change$.pipe(takeUntil(this.destroyEvent)).subscribe((function(h){t.helper.getById(t.ids.popoverLabelId).toggleClass(t.helper.css.displayNone,!h.isDesktopByWidth)}))},PopoverComponent.prototype.isOpened=function(){return this.$component.hasClass(this.css.hover)},PopoverComponent}(Ht),cr=function(){var extendStatics=function(t,h){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,h){t.__proto__=h}||function(t,h){for(var y in h)Object.prototype.hasOwnProperty.call(h,y)&&(t[y]=h[y])},extendStatics(t,h)};return function(t,h){if("function"!=typeof h&&null!==h)throw new TypeError("Class extends value "+String(h)+" is not a constructor or null");function __(){this.constructor=t}extendStatics(t,h),t.prototype=null===h?Object.create(h):(__.prototype=h.prototype,new __)}}(),ur=function(t){function ConfigurableFooter(h,y){var w=t.call(this,h)||this;return w.innerComponentsFactory=y,w.components=[],w}return cr(ConfigurableFooter,t),Object.defineProperty(ConfigurableFooter.prototype,"$popover",{get:function(){return this.helper.getById(this.ids.popoverContainerId)},enumerable:!1,configurable:!0}),Object.defineProperty(ConfigurableFooter.prototype,"$form",{get:function(){return this.helper.getById(this.ids.formContainerId)},enumerable:!1,configurable:!0}),ConfigurableFooter.prototype.bind=function(){t.prototype.bind.call(this);var h=this.helper.css.displayNone;this.innerComponentsFactory.popover&&(this.popover=this.innerComponentsFactory.popover(this.ids.popoverContainerId),this.popover.init(),this.onPopoverInit(),this.components.push(this.popover)),this.innerComponentsFactory.form&&(this.form=this.innerComponentsFactory.form(this.ids.formContainerId),this.form.init(),this.$form.removeClass(h),this.components.push(this.form))},ConfigurableFooter.prototype.getFormComponent=function(){if(!this.form)throw new Error("!this.form");return this.form},ConfigurableFooter.prototype.onPopoverInit=function(){this.$popover.removeClass(this.helper.css.displayNone)},ConfigurableFooter.prototype.onDestroy=function(){this.components.forEach((function(t){return t.destroyComponent()})),this.destroyChildren(["form"]),t.prototype.onDestroy.call(this)},ConfigurableFooter}(Jt),pr=function(){var extendStatics=function(t,h){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,h){t.__proto__=h}||function(t,h){for(var y in h)Object.prototype.hasOwnProperty.call(h,y)&&(t[y]=h[y])},extendStatics(t,h)};return function(t,h){if("function"!=typeof h&&null!==h)throw new TypeError("Class extends value "+String(h)+" is not a constructor or null");function __(){this.constructor=t}extendStatics(t,h),t.prototype=null===h?Object.create(h):(__.prototype=h.prototype,new __)}}(),dr=function(t){function FooterWithPopover(h){var y=t.call(this,h,{popover:function(t){return new lr(t)}})||this;return y.footerTypeCss="app-footer--with-popover",y}return pr(FooterWithPopover,t),FooterWithPopover}(ur);!function(t){t.none="",t.asc="asc",t.desc="desc"}(or||(or={}));var fr=function(){var extendStatics=function(t,h){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,h){t.__proto__=h}||function(t,h){for(var y in h)Object.prototype.hasOwnProperty.call(h,y)&&(t[y]=h[y])},extendStatics(t,h)};return function(t,h){if("function"!=typeof h&&null!==h)throw new TypeError("Class extends value "+String(h)+" is not a constructor or null");function __(){this.constructor=t}extendStatics(t,h),t.prototype=null===h?Object.create(h):(__.prototype=h.prototype,new __)}}(),hr=__webpack_require__(48414),vr=function(t){function SortableHeaderComponent(h,y){var w=t.call(this,h,y)||this;return w.ascLabel="A-Z",w.descLabel="Z-A",w.hasSortable=!0,w.sort=new J,w.sort$=w.sort.asObservable().pipe(takeUntil(w.destroyEvent)),w.viewModel={ascLabel:"",sortLabel:"",descLabel:"",btnAskId:ke.createQuickGuidAsString(),btnDescId:ke.createQuickGuidAsString()},w}return fr(SortableHeaderComponent,t),SortableHeaderComponent.prototype.createTemplate=function(){var h=t.prototype.createTemplate.call(this),y=$(h),w=this.serviceProvider.Translate;this.viewModel.sortLabel=w.get("component-order-by"),this.viewModel.ascLabel=this.ascLabel,this.viewModel.descLabel=this.descLabel;var A=this.setTemplateValuesByModel(hr,Object.assign(this.viewModel));return y.prepend(A).get(0).outerHTML},SortableHeaderComponent.prototype.bind=function(){var h=this;t.prototype.bind.call(this),this.helper.getById(this.viewModel.btnAskId).click((function(){h.sort.next(or.asc)})),this.helper.getById(this.viewModel.btnDescId).click((function(){h.sort.next(or.desc)}))},SortableHeaderComponent.prototype.destroyComponent=function(){this.sort.complete(),t.prototype.destroyComponent.call(this)},SortableHeaderComponent}(er),mr=function(){var extendStatics=function(t,h){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,h){t.__proto__=h}||function(t,h){for(var y in h)Object.prototype.hasOwnProperty.call(h,y)&&(t[y]=h[y])},extendStatics(t,h)};return function(t,h){if("function"!=typeof h&&null!==h)throw new TypeError("Class extends value "+String(h)+" is not a constructor or null");function __(){this.constructor=t}extendStatics(t,h),t.prototype=null===h?Object.create(h):(__.prototype=h.prototype,new __)}}(),yr=function(t){function FooterWithPopoverAndForm(h,y){var w=t.call(this,h,{popover:function(t){return new lr(t)},form:y})||this;return w.footerTypeCss="app-footer--with-popover-and-form",w}return mr(FooterWithPopoverAndForm,t),FooterWithPopoverAndForm}(ur);function noop(){}function tap(t,h,y){return function tapOperatorFunction(w){return w.lift(new br(t,h,y))}}var gr,br=function(){function DoOperator(t,h,y){this.nextOrObserver=t,this.error=h,this.complete=y}return DoOperator.prototype.call=function(t,h){return h.subscribe(new _r(t,this.nextOrObserver,this.error,this.complete))},DoOperator}(),_r=function(t){function TapSubscriber(h,y,w,A){var T=t.call(this,h)||this;return T._tapNext=noop,T._tapError=noop,T._tapComplete=noop,T._tapError=w||noop,T._tapComplete=A||noop,isFunction(y)?(T._context=T,T._tapNext=y):y&&(T._context=y,T._tapNext=y.next||noop,T._tapError=y.error||noop,T._tapComplete=y.complete||noop),T}return __extends(TapSubscriber,t),TapSubscriber.prototype._next=function(t){try{this._tapNext.call(this._context,t)}catch(t){return void this.destination.error(t)}this.destination.next(t)},TapSubscriber.prototype._error=function(t){try{this._tapError.call(this._context,t)}catch(t){return void this.destination.error(t)}this.destination.error(t)},TapSubscriber.prototype._complete=function(){try{this._tapComplete.call(this._context)}catch(t){return void this.destination.error(t)}return this.destination.complete()},TapSubscriber}(B);!function(t){t.select="select",t.text="text",t.number="number",t.password="password"}(gr||(gr={}));var Sr=function(){var extendStatics=function(t,h){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,h){t.__proto__=h}||function(t,h){for(var y in h)Object.prototype.hasOwnProperty.call(h,y)&&(t[y]=h[y])},extendStatics(t,h)};return function(t,h){if("function"!=typeof h&&null!==h)throw new TypeError("Class extends value "+String(h)+" is not a constructor or null");function __(){this.constructor=t}extendStatics(t,h),t.prototype=null===h?Object.create(h):(__.prototype=h.prototype,new __)}}(),wr=__webpack_require__(91139),Cr=function(t){function SelectControlComponent(h,y,w){var A=t.call(this,h)||this;return A.key=y,A.opts=w,A.type=gr.select,A.ids={componentId:A.componentId,selectId:A.createChildId("select"),labelId:A.createChildId("label")},A.change=new Te(null),A.change$=A.change.asObservable().pipe(takeUntil(A.destroyEvent),filter((function(t){return null!==t}))),A.validationChange=new J,A.validationChange$=A.validationChange.asObservable().pipe(takeUntil(A.destroyEvent)),A.valid=!0,A}return Sr(SelectControlComponent,t),SelectControlComponent.prototype.setValueByKey=function(t){var h=this.$select.find("[data-key='"+t+"']");h.length&&this.$select.val(h.val()).trigger("change")},SelectControlComponent.prototype.setValue=function(t){this.setValueByKey(t.key)},SelectControlComponent.prototype.setDisableState=function(t){this.helper.toggleDisabled(this.$select,t)},SelectControlComponent.prototype.getValue=function(){return this.$select.val()},SelectControlComponent.prototype.destroyComponent=function(){this.change.complete(),this.validationChange.complete(),t.prototype.destroyComponent.call(this)},SelectControlComponent.prototype.isDisabled=function(){return this.helper.isDisabled(this.$select)},SelectControlComponent.prototype.isValid=function(){return this.valid},SelectControlComponent.prototype.setValidation=function(t){this.valid=t,this.validationChange.next(t)},SelectControlComponent.prototype.getOptions=function(){return this.opts.options},SelectControlComponent.prototype.createTemplate=function(){var t=this.setTemplateValuesByModel(wr,this.ids),h=this.opts.labelKey||"",y="";h&&(y=this.serviceProvider.Translate.get(h));var w={formGroupCss:this.opts.formGroupCss||"",options:this.createViewOptions(this.opts.options),label:y};return this.setTemplateValuesByModel(t,w)},SelectControlComponent.prototype.bind=function(){var t=this;this.$select.off("change").on("change",(function(){var h=t.$select.find("option:selected").data("key"),y=t.opts.options.find((function(t){return t.key===h}));t.change.next(y)}))},Object.defineProperty(SelectControlComponent.prototype,"$select",{get:function(){return this.helper.getById(this.ids.selectId)},enumerable:!1,configurable:!0}),SelectControlComponent.prototype.createViewOptions=function(t){var h="",y=this.serviceProvider.Translate;return t.forEach((function(t){h+='<option data-key="'+t.key+'" value="'+t.value+'">'+y.get(t.text)+"</option>"})),h},SelectControlComponent}(Ht),Pr=function(){function OptionFactory(){}return OptionFactory.create=function(){var t;return(t={})[Ct.paperSize]=this.paperSize(),t[Ct.paperOrientation]=[{key:kt.portrait,text:"component-position-portrait",value:kt.portrait},{key:kt.landscape,text:"component-position-landscape",value:kt.landscape},{key:kt.original,text:"component-position-original",value:kt.original}],t[Ct.paperMargin]=[{key:xt.no,text:"component-margin-no",value:0},{key:xt.small,text:"component-margin-small",value:25},{key:xt.big,text:"component-margin-big",value:50}],t[Ct.quality]=[{key:At.low,text:"component-quality-low",value:At.low},{key:At.medium,text:"component-quality-medium",value:At.medium},{key:At.high,text:"component-quality-high",value:At.high}],t[Ct.compress]=[{key:It.recommended,text:"component-recommended",value:It.recommended},{key:It.maximum,text:"component-maximum",value:It.maximum}],t[Ct.lang]=jt.create().map((function(t){return{key:t.code,text:t.name,value:t.code}})),t[Ct.splitPdf]=this.splitPdfMode(),t[Ct.rotatePdf]=this.rotatePdfMode(),t[Ct.format]=null,t[Ct.position]=null,t},OptionFactory.splitPdfMode=function(){return[{key:Tt.single,text:"component-mode1",value:Tt.single},{key:Tt.range,text:"component-mode2",value:Tt.range},{key:Tt.mergeSelected,text:"component-mode3",value:Tt.mergeSelected},{key:Tt.deleteSelected,text:"component-mode4",value:Tt.deleteSelected}]},OptionFactory.paperSize=function(){return[{key:Pt.a3,text:"component-size-a3",value:"842,1190"},{key:Pt.a4,text:"component-size-a4",value:"595,842"},{key:Pt.a5,text:"component-size-a5",value:"420,595"},{key:Pt.original,text:"component-size-original",value:""},{key:Pt.usletter,text:"component-size-usletter",value:"612,792"}]},OptionFactory.rotatePdfMode=function(){return[{key:Ot.all,text:"component-all-pages",value:Ot.all},{key:Ot.portrait,text:"component-portrait-pages",value:Ot.portrait},{key:Ot.landscape,text:"component-landscape-pages",value:Ot.landscape}]},OptionFactory}(),kr=function(){var extendStatics=function(t,h){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,h){t.__proto__=h}||function(t,h){for(var y in h)Object.prototype.hasOwnProperty.call(h,y)&&(t[y]=h[y])},extendStatics(t,h)};return function(t,h){if("function"!=typeof h&&null!==h)throw new TypeError("Class extends value "+String(h)+" is not a constructor or null");function __(){this.constructor=t}extendStatics(t,h),t.prototype=null===h?Object.create(h):(__.prototype=h.prototype,new __)}}(),xr=function(t){function FormComponent(h){var y=t.call(this,h)||this;return y.disabled=!1,y.css={parent:"form--list"},y.change=new J,y.change$=y.getChange$(),y}return kr(FormComponent,t),FormComponent.prototype.init=function(){var h=this;this.createControls(),this.change$.subscribe((function(t){return h.onValueChanged(t)})),t.prototype.init.call(this)},FormComponent.prototype.destroyComponent=function(){this.change.complete(),this.change$=null,this.getControls().forEach((function(t){return t.component.destroyComponent()})),t.prototype.destroyComponent.call(this)},FormComponent.prototype.setDisableState=function(t){this.disabled=t,this.getControls().forEach((function(h){return h.component.setDisableState(t)}))},FormComponent.prototype.setValue=function(t){this.onValueChanged(t)},FormComponent.prototype.isDisabled=function(){return this.disabled},FormComponent.prototype.isValid=function(){return this.getControls().every((function(t){return t.component.isValid()}))},FormComponent.prototype.bind=function(){var t=this;this.$parent.addClass(this.css.parent),this.getControls().forEach((function(h){h.component.init(),t.bindControl(h)}))},FormComponent.prototype.getChange$=function(){return this.change.asObservable().pipe(takeUntil(this.destroyEvent),debounceTime(100))},FormComponent.prototype.getControl=function(t){return this.getControls().find((function(h){return h.component.key===t}))},FormComponent}(Ht),Ar=function(){var extendStatics=function(t,h){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,h){t.__proto__=h}||function(t,h){for(var y in h)Object.prototype.hasOwnProperty.call(h,y)&&(t[y]=h[y])},extendStatics(t,h)};return function(t,h){if("function"!=typeof h&&null!==h)throw new TypeError("Class extends value "+String(h)+" is not a constructor or null");function __(){this.constructor=t}extendStatics(t,h),t.prototype=null===h?Object.create(h):(__.prototype=h.prototype,new __)}}(),Ir=function(t){function SelectFormComponent(h){var y=t.call(this,h)||this;return y.controls=[],y.allOptions=Pr.create(),y}return Ar(SelectFormComponent,t),SelectFormComponent.prototype.createTemplate=function(){return""},SelectFormComponent.prototype.getControls=function(){return this.controls},SelectFormComponent.prototype.onValueChanged=function(t){var h=this;this.serviceProvider.toolOptionService.useDefaultOption()&&Object.keys(t).forEach((function(y){h.serviceProvider.toolOptionService.setDefault(y,t[y])})),this.serviceProvider.toolOptionService.saveCurrentOptions(t)},SelectFormComponent.prototype.createControls=function(){var t=this;this.currentOptionContainer=Object.create(null),this.serviceProvider.toolsConfigService.getToolConfig().options.forEach((function(h){var y=t.getOptions(h);if(y&&y.length){var w=h.isHiddenLabel?"":"ui-"+h.key,A=new Cr(t.parentId,h.key,{options:y,labelKey:w,formGroupCss:h.selectCss});t.controls.push({component:A,config:h})}}))},SelectFormComponent.prototype.bindControl=function(t){var h=this,y=this.serviceProvider.toolOptionService.getDefault(t.config.key);if(y){var w=this.allOptions[t.config.key].find((function(t){return t.value.toString()===y.toString()}));t.component.setValueByKey(w.key)}else if(t.config.key===Ct.paperSize){t.component.setValueByKey(t.config.default)}else t.component.setValueByKey(t.config.default);this.currentOptionContainer[t.config.key]=t.component.getValue(),t.component.change$.pipe(takeUntil(this.destroyEvent),tap((function(y){h.currentOptionContainer[t.config.key]=y.value,h.change.next(h.currentOptionContainer)}))).subscribe()},SelectFormComponent.prototype.getOptions=function(t){var h=this.allOptions;return t.values.map((function(y){if(h[t.key]&&h[t.key]instanceof Array){var w=h[t.key].find((function(t){return t.key===y}));if(w)return at.asTypeRecursion(w)}})).filter((function(t){return!!t}))},SelectFormComponent}(xr);function isScheduler(t){return t&&"function"==typeof t.schedule}function scheduleArray(t,h){return new W((function(y){var w=new E,A=0;return w.add(h.schedule((function(){A!==t.length?(y.next(t[A++]),y.closed||w.add(this.schedule())):y.complete()}))),w}))}function fromArray(t,h){return h?scheduleArray(t,h):new W(subscribeToArray(t))}var Tr={};function combineLatest(){for(var t=[],h=0;h<arguments.length;h++)t[h]=arguments[h];var y=null,A=null;return isScheduler(t[t.length-1])&&(A=t.pop()),"function"==typeof t[t.length-1]&&(y=t.pop()),1===t.length&&w(t[0])&&(t=t[0]),fromArray(t,A).lift(new Or(y))}var Or=function(){function CombineLatestOperator(t){this.resultSelector=t}return CombineLatestOperator.prototype.call=function(t,h){return h.subscribe(new Er(t,this.resultSelector))},CombineLatestOperator}(),Er=function(t){function CombineLatestSubscriber(h,y){var w=t.call(this,h)||this;return w.resultSelector=y,w.active=0,w.values=[],w.observables=[],w}return __extends(CombineLatestSubscriber,t),CombineLatestSubscriber.prototype._next=function(t){this.values.push(Tr),this.observables.push(t)},CombineLatestSubscriber.prototype._complete=function(){var t=this.observables,h=t.length;if(0===h)this.destination.complete();else{this.active=h,this.toRespond=h;for(var y=0;y<h;y++){var w=t[y];this.add(subscribeToResult(this,w,w,y))}}},CombineLatestSubscriber.prototype.notifyComplete=function(t){0==(this.active-=1)&&this.destination.complete()},CombineLatestSubscriber.prototype.notifyNext=function(t,h,y,w,A){var T=this.values,E=T[y],j=this.toRespond?E===Tr?--this.toRespond:this.toRespond:0;T[y]=h,0===j&&(this.resultSelector?this._tryResultSelector(T):this.destination.next(T.slice()))},CombineLatestSubscriber.prototype._tryResultSelector=function(t){var h;try{h=this.resultSelector.apply(this,t)}catch(t){return void this.destination.error(t)}this.destination.next(h)},CombineLatestSubscriber}(ue),Fr=function(){var extendStatics=function(t,h){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,h){t.__proto__=h}||function(t,h){for(var y in h)Object.prototype.hasOwnProperty.call(h,y)&&(t[y]=h[y])},extendStatics(t,h)};return function(t,h){if("function"!=typeof h&&null!==h)throw new TypeError("Class extends value "+String(h)+" is not a constructor or null");function __(){this.constructor=t}extendStatics(t,h),t.prototype=null===h?Object.create(h):(__.prototype=h.prototype,new __)}}(),ImageToPdfForm_read=function(t,h){var y="function"==typeof Symbol&&t[Symbol.iterator];if(!y)return t;var w,A,T=y.call(t),E=[];try{for(;(void 0===h||h-- >0)&&!(w=T.next()).done;)E.push(w.value)}catch(t){A={error:t}}finally{try{w&&!w.done&&(y=T.return)&&y.call(T)}finally{if(A)throw A.error}}return E},ImageToPdfForm_spreadArray=function(t,h){for(var y=0,w=h.length,A=t.length;y<w;y++,A++)t[A]=h[y];return t},Rr=function(t){function ImageToPdfForm(h){var y=t.call(this,h)||this;y.itemBgColor="#FFFFFF";var w=y.serviceProvider.viewerService.getMinMaxItemValue();return y.documentSide=w.max,y}return Fr(ImageToPdfForm,t),ImageToPdfForm.prototype.destroyComponent=function(){this.$parent.removeClass(this.helper.css.displayNone),t.prototype.destroyComponent.call(this)},ImageToPdfForm.prototype.bind=function(){var h=this;combineLatest([this.getChange$(),this.serviceProvider.viewerService.viewItemsChange$]).pipe(takeUntil(this.destroyEvent)).subscribe((function(t){var y=ImageToPdfForm_read(t,2),w=y[0],A=y[1];A&&A.length&&h.changeItems(w,A)})),t.prototype.bind.call(this)},ImageToPdfForm.prototype.getChange$=function(){var h=this;return t.prototype.getChange$.call(this).pipe(map((function(t){return h.onChange(t)})))},ImageToPdfForm.prototype.onChange=function(t){var h=this.getControl(Ct.paperOrientation);return""===t.paperSize?(h.component.setDisableState(!0),h.component.getValue()!==kt.original&&h.component.setValueByKey(kt.original)):h.component.isDisabled()&&h.component.setDisableState(!1),t},ImageToPdfForm.prototype.changeItems=function(t,h){var y=this;h.forEach((function(h){var w=h.getImageContainer(),A=w.find(".page-item--svg-container");!!A.length?(w.addClass("--svg"),A.addClass(y.helper.css.boxShadow)):w.css({"background-color":y.itemBgColor}).addClass(y.helper.css.boxShadow),h.imageChange$.pipe(take(1)).subscribe((function(){y.setImgSize(h.getImageContainer(),t);var w=!y.serviceProvider.toolOptionService.getPaperSize(t);y.helper.getById(h.componentId).toggleClass("page-item--original-szie",w)}))}))},ImageToPdfForm.prototype.setImgSize=function(t,h){var y=!1,w=this.serviceProvider.toolOptionService.getPaperSize(h);w||(y=!0,w=[]);var A=+h[Ct.paperMargin]||0,T=0;A&&(T=+A/5);var E=ImageToPdfForm_spreadArray([],ImageToPdfForm_read(w)),j=t.find(".page-item--image"),B=this.helper.getImageSize(j),N=h[Ct.paperOrientation],V=B.width/B.height;N===kt.landscape?E=E.reverse():N===kt.original&&(y&&(E=[B.width,B.height]),V>1&&(E=E.reverse()));var W=this.setListSize(E,y,t);this.setImageSize(W,B,j,T,V)},ImageToPdfForm.prototype.setListSize=function(t,h,y){if(h)return y.removeAttr("style"),y.css({"background-color":this.itemBgColor,"min-height":"initial","min-width":"initial"}),[];var w=Math.max.apply(Math,ImageToPdfForm_spreadArray([],ImageToPdfForm_read(t)))/this.documentSide,A=ImageToPdfForm_read(t.map((function(t){return t/w})),2),T=A[0],E=T/A[1],j=void 0,B=void 0;return E>1?(j=T/E,B=this.documentSide):B=(j=this.documentSide)*E,y.css({width:B,height:j,"min-width":B,"min-height":j,"background-color":this.itemBgColor}),[B,j]},ImageToPdfForm.prototype.setImageSize=function(t,h,y,w,A){t&&t.length||(t=[h.width,h.height]);var T,E=[h.width,h.height],j=ImageToPdfForm_read(t,2),B=j[0],N=j[1];T=B/N>1?A>1?Math.max.apply(Math,ImageToPdfForm_spreadArray([],ImageToPdfForm_read(t))):Math.min.apply(Math,ImageToPdfForm_spreadArray([],ImageToPdfForm_read(t))):A>=1?Math.min.apply(Math,ImageToPdfForm_spreadArray([],ImageToPdfForm_read(t))):Math.max.apply(Math,ImageToPdfForm_spreadArray([],ImageToPdfForm_read(t)));var V=Math.max.apply(Math,ImageToPdfForm_spreadArray([],ImageToPdfForm_read(E)))/T,W=E.map((function(t){return t/V})),H=ImageToPdfForm_read(W,2),G=H[0],z=H[1];G<=B&&z<=N||G>B&&z>N||(G>B&&z<=N?(W[0]=B,W[1]=A>1?B*A:B/A):G<=B&&z>N&&(W[1]=N,W[0]=A>1?N*A:N/A));var $=W.map((function(t){return t-3-2*w})),J=ImageToPdfForm_read($,2),X=J[0],K=J[1];y.css({width:X+"px",height:K+"px",margin:w+"px"})},ImageToPdfForm}(Ir),Dr=function(){var extendStatics=function(t,h){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,h){t.__proto__=h}||function(t,h){for(var y in h)Object.prototype.hasOwnProperty.call(h,y)&&(t[y]=h[y])},extendStatics(t,h)};return function(t,h){if("function"!=typeof h&&null!==h)throw new TypeError("Class extends value "+String(h)+" is not a constructor or null");function __(){this.constructor=t}extendStatics(t,h),t.prototype=null===h?Object.create(h):(__.prototype=h.prototype,new __)}}(),Mr=function(t){function FooterWithForm(h,y){var w=t.call(this,h,{form:y})||this;return w.footerTypeCss="app-footer--with-form",w}return Dr(FooterWithForm,t),FooterWithForm}(ur),jr=function(){var extendStatics=function(t,h){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,h){t.__proto__=h}||function(t,h){for(var y in h)Object.prototype.hasOwnProperty.call(h,y)&&(t[y]=h[y])},extendStatics(t,h)};return function(t,h){if("function"!=typeof h&&null!==h)throw new TypeError("Class extends value "+String(h)+" is not a constructor or null");function __(){this.constructor=t}extendStatics(t,h),t.prototype=null===h?Object.create(h):(__.prototype=h.prototype,new __)}}(),Lr=function(t){function ResizeHeaderComponent(h,y){var w=t.call(this,h,y)||this;return w.state=y,w.hasSortable=!1,w}return jr(ResizeHeaderComponent,t),ResizeHeaderComponent.prototype.createTemplate=function(){var h=t.prototype.createTemplate.call(this),y=this.serviceProvider.Translate.get("component-compress-instead-reduce");return h+('<div id="'+ke.createQuickGuid()+'" class="preview--notification"><div class="preview--notification-content">'+y+"</div></div>")},ResizeHeaderComponent}(er),Br=function(){var extendStatics=function(t,h){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,h){t.__proto__=h}||function(t,h){for(var y in h)Object.prototype.hasOwnProperty.call(h,y)&&(t[y]=h[y])},extendStatics(t,h)};return function(t,h){if("function"!=typeof h&&null!==h)throw new TypeError("Class extends value "+String(h)+" is not a constructor or null");function __(){this.constructor=t}extendStatics(t,h),t.prototype=null===h?Object.create(h):(__.prototype=h.prototype,new __)}}(),Nr=__webpack_require__(15520),Vr=function(t){function InputControlComponent(h,y,w){var A=t.call(this,h)||this;return A.key=y,A.opts=w,A.css={invalid:"is-invalid"},A.ids={componentId:A.componentId,inputId:A.createChildId("input"),labelId:A.createChildId("label"),resetBtnId:A.createChildId("btn__reset"),prefixBtnId:A.createChildId("btn__prefix"),errorContainerId:A.createChildId("error-container")},A.type=w.inputType||gr.text,A.change=new J,A.change$=A.change.asObservable().pipe(takeUntil(A.destroyEvent),filter((function(t){return null!==t}))),A.input=new J,A.input$=A.input.asObservable().pipe(takeUntil(A.destroyEvent)),A.validationChange=new J,A.validationChange$=A.validationChange.asObservable().pipe(takeUntil(A.destroyEvent)),A.valid=!0,A}return Br(InputControlComponent,t),Object.defineProperty(InputControlComponent.prototype,"$input",{get:function(){return this.helper.getById(this.ids.inputId)},enumerable:!1,configurable:!0}),Object.defineProperty(InputControlComponent.prototype,"$btnReset",{get:function(){return this.helper.getById(this.ids.resetBtnId)},enumerable:!1,configurable:!0}),InputControlComponent.prototype.setValue=function(t){this.opts.useResetBtn&&this.setResetBtnVisible(!!t),this.$input.val(t),this.change.next(t)},InputControlComponent.prototype.setDisableState=function(t){this.helper.toggleDisabled(this.$input,t),this.helper.toggleDisabled(this.$btnReset,t)},InputControlComponent.prototype.setResetBtnVisible=function(t){this.$btnReset.toggleClass(this.helper.css.displayNone,!t)},InputControlComponent.prototype.setPrefixIcon=function(t){this.helper.getById(this.ids.prefixBtnId).html(t)},InputControlComponent.prototype.showError=function(t){this.setError(t)},InputControlComponent.prototype.hideError=function(){this.setError()},InputControlComponent.prototype.getValue=function(){return this.$input.val()},InputControlComponent.prototype.destroyComponent=function(){this.change.complete(),this.validationChange.complete(),t.prototype.destroyComponent.call(this)},InputControlComponent.prototype.isDisabled=function(){return this.helper.isDisabled(this.$input)},InputControlComponent.prototype.isValid=function(){return this.valid},InputControlComponent.prototype.setValidation=function(t){this.valid=t,this.$input.toggleClass(this.css.invalid,!t),this.$component.toggleClass(this.css.invalid,!t),this.validationChange.next(t)},InputControlComponent.prototype.focus=function(){this.$input.focus()},InputControlComponent.prototype.createTemplate=function(){var t=this.setTemplateValuesByModel(Nr,this.ids),h=this.serviceProvider.Translate,y=this.opts.labelKey||"",w="";y&&(w=h.get(y));var A=this.opts.placeholderKey||"",T="";A&&(T=h.get(A));var E={formGroupCss:this.opts.formGroupCss||"",inputType:this.type,label:w,inputName:this.key,placeholder:T,iconReset:Kt.clean};return this.opts.useResetBtn&&(E.formGroupCss+=" icon--reset"),this.opts.usePrefixIcon&&(E.formGroupCss+=" icon--prefix"),this.setTemplateValuesByModel(t,E)},InputControlComponent.prototype.bind=function(){var t=this,h=this.$input;this.opts.inputType===gr.password&&h.attr("autocomplete","off"),h.on("change",(function(){return t.change.next(t.$input.val())})).on("input",(function(h){t.input.next({event:h,value:t.$input.val()})})),this.opts.useResetBtn&&this.$btnReset.click((function(){return t.setValue("")}))},InputControlComponent.prototype.setError=function(t){void 0===t&&(t=""),this.helper.getById(this.ids.errorContainerId).toggleClass(this.helper.css.displayNone,!t).html(t)},InputControlComponent}(Ht),Ur=function(){var extendStatics=function(t,h){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,h){t.__proto__=h}||function(t,h){for(var y in h)Object.prototype.hasOwnProperty.call(h,y)&&(t[y]=h[y])},extendStatics(t,h)};return function(t,h){if("function"!=typeof h&&null!==h)throw new TypeError("Class extends value "+String(h)+" is not a constructor or null");function __(){this.constructor=t}extendStatics(t,h),t.prototype=null===h?Object.create(h):(__.prototype=h.prototype,new __)}}(),Wr=function(t){function MixedFormComponent(h){var y=t.call(this,h)||this;return y.controls=[],y}return Ur(MixedFormComponent,t),MixedFormComponent.prototype.init=function(){this.toolConfig=this.serviceProvider.toolsConfigService.getToolConfig(),t.prototype.init.call(this)},MixedFormComponent.prototype.createTemplate=function(){return""},MixedFormComponent.prototype.getControls=function(){return this.controls},MixedFormComponent}(xr),Hr=function(){var extendStatics=function(t,h){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,h){t.__proto__=h}||function(t,h){for(var y in h)Object.prototype.hasOwnProperty.call(h,y)&&(t[y]=h[y])},extendStatics(t,h)};return function(t,h){if("function"!=typeof h&&null!==h)throw new TypeError("Class extends value "+String(h)+" is not a constructor or null");function __(){this.constructor=t}extendStatics(t,h),t.prototype=null===h?Object.create(h):(__.prototype=h.prototype,new __)}}(),Gr=function(t){function ProtectPdfFromComponent(h){var y=t.call(this,h)||this;return y.passwordCss={component:"password--form"},y.formKeys={password:"password",passwordRe:"passwordRe"},y.initialized=!1,y.model={password:"",passwordRe:"",pending:!1,valid:!1},y}return Hr(ProtectPdfFromComponent,t),ProtectPdfFromComponent.prototype.init=function(){var h=this;t.prototype.init.call(this),this.initialized=!0,this.serviceProvider.mediaService.isMobileByWidth()||setTimeout((function(){h.controlMap[h.formKeys.password].focus()})),this.serviceProvider.mediaService.isMobile()&&this.pwReCtrl.showError(this.serviceProvider.Translate.get("m-popup-protect-pdf-error-msg")),this.serviceProvider.formValuesService.has(wt.protectPdf)&&this.setValue(Object.assign({},this.serviceProvider.formValuesService.get(wt.protectPdf)))},ProtectPdfFromComponent.prototype.setDisableState=function(t){},ProtectPdfFromComponent.prototype.isValid=function(){return this.initialized&&this.isValidModel(this.model)},ProtectPdfFromComponent.prototype.bind=function(){var h=this;t.prototype.bind.call(this),this.serviceProvider.mediaService.isDesktop()&&this.pwCtrl.$input.trigger("focus"),this.serviceProvider.viewerService.runJobDisabledChange$.pipe(takeUntil(this.destroyEvent)).subscribe((function(t){var y=!h.model.valid;y&&t!==y&&h.serviceProvider.viewerService.onRunJobDisabledChange(y)})),this.serviceProvider.viewerService.onRunJobDisabledChange(!0)},ProtectPdfFromComponent.prototype.onValueChanged=function(t){t.valid=!!t.password&&!!t.passwordRe&&t.password===t.passwordRe,this.pwCtrl.setValue(t.password),this.pwReCtrl.setValue(t.passwordRe),!t.password&&!t.passwordRe||t.password&&!t.passwordRe?this.pwReCtrl.setValidation(!0):this.pwReCtrl.setValidation(t.valid),this.model=t,this.serviceProvider.viewerService.onRunJobDisabledChange(!this.model.valid),this.serviceProvider.toolsConfigService.setFormValue(t)},ProtectPdfFromComponent.prototype.createControls=function(){var t,h=this.formKeys,y=this.serviceProvider.mediaService.isMobile();this.controlMap=((t={})[h.password]=new Vr(this.parentId,h.password,{formGroupCss:this.passwordCss.component,inputType:gr.password,labelKey:y?"ph-password":"",placeholderKey:y?"":"ph-password"}),t[h.passwordRe]=new Vr(this.parentId,h.passwordRe,{formGroupCss:this.passwordCss.component,inputType:gr.password,labelKey:y?"ph-repeat-password":"",placeholderKey:y?"":"ph-repeat-password"}),t),this.controls.push({component:this.controlMap[h.password]}),this.controls.push({component:this.controlMap[h.passwordRe]})},ProtectPdfFromComponent.prototype.bindControl=function(t){var h=this,y=t.component;console.log("bindControl",{control:t}),this.model[y.key]=y.getValue(),y.input$.pipe(takeUntil(this.destroyEvent),tap((function(t){t.event.isDefaultPrevented()||(t.event.preventDefault(),h.model[y.key]=t.value,h.change.next(h.model))}))).subscribe()},Object.defineProperty(ProtectPdfFromComponent.prototype,"pwCtrl",{get:function(){return this.controlMap[this.formKeys.password]},enumerable:!1,configurable:!0}),Object.defineProperty(ProtectPdfFromComponent.prototype,"pwReCtrl",{get:function(){return this.controlMap[this.formKeys.passwordRe]},enumerable:!1,configurable:!0}),ProtectPdfFromComponent.prototype.isValidModel=function(t){return!!t&&!!t.password&&!!t.passwordRe&&t.password===this.model.passwordRe},ProtectPdfFromComponent}(Wr);function of(){for(var t=[],h=0;h<arguments.length;h++)t[h]=arguments[h];var y=t[t.length-1];return isScheduler(y)?(t.pop(),scheduleArray(t,y)):fromArray(t)}function scheduled(t,h){if(null!=t){if(function isInteropObservable(t){return t&&"function"==typeof t[V]}(t))return function scheduleObservable(t,h){return new W((function(y){var w=new E;return w.add(h.schedule((function(){var A=t[V]();w.add(A.subscribe({next:function(t){w.add(h.schedule((function(){return y.next(t)})))},error:function(t){w.add(h.schedule((function(){return y.error(t)})))},complete:function(){w.add(h.schedule((function(){return y.complete()})))}}))}))),w}))}(t,h);if(isPromise(t))return function schedulePromise(t,h){return new W((function(y){var w=new E;return w.add(h.schedule((function(){return t.then((function(t){w.add(h.schedule((function(){y.next(t),w.add(h.schedule((function(){return y.complete()})))})))}),(function(t){w.add(h.schedule((function(){return y.error(t)})))}))}))),w}))}(t,h);if(isArrayLike(t))return scheduleArray(t,h);if(function isIterable(t){return t&&"function"==typeof t[me]}(t)||"string"==typeof t)return function scheduleIterable(t,h){if(!t)throw new Error("Iterable cannot be null");return new W((function(y){var w,A=new E;return A.add((function(){w&&"function"==typeof w.return&&w.return()})),A.add(h.schedule((function(){w=t[me](),A.add(h.schedule((function(){if(!y.closed){var t,h;try{var A=w.next();t=A.value,h=A.done}catch(t){return void y.error(t)}h?y.complete():(y.next(t),this.schedule())}})))}))),A}))}(t,h)}throw new TypeError((null!==t&&typeof t||t)+" is not observable")}function from(t,h){return h?scheduled(t,h):t instanceof W?t:new W(subscribeTo(t))}function switchMap(t,h){return"function"==typeof h?function(y){return y.pipe(switchMap((function(y,w){return from(t(y,w)).pipe(map((function(t,A){return h(y,t,w,A)})))})))}:function(h){return h.lift(new qr(t))}}var zr,qr=function(){function SwitchMapOperator(t){this.project=t}return SwitchMapOperator.prototype.call=function(t,h){return h.subscribe(new $r(t,this.project))},SwitchMapOperator}(),$r=function(t){function SwitchMapSubscriber(h,y){var w=t.call(this,h)||this;return w.project=y,w.index=0,w}return __extends(SwitchMapSubscriber,t),SwitchMapSubscriber.prototype._next=function(t){var h,y=this.index++;try{h=this.project(t,y)}catch(t){return void this.destination.error(t)}this._innerSub(h,t,y)},SwitchMapSubscriber.prototype._innerSub=function(t,h,y){var w=this.innerSubscription;w&&w.unsubscribe();var A=new pe(this,h,y),T=this.destination;T.add(A),this.innerSubscription=subscribeToResult(this,t,void 0,void 0,A),this.innerSubscription!==A&&T.add(this.innerSubscription)},SwitchMapSubscriber.prototype._complete=function(){var h=this.innerSubscription;h&&!h.closed||t.prototype._complete.call(this),this.unsubscribe()},SwitchMapSubscriber.prototype._unsubscribe=function(){this.innerSubscription=null},SwitchMapSubscriber.prototype.notifyComplete=function(h){this.destination.remove(h),this.innerSubscription=null,this.isStopped&&t.prototype._complete.call(this)},SwitchMapSubscriber.prototype.notifyNext=function(t,h,y,w,A){this.destination.next(h)},SwitchMapSubscriber}(ue),Jr=function(){var extendStatics=function(t,h){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,h){t.__proto__=h}||function(t,h){for(var y in h)Object.prototype.hasOwnProperty.call(h,y)&&(t[y]=h[y])},extendStatics(t,h)};return function(t,h){if("function"!=typeof h&&null!==h)throw new TypeError("Class extends value "+String(h)+" is not a constructor or null");function __(){this.constructor=t}extendStatics(t,h),t.prototype=null===h?Object.create(h):(__.prototype=h.prototype,new __)}}(),DateTimeFormatter_read=function(t,h){var y="function"==typeof Symbol&&t[Symbol.iterator];if(!y)return t;var w,A,T=y.call(t),E=[];try{for(;(void 0===h||h-- >0)&&!(w=T.next()).done;)E.push(w.value)}catch(t){A={error:t}}finally{try{w&&!w.done&&(y=T.return)&&y.call(T)}finally{if(A)throw A.error}}return E};function padZero(t){var h=t+"";return t<10&&(h="0"+t),h}!function(t){t.dash="-",t.colon=":",t.slash="/",t.dot=".",t.space=" "}(zr||(zr={}));var Xr,Qr,Kr,Yr,Zr,en=function(){function BaseDateParser(t,h,y){this.separator=y,this.year=h.year,this.month=h.month,this.days=h.days,this.inputValue=(t||"").trim()}return BaseDateParser.prototype.parse=function(){var t=this.getDateOrder(this.getArray()),h=t.days,y=t.month,w=t.year;if(y&&y.length>2){var A=y;y=w,w=A}if(h&&h.length>2){A=h;h=w,w=A}if(y&&+y>12){var T=h;h=y,y=T}h&&+h>31&&(h=padZero(new Date(+(w||this.year),+(y||this.month),0).getDate()));y&&2===y.length&&(this.month=y),h&&2===h.length&&(this.days=h),w&&w.length<=4&&(this.year=w)},BaseDateParser.prototype.getArray=function(){return this.inputValue.split(this.separator).map((function(t){return t.trim()}))},BaseDateParser}(),tn=function(t){function DateSlashParser(h,y){return t.call(this,h,y,zr.slash)||this}return Jr(DateSlashParser,t),DateSlashParser.prototype.getDateOrder=function(t){var h=DateTimeFormatter_read(t,3);return{month:h[0],days:h[1],year:h[2]}},DateSlashParser}(en),rn=function(t){function DateDotParser(h,y){return t.call(this,h,y,zr.dot)||this}return Jr(DateDotParser,t),DateDotParser.prototype.getDateOrder=function(t){var h=DateTimeFormatter_read(t,3),y=h[0];return{month:h[1],days:y,year:h[2]}},DateDotParser}(en),nn=function(t){function DateDashParser(h,y){return t.call(this,h,y,zr.dash)||this}return Jr(DateDashParser,t),DateDashParser.prototype.getDateOrder=function(t){var h=DateTimeFormatter_read(t,3),y=h[0];return{month:h[1],days:h[2],year:y}},DateDashParser}(en),an=function(){function TimeParser(t,h){this.minutes=h.minutes,this.hours=h.hours,this.secondes=h.secondes,this.inputValue=(t||"").trim()}return TimeParser.prototype.parse=function(){if(this.inputValue&&!(this.inputValue.length<3)){var t=this.inputValue.match(/(\d{1,2}):(\d{1,2})?:?(\d{1,2})?/);if(t&&t[0]){var h=t[1],y=t[2],w=t[3];h&&(this.hours=padZero(+h)),y&&(this.minutes=padZero(+y)),w&&(this.secondes=padZero(+w))}}},TimeParser}(),sn=function(){function DateTimeFormatter(){this.format="YYYY-MM-DD HH:MM",this.defaultValue="0000-00-00 00:00"}return DateTimeFormatter.prototype.jsonToView=function(t){if(t){var h=this.getDateTime(new Date(t));return this.formatValue(h)}},DateTimeFormatter.prototype.formatView=function(t){if(t=(t=t||"").replace(/[^\d:.\/ -]/g,"").trim()){var h=this.getDateTime(this.getNow());return this.setDTByValue(h,t),this.formatValue(h)}},DateTimeFormatter.prototype.fromViewToServer=function(t){if(!(t=(t=t||"").trim())||t===this.defaultValue)return"";var h=this.formatView(t);return h?new Date(h).toJSON():""},DateTimeFormatter.prototype.isValidDateTime=function(t){return this.isValidDate(t)&&this.isValidTime(t)},DateTimeFormatter.prototype.isValidDate=function(t){if(!t)return!1;var h=t.getFullYear(),y=t.getMonth(),w=t.getDay();return!!(h&&y&&w&&h+0===4)},DateTimeFormatter.prototype.isValidTime=function(t){return!!(t&&t.getHours()&&t.getMinutes())},DateTimeFormatter.prototype.getDateTime=function(t){return{year:t.getFullYear()+"",month:padZero(t.getMonth()+1),days:padZero(t.getDay()),hours:padZero(t.getHours()),minutes:padZero(t.getMinutes()),secondes:padZero(t.getSeconds())}},DateTimeFormatter.prototype.getNow=function(){return new Date((new Date).setSeconds(0,0))},DateTimeFormatter.prototype.formatValue=function(t){return t.year+"-"+t.month+"-"+t.days+" "+t.hours+":"+t.minutes},DateTimeFormatter.prototype.setDTByValue=function(t,h){if(2!==h.length)if(this.containSeparator(h,zr.space)){var y=DateTimeFormatter_read(h.split(zr.space).map((function(t){return t.trim()})),2),w=y[0],A=y[1];this.parseDate(w,t),this.parseTime(A,t)}else this.parseDate(h,t);else t.days=h},DateTimeFormatter.prototype.containSeparator=function(t,h){return t.indexOf(h)>-1},DateTimeFormatter.prototype.parseDate=function(t,h){var y;this.containSeparator(t,zr.dash)?y=this.getDateParser(t,h,zr.dash):this.containSeparator(t,zr.dot)?y=this.getDateParser(t,h,zr.dot):this.containSeparator(t,zr.slash)&&(y=this.getDateParser(t,h,zr.slash)),y&&(y.parse(),this.applyDate(h,y))},DateTimeFormatter.prototype.parseTime=function(t,h){var y;this.containSeparator(t,zr.colon)&&(y=new an(t,h)),y&&(y.parse(),this.applyTime(h,y))},DateTimeFormatter.prototype.getDateParser=function(t,h,y){var w;switch(y){case zr.dot:w=new rn(t,h);break;case zr.slash:w=new tn(t,h);break;case zr.dash:w=new nn(t,h);break;default:console.error("not supported separator")}return w},DateTimeFormatter.prototype.applyDate=function(t,h){t.days=h.days,t.month=h.month,t.year=h.year},DateTimeFormatter.prototype.applyTime=function(t,h){t.minutes=h.minutes,t.hours=h.hours,t.secondes=h.secondes},DateTimeFormatter}(),ln=function(){var extendStatics=function(t,h){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,h){t.__proto__=h}||function(t,h){for(var y in h)Object.prototype.hasOwnProperty.call(h,y)&&(t[y]=h[y])},extendStatics(t,h)};return function(t,h){if("function"!=typeof h&&null!==h)throw new TypeError("Class extends value "+String(h)+" is not a constructor or null");function __(){this.constructor=t}extendStatics(t,h),t.prototype=null===h?Object.create(h):(__.prototype=h.prototype,new __)}}(),cn=__webpack_require__(72346),un=function(t){function DatetimeControlComponent(h,y,w){var A=t.call(this,h)||this;return A.key=y,A.opts=w,A.DATETIME_DEFAULT_FORMAT="Y-m-d H:i",A.css={invalid:"is-invalid"},A.registerLibraries(),A.ids={componentId:A.componentId,inputId:A.createChildId("input"),labelId:A.createChildId("label"),errorContainerId:A.createChildId("error-container")},A.type=gr.text,A.change=new J,A.change$=A.change.asObservable().pipe(takeUntil(A.destroyEvent),filter((function(t){return null!==t}))),A.input=new J,A.input$=A.input.asObservable().pipe(takeUntil(A.destroyEvent)),A.validationChange=new J,A.validationChange$=A.validationChange.asObservable().pipe(takeUntil(A.destroyEvent)),A.valid=!0,A}return ln(DatetimeControlComponent,t),Object.defineProperty(DatetimeControlComponent.prototype,"flatpickr",{get:function(){return window.flatpickr},enumerable:!1,configurable:!0}),Object.defineProperty(DatetimeControlComponent.prototype,"$input",{get:function(){return this.helper.getById(this.ids.inputId)},enumerable:!1,configurable:!0}),DatetimeControlComponent.prototype.isDisabled=function(){return this.helper.isDisabled(this.$input)},DatetimeControlComponent.prototype.setDisableState=function(t){var h,y,w,A;this.helper.toggleDisabled(this.$input,t),t?null===(y=null===(h=this.picker)||void 0===h?void 0:h.mobileInput)||void 0===y||y.setAttribute("disabled","disabled"):null===(A=null===(w=this.picker)||void 0===w?void 0:w.mobileInput)||void 0===A||A.removeAttribute("disabled")},DatetimeControlComponent.prototype.isValid=function(){return this.valid},DatetimeControlComponent.prototype.setValidation=function(t){this.valid=t,this.$input.toggleClass(this.css.invalid,!t),this.$component.toggleClass(this.css.invalid,!t),this.validationChange.next(t)},DatetimeControlComponent.prototype.getValue=function(){return this.$input.val()},DatetimeControlComponent.prototype.setValue=function(t){var h=null==t?void 0:t.trim().replace(" ","T"),y=new Date(h);if(!Number.isNaN(y.getTime())){var w=this.flatpickr.formatDate(y,this.getDatetimeFormat());this.picker.setDate(w),this.change.next(w)}},DatetimeControlComponent.prototype.destroyComponent=function(){this.change.complete(),this.validationChange.complete(),t.prototype.destroyComponent.call(this)},DatetimeControlComponent.prototype.bind=function(){var t=this,h=this.$input;this.serviceProvider.scriptLoaderService.loadLib("flatpickr").then((function(){var y=t.serviceProvider.toolsConfigService.getConfigModel().lang;t.picker=t.flatpickr(h.get(0),{enableTime:!0,dateFormat:t.getDatetimeFormat(),minuteIncrement:1,locale:y})})),this.serviceProvider.scriptLoaderService.loadLib("flatpickr_css").then(),this.serviceProvider.scriptLoaderService.hasLib("flatpickr_lang")&&this.serviceProvider.scriptLoaderService.loadLib("flatpickr_lang").then(),h.on("change",(function(){t.change.next(t.$input.val())})).on("input",(function(h){t.input.next({event:h,value:t.$input.val()})}))},DatetimeControlComponent.prototype.createTemplate=function(){var t=this.setTemplateValuesByModel(cn,this.ids),h=this.serviceProvider.Translate,y=this.opts.labelKey||"",w="";y&&(w=h.get(y));var A=this.opts.placeholderKey||"",T="";A&&(T=h.get(A));var E={formGroupCss:this.opts.formGroupCss||"",inputType:this.type,label:w,inputName:this.key,placeholder:T};return this.setTemplateValuesByModel(t,E)},DatetimeControlComponent.prototype.registerLibraries=function(){var t;this.serviceProvider.scriptLoaderService.addScript({windowName:"flatpickr",src:"https://cdnjs.cloudflare.com/ajax/libs/flatpickr/4.6.9/flatpickr.min.js"}),this.serviceProvider.scriptLoaderService.addScript({windowName:"flatpickr_css",src:"https://cdnjs.cloudflare.com/ajax/libs/flatpickr/4.6.9/themes/material_blue.min.css",isCss:!0});var h=null===(t=this.serviceProvider.toolsConfigService.getConfigModel())||void 0===t?void 0:t.lang;h&&"en"!==h&&this.serviceProvider.scriptLoaderService.addScript({windowName:"flatpickr_lang",src:"https://cdnjs.cloudflare.com/ajax/libs/flatpickr/4.6.9/l10n/"+h+".min.js"})},DatetimeControlComponent.prototype.getDatetimeFormat=function(){return this.opts.format||this.DATETIME_DEFAULT_FORMAT},DatetimeControlComponent}(Ht),pn=function(){var extendStatics=function(t,h){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,h){t.__proto__=h}||function(t,h){for(var y in h)Object.prototype.hasOwnProperty.call(h,y)&&(t[y]=h[y])},extendStatics(t,h)};return function(t,h){if("function"!=typeof h&&null!==h)throw new TypeError("Class extends value "+String(h)+" is not a constructor or null");function __(){this.constructor=t}extendStatics(t,h),t.prototype=null===h?Object.create(h):(__.prototype=h.prototype,new __)}}(),EditMetadataPdfFormComponent_assign=function(){return EditMetadataPdfFormComponent_assign=Object.assign||function(t){for(var h,y=1,w=arguments.length;y<w;y++)for(var A in h=arguments[y])Object.prototype.hasOwnProperty.call(h,A)&&(t[A]=h[A]);return t},EditMetadataPdfFormComponent_assign.apply(this,arguments)},dn=function(t){function EditMetadataPdfFormComponent(h){var y=t.call(this,h)||this;return y.editCss={formGroup:"edit-metadata--form-group",form:"edit-metadata--form"},y.translateLabelKeys={author:"ui-meta-author",title:"ui-meta-title",subject:"ui-meta-subject",keywords:"ui-meta-keywords",dateOfCreation:"ui-meta-created",dateOfModification:"ui-meta-modified"},y.translatePlaceholderKeys={author:"",title:"",subject:"",keywords:"",dateOfCreation:"component-meta-created-ph",dateOfModification:"component-meta-modified-ph"},y.propertyMap={Author:"author",Title:"title",Subject:"subject",Keywords:"keywords",CreationDate:"dateOfCreation",ModDate:"dateOfModification",Creator:"",IsAcroFormPresent:"",IsCollectionPresent:"",IsLinearized:"",IsXFAPresent:"",PDFFormatVersion:"",Producer:""},y.initialized=!1,y.formIds=Object.create(null),y.controlMap=Object.create(null),y.containerIds={left:y.createChildId("left"),right:y.createChildId("right")},y.keyList=["author","title","subject","keywords","dateOfCreation","dateOfModification"],y.formatter=new sn,y.css.parent+=" "+y.editCss.form,y.initIds(),y.initModel(),y}return pn(EditMetadataPdfFormComponent,t),EditMetadataPdfFormComponent.prototype.init=function(){t.prototype.init.call(this),this.initialized=!0},EditMetadataPdfFormComponent.prototype.isValid=function(){return this.initialized&&this.isValidModel(this.model)},EditMetadataPdfFormComponent.prototype.createTemplate=function(){var t=this.containerIds,h=t.left,y=t.right,createItem=function(t){return'<div id="'+t+'" class="edit-metadata--form-section"></div>'};return'<div class="edit-metadata--form-container">'+(createItem(h)+createItem(y))+"</div>"},EditMetadataPdfFormComponent.prototype.bind=function(){var h=this;t.prototype.bind.call(this),this.serviceProvider.mediaService.isDesktop();var y=this.serviceProvider.viewerService;this.setDisableState(!0),y.onRunJobDisabledChange(!0),y.runJobDisabledChange$.pipe(takeUntil(this.destroyEvent)).subscribe((function(t){var w=!h.model.valid,A=h.model.changed;h.initialized&&!t&&!w&&A||y.onRunJobDisabledChange(!0)})),y.filesUpdated$.pipe(takeUntil(this.destroyEvent),filter((function(t){return!!t&&t.length&&1===t.length})),map((function(t){return t[0]})),switchMap((function(t){return h.readMetadata(t)}))).subscribe((function(t){t?(h.setModelByMetaInfo(t),h.setValue(Object.assign({},h.model)),h.initialized=!0,h.setDisableState(!1)):console.error("metadata is not ready",{metadata:t})}))},EditMetadataPdfFormComponent.prototype.onValueChanged=function(t){var h=this;this.keyList.forEach((function(y){var w=h.getControl(y).component,A=w.getValue();switch(y){case"dateOfCreation":case"dateOfModification":var T=t[y]||"";T!==A&&w.setValue(T);break;default:t[y]!==A&&w.setValue(t[y])}})),t.valid=this.isValid(),this.serviceProvider.toolsConfigService.setFormValue(t),this.model=t},EditMetadataPdfFormComponent.prototype.createControls=function(){var t=this;this.keyList.forEach((function(h,y){var w=y<=2?t.containerIds.left:t.containerIds.right,A={formGroupCss:t.editCss.formGroup,inputType:gr.text,labelKey:t.translateLabelKeys[h],placeholderKey:t.translatePlaceholderKeys[h]},T="dateOfCreation"===h||"dateOfModification"===h?new un(w,h,EditMetadataPdfFormComponent_assign(EditMetadataPdfFormComponent_assign({},A),{format:"Y-m-d H:i"})):new Vr(w,h,A);t.controlMap[h]=T,t.controls.push({component:T})}))},EditMetadataPdfFormComponent.prototype.bindControl=function(t){var h=this,y=t.component;this.model[y.key]=y.getValue();var onChange=function(t){"object"==typeof t&&t.event?t.event.isDefaultPrevented()||(t.event.preventDefault(),h.model[y.key]=t.value,h.change.next(h.model)):(h.model[y.key]=t,h.change.next(h.model))};switch(y.key){case"dateOfCreation":case"dateOfModification":y.input$.pipe(takeUntil(this.destroyEvent),switchMap((function(t){if(!t.event.isDefaultPrevented()){var y=t.value;if(/[^ -:]/.test(y))return of(t).pipe(take(1));var w=new Date(y);return h.formatter.isValidDateTime(w)?of(t).pipe(take(1)):of(null)}return of(null)})),filter((function(t){return!!t})),tap((function(t){return onChange(t)}))).subscribe(),y.change$.pipe(takeUntil(this.destroyEvent),tap((function(t){return onChange(t)}))).subscribe();break;default:y.input$.pipe(takeUntil(this.destroyEvent),tap((function(t){return onChange(t)}))).subscribe(),y.change$.pipe(takeUntil(this.destroyEvent),tap((function(t){return onChange(t)})))}},EditMetadataPdfFormComponent.prototype.getControl=function(h){return t.prototype.getControl.call(this,h)},EditMetadataPdfFormComponent.prototype.isValidModel=function(t){return!0},EditMetadataPdfFormComponent.prototype.initIds=function(){var t=this;this.keyList.forEach((function(h){t.formIds[h]=t.createChildId(h)}))},EditMetadataPdfFormComponent.prototype.initModel=function(){var t=Object.create(null);Object.keys(this.formIds).forEach((function(h){t[h]=void 0})),t.valid=!0,t.pending=!1,t.changed=!this.serviceProvider.mediaService.isMobile(),this.model=t},EditMetadataPdfFormComponent.prototype.readMetadata=function(t){return from(this.serviceProvider.pdfService.readMetadata({url:t.storedFile.blobUrl,password:t.workFile.readPassword||t.storedFile.password||void 0})).pipe(takeUntil(this.destroyEvent),take(1))},EditMetadataPdfFormComponent.prototype.setModelByMetaInfo=function(t){var h=this;if(!t)throw new Error("Argument exception");var y=[];Object.keys(this.propertyMap).forEach((function(t){h.propertyMap[t]&&y.push({key:t,value:h.propertyMap[t]})})),y.forEach((function(y){return h.setPropByMeta(t,y.key,y.value)}))},EditMetadataPdfFormComponent.prototype.setPropByMeta=function(t,h,y){if(t[h])switch(h){case"ModDate":case"CreationDate":this.model[y]=this.serviceProvider.pdfService.pdfDataToDateTimeStr(t[h]);break;default:this.model[y]=t[h]}},EditMetadataPdfFormComponent}(Wr);!function(t){t.page="page",t.pageN="pagen",t.pageNOfM="pagenm"}(Xr||(Xr={})),function(t){t.topLeft="topLeft",t.topCenter="topCenter",t.topRight="topRight",t.middleLeft="middleLeft",t.middleCenter="middleCenter",t.middleRight="middleRight",t.bottomLeft="bottomLeft",t.bottomCenter="bottomCenter",t.bottomRight="bottomRight"}(Qr||(Qr={})),function(t){t.left="left",t.center="center",t.right="right"}(Qr||(Qr={})),function(t){t.arial="Arial",t.timesNewRoman="Times New Roman"}(Kr||(Kr={})),function(t){t[t.fs12=12]="fs12",t[t.fs13=13]="fs13",t[t.fs14=14]="fs14"}(Yr||(Yr={})),function(t){t.black="black",t.red="red",t.green="green",t.blue="blue"}(Zr||(Zr={}));var hn,vn=function(){var extendStatics=function(t,h){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,h){t.__proto__=h}||function(t,h){for(var y in h)Object.prototype.hasOwnProperty.call(h,y)&&(t[y]=h[y])},extendStatics(t,h)};return function(t,h){if("function"!=typeof h&&null!==h)throw new TypeError("Class extends value "+String(h)+" is not a constructor or null");function __(){this.constructor=t}extendStatics(t,h),t.prototype=null===h?Object.create(h):(__.prototype=h.prototype,new __)}}(),mn=function(t){function AddPageNumbersFormComponent(h){var y=t.call(this,h)||this;return y.formCss={form:"add-page-numbers--form",formGroup:"add-page-numbers--form-group",row:"form-group--label-row",column:"form-group--label-column",number:"form-group--number"},y.translateLabelKeys={from:"ui-from-to-from",to:"ui-from-to-to",format:"ui-numbering-type",position:"ui-layout"},y.initialized=!1,y.formIds=Object.create(null),y.keyList=["from","to","format","position"],y.css.parent+=" "+y.formCss.form,y.initIds(),y.initModel(),y}return vn(AddPageNumbersFormComponent,t),AddPageNumbersFormComponent.prototype.isValid=function(){return this.initialized&&this.isValidModel(this.model)},AddPageNumbersFormComponent.prototype.bind=function(){var h=this;this.isDesktop=this.serviceProvider.mediaService.isDesktop(),t.prototype.bind.call(this);var y=this.serviceProvider.viewerService;this.setDisableState(!0),y.onRunJobDisabledChange(!0),y.runJobDisabledChange$.pipe(takeUntil(this.destroyEvent)).subscribe((function(t){var w=!h.model.valid;t||h.initialized&&!w||y.onRunJobDisabledChange(!0)})),y.filesUpdated$.pipe(takeUntil(this.destroyEvent),filter((function(t){return!!t&&1===t.length})),map((function(t){return t[0]}))).subscribe((function(t){h.totalPages=t.totalPages||0,h.initialized=!0,h.model.from=1,h.model.to=h.totalPages,h.model.position=Qr.bottomCenter,h.serviceProvider.formValuesService.has(wt.addPdfPageNumbers)&&Object.assign(h.model,h.serviceProvider.formValuesService.get(wt.addPdfPageNumbers)),h.setValue(Object.assign({},h.model)),h.setDisableState(!1);var w=h.controls.find((function(t){return"format"===t.component.key})).component,A=w.getOptions().find((function(t){return t.value===h.model.format}));A&&w.setValueByKey(A.key);var T=h.controls.find((function(t){return"position"===t.component.key})).component,E=T.getOptions().find((function(t){return t.key===h.model.position}));E&&T.setValueByKey(E.key),y.onRunJobDisabledChange(!1)})),this.serviceProvider.mediaService.change$.pipe(takeUntil(this.destroyEvent)).subscribe((function(t){t.isDesktopByWidth!==h.isDesktop&&(h.toggleLabelOrientation(t.isDesktopByWidth),h.isDesktop=t.isDesktopByWidth)})),this.toggleLabelOrientation(this.isDesktop)},AddPageNumbersFormComponent.prototype.onValueChanged=function(t){var h=this;this.controls.forEach((function(y){var w=y.component,A=w.getValue(),T=A.toString().trim(),E=t[w.key].toString().trim();if(T!==E)if(w.type===gr.select){var j=w,B=j.getOptions(),N=h.getOption(B,A.toString());j.setValue(N)}else w.setValue(E||"")})),t.valid=this.isValid(),this.serviceProvider.toolsConfigService.setFormValue(t),this.model=t},AddPageNumbersFormComponent.prototype.createControls=function(){var t=this;this.keyList.forEach((function(h,y){switch(h){case"from":case"to":t.controls.push({component:new Vr(t.parentId,h,{formGroupCss:t.formCss.formGroup+" "+t.formCss.number,inputType:gr.text,labelKey:t.translateLabelKeys[h]})});break;case"format":case"position":var w=t.createOption(h);t.controls.push({component:new Cr(t.parentId,h,{formGroupCss:t.formCss.formGroup,labelKey:t.translateLabelKeys[h],options:w}),config:{key:h,values:w.map((function(t){return t.key})),default:w[0].key}})}}))},AddPageNumbersFormComponent.prototype.bindControl=function(t){var h=this,y=t.component;switch(y.key){case"from":case"to":var onChange_1=function(t){var w,A=h.toNumberVal(t);w="from"===y.key?function(t){var y=t,w=+h.getControl("to").component.getValue().toString().trim();return t>w&&(y=w),y<1&&(y=1),y}(A):function(t){var y=h.getControl("from").component,w=h.totalPages,A=t,T=+y.getValue().toString().trim();return T>t&&(A=T),A>w&&(A=w),A}(A),w!==A&&y.setValue(w.toString()),h.model[y.key]=w,h.change.next(h.model)};y.change$.pipe(takeUntil(this.destroyEvent)).subscribe((function(t){return onChange_1(t)}));break;default:y.change$.pipe(takeUntil(this.destroyEvent)).subscribe((function(){h.model[y.key]=y.getValue(),h.change.next(h.model)})),this.model[y.key]=y.getValue()}},AddPageNumbersFormComponent.prototype.isValidModel=function(t){return!0},AddPageNumbersFormComponent.prototype.initIds=function(){var t=this;this.keyList.forEach((function(h){t.formIds[h]=t.createChildId(h)}))},AddPageNumbersFormComponent.prototype.initModel=function(){var t=Object.create(null);Object.keys(this.formIds).forEach((function(h){t[h]=void 0})),t.valid=!0,t.pending=!1,this.model=t},AddPageNumbersFormComponent.prototype.createOption=function(t){switch(t){case"format":return this.formatOptions=this.createFormatOptions();case"position":return this.positionOptions=this.createPositionOptions();default:throw new Error("not supported format")}},AddPageNumbersFormComponent.prototype.createFormatOptions=function(){return this.serviceProvider.Translate.get("page-numbering-types").map((function(t){return{key:t.key,text:t.name,value:t.value}}))},AddPageNumbersFormComponent.prototype.createPositionOptions=function(){var t=this.serviceProvider.Translate;return[{key:Qr.topLeft,text:t.get("ui-top-left"),value:Qr.topLeft},{key:Qr.topCenter,text:t.get("ui-top-center"),value:Qr.topCenter},{key:Qr.topRight,text:t.get("ui-top-right"),value:Qr.topRight},{key:Qr.bottomLeft,text:t.get("ui-bottom-left"),value:Qr.bottomLeft},{key:Qr.bottomCenter,text:t.get("ui-bottom-center"),value:Qr.bottomCenter},{key:Qr.bottomRight,text:t.get("ui-bottom-right"),value:Qr.bottomRight}]},AddPageNumbersFormComponent.prototype.toggleLabelOrientation=function(t){var h=this,y=t?this.formCss.row:this.formCss.column,w=this.isDesktop?this.formCss.row:this.formCss.column;this.getControls().forEach((function(t){var A=h.helper.getById(t.component.componentId);A.toggleClass(w,!1),A.toggleClass(y,!0)}))},AddPageNumbersFormComponent.prototype.getOption=function(t,h){return t.find((function(t){return t.value===h}))},AddPageNumbersFormComponent.prototype.toNumberVal=function(t){var h=(t||"").toString();return+(h=h.replace(/[^\d]/g,"").trim())||0},AddPageNumbersFormComponent}(Wr),yn=function(){var extendStatics=function(t,h){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,h){t.__proto__=h}||function(t,h){for(var y in h)Object.prototype.hasOwnProperty.call(h,y)&&(t[y]=h[y])},extendStatics(t,h)};return function(t,h){if("function"!=typeof h&&null!==h)throw new TypeError("Class extends value "+String(h)+" is not a constructor or null");function __(){this.constructor=t}extendStatics(t,h),t.prototype=null===h?Object.create(h):(__.prototype=h.prototype,new __)}}(),ColorPickerControlComponent_read=function(t,h){var y="function"==typeof Symbol&&t[Symbol.iterator];if(!y)return t;var w,A,T=y.call(t),E=[];try{for(;(void 0===h||h-- >0)&&!(w=T.next()).done;)E.push(w.value)}catch(t){A={error:t}}finally{try{w&&!w.done&&(y=T.return)&&y.call(T)}finally{if(A)throw A.error}}return E},ColorPickerControlComponent_values=function(t){var h="function"==typeof Symbol&&Symbol.iterator,y=h&&t[h],w=0;if(y)return y.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&w>=t.length&&(t=void 0),{value:t&&t[w++],done:!t}}};throw new TypeError(h?"Object is not iterable.":"Symbol.iterator is not defined.")},gn=function(t){function ColorPickerControlComponent(h,y,w){return t.call(this,h,y,w)||this}return yn(ColorPickerControlComponent,t),ColorPickerControlComponent.prototype.bind=function(){this.initColorPicker(),this.registerColorPickerEvents(),t.prototype.bind.call(this)},ColorPickerControlComponent.prototype.destroyComponent=function(){this.customSelect.destroy(),t.prototype.destroyComponent.call(this)},ColorPickerControlComponent.prototype.initColorPicker=function(){var t,h,y,w=__webpack_require__(88584).Z;t=ColorPickerControlComponent_read(w(this.$select.get(0),{containerClass:"color-picker-container",openerClass:"color-picker-opener",panelClass:"color-picker-panel",optionClass:"color-picker-option",optgroupClass:"color-picker-optgroup",isSelectedClass:"is-selected",hasFocusClass:"has-focus",isDisabledClass:"is-disabled",isOpenClass:"is-open"}),1),this.customSelect=t[0],this.setColorLabel(this.customSelect.select.value);try{for(var A=ColorPickerControlComponent_values(this.customSelect.panel.children),T=A.next();!T.done;T=A.next()){var E=T.value;E.style.background=E.dataset.value}}catch(t){h={error:t}}finally{try{T&&!T.done&&(y=A.return)&&y.call(A)}finally{if(h)throw h.error}}},ColorPickerControlComponent.prototype.registerColorPickerEvents=function(){var t=this;this.customSelect.container.addEventListener("click",(function(h){h.preventDefault(),h.target.matches(".color-picker-container")&&(t.customSelect.open=!1)})),this.change$.pipe(takeUntil(this.destroyEvent)).subscribe((function(h){t.setColorLabel(h.value),t.customSelect.value=h.value}))},ColorPickerControlComponent.prototype.setColorLabel=function(t){ColorPickerControlComponent_read(this.customSelect.opener.children,1)[0].style.background=t},ColorPickerControlComponent}(Cr),bn=function(){var extendStatics=function(t,h){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,h){t.__proto__=h}||function(t,h){for(var y in h)Object.prototype.hasOwnProperty.call(h,y)&&(t[y]=h[y])},extendStatics(t,h)};return function(t,h){if("function"!=typeof h&&null!==h)throw new TypeError("Class extends value "+String(h)+" is not a constructor or null");function __(){this.constructor=t}extendStatics(t,h),t.prototype=null===h?Object.create(h):(__.prototype=h.prototype,new __)}}(),AddPdfHeaderAndFooterFormComponent_read=function(t,h){var y="function"==typeof Symbol&&t[Symbol.iterator];if(!y)return t;var w,A,T=y.call(t),E=[];try{for(;(void 0===h||h-- >0)&&!(w=T.next()).done;)E.push(w.value)}catch(t){A={error:t}}finally{try{w&&!w.done&&(y=T.return)&&y.call(T)}finally{if(A)throw A.error}}return E},_n=function(t){function AddPdfHeaderAndFooterFormComponent(h){var y=t.call(this,h)||this;return y.formIds={footer:{fontColor:"",position:"",text:""},header:{fontColor:"",position:"",text:""}},y.formCss={form:"add-pdf-header-and-footer--form",formGroup:"add-pdf-header-and-footer--form-group",row:"form-group--label-row",column:"form-group--label-column",headerSection:"add-pdf-header-and-footer--header",footerSection:"add-pdf-header-and-footer--footer",section:"add-pdf-header-and-footer--section",container:"add-pdf-header-and-footer--form-container"},y.translateLabelKeys={header:"ui-header-footer-header",footer:"ui-header-footer-footer",fontColor:"ui-header-footer-color",fontName:"ui-header-footer-font",fontSize:"ui-header-footer-font-size",position:"ui-header-footer-position",header_position:"m-popup-header-and-footer-header-position",footer_position:"m-popup-header-and-footer-footer-position"},y.initialized=!1,y.formSectionIds=Object.create(null),y.keyList=["text","position","fontColor"],y.css.parent+=" "+y.formCss.form,y.initIds(),y.initModel(),y}return bn(AddPdfHeaderAndFooterFormComponent,t),AddPdfHeaderAndFooterFormComponent.prototype.isValid=function(){return this.initialized&&this.isValidModel(this.model)},AddPdfHeaderAndFooterFormComponent.prototype.createTemplate=function(){var t=this.formCss,createItem=function(h,y){return'<div id="'+h+'" class="'+t.section+" "+y+'"></div>'},h="";return h+=createItem(this.formSectionIds.header,t.headerSection),h+=createItem(this.formSectionIds.footer,t.footerSection),'<div class="'+t.container+'">'+h+"</div>"},AddPdfHeaderAndFooterFormComponent.prototype.bind=function(){var h=this;this.isDesktop=this.serviceProvider.mediaService.isDesktop(),t.prototype.bind.call(this);var y=this.serviceProvider.viewerService;this.setDisableState(!0),y.onRunJobDisabledChange(!0),y.runJobDisabledChange$.pipe(takeUntil(this.destroyEvent)).subscribe((function(t){var w=!h.model.valid;t||h.initialized&&!w||y.onRunJobDisabledChange(!0)})),y.filesUpdated$.pipe(takeUntil(this.destroyEvent),filter((function(t){return!!t&&1===t.length})),map((function(t){return t[0]}))).subscribe((function(){if(h.initialized=!0,h.serviceProvider.formValuesService.has(wt.addPdfHeaderAndFooter)){var t=h.serviceProvider.formValuesService.get(wt.addPdfHeaderAndFooter);h.model.pending=t.pending,h.model.valid=t.valid,h.model.header.fontColor=t.header.fontColor,h.model.header.position=t.header.position,h.model.header.text=t.header.text,h.model.footer.fontColor=t.footer.fontColor,h.model.footer.position=t.footer.position,h.model.footer.text=t.footer.text}h.setValue(h.model),h.setDisableState(!1)})),this.serviceProvider.mediaService.change$.pipe(takeUntil(this.destroyEvent)).subscribe((function(t){t.isDesktopByWidth!==h.isDesktop&&(h.toggleLabelOrientation(t.isDesktopByWidth),h.isDesktop=t.isDesktopByWidth)})),this.toggleLabelOrientation(this.isDesktop)},AddPdfHeaderAndFooterFormComponent.prototype.onValueChanged=function(t){var h=this;this.controls.forEach((function(y){var w=y.component,A=w.getValue(),T=A.toString().trim(),E=h.getDataFromKey(w.key),j=E.section,B=E.fieldName,N=(t[j][B]||"").toString().trim();if(T!==N)if(w.type===gr.select){var V=w,W=V.getOptions(),H=h.getOption(W,N||A.toString());V.setValue(H)}else w.setValue(N||"")})),t.valid=this.initialized&&this.isValidModel(t),this.initialized&&this.serviceProvider.viewerService.onRunJobDisabledChange(!t.valid),this.serviceProvider.toolsConfigService.setFormValue(t),this.model=t},AddPdfHeaderAndFooterFormComponent.prototype.createControls=function(){var t=this,h=this.serviceProvider.mediaService;Object.keys(this.formSectionIds).forEach((function(y){t.keyList.forEach((function(w){var A=t.createFieldKey(y,w);if("text"===w)t.controls.push({component:new Vr(t.formSectionIds[y],A,{formGroupCss:t.formCss.formGroup,inputType:gr.text,labelKey:t.translateLabelKeys[y]})});else{var T=t.createOption(w),E=t.translateLabelKeys[w];if(h.isMobile()){var j=y+"_"+w;t.translateLabelKeys.hasOwnProperty(j)&&(E=t.translateLabelKeys[j])}var B=void 0;B=h.isMobile()&&"fontColor"===w?new gn(t.formSectionIds[y],A,{formGroupCss:t.formCss.formGroup,labelKey:E,options:T}):new Cr(t.formSectionIds[y],A,{formGroupCss:t.formCss.formGroup,labelKey:E,options:T}),t.controls.push({component:B,config:{key:w,values:T.map((function(t){return t.key})),default:T[0].key}})}}))}))},AddPdfHeaderAndFooterFormComponent.prototype.bindControl=function(t){var h=this,y=t.component,w=this.getDataFromKey(y.key);if("text"===w.fieldName){y.input$.pipe(takeUntil(this.destroyEvent),filter((function(t){return!t.event.isDefaultPrevented()}))).subscribe((function(t){var y;t.event.preventDefault(),y=(t.value.toString()||"").trim(),h.model[w.section][w.fieldName]=y,h.change.next(h.model)}))}else{var A=y;A.change$.pipe(takeUntil(this.destroyEvent)).subscribe((function(){h.model[w.section][w.fieldName]=A.getValue(),h.change.next(h.model)})),this.model[w.section][w.fieldName]=A.getValue(),this.change.next(this.model)}},AddPdfHeaderAndFooterFormComponent.prototype.isValidModel=function(t){return!!t.header.text||!!t.footer.text},AddPdfHeaderAndFooterFormComponent.prototype.initIds=function(){var t=this;Object.keys(this.formIds).forEach((function(h){t.formSectionIds[h]=t.createChildId(""+h),Object.keys(t.formIds[h]).forEach((function(y){t.formIds[h][y]=t.createChildId(h+"__"+y)}))}))},AddPdfHeaderAndFooterFormComponent.prototype.initModel=function(){var t=this,h=Object.create(null);Object.keys(this.formIds).forEach((function(y){h[y]=Object.create(null),Object.keys(t.formIds[y]).forEach((function(t){h[y][t]="text"===t?"":void 0}))})),h.valid=!1,h.pending=!1,this.model=h},AddPdfHeaderAndFooterFormComponent.prototype.createOption=function(t){var h=this.serviceProvider.Translate;switch(t){case"position":return[{key:Qr.left,text:h.get("ui-header-footer-position-left"),value:Qr.left},{key:Qr.center,text:h.get("ui-header-footer-position-center"),value:Qr.center},{key:Qr.right,text:h.get("ui-header-footer-position-right"),value:Qr.right}];case"fontColor":return h.get("ui-header-footer-color-list").map((function(t){return{key:t.key,text:t.name,value:t.value}}));default:throw new Error("controlName doest exists")}},AddPdfHeaderAndFooterFormComponent.prototype.toggleLabelOrientation=function(t){var h=this,y=t?this.formCss.row:this.formCss.column,w=this.isDesktop?this.formCss.row:this.formCss.column;this.getControls().forEach((function(t){var A=h.helper.getById(t.component.componentId);A.toggleClass(w,!1),A.toggleClass(y,!0)}))},AddPdfHeaderAndFooterFormComponent.prototype.getOption=function(t,h){return t.find((function(t){return t.value===h}))},AddPdfHeaderAndFooterFormComponent.prototype.createFieldKey=function(t,h){return t+"__"+h},AddPdfHeaderAndFooterFormComponent.prototype.getDataFromKey=function(t){var h=AddPdfHeaderAndFooterFormComponent_read(t.split("__"),2);return{section:h[0],fieldName:h[1]}},AddPdfHeaderAndFooterFormComponent}(Wr);function formatBytes(t,h){if(void 0===h&&(h=2),0===t)return"0 Bytes";var y=h<0?0:h,w=Math.floor(Math.log(t)/Math.log(1024));return parseFloat((t/Math.pow(1024,w)).toFixed(y))+" "+["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"][w]}!function(t){t.png="image/png",t.jpeg="image/jpeg",t.jpg="image/jpg",t.bmp="image/bmp",t.gif="image/gif",t.tiff="image/tiff",t.jfif="jpeg/jfif",t.pdf="application/pdf",t.doc="application/msword",t.docX="application/vnd.openxmlformats-officedocument.wordprocessingml.document",t.rtf="application/rtf",t.rtfX="application/x-rtf",t.textRtf="text/richtext",t.odt="application/vnd.oasis.opendocument.text",t.ods="application/vnd.oasis.opendocument.spreadsheet",t.ppt="application/vnd.ms-powerpoint",t.pptx="application/vnd.openxmlformats-officedocument.presentationml.presentation",t.xls="application/vnd.ms-excel",t.xlt="\tapplication/vnd.ms-excel",t.xla="\tapplication/vnd.ms-excel",t.xlsx="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",t.djvu="image/vnd.djvu",t.djvuX="image/x-djvu",t.epub="application/epub+zip",t.fb2="application/fb2+xml",t.mobi="application/x-mobipocket-ebook",t.txt="text/plain",t.html="text/html",t.xml="text/xml",t.chm="application/vnd.ms-htmlhelp",t.rtfAll="application/rtf, application/x-rtf, text/richtext",t.djvuAll="image/vnd.djvu, image/x-djvu",t.excelAll="application/vnd.ms-excel, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",t.powerPoint="application/vnd.ms-powerpoint, application/vnd.openxmlformats-officedocument.presentationml.presentation",t.document="application/msword, application/x-rtf, application/rtf, text/richtext, application/x-soffice, application/vnd.openxmlformats-officedocument.wordprocessingml.document",t.image="image/png, image/jpeg, image/jpg, image/bmp, image/tiff"}(hn||(hn={}));var Sn,wn=function(){var extendStatics=function(t,h){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,h){t.__proto__=h}||function(t,h){for(var y in h)Object.prototype.hasOwnProperty.call(h,y)&&(t[y]=h[y])},extendStatics(t,h)};return function(t,h){if("function"!=typeof h&&null!==h)throw new TypeError("Class extends value "+String(h)+" is not a constructor or null");function __(){this.constructor=t}extendStatics(t,h),t.prototype=null===h?Object.create(h):(__.prototype=h.prototype,new __)}}(),Cn=function(t){function AddWatermarkFooterFormComponent(h){var y=t.call(this,h)||this;return y.formCss={form:"add-pdf-watermark--form",formGroup:"add-pdf-watermark--form-group",row:"form-group--label-row",column:"form-group--label-column",aimTarget:{iconContainer:"aim-icon-target--container",pageBox:"pages-box",canvasPage:"canvas-page",isMobile:"is-mobile",options:{jc:"--j-center",js:"--j-start",je:"--j-end",as:"--a-start",ac:"--a-center",ae:"--a-end"}}},y.css.parent+=" "+y.formCss.form,y.initViewModel(),y.model={pending:!1,valid:!1,position:void 0,text:void 0,file:void 0},y.onInitialized=new J,y}return wn(AddWatermarkFooterFormComponent,t),Object.defineProperty(AddWatermarkFooterFormComponent.prototype,"$aimTarget",{get:function(){return this.helper.getById(this.aimTarget.id)},enumerable:!1,configurable:!0}),AddWatermarkFooterFormComponent.prototype.isValid=function(){return this.initialized&&this.isValidModel(this.model)},AddWatermarkFooterFormComponent.prototype.createTemplate=function(){var t=this.serviceProvider.mediaService.isMobile()?__webpack_require__(27671):__webpack_require__(58544);return this.setTemplateValuesByModel(t,this.viewModel)},AddWatermarkFooterFormComponent.prototype.bind=function(){var h=this;t.prototype.bind.call(this),this.setDisableState(!0);var y=this.serviceProvider.viewerService;y.onRunJobDisabledChange(!0),y.runJobDisabledChange$.pipe(takeUntil(this.destroyEvent)).subscribe((function(t){var w=!h.model.valid;t||h.initialized&&!w||y.onRunJobDisabledChange(!0)}));var w=this.serviceProvider.mediaService;this.isMobile=w.isMobileByWidth();var A=y.viewItemReady$.pipe(takeUntil(this.destroyEvent),filter((function(t){return t.pdfPage})),take(1)),T=new J;if(T.asObservable().pipe(takeUntil(this.destroyEvent)).subscribe((function(t){var w=y.getMinMaxItemValue();t.maxSize=w.max;var A=h.serviceProvider.pdfService.getViewPortInfo(t.pdfPage,w.max).viewport;t.component.setImage(t.zoomImageInfo.url,A.width,A.height),h.resizeAimTarget(A)})),A.pipe(takeUntil(this.destroyEvent),switchMap((function(t){return function(t){return t.zoomImageInfo?of(t.zoomImageInfo).pipe(take(1),map((function(){return t}))):h.serviceProvider.pdfService.renderZoom$(t.pdfPage,t.destroy$,h.destroyEvent).pipe(map((function(h){return t.zoomImageInfo=Object.assign(t.zoomImageInfo||{angle:0,dimensions:null,url:void 0},h),t})))}(t)}))).subscribe((function(t){h.initialized=!0,h.initAimTarget(t),h.setDisableState(!1),h.serviceProvider.formValuesService.has(wt.addPdfWatermark)&&Object.assign(h.model,h.serviceProvider.formValuesService.get(wt.addPdfWatermark)),h.setValue(Object.assign({},h.model));var y=h.controls.find((function(t){return"position"===t.component.key})).component,A=y.getOptions().find((function(t){return t.key===h.model.position}));A&&y.setValueByKey(A.key),h.bindFileActions();var E=w.isDesktopByWidth();h.onInitialized.next(),T.next(t),w.change$.pipe(takeUntil(h.destroyEvent)).subscribe((function(){var y=w.isMobileByWidth(),A=w.isDesktopByWidth();y!==h.isMobile&&(h.toggleLabelOrientation(y),h.isMobile=y),A!==E&&(E=A),T.next(t)}))})),this.toggleLabelOrientation(this.isMobile),this.getOnDestroy$().pipe(take(1)).subscribe((function(){return T.complete()})),this.serviceProvider.mediaService.isMobile()){var E=this.helper.getById(this.viewModel.typeSelectorId),j=this.model.file?"image":"text";E.find("input").val([j]),this.changeViewByType(j),fromEvent(E.get(0),"change").pipe(takeUntil(this.destroyEvent)).subscribe((function(t){j=$(t.target).val(),h.changeViewByType(j)})),this.change.asObservable().pipe(takeUntil(this.destroyEvent),filter((function(){return"image"===j}))).subscribe((function(){h.changeViewByType(j)}))}},AddWatermarkFooterFormComponent.prototype.isValidModel=function(t){return!!t.text||!!t.file},AddWatermarkFooterFormComponent.prototype.onValueChanged=function(t){var h=this,change=function(){h.controls.forEach((function(y){var w=y.component,A=w.getValue(),T=A.toString().trim(),E=(t[w.key]||"").toString().trim();if(T!==E)if(w.type===gr.select){var j=w,B=j.getOptions(),N=h.getOption(B,E||A.toString());j.setValue(N)}else w.setValue(E||"")})),t.valid=h.initialized&&h.isValidModel(t),h.serviceProvider.viewerService.onRunJobDisabledChange(!t.valid),h.serviceProvider.toolsConfigService.setFormValue(t,!1),h.model=t};this.initialized?change():this.onInitialized.asObservable().pipe(takeUntil(this.destroyEvent),take(1)).subscribe((function(){return change()}))},AddWatermarkFooterFormComponent.prototype.createControls=function(){var t=this.viewModel;this.controls.push({component:new Vr(t.textContainerId,"text",{formGroupCss:this.formCss.formGroup,inputType:gr.text,labelKey:"ui-text",placeholderKey:"ph-watermark-text"})});var h="position",y=this.createOption(h);this.controls.push({component:new Cr(t.selectContainerId,h,{formGroupCss:this.formCss.formGroup,options:y,labelKey:"ui-layout"}),config:{key:h,values:y.map((function(t){return t.key})),default:y[0].key}})},AddWatermarkFooterFormComponent.prototype.bindControl=function(t){switch(t.component.type){case gr.text:this.bindInput(t);break;case gr.select:this.bindSelect(t)}},AddWatermarkFooterFormComponent.prototype.changeViewByType=function(t){var h=this.viewModel,y=this.helper.css.displayNone;switch(t){case"text":this.helper.getById(h.selectContainerId).toggleClass(y,!1),this.helper.getById(h.textContainerId).toggleClass(y,!1),this.helper.getById(h.btnAddFileId).toggleClass(y,!0),this.helper.getById(h.fileInfoContainerId).toggleClass(y,!0),this.getControl("text").component.setDisableState(!1),this.helper.getById(this.viewModel.inputFileId).val(null),this.model.file=void 0,this.change.next(this.model);break;case"image":var w=!!this.model.file;if(this.helper.getById(h.btnAddFileId).toggleClass(y,w),this.helper.getById(h.fileInfoContainerId).toggleClass(y,!w),this.helper.getById(h.textContainerId).toggleClass(y,!0),this.helper.getById(h.selectContainerId).toggleClass(y,!w),w){var A=this.model.file,T=formatBytes(A.size),E=[A.name,T].join(", ");this.helper.getById(h.fileNameId).html(A.name).attr("title",E)}}},AddWatermarkFooterFormComponent.prototype.toggleLabelOrientation=function(t){var h=this,y=t?this.formCss.column:this.formCss.row,w=this.isMobile?this.formCss.column:this.formCss.row;this.getControls().forEach((function(t){var A=h.helper.getById(t.component.componentId);A.toggleClass(w,!1),A.toggleClass(y,!0)}))},AddWatermarkFooterFormComponent.prototype.bindSelect=function(t){var h=this;t.component.change$.pipe(takeUntil(this.destroyEvent)).subscribe((function(y){h.model[t.component.key]=y.value,h.initialized&&(h.onSelectChange(y),h.change.next(h.model))}))},AddWatermarkFooterFormComponent.prototype.onSelectChange=function(t){var h=this,y=t.value,w=this.formCss.aimTarget.options,A=Object.values(w);this.$aimTarget.removeClass(A);var T=w.jc,E=w.as;switch(y){case Qr.topLeft:T=w.as,E=w.js;break;case Qr.topCenter:T=w.as,E=w.jc;break;case Qr.topRight:T=w.as,E=w.je;break;case Qr.middleLeft:T=w.ac,E=w.js;break;case Qr.middleCenter:T=w.ac,E=w.jc;break;case Qr.middleRight:T=w.ac,E=w.je;break;case Qr.bottomLeft:T=w.ae,E=w.js;break;case Qr.bottomCenter:T=w.ae,E=w.jc;break;case Qr.bottomRight:T=w.ae,E=w.je}var updateTargetPosition=function(){var t=h.$aimTarget;t.removeClass(A),t.addClass([T,E])};this.initialized?updateTargetPosition():this.onInitialized.asObservable().pipe(takeUntil(this.destroyEvent),take(1)).subscribe((function(){updateTargetPosition()}))},AddWatermarkFooterFormComponent.prototype.bindInput=function(t){var h=this;t.component.input$.pipe(takeUntil(this.destroyEvent),filter((function(t){return!t.event.isDefaultPrevented()}))).subscribe((function(t){t.event.preventDefault(),h.model.text=(t.value.toString()||"").trim(),h.change.next(h.model)}))},AddWatermarkFooterFormComponent.prototype.bindFileActions=function(){var t=this,h=this.viewModel,y=new J;this.getOnDestroy$().pipe(take(1)).subscribe((function(){return y.complete()})),fromEvent(this.helper.getById(h.btnAddFileId).get(0),"click").pipe(takeUntil(this.destroyEvent)).subscribe((function(){t.helper.getById(h.inputFileId).trigger("click")})),fromEvent(this.helper.getById(h.btnRemoveId).get(0),"click").pipe(takeUntil(this.destroyEvent)).subscribe((function(){return y.next(null)})),fromEvent(this.helper.getById(h.inputFileId).get(0),"change").pipe(takeUntil(this.destroyEvent),map((function(t){return t.target}))).subscribe((function(t){return y.next(t)})),y.asObservable().pipe(takeUntil(this.destroyEvent)).subscribe((function(y){if(t.initialized){var w;if(y&&y.files&&y.files.length){w=y.files[0];var A=t.serviceProvider.fileMetaDataService.getFileExtension(w.name),T=[_t.jpg,_t.jpeg,_t.bmp,_t.png],E=T.find((function(t){return t.toLowerCase()===A}));if(E)t.model.file=w;else{var j=T.map((function(t){return"."+t})).join(", ");t.serviceProvider.errorDialogService.showFormatError(j,A,!1),t.model.file=null}}else t.model.file=null;if(t.model.file){var B=formatBytes(w.size),N=[w.name,B].join(", ");t.helper.getById(h.fileNameId).html(w.name).attr("title",N)}!function(y){t.helper.getById(h.fileInfoContainerId).toggleClass(t.helper.css.displayNone,!y);var w=t.getControl("text").component;y&&(t.model.text="",w.setValue("")),w.setDisableState(y)}(!!t.model.file),t.change.next(t.model),t.helper.getById(h.inputFileId).val(null)}}))},AddWatermarkFooterFormComponent.prototype.initViewModel=function(){var t=this.serviceProvider.Translate,h=t.get("ui-or-image"),y=[hn.jpeg,hn.jpg,hn.png,hn.bmp].join(",");this.viewModel={textContainerId:ke.createQuickGuidAsString(),selectContainerId:ke.createQuickGuidAsString(),btnAddFileId:ke.createQuickGuidAsString(),btnRemoveId:ke.createQuickGuidAsString(),fileInfoContainerId:ke.createQuickGuidAsString(),inputFileId:ke.createQuickGuidAsString(),accept:y,iconAimSmall:Kt.aimSmall,iconClose:Kt.Close,labelTryOrAdd:h,fileNameId:ke.createQuickGuidAsString()},this.serviceProvider.mediaService.isMobile()&&(this.viewModel.typeSelectorId=ke.createQuickGuidAsString(),this.viewModel.labelUploadImage=t.get("m-popup-add-watermark-upload-image"),this.viewModel.labelImage=t.get("m-popup-add-watermark-image"),this.viewModel.imageIconUrl=Kt.createSvgIconUrl("image"),this.viewModel.labelType=t.get("m-popup-add-watermark-type"),this.viewModel.keyboardIconUrl=Kt.createSvgIconUrl("keyboard"),this.viewModel.plusIconUrl=Kt.createSvgIconUrl("plus"))},AddWatermarkFooterFormComponent.prototype.initAimTarget=function(t){var h=this.formCss.aimTarget,y=this.createChildId("monitor",t.fileId),w=this.helper.getById(y);w.length||(w=$("<span id='"+y+"' class=\""+h.iconContainer+" "+h.options.js+" "+h.options.as+' ">'+Kt.aimMedium+"</span>"));var A=t.component.getImageContainer(),T=A.find("img").attr("id"),E=this.helper.getById(T);this.aimTarget={dimensions:this.helper.getImageSize(E),id:y,srcImageId:T},this.resizeAimTarget(this.aimTarget.dimensions),A.prepend(w)},AddWatermarkFooterFormComponent.prototype.resizeAimTarget=function(t){this.$aimTarget.css({width:t.width,height:t.height})},AddWatermarkFooterFormComponent.prototype.createOption=function(t){if("position"===t){var h=this.serviceProvider.Translate;return[{key:Qr.topLeft,text:h.get("ui-top-left"),value:Qr.topLeft},{key:Qr.topCenter,text:h.get("ui-top-center"),value:Qr.topCenter},{key:Qr.topRight,text:h.get("ui-top-right"),value:Qr.topRight},{key:Qr.middleLeft,text:h.get("ui-middle-left"),value:Qr.middleLeft},{key:Qr.middleCenter,text:h.get("ui-middle-center"),value:Qr.middleCenter},{key:Qr.middleRight,text:h.get("ui-middle-right"),value:Qr.middleRight},{key:Qr.bottomLeft,text:h.get("ui-bottom-left"),value:Qr.bottomLeft},{key:Qr.bottomCenter,text:h.get("ui-bottom-center"),value:Qr.bottomCenter},{key:Qr.bottomRight,text:h.get("ui-bottom-right"),value:Qr.bottomRight}]}throw new Error("controlName doest exists")},AddWatermarkFooterFormComponent.prototype.getOption=function(t,h){return t.find((function(t){return t.value===h}))},AddWatermarkFooterFormComponent}(Wr);!function(t){t.selectAll="selectAll",t.deselectAll="deselectAll"}(Sn||(Sn={}));var Pn,kn=function(){var extendStatics=function(t,h){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,h){t.__proto__=h}||function(t,h){for(var y in h)Object.prototype.hasOwnProperty.call(h,y)&&(t[y]=h[y])},extendStatics(t,h)};return function(t,h){if("function"!=typeof h&&null!==h)throw new TypeError("Class extends value "+String(h)+" is not a constructor or null");function __(){this.constructor=t}extendStatics(t,h),t.prototype=null===h?Object.create(h):(__.prototype=h.prototype,new __)}}(),xn=__webpack_require__(89292),An=function(t){function SplitHeaderComponent(h,y){var w=t.call(this,h,y)||this;return w.splitOpts={selectText:"",deselectText:"",labelText:"",pages:0,isSelect:!1,locked:!0},w.viewModel={btnToggleId:w.createChildId("toggle"),selectContainerId:w.createChildId("container"),iconOk:Kt.okGray},w}return kn(SplitHeaderComponent,t),Object.defineProperty(SplitHeaderComponent.prototype,"$toggle",{get:function(){return this.helper.getById(this.viewModel.btnToggleId)},enumerable:!1,configurable:!0}),SplitHeaderComponent.prototype.setService=function(t){this.service=t},SplitHeaderComponent.prototype.setToggleVisible=function(t){this.helper.getById(this.viewModel.selectContainerId).toggleClass(this.helper.css.displayNone,!t),this.splitOpts.locked=!t},SplitHeaderComponent.prototype.setSelectState=function(t,h){void 0===h&&(h=!1);var y=!1;switch(t){case Sn.deselectAll:y=!1;break;case Sn.selectAll:y=!0}this.toggleSelect(y),h&&this.service.onSelectAllPagesChange(this.splitOpts.isSelect)},SplitHeaderComponent.prototype.isSelected=function(){return this.splitOpts.isSelect},SplitHeaderComponent.prototype.createTemplate=function(){var h=t.prototype.createTemplate.call(this),y=$(h),w=this.serviceProvider.Translate,A=this.splitOpts;A.selectText=w.get("component-select-all-pages"),A.deselectText=w.get("component-deselect-all-pages");var T=this.setTemplateValuesByModel(xn,this.viewModel);return y.prepend(T).get(0).outerHTML},SplitHeaderComponent.prototype.bind=function(){var h=this;t.prototype.bind.call(this);var y=this.getService();this.$toggle.click((function(t){var w=!h.splitOpts.isSelect;y.onSelectAllPagesChange(w)})),y.selectAllPagesChange$.pipe(takeUntil(this.destroyEvent)).subscribe((function(t){return h.toggleSelect(t)})),y.onDocumentRead$.pipe(takeUntil(this.destroyEvent)).subscribe((function(t){return h.onPageCountChange(t)}))},SplitHeaderComponent.prototype.toggleSelect=function(t){var h=this.splitOpts;if(!(h.locked||h.isSelect===t&&h.labelText)){var y=t?h.deselectText:h.selectText;h.labelText=y,h.isSelect=t,this.$toggle.text(h.labelText+" ("+(h.pages||"...")+")")}},SplitHeaderComponent.prototype.onPageCountChange=function(t){var h=this.splitOpts;h.locked||(h.pages=t,this.$toggle.text(h.labelText+" ("+(t||"...")+")"),this.helper.getById(this.viewModel.selectContainerId).toggleClass(this.helper.css.displayNone,!t))},SplitHeaderComponent.prototype.getService=function(){if(!this.service)throw new Error("service was not set to instance");return this.service},SplitHeaderComponent}(er),PerPageHelper_read=function(t,h){var y="function"==typeof Symbol&&t[Symbol.iterator];if(!y)return t;var w,A,T=y.call(t),E=[];try{for(;(void 0===h||h-- >0)&&!(w=T.next()).done;)E.push(w.value)}catch(t){A={error:t}}finally{try{w&&!w.done&&(y=T.return)&&y.call(T)}finally{if(A)throw A.error}}return E},PerPageHelper_spreadArray=function(t,h){for(var y=0,w=h.length,A=t.length;y<w;y++,A++)t[A]=h[y];return t},In=function(){function PerPageHelper(){}return PerPageHelper.parseValue=function(t,h){void 0===h&&(h=null);var y=[];if(!t)return h;if(!(t=this.getSaveValue(t)))return h;for(var w=t.split(",").map((function(t){return t.trim()})).map((function(t){return t.split("-").map((function(t){return+t.trim()}))})),A=0;A<w.length;A++){var T=w[A];if(T.length)if(1===T.length)y.push(T[0]);else if(2===T.length){var E=T[0],j=T[1];if(E<j)for(var B=E;B<=j;B++)y.push(B);else if(E>j)for(B=E;B>=j;B--)y.push(B);else y.push(E)}}return y},PerPageHelper.getSaveValue=function(t){return(t||"").replace(/[^\d,-]/gm,"").replace(/^0+-/g,"1-").replace(/,0+-/g,",1-").replace(/^0+/g,"").replace(/(,+0+)/g,",").replace(/(-+0+)/g,"-").replace(/( +0+)/g," ").replace(/-+/g,"-").replace(/-,/g,",").replace(/,+/g,",").replace(/ +/g,"")},PerPageHelper.replaceMaxValue=function(t,h){var y="";return t.split(",").forEach((function(t){var w="",A=PerPageHelper_read(t.split("-").map((function(t){return+t})),2),T=A[0],E=A[1],j=!1;if(T>E){var B=E;E=T,T=B,j=!0}T>h&&(T=h),E>h&&(E=h),T&&E?w=j?E+"-"+T:T+"-"+E:T?w=T+"":E&&(w=E+""),y+=y?","+w:w})),this.getSaveValue(y)},PerPageHelper.lastIsSeparator=function(t){return(t=(t||"").trim()).endsWith(",")||t.endsWith("-")},PerPageHelper.pagesToValue=function(t){var h="";return t.forEach((function(t,y,w){if(0===y)h+=t;else{var A=w[y-1],T=w[y+1],E=w[y];T?A+1===E&&E+1===T||(h+=A+1===E&&E+1!==T?"-"+E:","+E):h+=E-A==1?"-"+E:","+E}})),h},PerPageHelper.pagesToObject=function(t){var h=Object.create(null);return t&&t.length?(t.forEach((function(t){h[t]=!0})),h):h},PerPageHelper.objToPages=function(t){return t?Object.keys(t).map((function(t){return+t})):[]},PerPageHelper.createAllPagesValue=function(t){if(!t)throw new Error("!totalPages");return t>1?"1-"+t:t.toString()},PerPageHelper.isEqualWithTotalPages=function(t,h){if(!t||!h)return!1;if(this.lastIsSeparator(t))return!1;var y=this.parseValue(t);return PerPageHelper_spreadArray([],PerPageHelper_read(new Set(y))).length===h},PerPageHelper}(),Tn=function(){var extendStatics=function(t,h){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,h){t.__proto__=h}||function(t,h){for(var y in h)Object.prototype.hasOwnProperty.call(h,y)&&(t[y]=h[y])},extendStatics(t,h)};return function(t,h){if("function"!=typeof h&&null!==h)throw new TypeError("Class extends value "+String(h)+" is not a constructor or null");function __(){this.constructor=t}extendStatics(t,h),t.prototype=null===h?Object.create(h):(__.prototype=h.prototype,new __)}}(),On=function(t){function SplitPdfFormComponent(h){var y=t.call(this,h)||this;return y.initialized=!1,y.keys={mode:"mode",pages:"pages"},y.formCss={form:"split-pdf--form",formGroup:"split-pdf--form-group",row:"form-group--label-row",column:"form-group--label-column"},y.formIds={mode:"",pages:""},y.formIds={mode:ke.createQuickGuidAsString(),pages:ke.createQuickGuidAsString()},y.model={mode:void 0,pages:"",pending:!1,valid:!1},y}return Tn(SplitPdfFormComponent,t),Object.defineProperty(SplitPdfFormComponent.prototype,"inputCtrl",{get:function(){return this.getControl(this.keys.pages).component},enumerable:!1,configurable:!0}),SplitPdfFormComponent.prototype.init=function(){t.prototype.init.call(this),this.setDisableState(!0)},SplitPdfFormComponent.prototype.setDisableState=function(h){t.prototype.setDisableState.call(this,h)},SplitPdfFormComponent.prototype.isValid=function(){return this.initialized&&this.isValidModel(this.model)},SplitPdfFormComponent.prototype.setAllPages=function(){var t=this.getAllPagesValue();this.model.pages=t,this.model.valid=this.isValidModel(this.model),this.inputCtrl.setValue(t)},SplitPdfFormComponent.prototype.setTotalPages=function(t){this.totalPages=t},SplitPdfFormComponent.prototype.resetPages=function(t){void 0===t&&(t=""),this.model.pages=t,this.model.valid=!!t,this.inputCtrl.setValue(t)},SplitPdfFormComponent.prototype.getValue=function(){return at.asJson(this.model)},SplitPdfFormComponent.prototype.setValidPages=function(t){this.inputCtrl.setValidation(t)},SplitPdfFormComponent.prototype.bind=function(){var h=this;t.prototype.bind.call(this),this.setDisableState(!0),this.serviceProvider.viewerService.runJobDisabledChange$.pipe(takeUntil(this.destroyEvent)).subscribe((function(t){if(t||h.initialized){var y=!h.model.valid;y&&t!==y&&h.serviceProvider.viewerService.onRunJobDisabledChange(y)}else h.serviceProvider.viewerService.onRunJobDisabledChange(!1)})),this.serviceProvider.viewerService.onRunJobDisabledChange(!0),this.serviceProvider.splitService.onDocumentRead$.pipe(takeUntil(this.destroyEvent)).subscribe((function(t){h.totalPages=t,h.initialized=!0}))},SplitPdfFormComponent.prototype.onValueChanged=function(t){var h=this;this.destroyed||(this.controls.forEach((function(y){var w=y.component,A=w.getValue(),T=A.toString().trim(),E=t[w.key].toString().trim();if(T!==E)if(w.type===gr.select){var j=w,B=j.getOptions(),N=h.getOption(B,E.toString()||A.toString());j.setValue(N)}else w.setValue(E||"")})),this.model=t,this.serviceProvider.viewerService.onRunJobDisabledChange(!this.model.valid),this.serviceProvider.toolsConfigService.setFormValue(t))},SplitPdfFormComponent.prototype.createControls=function(){var t=this.keys.mode,h=Pr.splitPdfMode();this.controls.push({component:new Cr(this.parentId,t,{formGroupCss:this.formCss.formGroup,options:h}),config:{key:t,values:h.map((function(t){return t.key})),default:Tt.single}}),this.model.mode=Tt.single,this.controls.push({component:new Vr(this.parentId,this.keys.pages,{formGroupCss:this.formCss.formGroup,inputType:gr.text,labelKey:"m-popup-split-pdf-number-page",placeholderKey:"Pages, i.e. 1,2-4,8-13",useResetBtn:!0})})},SplitPdfFormComponent.prototype.bindControl=function(t){var h=t.component;switch(h.type){case gr.select:this.bindSelect(h);break;case gr.text:this.bindInput(h)}},SplitPdfFormComponent.prototype.bindSelect=function(t){var h=this;t.change$.pipe(takeUntil(this.destroyEvent)).subscribe((function(y){h.model[t.key]=y.value,h.onInputChange(h.model.pages,h.getControl(h.keys.pages).component)}))},SplitPdfFormComponent.prototype.bindInput=function(t){var h=this;t.input$.pipe(takeUntil(this.destroyEvent)).subscribe((function(y){y.event.isDefaultPrevented()||(y.event.preventDefault(),h.onInputChange(y.value,t))})),t.change$.pipe(takeUntil(this.destroyEvent)).subscribe((function(y){h.onInputChange(y,t)}))},SplitPdfFormComponent.prototype.onInputChange=function(t,h){if(!this.destroyed){if(h.setResetBtnVisible(!!t),!(t||"").trim())return this.model.valid=!1,this.model.pages="",this.setValidPages(this.model.valid),void this.change.next(this.getValue());if(In.lastIsSeparator(t))return this.model.valid=!1,this.model.pages=t,this.setValidPages(this.model.valid),void this.change.next(this.getValue());var y=In.replaceMaxValue(In.getSaveValue(t),this.totalPages);this.model.mode===Tt.deleteSelected?this.model.valid=!!y&&!In.isEqualWithTotalPages(y,this.totalPages):this.model.valid=!!y,this.model.pages=y,this.serviceProvider.viewerService.onRunJobDisabledChange(!this.model.valid),this.setValidPages(this.model.valid),this.change.next(this.getValue())}},SplitPdfFormComponent.prototype.getOption=function(t,h){return t.find((function(t){return t.value===h}))},SplitPdfFormComponent.prototype.isValidModel=function(t){return t.valid},SplitPdfFormComponent.prototype.getAllPagesValue=function(){return In.createAllPagesValue(this.totalPages)},SplitPdfFormComponent}(Wr),En=function(){var extendStatics=function(t,h){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,h){t.__proto__=h}||function(t,h){for(var y in h)Object.prototype.hasOwnProperty.call(h,y)&&(t[y]=h[y])},extendStatics(t,h)};return function(t,h){if("function"!=typeof h&&null!==h)throw new TypeError("Class extends value "+String(h)+" is not a constructor or null");function __(){this.constructor=t}extendStatics(t,h),t.prototype=null===h?Object.create(h):(__.prototype=h.prototype,new __)}}(),Fn=function(t){function DeletePagesFromComponent(h){var y=t.call(this,h)||this;return y.initialized=!1,y.keys={pages:"pages"},y.formIds={pages:""},y.formCss={form:"delete-pages--form",formGroup:"delete-pages--form-group",row:"form-group--label-row",column:"form-group--label-column"},y.formIds={pages:ke.createQuickGuidAsString()},y.model={pages:"",pending:!1,valid:!1},y}return En(DeletePagesFromComponent,t),Object.defineProperty(DeletePagesFromComponent.prototype,"inputCtrl",{get:function(){return this.getControl(this.keys.pages).component},enumerable:!1,configurable:!0}),DeletePagesFromComponent.prototype.init=function(){t.prototype.init.call(this),this.setDisableState(!0)},DeletePagesFromComponent.prototype.focus=function(){this.serviceProvider.mediaService.isMobileByWidth()||this.inputCtrl.focus()},DeletePagesFromComponent.prototype.setDisableState=function(h){t.prototype.setDisableState.call(this,h)},DeletePagesFromComponent.prototype.isValid=function(){return this.initialized&&this.isValidModel(this.model)},DeletePagesFromComponent.prototype.setAllPages=function(){var t=this.getAllPagesValue();this.model.pages=t,this.model.valid=this.isValidModel(this.model),this.inputCtrl.setValue(t)},DeletePagesFromComponent.prototype.setTotalPages=function(t){this.totalPages=t},DeletePagesFromComponent.prototype.resetPages=function(t){void 0===t&&(t=""),this.model.pages=t,this.inputCtrl.setValue(t)},DeletePagesFromComponent.prototype.getValue=function(){return at.asJson(this.model)},DeletePagesFromComponent.prototype.setValidPages=function(t){this.inputCtrl.setValidation(t),this.serviceProvider.viewerService.onRunJobDisabledChange(!t)},DeletePagesFromComponent.prototype.bind=function(){var h=this;t.prototype.bind.call(this),this.setDisableState(!0),this.serviceProvider.viewerService.runJobDisabledChange$.pipe(takeUntil(this.destroyEvent)).subscribe((function(t){var y=!h.model.valid;y&&t!==y&&h.serviceProvider.viewerService.onRunJobDisabledChange(y)})),this.serviceProvider.viewerService.onRunJobDisabledChange(!0),this.serviceProvider.deletePagesService.onDocumentRead$.pipe(takeUntil(this.destroyEvent)).subscribe((function(t){h.totalPages=t,h.initialized=!0,h.bindInput(h.inputCtrl),h.onValueChanged(h.model,!0)}))},DeletePagesFromComponent.prototype.onValueChanged=function(t,h){void 0===h&&(h=!1),this.initialized?(this.controls.forEach((function(y){var w=y.component,A=(w.getValue()||"").toString().trim(),T=(t[w.key]||"").toString().trim();(A!==T||h)&&w.setValue(T||"")})),this.model=at.asJson(t),this.serviceProvider.viewerService.onRunJobDisabledChange(!this.model.valid),this.serviceProvider.toolsConfigService.setFormValue(this.model)):this.model=at.asJson(t)},DeletePagesFromComponent.prototype.createControls=function(){this.controls.push({component:new Vr(this.parentId,this.keys.pages,{formGroupCss:this.formCss.formGroup,inputType:gr.text,labelKey:"m-popup-delete-pages-number-page",placeholderKey:"Pages, i.e. 1,2-4,8-13",useResetBtn:!0})})},DeletePagesFromComponent.prototype.bindControl=function(t){},DeletePagesFromComponent.prototype.bindInput=function(t){var h=this,change=function(y){if(!h.destroyed){if(t.setResetBtnVisible(!!y),!(y||"").trim())return h.model.valid=!1,h.model.pages="",h.setValidPages(h.model.valid),void h.change.next(h.getValue());if(In.lastIsSeparator(y))return h.model.valid=!1,h.model.pages=y,h.setValidPages(h.model.valid),void h.change.next(h.getValue());var w=In.replaceMaxValue(In.getSaveValue(y),h.totalPages);h.model.valid=!!w&&!In.isEqualWithTotalPages(w,h.totalPages),h.model.pages=w,h.setValidPages(h.model.valid),h.change.next(h.getValue())}};t.input$.pipe(takeUntil(this.destroyEvent)).subscribe((function(t){t.event.isDefaultPrevented()||(t.event.preventDefault(),change(t.value))})),t.change$.pipe(takeUntil(this.destroyEvent)).subscribe((function(t){change(t)}))},DeletePagesFromComponent.prototype.isValidModel=function(t){return t.valid},DeletePagesFromComponent.prototype.getAllPagesValue=function(){return In.createAllPagesValue(this.totalPages)},DeletePagesFromComponent}(Wr),Rn=function(){var extendStatics=function(t,h){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,h){t.__proto__=h}||function(t,h){for(var y in h)Object.prototype.hasOwnProperty.call(h,y)&&(t[y]=h[y])},extendStatics(t,h)};return function(t,h){if("function"!=typeof h&&null!==h)throw new TypeError("Class extends value "+String(h)+" is not a constructor or null");function __(){this.constructor=t}extendStatics(t,h),t.prototype=null===h?Object.create(h):(__.prototype=h.prototype,new __)}}(),Dn=function(t){function GifSpinnerComponent(h){var y=t.call(this,h)||this;return y.parentId=h,y.css={show:"show"},y.ids={componentId:y.componentId},y}return Rn(GifSpinnerComponent,t),GifSpinnerComponent.prototype.show=function(){this.$component.addClass(this.css.show)},GifSpinnerComponent.prototype.hide=function(){this.$component.removeClass(this.css.show)},GifSpinnerComponent.prototype.createTemplate=function(){return this.setTemplateValuesByModel('<div id="@@componentId@@" class="page-loader--container"><div class="gif-spinner"></div></div>',this.ids)},GifSpinnerComponent.prototype.bind=function(){},GifSpinnerComponent}(Ht),Mn=function(){var extendStatics=function(t,h){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,h){t.__proto__=h}||function(t,h){for(var y in h)Object.prototype.hasOwnProperty.call(h,y)&&(t[y]=h[y])},extendStatics(t,h)};return function(t,h){if("function"!=typeof h&&null!==h)throw new TypeError("Class extends value "+String(h)+" is not a constructor or null");function __(){this.constructor=t}extendStatics(t,h),t.prototype=null===h?Object.create(h):(__.prototype=h.prototype,new __)}}(),jn=__webpack_require__(23063);!function(t){t.left="left",t.right="right",t.zero="zero"}(Pn||(Pn={}));var Ln,Bn=function(t){function PageItemComponent(h,y,w){var A=t.call(this,h,y)||this;return A.defaultImageUrl=w,A.css={isRendering:"page-item--is-rendering",isLocked:"page-item--is-locked",isSelected:"page-item--is-selected",isDeletable:"page-item--is-deletable",tooltipElement:"tooltip-element"},A.defaultImageUrl||(A.defaultImageUrl=Kt.getIconRoot()+"/file-item-default.svg"),A.delete=new J,A.zoom=new J,A.click=new J,A.rotate=new J,A.lock=new J,A.imageChange=new Te(null),A.delete$=A.delete.pipe(takeUntil(A.destroyEvent)),A.zoom$=A.zoom.pipe(takeUntil(A.destroyEvent)),A.click$=A.click.pipe(takeUntil(A.destroyEvent)),A.rotate$=A.rotate.pipe(takeUntil(A.destroyEvent)),A.lock$=A.lock.pipe(takeUntil(A.destroyEvent)),A.imageChange$=A.imageChange.pipe(takeUntil(A.destroyEvent),filter((function(t){return!!t}))),A.ids={componentId:A.componentId,totalPagesId:A.createChildId("total-pages"),pageNumberId:A.createChildId("page-number"),imageId:A.createChildId("image"),nameId:A.createChildId("name"),pageBoxId:A.createChildId("page-box"),imageContainerId:A.createChildId("image-container"),actionsLeftId:A.createChildId("actions-left"),actionsRightId:A.createChildId("actions-right"),btnUnlockId:A.createChildId("btn__unlock"),deleteId:A.createChildId("btn__delete"),zoomId:A.createChildId("btn__zoom"),rotateLeftId:A.createChildId("btn__rotate-left"),rotateRightId:A.createChildId("btn__rotate-right"),iconBoxId:A.createChildId("icon-box"),tooltipId:A.createChildId("tooltip")},A.options={isRendering:!1,isLocked:!1,isSelected:!1,showPageBox:!1,useRotate:!1,useZoom:!1,useDelete:!0,pageNumberIsVisible:!1,pageNumber:0,imgDimensions:A.getInitImageSize(),ignoreRenderingOnClick:!1},A.spinner=new Dn(A.ids.imageContainerId),A}return Mn(PageItemComponent,t),PageItemComponent.prototype.destroyComponent=function(){this.delete.complete(),this.zoom.complete(),this.click.complete(),this.rotate.complete(),this.lock.complete(),this.spinner.destroyComponent(),t.prototype.destroyComponent.call(this)},PageItemComponent.prototype.setImageAsSvg=function(t,h,y){var w=this.helper.getById(this.ids.imageId),A=w.attr("class"),T=$(t).attr("id",this.ids.imageId).attr("class",A),E=$("<div/>",{class:"page-item--svg-container"}).css({width:h,height:y}).append(T);w.replaceWith(E)},PageItemComponent.prototype.changeOrder=function(t){this.$component.css("order",t)},PageItemComponent.prototype.setRenderingState=function(t){this.options.isRendering=t,this.$component.toggleClass(this.css.isRendering,t),t?this.spinner.show():this.spinner.hide()},PageItemComponent.prototype.setLockedState=function(t){this.options.isLocked=t,this.$component.toggleClass(this.css.isLocked,t)},PageItemComponent.prototype.setTotalPages=function(t){this.viewModel.totalPages=t,this.helper.getById(this.ids.totalPagesId).html(t.toString())},PageItemComponent.prototype.setRotateImage=function(t){this.helper.getById(this.ids.imageId).css("transform","rotate("+t+"deg)")},PageItemComponent.prototype.setPageNumberVisibleState=function(t){this.options.pageNumberIsVisible=t,this.toggleVisible("pageNumberIsVisible",t,[this.ids.pageNumberId])},PageItemComponent.prototype.getElement=function(){return this.$component},PageItemComponent.prototype.setPageBoxVisibleState=function(t){this.toggleVisible("showPageBox",t,[this.ids.pageBoxId])},PageItemComponent.prototype.setZoomBtnVisibleState=function(t){this.toggleVisible("useZoom",t,[this.ids.zoomId])},PageItemComponent.prototype.setRotateVisibleState=function(t){this.toggleVisible("useRotate",t,[this.ids.rotateLeftId,this.ids.rotateRightId])},PageItemComponent.prototype.setIgnoreRenderingOnClick=function(t){this.options.ignoreRenderingOnClick=t},PageItemComponent.prototype.setSelected=function(t){this.options.isSelected!==t&&(this.options.isSelected=t,this.$component.toggleClass(this.css.isSelected,this.options.isSelected))},PageItemComponent.prototype.isSelected=function(){return this.options.isSelected},PageItemComponent.prototype.setIcon=function(t){this.helper.getById(this.ids.iconBoxId).html(t)},PageItemComponent.prototype.toggleIconCss=function(t,h){this.$component.toggleClass(t,h)},PageItemComponent.prototype.setImage=function(t,h,y){this.viewModel.imageUrl=t,this.options.imgDimensions.width=h,this.options.imgDimensions.height=y;var w=this.helper.getById(this.ids.imageId);w.attr("src",this.viewModel.imageUrl),this.helper.setImageSize(w,{width:h,height:y}),this.imageChange.next({imageUrl:t,width:h,height:y})},PageItemComponent.prototype.replaceImageWithCanvas=function(t,h,y){this.options.imgDimensions.width=h,this.options.imgDimensions.height=y;var w=this.helper.getById(this.ids.imageId);t.attr("class",w.attr("class")).attr("id",this.ids.imageId).toggleClass("page-item--canvas-image",!0),w.replaceWith(t)},PageItemComponent.prototype.getImageContainer=function(){return this.helper.getById(this.ids.imageContainerId)},PageItemComponent.prototype.setPageNumber=function(t){var h=this.helper.getById(this.ids.pageNumberId);this.options.pageNumber=t,h.toggleClass("page-item--big-number",t>98).html(t.toString());var y=this.helper.css.displayNone;t?h.removeClass(y):h.addClass(y)},PageItemComponent.prototype.setViewModelOptions=function(t){var h=this.viewModel||Object.create(null);Object.assign(h,t),this.viewModel=h},PageItemComponent.prototype.setDeleteBtnVisible=function(t){this.toggleVisible("useDelete",t,[this.ids.deleteId])},PageItemComponent.prototype.setPageName=function(t){this.helper.getById(this.ids.nameId).attr("title",t).html(t)},PageItemComponent.prototype.deleteItem=function(){this.delete.next(this.componentId)},PageItemComponent.prototype.bind=function(){this.spinner.init(),this.helper.getById(this.ids.imageId).attr("src",this.viewModel.imageUrl),this.spinner.show(),this.bindActions(),this.options.useDelete&&this.$component.addClass(this.css.isDeletable)},PageItemComponent.prototype.createTemplate=function(){var t=this.setTemplateValuesByModel(this.getHtmlTemplate(),this.ids);this.viewModel.imageUrl||(this.viewModel.imageUrl=this.defaultImageUrl);var h=this.createInitModel();return Object.assign(this.viewModel,h),this.setTemplateValuesByModel(t,h)},PageItemComponent.prototype.toggleVisible=function(t,h,y){var w=this;this.options[t]=h,y.forEach((function(t){return w.helper.getById(t).toggleClass(w.helper.css.displayNone,!h)}))},PageItemComponent.prototype.bindActions=function(){var t=this,clickHandler=function(t,h){return t.isDefaultPrevented()||(t.preventDefault(),h()),!1};this.helper.getById(this.ids.deleteId).on("click",(function(h){return clickHandler(h,(function(){return t.onDelete()}))})),this.helper.getById(this.ids.zoomId).on("click",(function(h){return clickHandler(h,(function(){return t.onZoom()}))})),this.$component.on("click",(function(h){return clickHandler(h,(function(){return t.onClick()}))})),this.helper.getById(this.ids.rotateLeftId).on("click",(function(h){return clickHandler(h,(function(){return t.onRotate(Pn.left)}))})),this.helper.getById(this.ids.rotateRightId).on("click",(function(h){return clickHandler(h,(function(){return t.onRotate(Pn.right)}))})),this.helper.getById(this.ids.btnUnlockId).on("click",(function(h){return clickHandler(h,(function(){return t.onUnlock()}))}))},PageItemComponent.prototype.onDelete=function(){this.options.isRendering||this.delete.next(this.componentId)},PageItemComponent.prototype.onZoom=function(){this.options.isLocked||this.options.isRendering||this.zoom.next(this.componentId)},PageItemComponent.prototype.onRotate=function(t){this.options.isLocked||this.options.isRendering||this.rotate.next({direction:t,itemId:this.componentId})},PageItemComponent.prototype.onClick=function(){this.options.isLocked?this.onUnlock():this.options.isRendering&&!this.options.ignoreRenderingOnClick||(this.options.isSelected=!this.options.isSelected,this.$component.toggleClass(this.css.isSelected,this.options.isSelected),this.click.next({isSelected:this.options.isSelected,itemId:this.componentId}))},PageItemComponent.prototype.onUnlock=function(){this.options.isLocked&&this.lock.next(this.componentId)},PageItemComponent.prototype.getInitImageSize=function(){var t=this.serviceProvider.viewerService.getMinMaxItemValue();return{width:t.min,height:t.max}},PageItemComponent.prototype.createInitModel=function(){var t=this.serviceProvider.Translate,h=this.serviceProvider.viewerService;return{imageUrl:this.viewModel.imageUrl,name:this.viewModel.name||"",totalPagesLabel:t.get("ui-pages"),btnUnlockIcon:Kt.unlock,btnDeleteIcon:Kt.Close,btnZoomIcon:Kt.Search,btnRotateRightIcon:Kt.rotateRight,btnRotateLeftIcon:Kt.rotateLeft,lockBoxIcon:Kt.setDimensions(Kt.lock,{height:80,width:80}),imageWidth:""+h.defaultMinItemSize,imageHeight:""+h.defaultMaxItemSize}},PageItemComponent.prototype.getHtmlTemplate=function(){return jn},PageItemComponent}(Ht),Nn=function(){var extendStatics=function(t,h){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,h){t.__proto__=h}||function(t,h){for(var y in h)Object.prototype.hasOwnProperty.call(h,y)&&(t[y]=h[y])},extendStatics(t,h)};return function(t,h){if("function"!=typeof h&&null!==h)throw new TypeError("Class extends value "+String(h)+" is not a constructor or null");function __(){this.constructor=t}extendStatics(t,h),t.prototype=null===h?Object.create(h):(__.prototype=h.prototype,new __)}}(),Vn=function(t){function TooltipComponent(h,y){var w=t.call(this,h)||this;return w.options=y,w.mesageId=ke.createQuickGuidAsString(),w}return Nn(TooltipComponent,t),TooltipComponent.prototype.setMessage=function(t){t!==this.options.message&&(this.helper.getById(this.mesageId).html(this.createMessage(t)),this.options.message=t)},TooltipComponent.prototype.bind=function(){},TooltipComponent.prototype.createTemplate=function(){var t=this.options;if(!t||!t.message)return"";var h=this.createMessage(t.message),y="";switch(t.position){case"top":default:y="tooltip-component--top";break;case"bottom":y="tooltip-component--bottom"}return'<div id="'+this.mesageId+'" class="tooltip-component '+y+'">'+h+"</div>"},TooltipComponent.prototype.createMessage=function(t){return'<div class="tooltip-message">'+t+"</div>"},TooltipComponent}(Ht),Un=function(){var extendStatics=function(t,h){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,h){t.__proto__=h}||function(t,h){for(var y in h)Object.prototype.hasOwnProperty.call(h,y)&&(t[y]=h[y])},extendStatics(t,h)};return function(t,h){if("function"!=typeof h&&null!==h)throw new TypeError("Class extends value "+String(h)+" is not a constructor or null");function __(){this.constructor=t}extendStatics(t,h),t.prototype=null===h?Object.create(h):(__.prototype=h.prototype,new __)}}(),Wn=__webpack_require__(61597),Hn=function(t){function RotatePagesFromComponent(h){var y=t.call(this,h)||this;return y.disabled=!1,y.change=new J,y.reset=new J,y.ids={componentId:y.componentId,btnResetId:y.createChildId("reset"),btnRotateLeftId:y.createChildId("rotate-left"),btnRotateRightId:y.createChildId("rotate-right")},y}return Un(RotatePagesFromComponent,t),Object.defineProperty(RotatePagesFromComponent.prototype,"change$",{get:function(){return this.change.asObservable().pipe(takeUntil(this.destroyEvent))},enumerable:!1,configurable:!0}),Object.defineProperty(RotatePagesFromComponent.prototype,"reset$",{get:function(){return this.reset.asObservable().pipe(takeUntil(this.destroyEvent))},enumerable:!1,configurable:!0}),RotatePagesFromComponent.prototype.setComponentVisible=function(t){this.$component.toggleClass("--show",t)},RotatePagesFromComponent.prototype.setDisableState=function(t){var h=this,y=this.ids;[y.btnResetId,y.btnRotateRightId,y.btnRotateRightId].forEach((function(y){h.helper.toggleDisabled(h.helper.getById(y),t)})),this.disabled=t},RotatePagesFromComponent.prototype.setValue=function(t){},RotatePagesFromComponent.prototype.isDisabled=function(){return this.disabled},RotatePagesFromComponent.prototype.destroyComponent=function(){this.reset.complete(),this.change.complete(),t.prototype.destroyComponent.call(this)},RotatePagesFromComponent.prototype.allowReset=function(t){var h=this.helper.getById(this.ids.btnResetId);this.helper.toggleDisabled(h,!t),h.toggleClass(this.helper.css.displayNone,!t)},RotatePagesFromComponent.prototype.bind=function(){var t=this,h=this.serviceProvider.Translate,y=this.ids;new Vn(y.btnRotateLeftId,{message:h.get("component-rotate-90-counterclockwise")}).init(),new Vn(y.btnRotateRightId,{message:h.get("component-rotate-90-clockwise")}).init(),this.$parent.addClass("rotate-pages--form-container");var initBtn=function(h,y){fromEvent(t.helper.getById(h).get(0),"click").pipe(takeUntil(t.destroyEvent)).subscribe((function(){t.helper.isDisabled(t.helper.getById(h))||y()}))},initRotate=function(h,y){initBtn(h,(function(){return t.change.next({direction:y})}))};initRotate(y.btnRotateLeftId,Pn.left),initRotate(y.btnRotateRightId,Pn.right),initBtn(y.btnResetId,(function(){return t.reset.next(void 0)}))},RotatePagesFromComponent.prototype.createTemplate=function(){var t=this.setTemplateValuesByModel(Wn,this.ids),h={btnResetLabel:this.serviceProvider.Translate.get("component-revert-changes"),btnRotateLeftIcon:Kt.rotateLeft,btnRotateRightIcon:Kt.rotateRight};return this.setTemplateValuesByModel(t,h)},RotatePagesFromComponent}(Ht),Gn=function(){var extendStatics=function(t,h){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,h){t.__proto__=h}||function(t,h){for(var y in h)Object.prototype.hasOwnProperty.call(h,y)&&(t[y]=h[y])},extendStatics(t,h)};return function(t,h){if("function"!=typeof h&&null!==h)throw new TypeError("Class extends value "+String(h)+" is not a constructor or null");function __(){this.constructor=t}extendStatics(t,h),t.prototype=null===h?Object.create(h):(__.prototype=h.prototype,new __)}}(),zn=function(t){function DeleteHeaderComponent(h,y){return t.call(this,h,y)||this}return Gn(DeleteHeaderComponent,t),DeleteHeaderComponent}(An);function throwError(t,h){return new W(h?function(y){return h.schedule(dispatch,0,{error:t,subscriber:y})}:function(h){return h.error(t)})}function dispatch(t){var h=t.error;t.subscriber.error(h)}Ln||(Ln={});var qn=function(){function Notification(t,h,y){this.kind=t,this.value=h,this.error=y,this.hasValue="N"===t}return Notification.prototype.observe=function(t){switch(this.kind){case"N":return t.next&&t.next(this.value);case"E":return t.error&&t.error(this.error);case"C":return t.complete&&t.complete()}},Notification.prototype.do=function(t,h,y){switch(this.kind){case"N":return t&&t(this.value);case"E":return h&&h(this.error);case"C":return y&&y()}},Notification.prototype.accept=function(t,h,y){return t&&"function"==typeof t.next?this.observe(t):this.do(t,h,y)},Notification.prototype.toObservable=function(){switch(this.kind){case"N":return of(this.value);case"E":return throwError(this.error);case"C":return empty_empty()}throw new Error("unexpected notification kind value")},Notification.createNext=function(t){return void 0!==t?new Notification("N",t):Notification.undefinedValueNotification},Notification.createError=function(t){return new Notification("E",void 0,t)},Notification.createComplete=function(){return Notification.completeNotification},Notification.completeNotification=new Notification("C"),Notification.undefinedValueNotification=new Notification("N",void 0),Notification}();function delay(t,h){void 0===h&&(h=Ze);var y=function isDate(t){return t instanceof Date&&!isNaN(+t)}(t)?+t-h.now():Math.abs(t);return function(t){return t.lift(new $n(y,h))}}var $n=function(){function DelayOperator(t,h){this.delay=t,this.scheduler=h}return DelayOperator.prototype.call=function(t,h){return h.subscribe(new Jn(t,this.delay,this.scheduler))},DelayOperator}(),Jn=function(t){function DelaySubscriber(h,y,w){var A=t.call(this,h)||this;return A.delay=y,A.scheduler=w,A.queue=[],A.active=!1,A.errored=!1,A}return __extends(DelaySubscriber,t),DelaySubscriber.dispatch=function(t){for(var h=t.source,y=h.queue,w=t.scheduler,A=t.destination;y.length>0&&y[0].time-w.now()<=0;)y.shift().notification.observe(A);if(y.length>0){var T=Math.max(0,y[0].time-w.now());this.schedule(t,T)}else this.unsubscribe(),h.active=!1},DelaySubscriber.prototype._schedule=function(t){this.active=!0,this.destination.add(t.schedule(DelaySubscriber.dispatch,this.delay,{source:this,destination:this.destination,scheduler:t}))},DelaySubscriber.prototype.scheduleNotification=function(t){if(!0!==this.errored){var h=this.scheduler,y=new Xn(h.now()+this.delay,t);this.queue.push(y),!1===this.active&&this._schedule(h)}},DelaySubscriber.prototype._next=function(t){this.scheduleNotification(qn.createNext(t))},DelaySubscriber.prototype._error=function(t){this.errored=!0,this.queue=[],this.destination.error(t),this.unsubscribe()},DelaySubscriber.prototype._complete=function(){this.scheduleNotification(qn.createComplete()),this.unsubscribe()},DelaySubscriber}(B),Xn=function Xn(t,h){this.time=t,this.notification=h};function takeWhile(t,h){return void 0===h&&(h=!1),function(y){return y.lift(new Kn(t,h))}}var Qn,Kn=function(){function TakeWhileOperator(t,h){this.predicate=t,this.inclusive=h}return TakeWhileOperator.prototype.call=function(t,h){return h.subscribe(new Yn(t,this.predicate,this.inclusive))},TakeWhileOperator}(),Yn=function(t){function TakeWhileSubscriber(h,y,w){var A=t.call(this,h)||this;return A.predicate=y,A.inclusive=w,A.index=0,A}return __extends(TakeWhileSubscriber,t),TakeWhileSubscriber.prototype._next=function(t){var h,y=this.destination;try{h=this.predicate(t,this.index++)}catch(t){return void y.error(t)}this.nextOrComplete(t,h)},TakeWhileSubscriber.prototype.nextOrComplete=function(t,h){var y=this.destination;Boolean(h)?y.next(t):(this.inclusive&&y.next(t),y.complete())},TakeWhileSubscriber}(B),Zn=function(){var extendStatics=function(t,h){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,h){t.__proto__=h}||function(t,h){for(var y in h)Object.prototype.hasOwnProperty.call(h,y)&&(t[y]=h[y])},extendStatics(t,h)};return function(t,h){if("function"!=typeof h&&null!==h)throw new TypeError("Class extends value "+String(h)+" is not a constructor or null");function __(){this.constructor=t}extendStatics(t,h),t.prototype=null===h?Object.create(h):(__.prototype=h.prototype,new __)}}(),eo=__webpack_require__(14179),to=function(t){function SettingsComponent(h){var y=t.call(this,h)||this;return y.ids={componentId:y.componentId},y.click$=new J,y}return Zn(SettingsComponent,t),Object.defineProperty(SettingsComponent.prototype,"clickEvent$",{get:function(){return this.click$.asObservable()},enumerable:!1,configurable:!0}),SettingsComponent.prototype.destroyComponent=function(){this.click$.complete(),t.prototype.destroyComponent.call(this)},SettingsComponent.prototype.createTemplate=function(){var t=this.setTemplateValuesByModel(eo,this.ids),h={settingsIcon:Kt.gear};return this.setTemplateValuesByModel(t,h)},SettingsComponent.prototype.bind=function(){var t=this;fromEvent(this.$component.get(0),"click").pipe(takeUntil(this.destroyEvent)).subscribe((function(){t.click$.next()}))},SettingsComponent}(Ht),ro=function(){var extendStatics=function(t,h){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,h){t.__proto__=h}||function(t,h){for(var y in h)Object.prototype.hasOwnProperty.call(h,y)&&(t[y]=h[y])},extendStatics(t,h)};return function(t,h){if("function"!=typeof h&&null!==h)throw new TypeError("Class extends value "+String(h)+" is not a constructor or null");function __(){this.constructor=t}extendStatics(t,h),t.prototype=null===h?Object.create(h):(__.prototype=h.prototype,new __)}}(),no=function(t){function FooterWithModalForm(h,y,w){var A=t.call(this,h,{popover:function(t){return new to(t)}})||this;return A.dialogComponent=y,A.formFactory=w,A.fileLoaded=!1,A.footerTypeCss="app-footer--with-modal-form",A}return ro(FooterWithModalForm,t),FooterWithModalForm.prototype.bind=function(){var h=this;t.prototype.bind.call(this),this.popover.clickEvent$.pipe(takeUntil(this.destroyEvent),filter((function(){return h.fileLoaded}))).subscribe((function(){h.serviceProvider.modalService.show((function(t){var y=new h.dialogComponent(t,h.formFactory,h.form);return h.form&&y.mustRecreateForm()&&h.form.destroyComponent(),y}))})),this.serviceProvider.modalService.onHide$.pipe(takeUntil(this.destroyEvent)).subscribe((function(){h.setRunJobDisabledState(h.calculateRunJobDisabledState())})),this.serviceProvider.viewerService.filesUpdated$.pipe(takeUntil(this.destroyEvent),delay(1),take(1)).subscribe((function(){h.fileLoaded=!0,h.form=h.formFactory(h.ids.formContainerId),h.form.init(),h.setRunJobDisabledState(h.calculateRunJobDisabledState())}));var y=this.serviceProvider.toolsConfigService.getToolName();this.runJob$.pipe(takeUntil(this.destroyEvent)).subscribe((function(t){t&&h.serviceProvider.formValuesService.remove(y)})),wt.addPdfWatermark===y&&this.bindForWatermark()},FooterWithModalForm.prototype.onDestroy=function(){this.form&&this.form.destroyComponent(),t.prototype.onDestroy.call(this)},FooterWithModalForm.prototype.updateBtnLabel=function(h,y){var w=h;switch(this.serviceProvider.toolsConfigService.getToolName()){case wt.editMetadataPdf:w="m-edit-pdf-meta-start-processing";break;case wt.addPdfPageNumbers:w="m-add-page-numbers-start-processing"}t.prototype.updateBtnLabel.call(this,w,y)},FooterWithModalForm.prototype.calculateRunJobDisabledState=function(){var t,h,y;if(!this.fileLoaded)return!0;var w=this.serviceProvider.toolsConfigService;if(w.isFormTool()){var A=this.form,T=null===(t=w.getToolConfig())||void 0===t?void 0:t.formConfig,E=!(A.isValid()||(null===(h=null==T?void 0:T.value)||void 0===h?void 0:h.valid));return wt.editMetadataPdf===w.getToolName()&&(E=E||!(null===(y=null==T?void 0:T.value)||void 0===y?void 0:y.changed)),E}return!1},FooterWithModalForm.prototype.bindForWatermark=function(){var t=this;this.$btnRunJob.addClass("display-none"),this.$popover.addClass("display-none");var h=$("<a></a>");h.addClass("app-footer--btn-run-job add-watermark--btn-run-job"),h.append(Kt.svgSymbol(24,24,"plus")),h.append("<span>"+this.serviceProvider.Translate.get("m-popup-add-watermark-save-btn")+"</span>"),h.on("click",(function(){t.serviceProvider.modalService.show((function(h){var y=new t.dialogComponent(h,t.formFactory,t.form);return t.form&&y.mustRecreateForm()&&t.form.destroyComponent(),y}))})),this.$component.append(h);var y=!0;this.serviceProvider.modalService.onHide$.pipe(takeUntil(this.destroyEvent),takeWhile((function(){return y}))).subscribe((function(){t.serviceProvider.formValuesService.has(wt.addPdfWatermark)&&(h.off(),h.remove(),h=null,y=!1,t.$btnRunJob.removeClass("display-none"),t.$popover.removeClass("display-none"))}))},FooterWithModalForm}(ur),oo=function(){var extendStatics=function(t,h){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,h){t.__proto__=h}||function(t,h){for(var y in h)Object.prototype.hasOwnProperty.call(h,y)&&(t[y]=h[y])},extendStatics(t,h)};return function(t,h){if("function"!=typeof h&&null!==h)throw new TypeError("Class extends value "+String(h)+" is not a constructor or null");function __(){this.constructor=t}extendStatics(t,h),t.prototype=null===h?Object.create(h):(__.prototype=h.prototype,new __)}}(),io=__webpack_require__(35960),ao=function(t){function DialogSettingsComponent(h,y,w){var A=t.call(this,h)||this;return A.formFactory=y,A.isClosedBySelf=!1,A.form=w,A.ids={componentId:A.componentId,formContainerId:ke.createQuickGuidAsString(),btnCloseId:ke.createQuickGuidAsString(),btnOkId:ke.createQuickGuidAsString()},A.dialogOptions={backdrop:!0},A}return oo(DialogSettingsComponent,t),Object.defineProperty(DialogSettingsComponent.prototype,"$btnOk",{get:function(){return this.helper.getById(this.ids.btnOkId)},enumerable:!1,configurable:!0}),DialogSettingsComponent.prototype.mustRecreateForm=function(){return!0},DialogSettingsComponent.prototype.show=function(){},DialogSettingsComponent.prototype.hide=function(){if(!this.isClosedBySelf){var t=this.getSavedOptions()||this.getOptions();t&&this.revertOptions(t)}this.mustRecreateForm()||this.helper.getById(this.form.parentId).append(this.helper.getById(this.ids.formContainerId).children()),this.unbind(),this.destroyComponent()},DialogSettingsComponent.prototype.onDestroy=function(){this.mustRecreateForm()&&this.destroyChildren(["form"]),t.prototype.onDestroy.call(this)},DialogSettingsComponent.prototype.createTemplate=function(){var t,h,y=this.setTemplateValuesByModel(io,this.ids),w=Object.assign({title:null===(t=this.viewModel)||void 0===t?void 0:t.title,btnOkLabel:null===(h=this.viewModel)||void 0===h?void 0:h.btnOkLabel});return this.setTemplateValuesByModel(y,w)},DialogSettingsComponent.prototype.appendTemplate=function(){t.prototype.appendTemplate.call(this),this.mustRecreateForm()?(this.form=this.formFactory(this.ids.formContainerId),this.form.init()):this.helper.getById(this.ids.formContainerId).append(this.helper.getById(this.form.parentId).children())},DialogSettingsComponent.prototype.bind=function(){var t=this,h=this.serviceProvider.toolsConfigService.getToolName(),y=this.getSavedOptions()||this.getOptions(),w=this.form;this.helper.toggleDisabled(this.$btnOk,!w.isValid()),w.change$.pipe(takeUntil(this.destroyEvent)).subscribe((function(){t.helper.toggleDisabled(t.$btnOk,!w.isValid())})),fromEvent(document,"keydown").pipe(takeUntil(this.destroyEvent),filter((function(t){return"Escape"===t.key})),take(1)).subscribe((function(){y&&t.revertOptions(y),t.close()})),fromEvent(this.helper.getById(this.ids.btnCloseId),"click").pipe(takeUntil(this.destroyEvent),take(1)).subscribe((function(){y&&t.revertOptions(y),t.close()})),fromEvent(this.helper.getById(this.ids.btnOkId),"click").pipe(takeUntil(this.destroyEvent),take(1),delay(100)).subscribe((function(){var y=t.serviceProvider.toolsConfigService,w=t.serviceProvider.toolOptionService,A=t.getOptions();A?(y.isFormTool()||Object.keys(A).forEach((function(t){w.setDefault(t,A[t])})),A.hasOwnProperty("changed")&&(A.changed=!0,y.setFormValue(A),wt.editMetadataPdf===h&&t.form.setValue(A)),t.serviceProvider.formValuesService.save(h,A),t.close()):t.close()}))},DialogSettingsComponent.prototype.revertOptions=function(t){this.serviceProvider.toolsConfigService.isFormTool()?this.form.setValue(t):this.serviceProvider.toolOptionService.saveCurrentOptions(t)},DialogSettingsComponent.prototype.close=function(){this.isClosedBySelf=!0,this.serviceProvider.modalService.onComponentClose(this)},DialogSettingsComponent.prototype.getOptions=function(){var t=this.serviceProvider.toolsConfigService;return t.isFormTool()?at.asTypeRecursion(t.getToolConfig().formConfig.value):this.serviceProvider.toolOptionService.getCurrentOptions()},DialogSettingsComponent.prototype.getSavedOptions=function(){var t=this.serviceProvider.toolsConfigService.getToolName(),h=this.serviceProvider.formValuesService.get(t);return h||null},DialogSettingsComponent}(Ht),so=function(){var extendStatics=function(t,h){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,h){t.__proto__=h}||function(t,h){for(var y in h)Object.prototype.hasOwnProperty.call(h,y)&&(t[y]=h[y])},extendStatics(t,h)};return function(t,h){if("function"!=typeof h&&null!==h)throw new TypeError("Class extends value "+String(h)+" is not a constructor or null");function __(){this.constructor=t}extendStatics(t,h),t.prototype=null===h?Object.create(h):(__.prototype=h.prototype,new __)}}(),lo=function(t){function DialogCompressSettingsComponent(h,y){var w=t.call(this,h,y)||this;return w.formFactory=y,w.initViewModel(),w}return so(DialogCompressSettingsComponent,t),DialogCompressSettingsComponent.prototype.initViewModel=function(){var t=this.serviceProvider.Translate;this.viewModel={title:t.get("m-popup-compress-pdf-header"),btnOkLabel:t.get("m-popup-compress-pdf-save-btn")}},DialogCompressSettingsComponent}(ao),co=function(){var extendStatics=function(t,h){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,h){t.__proto__=h}||function(t,h){for(var y in h)Object.prototype.hasOwnProperty.call(h,y)&&(t[y]=h[y])},extendStatics(t,h)};return function(t,h){if("function"!=typeof h&&null!==h)throw new TypeError("Class extends value "+String(h)+" is not a constructor or null");function __(){this.constructor=t}extendStatics(t,h),t.prototype=null===h?Object.create(h):(__.prototype=h.prototype,new __)}}(),uo=function(t){function DialogPageNumbersSettingsComponent(h,y){var w=t.call(this,h,y)||this;return w.formFactory=y,w.initViewModel(),w}return co(DialogPageNumbersSettingsComponent,t),DialogPageNumbersSettingsComponent.prototype.initViewModel=function(){var t=this.serviceProvider.Translate;this.viewModel={title:t.get("m-popup-add-page-numbers-header"),btnOkLabel:t.get("m-popup-add-page-numbers-save-btn")}},DialogPageNumbersSettingsComponent}(ao),po=function(){var extendStatics=function(t,h){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,h){t.__proto__=h}||function(t,h){for(var y in h)Object.prototype.hasOwnProperty.call(h,y)&&(t[y]=h[y])},extendStatics(t,h)};return function(t,h){if("function"!=typeof h&&null!==h)throw new TypeError("Class extends value "+String(h)+" is not a constructor or null");function __(){this.constructor=t}extendStatics(t,h),t.prototype=null===h?Object.create(h):(__.prototype=h.prototype,new __)}}(),fo=function(t){function DialogWatermarkSettingsComponent(h,y){var w=t.call(this,h,y)||this;return w.initViewModel(),w}return po(DialogWatermarkSettingsComponent,t),DialogWatermarkSettingsComponent.prototype.revertOptions=function(t){var h=this.form;h.change$.pipe(take(1)).subscribe((function(){h.setValue(t)})),h.setValue(t)},DialogWatermarkSettingsComponent.prototype.initViewModel=function(){var t=this.serviceProvider.Translate;this.viewModel={title:t.get("m-popup-add-watermark-header"),btnOkLabel:t.get("m-popup-add-watermark-save-btn")}},DialogWatermarkSettingsComponent}(ao),ho=function(){var extendStatics=function(t,h){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,h){t.__proto__=h}||function(t,h){for(var y in h)Object.prototype.hasOwnProperty.call(h,y)&&(t[y]=h[y])},extendStatics(t,h)};return function(t,h){if("function"!=typeof h&&null!==h)throw new TypeError("Class extends value "+String(h)+" is not a constructor or null");function __(){this.constructor=t}extendStatics(t,h),t.prototype=null===h?Object.create(h):(__.prototype=h.prototype,new __)}}(),vo=function(t){function DialogEditMetaSettingsComponent(h,y,w){var A=t.call(this,h,null,w)||this;return A.initViewModel(),A}return ho(DialogEditMetaSettingsComponent,t),DialogEditMetaSettingsComponent.prototype.mustRecreateForm=function(){return!1},DialogEditMetaSettingsComponent.prototype.bind=function(){this.fixFormValues(),t.prototype.bind.call(this)},DialogEditMetaSettingsComponent.prototype.revertOptions=function(t){this.form.setValue(t)},DialogEditMetaSettingsComponent.prototype.initViewModel=function(){var t=this.serviceProvider.Translate;this.viewModel={title:t.get("m-popup-edit-metadata-header"),btnOkLabel:t.get("m-popup-edit-metadata-save-btn")}},DialogEditMetaSettingsComponent.prototype.fixFormValues=function(){var t,h=this,y=null===(t=this.serviceProvider.toolsConfigService.getToolConfig().formConfig)||void 0===t?void 0:t.value;y?this.serviceProvider.formValuesService.save(wt.editMetadataPdf,y):this.form.change$.pipe(take(1)).subscribe((function(){h.fixFormValues()}))},DialogEditMetaSettingsComponent}(ao),mo=function(){var extendStatics=function(t,h){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,h){t.__proto__=h}||function(t,h){for(var y in h)Object.prototype.hasOwnProperty.call(h,y)&&(t[y]=h[y])},extendStatics(t,h)};return function(t,h){if("function"!=typeof h&&null!==h)throw new TypeError("Class extends value "+String(h)+" is not a constructor or null");function __(){this.constructor=t}extendStatics(t,h),t.prototype=null===h?Object.create(h):(__.prototype=h.prototype,new __)}}(),yo=function(t){function DialogProtectPdfSettingsComponent(h,y){var w=t.call(this,h,y)||this;return w.formFactory=y,w.initViewModel(),w}return mo(DialogProtectPdfSettingsComponent,t),DialogProtectPdfSettingsComponent.prototype.initViewModel=function(){var t=this.serviceProvider.Translate;this.viewModel={title:t.get("m-popup-protect-pdf-header"),btnOkLabel:t.get("m-popup-protect-pdf-save-btn")}},DialogProtectPdfSettingsComponent}(ao),go=function(){var extendStatics=function(t,h){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,h){t.__proto__=h}||function(t,h){for(var y in h)Object.prototype.hasOwnProperty.call(h,y)&&(t[y]=h[y])},extendStatics(t,h)};return function(t,h){if("function"!=typeof h&&null!==h)throw new TypeError("Class extends value "+String(h)+" is not a constructor or null");function __(){this.constructor=t}extendStatics(t,h),t.prototype=null===h?Object.create(h):(__.prototype=h.prototype,new __)}}(),bo=function(t){function DialogBookToPdfSettings(h,y){var w=t.call(this,h,y)||this;return w.formFactory=y,w.initViewModel(),w}return go(DialogBookToPdfSettings,t),DialogBookToPdfSettings.prototype.initViewModel=function(){var t=this.serviceProvider.toolsConfigService.getToolName();this.viewModel={title:this.getTitleTranslation(t),btnOkLabel:this.getButtonTranslation(t)}},DialogBookToPdfSettings.prototype.getTitleTranslation=function(t){var h=this.serviceProvider.Translate,y="m-popup-"+t+"-header";return h.has(y)||(y="Convert to PDF"),h.get(y)},DialogBookToPdfSettings.prototype.getButtonTranslation=function(t){var h=this.serviceProvider.Translate,y="m-popup-"+t+"-save-btn";return h.has(y)||(y="Apply changes"),h.get(y)},DialogBookToPdfSettings}(ao),_o=function(){var extendStatics=function(t,h){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,h){t.__proto__=h}||function(t,h){for(var y in h)Object.prototype.hasOwnProperty.call(h,y)&&(t[y]=h[y])},extendStatics(t,h)};return function(t,h){if("function"!=typeof h&&null!==h)throw new TypeError("Class extends value "+String(h)+" is not a constructor or null");function __(){this.constructor=t}extendStatics(t,h),t.prototype=null===h?Object.create(h):(__.prototype=h.prototype,new __)}}(),So=function(t){function DialogSplitPdfSettingsComponent(h,y,w){var A=t.call(this,h,null,w)||this;return A.ids.selectAllId=A.componentId+"__select-all",A.initViewModel(),A}return _o(DialogSplitPdfSettingsComponent,t),Object.defineProperty(DialogSplitPdfSettingsComponent.prototype,"$selectAllCtrl",{get:function(){return this.helper.getById(this.ids.selectAllId)},enumerable:!1,configurable:!0}),DialogSplitPdfSettingsComponent.prototype.mustRecreateForm=function(){return!1},DialogSplitPdfSettingsComponent.prototype.onDestroy=function(){this.$selectAllCtrl.remove(),t.prototype.onDestroy.call(this)},DialogSplitPdfSettingsComponent.prototype.bind=function(){var h,y=this;this.fixFormValues(),t.prototype.bind.call(this),this.helper.getById(this.ids.formContainerId).append(this.createSelectAllPagesControl());var w=((null===(h=this.serviceProvider.toolsConfigService.getToolConfig().formConfig)||void 0===h?void 0:h.value)||{}).mode;this.toggleSelectAllControlByMode(w),this.form.change$.pipe(takeUntil(this.destroyEvent)).subscribe((function(t){return y.toggleSelectAllControlByMode(null==t?void 0:t.mode)}))},DialogSplitPdfSettingsComponent.prototype.revertOptions=function(t){var h=this.form;h.change$.pipe(take(1)).subscribe((function(){h.setValue(t)})),h.setValue(t)},DialogSplitPdfSettingsComponent.prototype.initViewModel=function(){var t=this.serviceProvider.Translate;this.viewModel={title:t.get("m-popup-split-pdf-header"),btnOkLabel:t.get("m-popup-split-pdf-save-btn")}},DialogSplitPdfSettingsComponent.prototype.fixFormValues=function(){var t,h=null===(t=this.serviceProvider.toolsConfigService.getToolConfig().formConfig)||void 0===t?void 0:t.value;this.serviceProvider.formValuesService.save(wt.splitPdf,h)},DialogSplitPdfSettingsComponent.prototype.createSelectAllPagesControl=function(){var t=this,h=this.serviceProvider.Translate,y=$('<div id="'+this.ids.selectAllId+'" class="select-all-control"></div>');if($(".page-item").length>1){var w=$('<a href="javascript:void(0)">'+h.get("m-popup-split-pdf-select-all")+"</a>");y.append(w),fromEvent(w.get(0),"click").pipe(takeUntil(this.destroyEvent)).subscribe((function(){t.serviceProvider.splitService.onSelectAllPagesChange(!0)}))}return y},DialogSplitPdfSettingsComponent.prototype.toggleSelectAllControlByMode=function(t){Tt.single===t?this.$selectAllCtrl.show():this.$selectAllCtrl.hide()},DialogSplitPdfSettingsComponent}(ao),wo=function(){var extendStatics=function(t,h){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,h){t.__proto__=h}||function(t,h){for(var y in h)Object.prototype.hasOwnProperty.call(h,y)&&(t[y]=h[y])},extendStatics(t,h)};return function(t,h){if("function"!=typeof h&&null!==h)throw new TypeError("Class extends value "+String(h)+" is not a constructor or null");function __(){this.constructor=t}extendStatics(t,h),t.prototype=null===h?Object.create(h):(__.prototype=h.prototype,new __)}}(),Co=function(t){function DialogDeletePagesSettingsComponent(h,y,w){var A=t.call(this,h,null,w)||this;return A.ids.selectAllId=A.componentId+"__select-all",A.initViewModel(),A}return wo(DialogDeletePagesSettingsComponent,t),DialogDeletePagesSettingsComponent.prototype.mustRecreateForm=function(){return!1},DialogDeletePagesSettingsComponent.prototype.onDestroy=function(){this.helper.getById(this.ids.selectAllId).remove(),t.prototype.onDestroy.call(this)},DialogDeletePagesSettingsComponent.prototype.bind=function(){this.fixFormValues(),t.prototype.bind.call(this),this.helper.getById(this.ids.formContainerId).append(this.createSelectAllPagesControl())},DialogDeletePagesSettingsComponent.prototype.initViewModel=function(){var t=this.serviceProvider.Translate;this.viewModel={title:t.get("m-popup-delete-pages-header"),btnOkLabel:t.get("m-popup-delete-pages-save-btn")}},DialogDeletePagesSettingsComponent.prototype.fixFormValues=function(){var t,h=null===(t=this.serviceProvider.toolsConfigService.getToolConfig().formConfig)||void 0===t?void 0:t.value;h||(h={pages:"",pending:!1,valid:!1}),this.serviceProvider.formValuesService.save(wt.deletePdf,h)},DialogDeletePagesSettingsComponent.prototype.createSelectAllPagesControl=function(){var t=this,h=this.serviceProvider.Translate,y=$('<div id="'+this.ids.selectAllId+'" class="select-all-control"></div>');if($(".page-item").length>1){var w=$('<a href="javascript:void(0)">'+h.get("m-popup-delete-pages-select-all")+"</a>");y.append(w),fromEvent(w.get(0),"click").pipe(takeUntil(this.destroyEvent)).subscribe((function(){t.serviceProvider.deletePagesService.onSelectAllPagesChange(!0)}))}return y},DialogDeletePagesSettingsComponent}(ao),Po=function(){var extendStatics=function(t,h){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,h){t.__proto__=h}||function(t,h){for(var y in h)Object.prototype.hasOwnProperty.call(h,y)&&(t[y]=h[y])},extendStatics(t,h)};return function(t,h){if("function"!=typeof h&&null!==h)throw new TypeError("Class extends value "+String(h)+" is not a constructor or null");function __(){this.constructor=t}extendStatics(t,h),t.prototype=null===h?Object.create(h):(__.prototype=h.prototype,new __)}}(),ko=function(t){function DialogHeaderFooterSettings(h,y,w){var A=t.call(this,h,y,w)||this;return A.initViewModel(),A}return Po(DialogHeaderFooterSettings,t),DialogHeaderFooterSettings.prototype.mustRecreateForm=function(){return!1},DialogHeaderFooterSettings.prototype.bind=function(){this.fixFormValues(),t.prototype.bind.call(this)},DialogHeaderFooterSettings.prototype.revertOptions=function(t){var h=this.form,y=at.asJson(t);h.change$.pipe(take(1)).subscribe((function(){h.setValue(y)})),h.setValue(y)},DialogHeaderFooterSettings.prototype.fixFormValues=function(){var t,h=null===(t=this.serviceProvider.toolsConfigService.getToolConfig().formConfig)||void 0===t?void 0:t.value;h||(h={header:{text:"",fontColor:"#000000",position:Qr.left},footer:{text:"",fontColor:"#000000",position:Qr.left},valid:!1,pending:!1}),this.serviceProvider.formValuesService.save(wt.addPdfHeaderAndFooter,h)},DialogHeaderFooterSettings.prototype.initViewModel=function(){var t=this.serviceProvider.Translate;this.viewModel={title:t.get("m-popup-header-and-footer-header"),btnOkLabel:t.get("m-popup-header-and-footer-save-btn")}},DialogHeaderFooterSettings}(ao),xo=function(){var extendStatics=function(t,h){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,h){t.__proto__=h}||function(t,h){for(var y in h)Object.prototype.hasOwnProperty.call(h,y)&&(t[y]=h[y])},extendStatics(t,h)};return function(t,h){if("function"!=typeof h&&null!==h)throw new TypeError("Class extends value "+String(h)+" is not a constructor or null");function __(){this.constructor=t}extendStatics(t,h),t.prototype=null===h?Object.create(h):(__.prototype=h.prototype,new __)}}(),Ao=function(t){function DialogPdfOcrSettingsComponent(h,y){var w=t.call(this,h,y)||this;return w.initViewModel(),w}return xo(DialogPdfOcrSettingsComponent,t),DialogPdfOcrSettingsComponent.prototype.initViewModel=function(){var t=this.serviceProvider.Translate;this.viewModel={title:t.get("m-popup-pdf-ocr-header"),btnOkLabel:t.get("m-popup-pdf-ocr-save-btn")}},DialogPdfOcrSettingsComponent}(ao),Io=function(){var extendStatics=function(t,h){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,h){t.__proto__=h}||function(t,h){for(var y in h)Object.prototype.hasOwnProperty.call(h,y)&&(t[y]=h[y])},extendStatics(t,h)};return function(t,h){if("function"!=typeof h&&null!==h)throw new TypeError("Class extends value "+String(h)+" is not a constructor or null");function __(){this.constructor=t}extendStatics(t,h),t.prototype=null===h?Object.create(h):(__.prototype=h.prototype,new __)}}(),To=function(t){function DialogResizePagesSettingsComponent(h,y){var w=t.call(this,h,y)||this;return w.initViewModel(),w}return Io(DialogResizePagesSettingsComponent,t),DialogResizePagesSettingsComponent.prototype.initViewModel=function(){var t=this.serviceProvider.Translate;this.viewModel={title:t.get("m-popup-resize-pages-header"),btnOkLabel:t.get("m-popup-resize-pages-save-btn")}},DialogResizePagesSettingsComponent}(ao),Oo=function(){var extendStatics=function(t,h){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,h){t.__proto__=h}||function(t,h){for(var y in h)Object.prototype.hasOwnProperty.call(h,y)&&(t[y]=h[y])},extendStatics(t,h)};return function(t,h){if("function"!=typeof h&&null!==h)throw new TypeError("Class extends value "+String(h)+" is not a constructor or null");function __(){this.constructor=t}extendStatics(t,h),t.prototype=null===h?Object.create(h):(__.prototype=h.prototype,new __)}}(),Eo=function(t){function DialogPdfToImageSettingsComponent(h,y){var w=t.call(this,h,y)||this;return w.initViewModel(),w}return Oo(DialogPdfToImageSettingsComponent,t),DialogPdfToImageSettingsComponent.prototype.initViewModel=function(){var t=this.serviceProvider.Translate;this.viewModel={title:t.get("m-popup-pdf-to-image-header"),btnOkLabel:t.get("m-popup-pdf-to-image-save-btn")}},DialogPdfToImageSettingsComponent}(ao),Fo=function(){function ToolsConfigFactory(){}return ToolsConfigFactory.create=function(){this.paperOptions={key:Ct.paperOrientation,values:[kt.original,kt.portrait,kt.landscape],default:kt.original,isHiddenLabel:!0},this.paperMarginOptions={key:Ct.paperMargin,values:[xt.no,xt.small,xt.big],default:xt.small,isHiddenLabel:!0},this.sortableLib={name:"Sortable",defaultPath:"https://cdnjs.cloudflare.com/ajax/libs/Sortable/1.9.0/Sortable.min.js"},this.cropperLib={name:"Cropper",defaultPath:"https://cdnjs.cloudflare.com/ajax/libs/cropperjs/1.5.6/cropper.min.js"},this.cropperLibCss={name:"CropperCss",defaultPath:"https://cdnjs.cloudflare.com/ajax/libs/cropperjs/1.5.6/cropper.min.css"};var t=Object.create(null);return this.addImagesToPdf(t),this.addPdfToImages(t),this.addPdfTools(t),this.addPerPageTools(t),this.addDocToPdf(t),this.addPdfToDoc(t),this.addBooksToPdf(t),this.addTextToPDf(t),t},ToolsConfigFactory.addImagesToPdf=function(t){var h,y=[{key:Ct.paperSize,values:[Pt.original,Pt.a4,Pt.usletter],default:Pt.original,isHiddenLabel:!0},this.paperOptions,this.paperMarginOptions],footerWithPopoverAndFormFactory=function(t){return new yr(t,(function(t){return new Rr(t)}))},sortableHeaderFactory=function(t,h){return new vr(t,h)};Object.assign(t,((h={})[wt.jpgToPdf]={fileType:Et.image,viewerType:St.file,options:at.asJson(y),hideOptionsOnMobile:!0,convertToIcons:[_t.jpg,_t.pdf],showZoomUi:!0,useDefaultOption:!0,showOrderUi:!0,isOrderable:!0,advancedLibs:[at.asJson(this.sortableLib)],footerFactory:footerWithPopoverAndFormFactory,headerFactory:sortableHeaderFactory},h[wt.pngToPdf]={fileType:Et.image,viewerType:St.file,options:at.asJson(y),hideOptionsOnMobile:!0,convertToIcons:[_t.png,_t.pdf],showZoomUi:!0,useDefaultOption:!0,showOrderUi:!0,isOrderable:!0,advancedLibs:[at.asJson(this.sortableLib)],footerFactory:footerWithPopoverAndFormFactory,headerFactory:sortableHeaderFactory},h[wt.bmpToPdf]={fileType:Et.image,viewerType:St.file,options:at.asJson(y),hideOptionsOnMobile:!0,convertToIcons:[_t.bmp,_t.pdf],showZoomUi:!0,useDefaultOption:!0,showOrderUi:!0,isOrderable:!0,advancedLibs:[at.asJson(this.sortableLib)],footerFactory:footerWithPopoverAndFormFactory,headerFactory:sortableHeaderFactory},h[wt.tiffToPdf]={fileType:Et.image,viewerType:St.file,options:at.asJson(y),hideOptionsOnMobile:!0,convertToIcons:[_t.tiff,_t.pdf],showZoomUi:!1,useDefaultOption:!0,showOrderUi:!0,isOrderable:!0,advancedLibs:[at.asJson(this.sortableLib)],footerFactory:footerWithPopoverAndFormFactory,headerFactory:sortableHeaderFactory},h))},ToolsConfigFactory.addPdfToImages=function(t){var h,y=Dt.getContainer().get(bt),w=[{key:Ct.quality,values:[At.low,At.medium,At.high],default:At.medium,isHiddenLabel:!0}],selectFooterFactory=function(t){return new Mr(t,(function(t){return new Ir(t)}))},simpleHeaderFactory=function(t,h){return new er(t,h)};Object.assign(t,((h={})[wt.pdfToJpg]={fileType:Et.pdf,viewerType:St.file,options:at.asJson(w),hideOptionsOnMobile:!0,convertToIcons:[_t.pdf,_t.jpg],showZoomUi:!0,useDefaultOption:!y.isMobile(),showOrderUi:!1,isOrderable:!1,rotatable:!0,footerFactory:function(t){if(y.isMobile()){return new no(t,Eo,(function(t){return new Ir(t)}))}return selectFooterFactory(t)},headerFactory:simpleHeaderFactory},h[wt.pdfToPng]={fileType:Et.pdf,viewerType:St.file,options:at.asJson(w),hideOptionsOnMobile:!0,convertToIcons:[_t.pdf,_t.png],showZoomUi:!0,useDefaultOption:!y.isMobile(),showOrderUi:!1,isOrderable:!1,rotatable:!0,footerFactory:function(t){if(y.isMobile()){return new no(t,Eo,(function(t){return new Ir(t)}))}return selectFooterFactory(t)},headerFactory:simpleHeaderFactory},h[wt.pdfToBmp]={fileType:Et.pdf,viewerType:St.file,options:at.asJson(w),hideOptionsOnMobile:!0,convertToIcons:[_t.pdf,_t.bmp],showZoomUi:!0,useDefaultOption:!y.isMobile(),showOrderUi:!1,isOrderable:!1,rotatable:!0,footerFactory:function(t){if(y.isMobile()){return new no(t,Eo,(function(t){return new Ir(t)}))}return selectFooterFactory(t)},headerFactory:simpleHeaderFactory},h[wt.pdfToTiff]={fileType:Et.pdf,viewerType:St.file,options:at.asJson(w),hideOptionsOnMobile:!0,convertToIcons:[_t.pdf,_t.tiff],showZoomUi:!0,useDefaultOption:!y.isMobile(),showOrderUi:!1,isOrderable:!1,rotatable:!0,footerFactory:function(t){if(y.isMobile()){return new no(t,Eo,(function(t){return new Ir(t)}))}return selectFooterFactory(t)},headerFactory:simpleHeaderFactory},h))},ToolsConfigFactory.addPdfTools=function(t){var h,y=Dt.getContainer().get(bt),simpleFooterFactory=function(t){return new Jt(t)},selectFooterFactory=function(t){return new Mr(t,(function(t){return new Ir(t)}))},simpleHeaderFactory=function(t,h){return new er(t,h)},w=this.sortableLib;Object.assign(t,((h={})[wt.mergePdf]={fileType:Et.pdf,viewerType:St.file,options:[],showZoomUi:!0,showOrderUi:!0,isOrderable:!0,useMergeFiles:!0,handleMimeAccept:!0,advancedLibs:[at.asJson(w)],footerFactory:function(t){return new dr(t)},headerFactory:function(t,h){return new vr(t,h)}},h[wt.compressPdf]={fileType:Et.pdf,viewerType:St.file,options:[{key:Ct.compress,values:[It.maximum,It.recommended,It.minimum],default:It.recommended,isHiddenLabel:!0}],showZoomUi:!0,useDefaultOption:!y.isMobile(),showOrderUi:!1,isOrderable:!1,useMergeFiles:!1,handleMimeAccept:!1,footerFactory:function(t){if(y.isMobile()){return new no(t,lo,(function(t){return new Ir(t)}))}return selectFooterFactory(t)},headerFactory:simpleHeaderFactory},h[wt.pdfOcr]={fileType:Et.pdf,viewerType:St.file,options:[{key:Ct.lang,values:jt.create().map((function(t){return t.code})),default:"eng",selectCss:"form-group--label-row",isHiddenLabel:!0}],showZoomUi:!0,useDefaultOption:!y.isMobile(),showOrderUi:!1,isOrderable:!1,useMergeFiles:!1,handleMimeAccept:!1,footerFactory:function(t){if(y.isMobile()){return new no(t,Ao,(function(t){return new Ir(t)}))}return selectFooterFactory(t)},headerFactory:simpleHeaderFactory},h[wt.pdfResize]={fileType:Et.pdf,viewerType:St.file,options:[{key:Ct.paperSize,values:[Pt.usletter,Pt.a3,Pt.a4,Pt.a5],default:Pt.a4,isHiddenLabel:!0}],showZoomUi:!0,useDefaultOption:!y.isMobile(),showOrderUi:!1,isOrderable:!1,useMergeFiles:!1,handleMimeAccept:!1,footerFactory:function(t){if(y.isMobile()){return new no(t,To,(function(t){return new Ir(t)}))}return selectFooterFactory(t)},headerFactory:function(t,h){return new Lr(t,h)}},h[wt.protectPdf]={fileType:Et.pdf,viewerType:St.file,options:[],showZoomUi:!0,useDefaultOption:!1,showOrderUi:!1,isOrderable:!1,useMergeFiles:!1,handleMimeAccept:!1,formConfig:Object.create(null),footerFactory:function(t){var formFactory=function(t){return new Gr(t)};return y.isMobile()?new no(t,yo,formFactory):new Mr(t,formFactory)},headerFactory:simpleHeaderFactory},h[wt.editMetadataPdf]={fileType:Et.pdf,viewerType:St.file,options:[],showZoomUi:!0,useDefaultOption:!1,showOrderUi:!1,isOrderable:!1,useMergeFiles:!1,handleMimeAccept:!1,formConfig:Object.create(null),footerFactory:function(t){var formFactory=function(t){return new dn(t)};return y.isMobile()?new no(t,vo,formFactory):new Mr(t,formFactory)},headerFactory:simpleHeaderFactory,requirePdfPassword:!0},h[wt.addPdfPageNumbers]={fileType:Et.pdf,viewerType:St.file,options:[],showZoomUi:!0,useDefaultOption:!1,showOrderUi:!1,isOrderable:!1,useMergeFiles:!1,handleMimeAccept:!1,formConfig:Object.create(null),footerFactory:function(t){var formFactory=function(t){return new mn(t)};return y.isMobile()?new no(t,uo,formFactory):new Mr(t,formFactory)},headerFactory:simpleHeaderFactory,requirePdfPassword:!0},h[wt.addPdfHeaderAndFooter]={fileType:Et.pdf,viewerType:St.file,options:[],showZoomUi:!0,useDefaultOption:!0,showOrderUi:!1,isOrderable:!1,useMergeFiles:!1,handleMimeAccept:!1,formConfig:Object.create(null),footerFactory:function(t){var formFactory=function(t){return new _n(t)};return y.isMobile()?new no(t,ko,formFactory):new Mr(t,formFactory)},headerFactory:simpleHeaderFactory,requirePdfPassword:!0},h[wt.addPdfWatermark]={fileType:Et.pdf,viewerType:St.file,options:[],showZoomUi:!0,useDefaultOption:!1,showOrderUi:!1,isOrderable:!1,useMergeFiles:!1,handleMimeAccept:!1,formConfig:Object.create(null),footerFactory:function(t){var formFactory=function(t){return new Cn(t)};return y.isMobile()?new no(t,fo,formFactory):new Mr(t,formFactory)},headerFactory:simpleHeaderFactory,requirePdfPassword:!0},h[wt.cropPdf]={fileType:Et.pdf,viewerType:St.fileCrop,options:[],showZoomUi:!1,useDefaultOption:!1,showOrderUi:!1,isOrderable:!1,useMergeFiles:!1,handleMimeAccept:!1,formConfig:Object.create(null),advancedLibs:[at.asJson(this.cropperLib),at.asJson(this.cropperLibCss)],footerFactory:simpleFooterFactory,headerFactory:simpleHeaderFactory,requirePdfPassword:!0},h[wt.extractText]={fileType:Et.pdf,viewerType:St.instant,options:[],convertToIcons:[_t.pdf,_t.txt],showZoomUi:void 0,showSelectAllBtn:!1,footerFactory:simpleFooterFactory,headerFactory:simpleHeaderFactory},h[wt.extractImages]={fileType:Et.pdf,viewerType:St.instant,options:[],showZoomUi:void 0,showSelectAllBtn:!1,footerFactory:simpleFooterFactory,headerFactory:simpleHeaderFactory},h[wt.editPdf]={fileType:Et.pdf,viewerType:St.editPdf,options:[],showZoomUi:void 0,showSelectAllBtn:!1,blockInstantUploading:!0,footerFactory:null,headerFactory:null},h[wt.signPdf]={fileType:Et.pdf,viewerType:St.editPdf,showZoomUi:void 0,showSelectAllBtn:!1,blockInstantUploading:!0,footerFactory:null,headerFactory:null,advancedOptions:{tools:{include:["sign"]}}},h))},ToolsConfigFactory.addPerPageTools=function(t){var h,y=Dt.getContainer().get(bt),simpleHeaderFactory=function(t,h){return new er(t,h)};Object.assign(t,((h={})[wt.splitPdf]={fileType:Et.pdf,viewerType:St.split,options:[],showZoomUi:!0,showOrderUi:!0,showSelectAllBtn:!0,hideDelete:!0,formConfig:Object.create(null),footerFactory:function(t){var formFactory=function(t){return new On(t)};return y.isMobile()?new no(t,So,formFactory):new Mr(t,formFactory)},headerFactory:function(t,h){return new An(t,h)}},h[wt.deletePdf]={fileType:Et.pdf,viewerType:St.delete,options:[],showZoomUi:!0,showOrderUi:!0,showSelectAllBtn:!0,hideDelete:!0,formConfig:Object.create(null),footerFactory:function(t){var formFactory=function(t){return new Fn(t)};return y.isMobile()?new no(t,Co,formFactory):new Mr(t,formFactory)},headerFactory:function(t,h){return new zn(t,h)}},h[wt.rotatePdf]={fileType:Et.pdf,viewerType:St.rotate,options:[],showZoomUi:!0,showOrderUi:!0,rotatable:!0,showSelectAllBtn:!0,hideDelete:!0,formConfig:Object.create(null),footerFactory:function(t){return new Mr(t,(function(t){return new Hn(t)}))},headerFactory:simpleHeaderFactory},h[wt.rearrangePdf]={fileType:Et.pdf,viewerType:St.rearrange,options:[],showOrderUi:!0,showZoomUi:!0,showSelectAllBtn:!0,rotatable:!0,isOrderable:!0,formConfig:Object.create(null),advancedLibs:[at.asJson(this.sortableLib)],footerFactory:function(t){return new Jt(t)},headerFactory:function(t,h){var y=new vr(t,h);return y.ascLabel="1-9",y.descLabel="9-1",y}},h[wt.pdfConverter]={fileType:Et.all,viewerType:St.fileConverter,options:[],showZoomUi:!1,showSelectAllBtn:!0,footerFactory:null,headerFactory:simpleHeaderFactory,blockInstantUploading:!0},h[wt.unlockPdf]={fileType:Et.pdf,viewerType:St.fileUnlock,options:[],showZoomUi:!0,showSelectAllBtn:!0,footerFactory:function(t){return new dr(t)},headerFactory:simpleHeaderFactory},h))},ToolsConfigFactory.addDocToPdf=function(t){var h,simpleFooterFactory=function(t){return new Jt(t)},simpleHeaderFactory=function(t,h){return new er(t,h)};Object.assign(t,((h={})[wt.wordToPdf]={fileType:Et.document,viewerType:St.instant,options:[],convertToIcons:[_t.doc,_t.pdf],showZoomUi:!1,footerFactory:simpleFooterFactory,headerFactory:simpleHeaderFactory},h[wt.docxToPdf]={fileType:Et.document,viewerType:St.instant,options:[],convertToIcons:[_t.docx,_t.pdf],showZoomUi:!1,footerFactory:simpleFooterFactory,headerFactory:simpleHeaderFactory},h[wt.rtfToPdf]={fileType:Et.document,viewerType:St.instant,options:[],convertToIcons:[_t.rtf,_t.pdf],showZoomUi:!1,footerFactory:simpleFooterFactory,headerFactory:simpleHeaderFactory},h[wt.odtToPdf]={fileType:Et.document,viewerType:St.instant,options:[],convertToIcons:[_t.odt,_t.pdf],showZoomUi:!1,footerFactory:simpleFooterFactory,headerFactory:simpleHeaderFactory},h[wt.pptToPdf]={fileType:Et.document,viewerType:St.instant,options:[],convertToIcons:[_t.ppt,_t.pdf],showZoomUi:!1,footerFactory:simpleFooterFactory,headerFactory:simpleHeaderFactory},h[wt.excelToPdf]={fileType:Et.document,viewerType:St.instant,options:[],convertToIcons:[_t.xls,_t.pdf],showZoomUi:!1,handleMimeAccept:!0,footerFactory:simpleFooterFactory,headerFactory:simpleHeaderFactory},h))},ToolsConfigFactory.addPdfToDoc=function(t){var h,simpleFooterFactory=function(t){return new Jt(t)},simpleHeaderFactory=function(t,h){return new er(t,h)};Object.assign(t,((h={})[wt.pdfToDocx]={fileType:Et.pdf,viewerType:St.instant,options:[],convertToIcons:[_t.pdf,_t.docx],showZoomUi:!0,showOrderUi:!1,isOrderable:!1,footerFactory:simpleFooterFactory,headerFactory:simpleHeaderFactory},h[wt.pdfToRtf]={fileType:Et.pdf,viewerType:St.instant,options:[],convertToIcons:[_t.pdf,_t.rtf],showZoomUi:!0,showOrderUi:!1,isOrderable:!1,footerFactory:simpleFooterFactory,headerFactory:simpleHeaderFactory},h[wt.pdfToWord]={fileType:Et.pdf,viewerType:St.instant,options:[],convertToIcons:[_t.pdf,_t.doc],showZoomUi:!0,showOrderUi:!1,isOrderable:!1,footerFactory:simpleFooterFactory,headerFactory:simpleHeaderFactory},h[wt.pdfToPpt]={fileType:Et.pdf,viewerType:St.instant,options:[],convertToIcons:[_t.pdf,_t.ppt],showZoomUi:!0,showOrderUi:!1,isOrderable:!1,footerFactory:simpleFooterFactory,headerFactory:simpleHeaderFactory},h[wt.pdfToExcel]={fileType:Et.pdf,viewerType:St.instant,options:[],convertToIcons:[_t.pdf,_t.xls],showZoomUi:!0,showOrderUi:!1,isOrderable:!1,footerFactory:simpleFooterFactory,headerFactory:simpleHeaderFactory},h))},ToolsConfigFactory.addBooksToPdf=function(t){var h,y=Dt.getContainer().get(bt),w=[{key:Ct.paperSize,values:[Pt.usletter,Pt.a3,Pt.a4,Pt.a5],default:Pt.a4,isHiddenLabel:!0},Object.assign({},at.asJson(this.paperMarginOptions),{default:xt.small})],selectFooterFactory=function(t){var formFactory=function(t){return new Ir(t)};return y.isMobile()?new no(t,bo,formFactory):new Mr(t,formFactory)},simpleHeaderFactory=function(t,h){return new er(t,h)};Object.assign(t,((h={})[wt.djvuToPdf]={fileType:Et.book,viewerType:St.file,options:at.asJson(w),convertToIcons:[_t.djvu,_t.pdf],showZoomUi:!1,useDefaultOption:!y.isMobile(),handleMimeAccept:!0,footerFactory:selectFooterFactory,headerFactory:simpleHeaderFactory},h[wt.epubToPdf]={fileType:Et.book,viewerType:St.file,options:at.asJson(w),convertToIcons:[_t.epub,_t.pdf],showZoomUi:!1,useDefaultOption:!y.isMobile(),handleMimeAccept:!0,footerFactory:selectFooterFactory,headerFactory:simpleHeaderFactory},h[wt.fb2ToPdf]={fileType:Et.book,viewerType:St.file,options:at.asJson(w),convertToIcons:[_t.fb2,_t.pdf],showZoomUi:!1,useDefaultOption:!y.isMobile(),handleMimeAccept:!0,footerFactory:selectFooterFactory,headerFactory:simpleHeaderFactory},h[wt.mobiToPdf]={fileType:Et.book,viewerType:St.file,options:at.asJson(w),convertToIcons:[_t.mobi,_t.pdf],showZoomUi:!1,useDefaultOption:!y.isMobile(),handleMimeAccept:!0,footerFactory:selectFooterFactory,headerFactory:simpleHeaderFactory},h))},ToolsConfigFactory.addTextToPDf=function(t){var h,simpleFooterFactory=function(t){return new Jt(t)},simpleHeaderFactory=function(t,h){return new er(t,h)};Object.assign(t,((h={})[wt.txtToPdf]={fileType:Et.text,viewerType:St.instant,options:[],showZoomUi:!1,convertToIcons:[_t.txt,_t.pdf],footerFactory:simpleFooterFactory,headerFactory:simpleHeaderFactory},h[wt.htmlToPdf]={fileType:Et.text,viewerType:St.instant,options:[],convertToIcons:[_t.html,_t.pdf],showZoomUi:!1,footerFactory:simpleFooterFactory,headerFactory:simpleHeaderFactory},h[wt.xmlToPdf]={fileType:Et.text,viewerType:St.instant,options:[],convertToIcons:[_t.xml,_t.pdf],showZoomUi:!1,footerFactory:simpleFooterFactory,headerFactory:simpleHeaderFactory},h[wt.chmToPdf]={fileType:Et.text,viewerType:St.instant,options:[],convertToIcons:[_t.chm,_t.pdf],showZoomUi:!1,footerFactory:simpleFooterFactory,headerFactory:simpleHeaderFactory},h))},ToolsConfigFactory}();!function(t){t.free="free",t.pro="pro"}(Qn||(Qn={}));var Ro,Do=function(){function UserTypeDetector(t){this.config=t}return UserTypeDetector.prototype.getUserType=function(){return this.isProUser()?Qn.pro:Qn.free},UserTypeDetector.prototype.isProUser=function(){return this.isPro(this.config.f_id)},UserTypeDetector.prototype.isPro=function(t){if(!t)return!1;var h=t.length,y=+t[h-2],w=t.substring(0,h-2)+t[h-1];return parseFloat("."+parseInt(w,y+1))>=.99},UserTypeDetector}(),Mo=function(){function ToolsConfigService(t){this.serviceProvider=t}return Object.defineProperty(ToolsConfigService.prototype,"toolConfig",{get:function(){return this._tools[this._configModel.toolName]},enumerable:!1,configurable:!0}),ToolsConfigService.prototype.setConfigModel=function(t){this._configModel=t,this._tools=Fo.create()},ToolsConfigService.prototype.getConfigModel=function(){return this._configModel},ToolsConfigService.prototype.getToolConfig=function(){return this.toolConfig},ToolsConfigService.prototype.getQueSecond=function(){var t=this.getConfigModel();return parseInt(String(t.m_id+"").replace(/-1/g,"2"),3)-1001},ToolsConfigService.prototype.useMergeFiles=function(t){return this.serviceProvider.fileMetaDataService.getFileExtension(t)!==_t.pdf&&(this.toolConfig.useMergeFiles||!1)},ToolsConfigService.prototype.isFormTool=function(){return!!this.toolConfig.formConfig||!1},ToolsConfigService.prototype.getToolName=function(){return this._configModel.toolName},ToolsConfigService.prototype.getLocalizedUrl=function(t,h){void 0===h&&(h=vt.en);var y=this.getConfigModel().lang;return y?y===h?"/"+t:"/"+y+"/"+t:t},ToolsConfigService.prototype.useInstantViewer=function(){var t=this.getToolConfig();if(t.viewerType===St.fileConverter)return!1;var h=this.getConfigModel(),y=!!t.options.length,w=1===h.maxFilesCount,A=!!t.formConfig;return!y&&w&&!A},ToolsConfigService.prototype.useFileViewer=function(){var t=this.getToolConfig();switch(t.viewerType){case St.file:case St.fileCrop:case St.fileConverter:case St.fileUnlock:return!0;case St.instant:return 1!==this.getConfigModel().maxFilesCount&&(t.viewerType=St.file,!0)}return!1},ToolsConfigService.prototype.usePerPageViewer=function(){switch(this.getToolConfig().viewerType){case St.perPage:case St.split:case St.delete:case St.rotate:case St.rearrange:return!0}return!1},ToolsConfigService.prototype.useEditor=function(){return this.getToolConfig().viewerType==St.editPdf},ToolsConfigService.prototype.allowMultipleFiles=function(){return this.getConfigModel().maxFilesCount>1},ToolsConfigService.prototype.isPdf=function(t){return t===_t.pdf},ToolsConfigService.prototype.isAllowSize=function(t,h){return t.maxFileSize>h},ToolsConfigService.prototype.useIconForPagePreview=function(t){switch(t){case _t.pdf:case _t.png:case _t.jpg:case _t.jpeg:case _t.bmp:case _t.gif:case _t.jfif:return!1;default:return!0}},ToolsConfigService.prototype.getAcceptedErrorFormats=function(){return this.getConfigModel().fileExtensions.map((function(t){return(t||"").trim().toUpperCase()})).join(", ")},ToolsConfigService.prototype.getMaxFilesSize=function(){return this.getMaxFilesSizeByCfg(this.getConfigModel().maxFileSize)},ToolsConfigService.prototype.getMaxFilesSizeByCfg=function(t){return 4*t},ToolsConfigService.prototype.showZoomUi=function(t){var h=this.toolConfig.showZoomUi;if(h)switch(t){case _t.tif:case _t.tiff:h=!1}return h},ToolsConfigService.prototype.showPageCounter=function(){return this.getToolName()===wt.addPdfPageNumbers||1!==this.getConfigModel().maxFilesCount},ToolsConfigService.prototype.isSingleFileTool=function(){return 1===this.getConfigModel().maxFilesCount},ToolsConfigService.prototype.isRotatable=function(){return this.toolConfig.rotatable||!1},ToolsConfigService.prototype.setFormValue=function(t,h){void 0===h&&(h=!0);var y=this.toolConfig.formConfig;t&&t.valid?y.value=h?at.asJson(t):t:y.value=void 0},ToolsConfigService.prototype.isEditor=function(){return this._configModel.toolName===wt.editPdf},ToolsConfigService.prototype.isProUser=function(){return new Do(this.getConfigModel()).isProUser()},ToolsConfigService}(),jo=function(){function StateServiceImpl(){this.changeState=new Te(null),this.changeState$=this.changeState.asObservable().pipe(filter((function(t){return!!t})))}return StateServiceImpl.prototype.next=function(t){this.changeState.next(t)},StateServiceImpl.prototype.getCurrentState=function(){var t=this.changeState.getValue();if(t)return t.targetState},StateServiceImpl}(),Lo=function(){function StoreFilesHelper(){}return StoreFilesHelper.prototype.isFileEventData=function(t){return t&&t.isStoreFilesArray},StoreFilesHelper.prototype.create=function(t){return{files:t,isStoreFilesArray:!0}},StoreFilesHelper.prototype.eventDataToArray=function(t){if(this.isFileEventData(t))return t.files;throw new Error("StoreFilesHelper:Incorrect data type")},StoreFilesHelper}(),Bo=function(){function WorkFilesHelper(){}return WorkFilesHelper.prototype.isFileEventData=function(t){return t&&t.isWorkFileArray},WorkFilesHelper.prototype.create=function(t){return{files:t,isWorkFileArray:!0}},WorkFilesHelper.prototype.eventDataToArray=function(t){if(this.isFileEventData(t))return t.files;throw new Error("WorkFilesHelper:Incorrect data type")},WorkFilesHelper}(),No=function(){function ProgressHelper(){}return ProgressHelper.prototype.isProgressEventData=function(t){return t&&t.isProgress},ProgressHelper.prototype.create=function(t){return{progress$:t,isProgress:!0}},ProgressHelper.prototype.toData=function(t){if(this.isProgressEventData(t))return t;throw new Error("ProgressFilesHelper:Incorrect data type")},ProgressHelper}(),Vo=function(){function FileEventHelper(){this.storeFiles=new Lo,this.workFiles=new Bo,this.progressHelper=new No}return FileEventHelper.prototype.createStoreFilesData=function(t){return this.storeFiles.create(t)},FileEventHelper.prototype.isStoreFilesEventData=function(t){return this.storeFiles.isFileEventData(t)},FileEventHelper.prototype.eventDataToStoreFilesArray=function(t){return this.storeFiles.eventDataToArray(t)},FileEventHelper.prototype.createWorkFilesEventData=function(t){return this.workFiles.create(t)},FileEventHelper.prototype.isWorkFileEventData=function(t){return this.workFiles.isFileEventData(t)},FileEventHelper.prototype.eventDataToWorkFileArray=function(t){return this.workFiles.eventDataToArray(t)},FileEventHelper.prototype.isProgressEventData=function(t){return this.progressHelper.isProgressEventData(t)},FileEventHelper.prototype.createProgressEventData=function(t){return this.progressHelper.create(t)},FileEventHelper.prototype.progressEventToData=function(t){return this.progressHelper.toData(t)},FileEventHelper}(),Uo=function(){function StateService(){this.fileEventHelper=new Vo,this.stateServiceImpl=new jo}return Object.defineProperty(StateService.prototype,"changeState$",{get:function(){return this.stateServiceImpl.changeState$},enumerable:!1,configurable:!0}),StateService.prototype.next=function(t){return this.stateServiceImpl.next(t)},StateService.prototype.getCurrentState=function(){return this.stateServiceImpl.getCurrentState()},StateService.prototype.createStoreFilesData=function(t){return this.fileEventHelper.createStoreFilesData(t)},StateService.prototype.isStoreFilesEventData=function(t){return this.fileEventHelper.isStoreFilesEventData(t)},StateService.prototype.eventDataToStoreFilesArray=function(t){return this.fileEventHelper.eventDataToStoreFilesArray(t)},StateService.prototype.createWorkFilesEventData=function(t){return this.fileEventHelper.createWorkFilesEventData(t)},StateService.prototype.isWorkFileEventData=function(t){return this.fileEventHelper.isWorkFileEventData(t)},StateService.prototype.eventDataToWorkFileArray=function(t){return this.fileEventHelper.eventDataToWorkFileArray(t)},StateService.prototype.isProgressEventData=function(t){return this.fileEventHelper.isProgressEventData(t)},StateService.prototype.createProgressEventData=function(t){return this.fileEventHelper.createProgressEventData(t)},StateService.prototype.progressEventToData=function(t){return this.fileEventHelper.progressEventToData(t)},StateService}();!function(t){t.maxFileSize="maxFileSize",t.minFileSize="minFileSize",t.extensionIsInvalid="extensionIsInvalid",t.isEmpty="isEmpty",t.maxFilesCount="maxFilesCount",t.maxFilesSize="maxFilesSize",t.expectedError="expectedError",t.notImplemented="not_implemented"}(Ro||(Ro={}));var Wo=function Wo(t,h,y,w){void 0===y&&(y=0),this.blobUrl=h,this.order=y,this.guid=w||ke.createQuickGuidAsString(),this.size=t.size,this.type=t.type,this.ext=t.ext,this.name=t.name,this.hashedName=this.guid+"."+this.ext,this.previewUrl=t.previewUrl,this.headers=t.headers,this.password=t.password},Ho=function(){function FileReaderService(t){this.serviceProvider=t}return FileReaderService.prototype.readFile=function(t){var h=this;return t instanceof Blob?new W((function(y){var w=window.URL.createObjectURL(t),A=h.toMeta(t),T=new Wo(A,w,0);T.blob=t,y.next(T)})):t.url?new W((function(y){var w=h.toMeta(t),A=new Wo(w,w.url,0);y.next(A)})):throwError("Incorrect file")},FileReaderService.prototype.readBlob=function(t){return t.blob?of(t):this.serviceProvider.fileTransferService.download(t).pipe(map((function(){return t})))},FileReaderService.prototype.toMeta=function(t){var h=t;return{name:h.name,previewUrl:h.previewUrl||void 0,size:t.size,type:t.type,ext:h.ext||this.getExt(h.name),url:h.url,headers:h.headers||void 0,password:h.password}},FileReaderService.prototype.getExt=function(t){return(t||"").split(".").slice(-1)[0].toLowerCase()},FileReaderService.prototype.prepareFiles=function(t,h){var y=this,w=[],A=h.fileExtensions.map((function(t){return(t||"").toLowerCase()}))||[],T=t.map((function(t){return y.prepareFile(h,t,w,A)})),E=T.filter((function(t){return t.allow})).map((function(t){return t.item}));return{errors:w,input:t,prepared:T,output:E}},FileReaderService.prototype.prepareFile=function(t,h,y,w){var A=h.ext;if(!A)throw new Error("!ext");var T=w.includes(A);return T?h.size<=0?(y.push({item:h,type:Ro.minFileSize}),T=!1):this.serviceProvider.toolsConfigService.isAllowSize(t,h.size)||(y.push({item:h,type:Ro.maxFileSize}),T=!1):y.push({item:h,type:Ro.extensionIsInvalid}),{item:h,allow:T}},FileReaderService}(),Go=function(){function ModalService(){this.change=new Te(null),this.create=new Te(null),this.onHide=new Te(null)}return Object.defineProperty(ModalService.prototype,"onChange$",{get:function(){return this.change.asObservable().pipe(filter((function(t){return!!t})))},enumerable:!1,configurable:!0}),Object.defineProperty(ModalService.prototype,"onCreate$",{get:function(){return this.create.asObservable().pipe(filter((function(t){return!!t})))},enumerable:!1,configurable:!0}),Object.defineProperty(ModalService.prototype,"onHide$",{get:function(){return this.onHide.asObservable().pipe(filter((function(t){return!!t})))},enumerable:!1,configurable:!0}),ModalService.prototype.onComponentCreated=function(t){this.create.next(t)},ModalService.prototype.onComponentClose=function(t){this.onHide.next(t)},ModalService.prototype.show=function(t){this.change.next({show:!0,createComponent:t})},ModalService.prototype.hide=function(){this.change.next({show:!1,createComponent:null})},ModalService}(),zo=function zo(t,h){this.key=t,this.value=h},qo=function(){var extendStatics=function(t,h){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,h){t.__proto__=h}||function(t,h){for(var y in h)Object.prototype.hasOwnProperty.call(h,y)&&(t[y]=h[y])},extendStatics(t,h)};return function(t,h){if("function"!=typeof h&&null!==h)throw new TypeError("Class extends value "+String(h)+" is not a constructor or null");function __(){this.constructor=t}extendStatics(t,h),t.prototype=null===h?Object.create(h):(__.prototype=h.prototype,new __)}}(),$o=(function(t){function KeyValueStrings(h,y){return t.call(this,h,y)||this}qo(KeyValueStrings,t)}(zo),function(){function BaseStore(){this.clean()}return BaseStore.prototype.add=function(t,h){this._store[t]=h},BaseStore.prototype.remove=function(t){delete this._store[t]},BaseStore.prototype.clean=function(){this._store=Object.create(null)},BaseStore.prototype.getStore=function(){var t=this;return this._store||this.clean(),Object.keys(this._store).map((function(h){return t._store[h]}))},BaseStore.prototype.getItem=function(t){return this._store[t]},BaseStore.prototype.hasItem=function(t){return!!this._store[t]},BaseStore.prototype.getKeys=function(){return Object.keys(this._store)},BaseStore.prototype.getKV=function(){var t=this;return Object.keys(this._store).map((function(h){return new zo(h,t._store[h])}))},BaseStore}()),Jo=function(){var extendStatics=function(t,h){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,h){t.__proto__=h}||function(t,h){for(var y in h)Object.prototype.hasOwnProperty.call(h,y)&&(t[y]=h[y])},extendStatics(t,h)};return function(t,h){if("function"!=typeof h&&null!==h)throw new TypeError("Class extends value "+String(h)+" is not a constructor or null");function __(){this.constructor=t}extendStatics(t,h),t.prototype=null===h?Object.create(h):(__.prototype=h.prototype,new __)}}(),Xo=function(t){function DefaultStore(){return t.call(this)||this}return Jo(DefaultStore,t),DefaultStore}($o),Qo=function(){function WorkFileStoreService(){this.store=new Xo}return WorkFileStoreService.prototype.add=function(t,h){this.store.add(t,h)},WorkFileStoreService.prototype.clean=function(){this.store.clean()},WorkFileStoreService.prototype.getStore=function(){return this.store.getStore()},WorkFileStoreService.prototype.remove=function(t){this.store.remove(t)},WorkFileStoreService}();function forkJoin(){for(var t=[],h=0;h<arguments.length;h++)t[h]=arguments[h];if(1===t.length){var y=t[0];if(w(y))return forkJoinInternal(y,null);if(isObject(y)&&Object.getPrototypeOf(y)===Object.prototype){var A=Object.keys(y);return forkJoinInternal(A.map((function(t){return y[t]})),A)}}if("function"==typeof t[t.length-1]){var T=t.pop();return forkJoinInternal(t=1===t.length&&w(t[0])?t[0]:t,null).pipe(map((function(t){return T.apply(void 0,t)})))}return forkJoinInternal(t,null)}function forkJoinInternal(t,h){return new W((function(y){var w=t.length;if(0!==w)for(var A=new Array(w),T=0,E=0,_loop_1=function(j){var B=from(t[j]),N=!1;y.add(B.subscribe({next:function(t){N||(N=!0,E++),A[j]=t},error:function(t){return y.error(t)},complete:function(){++T!==w&&N||(E===w&&y.next(h?h.reduce((function(t,h,y){return t[h]=A[y],t}),{}):A),y.complete())}}))},j=0;j<w;j++)_loop_1(j);else y.complete()}))}function refCount(){return function refCountOperatorFunction(t){return t.lift(new Ko(t))}}var Ko=function(){function RefCountOperator(t){this.connectable=t}return RefCountOperator.prototype.call=function(t,h){var y=this.connectable;y._refCount++;var w=new Yo(t,y),A=h.subscribe(w);return w.closed||(w.connection=y.connect()),A},RefCountOperator}(),Yo=function(t){function RefCountSubscriber(h,y){var w=t.call(this,h)||this;return w.connectable=y,w}return __extends(RefCountSubscriber,t),RefCountSubscriber.prototype._unsubscribe=function(){var t=this.connectable;if(t){this.connectable=null;var h=t._refCount;if(h<=0)this.connection=null;else if(t._refCount=h-1,h>1)this.connection=null;else{var y=this.connection,w=t._connection;this.connection=null,!w||y&&w!==y||w.unsubscribe()}}else this.connection=null},RefCountSubscriber}(B),Zo=function(t){function ConnectableObservable(h,y){var w=t.call(this)||this;return w.source=h,w.subjectFactory=y,w._refCount=0,w._isComplete=!1,w}return __extends(ConnectableObservable,t),ConnectableObservable.prototype._subscribe=function(t){return this.getSubject().subscribe(t)},ConnectableObservable.prototype.getSubject=function(){var t=this._subject;return t&&!t.isStopped||(this._subject=this.subjectFactory()),this._subject},ConnectableObservable.prototype.connect=function(){var t=this._connection;return t||(this._isComplete=!1,(t=this._connection=new E).add(this.source.subscribe(new ti(this.getSubject(),this))),t.closed&&(this._connection=null,t=E.EMPTY)),t},ConnectableObservable.prototype.refCount=function(){return refCount()(this)},ConnectableObservable}(W),ei=function(){var t=Zo.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:t._subscribe},_isComplete:{value:t._isComplete,writable:!0},getSubject:{value:t.getSubject},connect:{value:t.connect},refCount:{value:t.refCount}}}(),ti=function(t){function ConnectableSubscriber(h,y){var w=t.call(this,h)||this;return w.connectable=y,w}return __extends(ConnectableSubscriber,t),ConnectableSubscriber.prototype._error=function(h){this._unsubscribe(),t.prototype._error.call(this,h)},ConnectableSubscriber.prototype._complete=function(){this.connectable._isComplete=!0,this._unsubscribe(),t.prototype._complete.call(this)},ConnectableSubscriber.prototype._unsubscribe=function(){var t=this.connectable;if(t){this.connectable=null;var h=t._connection;t._refCount=0,t._subject=null,t._connection=null,h&&h.unsubscribe()}},ConnectableSubscriber}(z),ri=(function(){function RefCountOperator(t){this.connectable=t}RefCountOperator.prototype.call=function(t,h){var y=this.connectable;y._refCount++;var w=new ri(t,y),A=h.subscribe(w);return w.closed||(w.connection=y.connect()),A}}(),function(t){function RefCountSubscriber(h,y){var w=t.call(this,h)||this;return w.connectable=y,w}return __extends(RefCountSubscriber,t),RefCountSubscriber.prototype._unsubscribe=function(){var t=this.connectable;if(t){this.connectable=null;var h=t._refCount;if(h<=0)this.connection=null;else if(t._refCount=h-1,h>1)this.connection=null;else{var y=this.connection,w=t._connection;this.connection=null,!w||y&&w!==y||w.unsubscribe()}}else this.connection=null},RefCountSubscriber}(B));var ni=function(){function MulticastOperator(t,h){this.subjectFactory=t,this.selector=h}return MulticastOperator.prototype.call=function(t,h){var y=this.selector,w=this.subjectFactory(),A=y(w).subscribe(t);return A.add(h.subscribe(w)),A},MulticastOperator}();function shareSubjectFactory(){return new J}function share(){return function(t){return refCount()(function multicast(t,h){return function multicastOperatorFunction(y){var w;if(w="function"==typeof t?t:function subjectFactory(){return t},"function"==typeof h)return y.lift(new ni(w,h));var A=Object.create(y,ei);return A.source=y,A.subjectFactory=w,A}}(shareSubjectFactory)(t))}}var oi,ii=function(){function AppTimer(){}return AppTimer.prototype.isStarted=function(){return this.started},AppTimer.prototype.isFinished=function(){return this.finished},AppTimer.prototype.start=function(){this.started||(this.startTime=Date.now(),this.started=!0)},AppTimer.prototype.finish=function(){this.finished||(this.endTime=Date.now(),this.deltaTime=this.endTime-this.startTime,this.finished=!0)},AppTimer.prototype.format=function(t){return void 0===t&&(t=1),{start:this.startTime/t,end:this.endTime/t,delta:this.deltaTime/t}},AppTimer.prototype.reset=function(){this.startTime=void 0,this.endTime=void 0,this.deltaTime=void 0,this.started=!1,this.finished=!1},AppTimer}(),arraySum=function(t){return t.reduce((function(t,h){return t+h}),0)};!function(t){t.chrome="Chrome",t.firefox="Firefox",t.opera="Opera ",t.safari="Safari",t.ie="IE",t.edge="Edge",t.none="none"}(oi||(oi={}));var ai,si=function(){function BrowserSupport(){}return Object.defineProperty(BrowserSupport,"currentBrowser",{get:function(){return this.browserInfo||(this.browserInfo=this.getCurrentBrowser()),this.browserInfo},enumerable:!1,configurable:!0}),BrowserSupport.isIE=function(){return this.is(oi.ie)},BrowserSupport.isEdge=function(){return this.is(oi.edge)},BrowserSupport.isChrome=function(){return this.is(oi.chrome)},BrowserSupport.isFirefox=function(){return this.is(oi.firefox)},BrowserSupport.isSafari=function(){return this.is(oi.safari)},BrowserSupport.isOpera=function(){return this.is(oi.opera)},BrowserSupport.is=function(t){return this.currentBrowser.name===t},BrowserSupport.getMajorVersion=function(){return+(this.browserInfo.version||"0").split(".").shift()},BrowserSupport.getCurrentBrowser=function(){var t,h=this.getBrowserName(),y=navigator.userAgent;return y.match(/(opera|chrome|safari|firefox|msie|trident)\/?\s*(\.?\d+(\.\d+)*)/i)&&null!=(t=y.match(/version\/([\.\d]+)/i))&&(t=t[1]),{name:h,version:t}},BrowserSupport.getBrowserName=function(){var test=function(t){return t.test(window.navigator.userAgent)};switch(!0){case test(/edge/i):return oi.edge;case test(/opr/i)&&(!!window.opr||!!window.opera):return oi.opera;case test(/chrome/i)&&!!window.chrome:return oi.chrome;case test(/trident/i):return oi.ie;case test(/firefox/i):return oi.firefox;case test(/safari/i):return oi.safari;default:return oi.none}},BrowserSupport}(),li=function(){function FileHelper(){}return FileHelper.needConvertToBlob=function(){return!!si.isIE()||!!(si.isEdge()&&si.getMajorVersion()<80)},FileHelper.convertToBlobObject=function(t,h,y){var w=new Blob([t],{type:y}),A=t;return w.lastModifiedDate=A.lastModifiedDate||Date(),w.lastModified=A.lastModified||Date.now(),w.webkitRelativePath=A.webkitRelativePath||"",w.name=h,w},FileHelper.convertToFile=function(t,h,y){return new it.Z([t],h,{type:y,lastModified:t.lastModified||Date.now()})},FileHelper.convert=function(t,h,y){return this.needConvertToBlob()?this.convertToBlobObject(t,h,y):this.convertToFile(t,h,y)},FileHelper}(),FileTransferService_awaiter=function(t,h,y,w){return new(y||(y=Promise))((function(A,T){function fulfilled(t){try{step(w.next(t))}catch(t){T(t)}}function rejected(t){try{step(w.throw(t))}catch(t){T(t)}}function step(t){t.done?A(t.value):function adopt(t){return t instanceof y?t:new y((function(h){h(t)}))}(t.value).then(fulfilled,rejected)}step((w=w.apply(t,h||[])).next())}))},FileTransferService_generator=function(t,h){var y,w,A,T,E={label:0,sent:function(){if(1&A[0])throw A[1];return A[1]},trys:[],ops:[]};return T={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(T[Symbol.iterator]=function(){return this}),T;function verb(T){return function(j){return function step(T){if(y)throw new TypeError("Generator is already executing.");for(;E;)try{if(y=1,w&&(A=2&T[0]?w.return:T[0]?w.throw||((A=w.return)&&A.call(w),0):w.next)&&!(A=A.call(w,T[1])).done)return A;switch(w=0,A&&(T=[2&T[0],A.value]),T[0]){case 0:case 1:A=T;break;case 4:return E.label++,{value:T[1],done:!1};case 5:E.label++,w=T[1],T=[0];continue;case 7:T=E.ops.pop(),E.trys.pop();continue;default:if(!(A=E.trys,(A=A.length>0&&A[A.length-1])||6!==T[0]&&2!==T[0])){E=0;continue}if(3===T[0]&&(!A||T[1]>A[0]&&T[1]<A[3])){E.label=T[1];break}if(6===T[0]&&E.label<A[1]){E.label=A[1],A=T;break}if(A&&E.label<A[2]){E.label=A[2],E.ops.push(T);break}A[2]&&E.ops.pop(),E.trys.pop();continue}T=h.call(t,E)}catch(t){T=[6,t],w=0}finally{y=A=0}if(5&T[0])throw T[1];return{value:T[0]?T[1]:void 0,done:!0}}([T,j])}}},FileTransferService_read=function(t,h){var y="function"==typeof Symbol&&t[Symbol.iterator];if(!y)return t;var w,A,T=y.call(t),E=[];try{for(;(void 0===h||h-- >0)&&!(w=T.next()).done;)E.push(w.value)}catch(t){A={error:t}}finally{try{w&&!w.done&&(y=T.return)&&y.call(T)}finally{if(A)throw A.error}}return E},FileTransferService_spreadArray=function(t,h){for(var y=0,w=h.length,A=t.length;y<w;y++,A++)t[A]=h[y];return t};!function(t){t.init="init",t.start="start",t.progress="progress",t.completed="completed",t.error="error"}(ai||(ai={}));var ci,ui=function ui(t,h){void 0===t&&(t=0),void 0===h&&(h=0),this.total=t,this.loaded=h,this.percent=0,t&&h&&(this.percent=100*h/t,this.completed=t===h)},pi=function(){function FileTransferService(t){this.serviceProvider=t,this.recreateSubjects(),this.progressStore=new Xo,this.activeTransStore=new Xo,this.uploadTimer=new ii}return Object.defineProperty(FileTransferService.prototype,"progressEvent$",{get:function(){return this.progressEvent.asObservable().pipe(filter((function(t){return!!t})))},enumerable:!1,configurable:!0}),Object.defineProperty(FileTransferService.prototype,"lastValue",{get:function(){return this.progressEvent.getValue()},enumerable:!1,configurable:!0}),FileTransferService.prototype.upload=function(t,h,y){var w=this,A=new FormData,T={transactionId:y||ke.createQuickGuidAsString(),fileIds:t.map((function(t){return t.guid})),progress:new ui,status:ai.init};this.activeTransStore.add(T.transactionId,T);var E=t.map((function(t){var h=li.convert(t.blob,t.hashedName,t.blob.type);return A.append("upload[]",h,h.name),{file:t.hashedName,originName:t.name}})),j={job:h.toolName,files:E,session_id:h.sessionId};A.append("payload",JSON.stringify(j)),A.append("method","upload");var B=!1;return this.uploadTimer.isStarted()||this.uploadTimer.start(),$.ajax({type:"POST",url:h.endpoint,data:A,processData:!1,contentType:!1,success:function(y){B=!0;var A=Object.assign({},T,{status:ai.completed,data:y});if(!h.webSocket&&y.websocket&&(h.webSocket=y.websocket),w.progressEvent.next(A),!w.uploadTimer.isFinished()){w.uploadTimer.finish();var E=w.uploadTimer.format(),j=arraySum(t.map((function(t){return t.size}))),N=j/1024,V=E.delta/1e3,W=Math.round(N/V);w.serviceProvider.ga.sendSpeed(W)}w.activeTransStore.remove(T.transactionId)},error:function(t){w.uploadTimer.isStarted()&&!w.uploadTimer.isFinished()&&w.uploadTimer.reset(),T=Object.assign({},T,{status:ai.error,error:t}),w.progressEvent.error(T),w.abort.next(T.transactionId),B=!0,w.serviceProvider.ga.onRequestFail({success:!1,error:T})},xhr:function(){var t=new window.XMLHttpRequest;return w.abort.asObservable().pipe(takeWhile((function(){return!B})),filter((function(t){return t===T.transactionId})),take(1)).subscribe((function(){return t.abort()})),t.upload.addEventListener("progress",(function(t){if(t.lengthComputable){var h=new ui(t.total,t.loaded);(T=Object.assign({},T,{status:ai.progress,progress:h})).fileIds.forEach((function(t){w.progressStore.add(t,{fileId:t,progress:h,transactionId:T.transactionId})})),w.activeTransStore.add(T.transactionId,T),w.progressEvent.next(T)}}),!1),t}}),this.progressEvent.next(Object.assign({},T,{status:ai.start})),T.transactionId},FileTransferService.prototype.download=function(t){if(t.blob instanceof Blob)return of(!0);if(t.waitBlobUrl$ instanceof W)return t.waitBlobUrl$;var h={method:"GET"};t.headers&&(h.headers=at.asJson(t.headers));var y=new W((function(y){fetch(t.blobUrl,h).then((function(t){return t.blob()})).then((function(h){t.blob=li.convert(h,t.name,t.type),t.blobUrl=window.URL.createObjectURL(t.blob),y.next(!0)}))})).pipe(take(1),share());return t.waitBlobUrl$=y,y},FileTransferService.prototype.downloadByUrl=function(t,h,y,w){return FileTransferService_awaiter(this,void 0,void 0,(function(){return FileTransferService_generator(this,(function(h){switch(h.label){case 0:return[4,$.ajax({url:t,method:"GET",xhrFields:{responseType:"blob"}}).then((function(t){return li.convert(t,w,y)}))];case 1:return[2,h.sent()]}}))}))},FileTransferService.prototype.hasFilesForDownload=function(t){return!!t.find((function(t){return!(t.blob instanceof Blob)}))},FileTransferService.prototype.downloadList=function(t){var h=this;if(!this.hasFilesForDownload(t))return of(!0);var y=t.filter((function(t){return!(t.blob instanceof Blob)}));return y.length?forkJoin(y.map((function(t){return h.download(t)}))).pipe(map((function(){return!0}))):of(!0)},FileTransferService.prototype.getStoredProgress=function(t){var h=this,y=0,w=0,A=t.map((function(t){return h.progressStore.getItem(t)})).filter((function(t){return!!t})),T=A.map((function(t){return t.transactionId}));return FileTransferService_spreadArray([],FileTransferService_read(new Set(T))).forEach((function(t){var h=A.find((function(h){return h.transactionId===t}));h&&(y+=h.progress.total,w+=h.progress.loaded)})),new ui(y,w)},FileTransferService.prototype.cleanStores=function(){var t=this;this.activeTransStore.getStore().forEach((function(h){t.abort.next(h.transactionId)})),this.recreateSubjects()},FileTransferService.prototype.cancelTransaction=function(t){var h=this;this.abort.next(t);var y=this.activeTransStore.getItem(t);y&&y.fileIds.forEach((function(t){h.progressStore.remove(t)}))},FileTransferService.prototype.recreateSubjects=function(){this.abort&&this.abort.complete(),this.progressEvent&&this.abort.complete(),this.abort=new J,this.progressEvent=new Te(null)},FileTransferService}();!function(t){t.ok="ok",t.waiting="waiting",t.errored="errored",t.passwordError="passwordError",t.expectedErrorInvalidPassword="expected-error-invalid-password",t.expectedError="expectedError",t.processing="processing",t.isEmptyData="isEmptyData",t.parseError="parseError",t.finished="finished",t.filesWasNotSended="filesWasNotSended"}(ci||(ci={}));var di=function(){function WebSocketService(){this.receiveMessage=new Te(null),this.error=new Te(null),this.close=new Te(null),this.start=new Te(null)}return Object.defineProperty(WebSocketService.prototype,"receiveMessage$",{get:function(){return this.toObservable(this.receiveMessage).pipe(filter((function(t){return null!==t})),filter((function(t){if(t&&t.data&&"string"==typeof t.data)try{if(JSON.parse(t.data).keepAlive)return!1}catch(t){return!0}return!0})))},enumerable:!1,configurable:!0}),Object.defineProperty(WebSocketService.prototype,"error$",{get:function(){return this.toObservable(this.error).pipe(filter((function(t){return null!==t})))},enumerable:!1,configurable:!0}),Object.defineProperty(WebSocketService.prototype,"close$",{get:function(){return this.toObservable(this.close).pipe(filter((function(t){return null!==t})))},enumerable:!1,configurable:!0}),Object.defineProperty(WebSocketService.prototype,"start$",{get:function(){return this.toObservable(this.start).pipe(filter((function(t){return null!==t})))},enumerable:!1,configurable:!0}),WebSocketService.prototype.startConnection=function(t){this.registrate(t)},WebSocketService.prototype.send=function(t){var h=this;return this.start$.pipe(map((function(){h.connection.send(t)})))},WebSocketService.prototype.clean=function(){this.connection&&(this.connection.close(),this.connection=null),this.receiveMessage.closed||this.receiveMessage.complete(),this.error.closed||this.error.complete(),this.close.closed||this.close.complete(),this.start.closed||this.start.complete(),this.receiveMessage=new Te(null),this.error=new Te(null),this.close=new Te(null),this.start=new Te(null)},WebSocketService.prototype.toObservable=function(t){return t.asObservable().pipe(filter((function(t){return!!t})))},WebSocketService.prototype.registrate=function(t){var h=this;return t.webSocket||this.error.next({sessionId:this.sessionId,error:{data:{message:"registrate:websocket url did not set in to instance",status:ci.errored,type:"isEmptyWebSocketUrl"}}}),this.connection||(this.sessionId=t.webSocket.split("/").pop(),this.connection=new WebSocket(t.webSocket,"protocolOne"),this.connection.onopen=function(t){h.start.next({event:t,sessionId:h.sessionId})},this.connection.onmessage=function(t){h.receiveMessage.next(t)},this.connection.onerror=function(t){console.log("connection.onerror",{e:t}),h.error.next({sessionId:h.sessionId,error:t})},this.connection.onclose=function(t){h.close.next({event:t,sessionId:h.sessionId})}),this.connection},WebSocketService}(),fi=function(){function JobService(t){this.serviceProvider=t}return JobService.prototype.runJob=function(t){this.serviceProvider.ga.onProcessingStart();var h=this.serviceProvider.toolsConfigService.getConfigModel(),y=new FormData,w=this.prepareFilesToTransfer(t,y),A={job:h.toolName,context:h.context,files:w,session_id:h.sessionId,options:void 0,fromConverter:!!h.fromConverter};if(this.serviceProvider.toolsConfigService.getToolName()===wt.protectPdf){var T="protect-pdf";if(w[0][T]){var E=w[0][T];w.forEach((function(t){return delete t[T]})),A[T]=E}}return this.serviceProvider.toolOptionService.hasCurrentOptions()&&(A.options=this.serviceProvider.toolOptionService.getOptionsDto()),y.append("payload",JSON.stringify(A)),y.append("method","runJob"),from($.ajax({type:"POST",url:h.endpoint,data:y,processData:!1,contentType:!1}))},JobService.prototype.prepareFilesToTransfer=function(t,h){var y=this,w=[];return this.handleForm(t,h),t.forEach((function(t){var h={file:t.exportName};y.appendFileVariables(h,t),w.push(h)})),w},JobService.prototype.appendFileVariables=function(t,h){h.readPassword&&(t["pdf-password"]=h.readPassword),this.serviceProvider.toolsConfigService.useMergeFiles(h.fileName)&&(t["img-to-pdf"]=!0),h.options?(h.options.angle&&(t.rotate=h.options.angle),h.options.editMetadata&&(t["edit-metadata"]=at.asJson(h.options.editMetadata)),h.options.addPdfPageNumbers&&(t["add-pdf-page-numbers"]=at.asJson(h.options.addPdfPageNumbers)),h.options.addPdfHeaderAndFooter&&(t["add-pdf-header-and-footer"]=at.asJson(h.options.addPdfHeaderAndFooter)),h.options.addPdfWatermark&&(t["add-pdf-watermark"]=h.options.addPdfWatermark),h.options.cropPdf&&(t["crop-pdf"]=h.options.cropPdf),h.options.deletePdf&&(t["delete-pdf"]=h.options.deletePdf),h.options.rotatePdf&&(t["rotate-pdf"]=h.options.rotatePdf),h.options.splitPdf&&(t["split-pdf"]=h.options.splitPdf),h.options.rearrange&&(t.rearrange=h.options.rearrange.pages),h.options.protectPdf&&(t["protect-pdf"]=h.options.protectPdf.password)):h.options=Object.create(null)},JobService.prototype.handleForm=function(t,h){if(this.serviceProvider.toolsConfigService.isFormTool())switch(this.serviceProvider.toolsConfigService.getToolName()){case wt.protectPdf:this.handleProtectPdfForm(t);break;case wt.editMetadataPdf:this.handleEditMetadataForm(t);break;case wt.addPdfPageNumbers:this.handleAddPdfPageNumbersForm(t);break;case wt.addPdfHeaderAndFooter:this.handleAddPdfHeaderAndFooterForm(t);break;case wt.addPdfWatermark:this.handleAddPdfWatermarkForm(t,h);break;case wt.cropPdf:this.handleCropPdfForm(t);break;case wt.splitPdf:this.handleSplitPdfForm(t);break;case wt.deletePdf:this.handleDeletePdfForm(t);break;case wt.rotatePdf:this.handleRotatePdfForm(t)}},JobService.prototype.handleProtectPdfForm=function(t){this.handleFormValue(t,(function(t,h){t.options.protectPdf={password:h.password}}))},JobService.prototype.handleEditMetadataForm=function(t){this.handleFormValue(t,(function(t,h){t.options.editMetadata={author:h.author,dateOfCreation:h.dateOfCreation,dateOfModification:h.dateOfModification,keywords:h.keywords,subject:h.subject,title:h.title}}))},JobService.prototype.handleAddPdfPageNumbersForm=function(t){this.handleFormValue(t,(function(t,h){t.options.addPdfPageNumbers={from:h.from,to:h.to,format:h.format,position:h.position}}))},JobService.prototype.handleAddPdfHeaderAndFooterForm=function(t){this.handleFormValue(t,(function(t,h){t.options.addPdfHeaderAndFooter={footer:at.asJson(h.footer),header:at.asJson(h.header)}}))},JobService.prototype.handleAddPdfWatermarkForm=function(t,h){this.handleFormValue(t,(function(t,y){var w;y.file&&h&&(w={lastModified:y.file.lastModified,name:y.file.name,size:y.file.size,type:y.file.type},h.append("upload[]",y.file)),t.options.addPdfWatermark={file:w,position:y.position,text:y.text}}))},JobService.prototype.handleCropPdfForm=function(t){this.handleFormValue(t,(function(t,h){t.options.cropPdf={top:h.top,right:h.right,bottom:h.bottom,left:h.left}}))},JobService.prototype.handleSplitPdfForm=function(t){this.handleFormValue(t,(function(t,h){t.options.splitPdf={mode:h.mode,pages:h.pages}}))},JobService.prototype.handleDeletePdfForm=function(t){this.handleFormValue(t,(function(t,h){t.options.deletePdf={pages:h.pages}}))},JobService.prototype.handleRotatePdfForm=function(t){this.handleFormValue(t,(function(t,h){t.options.rotatePdf={pages:at.asJson(h.pages)}}))},JobService.prototype.handleFormValue=function(t,h){var y=this.serviceProvider.toolsConfigService.getToolConfig().formConfig.value;y&&y.valid&&(t||[]).forEach((function(t){return h(t,y)}))},JobService}(),hi=function(){function ScriptLoaderService(){this.store=Object.create(null)}return ScriptLoaderService.prototype.init=function(t){var h=this;t&&t.length&&t.forEach((function(t){return h.addScript(t)}))},ScriptLoaderService.prototype.loadLib=function(t){var h=this.store[t];if(h)return h.load()},ScriptLoaderService.prototype.loadChain=function(t){var h=this;return new Promise((function(y){var w=t.map((function(t){return h.getLibItem(t)})).filter((function(t){return!!t}));if(w&&w.length){var next_1=function(t){return w[t]?w[t].load().then((function(){var h=++t;return next_1(h)})):y(w.map((function(t){return t?window[t.id]:void 0})))};return next_1(0)}y(null)}))},ScriptLoaderService.prototype.addScript=function(t){if(!this.hasLib(t.windowName)){var h={href:t.src,id:t.windowName,loaded:!1,load:function(){return new Promise((function(y,w){if(t.disableLoading&&y(h),h.loaded)return t.isCss?y(t.windowName):y(window[t.windowName]);setTimeout((function(){var A,T;if(t.isCss){var E=document.createElement("link");E.setAttribute("rel","stylesheet"),E.setAttribute("href",t.src),E.setAttribute("id",t.windowName),E.onload=function(){y(t.windowName),h.loaded=!0},E.onerror=function(t){h.loaded=!1,w(t)},null===(A=document.getElementById(t.windowName))||void 0===A||A.remove(),document.head.appendChild(E)}else{var j=document.createElement("script");j.setAttribute("type","text/javascript"),j.setAttribute("src",t.src),j.setAttribute("id",t.windowName),j.onload=function(){y(window[t.windowName]),h.loaded=!0},j.onerror=function(t){h.loaded=!1,w(t)},null===(T=document.getElementById(t.windowName))||void 0===T||T.remove(),document.body.appendChild(j)}}),1)}))}};this.store[t.windowName]=h}},ScriptLoaderService.prototype.hasLib=function(t){return!!this.getLibItem(t)},ScriptLoaderService.prototype.createDefaultLibs=function(t){return void 0===t&&(t="2.2.228"),[{windowName:"pdfjsLib",src:"https://cdnjs.cloudflare.com/ajax/libs/pdf.js/"+t+"/pdf.min.js"},{windowName:"pdfWorkerSrc",src:"https://cdnjs.cloudflare.com/ajax/libs/pdf.js/"+t+"/pdf.worker.min.js",disableLoading:!1},{windowName:"Sortable",src:"https://cdnjs.cloudflare.com/ajax/libs/Sortable/1.9.0/Sortable.min.js"},{windowName:"Cropper",src:"https://cdnjs.cloudflare.com/ajax/libs/cropperjs/1.5.6/cropper.min.js"},{windowName:"CropperCss",src:"https://cdnjs.cloudflare.com/ajax/libs/cropperjs/1.5.6/cropper.min.css",isCss:!0}]},ScriptLoaderService.prototype.getLibUrl=function(t){var h=this.getLibItem(t);return h?h.href:null},ScriptLoaderService.prototype.getLibItem=function(t){return this.store[t]},ScriptLoaderService}();function catchError(t){return function catchErrorOperatorFunction(h){var y=new vi(t),w=h.lift(y);return y.caught=w}}var vi=function(){function CatchOperator(t){this.selector=t}return CatchOperator.prototype.call=function(t,h){return h.subscribe(new mi(t,this.selector,this.caught))},CatchOperator}(),mi=function(t){function CatchSubscriber(h,y,w){var A=t.call(this,h)||this;return A.selector=y,A.caught=w,A}return __extends(CatchSubscriber,t),CatchSubscriber.prototype.error=function(h){if(!this.isStopped){var y=void 0;try{y=this.selector(h,this.caught)}catch(h){return void t.prototype.error.call(this,h)}this._unsubscribeAndRecycle();var w=new pe(this,void 0,void 0);this.add(w);var A=subscribeToResult(this,y,void 0,void 0,w);A!==w&&this.add(A)}},CatchSubscriber}(ue),yi=__webpack_require__(82098),gi=__webpack_require__(63978),bi=__webpack_require__(73427),PdfService_awaiter=function(t,h,y,w){return new(y||(y=Promise))((function(A,T){function fulfilled(t){try{step(w.next(t))}catch(t){T(t)}}function rejected(t){try{step(w.throw(t))}catch(t){T(t)}}function step(t){t.done?A(t.value):function adopt(t){return t instanceof y?t:new y((function(h){h(t)}))}(t.value).then(fulfilled,rejected)}step((w=w.apply(t,h||[])).next())}))},PdfService_generator=function(t,h){var y,w,A,T,E={label:0,sent:function(){if(1&A[0])throw A[1];return A[1]},trys:[],ops:[]};return T={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(T[Symbol.iterator]=function(){return this}),T;function verb(T){return function(j){return function step(T){if(y)throw new TypeError("Generator is already executing.");for(;E;)try{if(y=1,w&&(A=2&T[0]?w.return:T[0]?w.throw||((A=w.return)&&A.call(w),0):w.next)&&!(A=A.call(w,T[1])).done)return A;switch(w=0,A&&(T=[2&T[0],A.value]),T[0]){case 0:case 1:A=T;break;case 4:return E.label++,{value:T[1],done:!1};case 5:E.label++,w=T[1],T=[0];continue;case 7:T=E.ops.pop(),E.trys.pop();continue;default:if(!(A=E.trys,(A=A.length>0&&A[A.length-1])||6!==T[0]&&2!==T[0])){E=0;continue}if(3===T[0]&&(!A||T[1]>A[0]&&T[1]<A[3])){E.label=T[1];break}if(6===T[0]&&E.label<A[1]){E.label=A[1],A=T;break}if(A&&E.label<A[2]){E.label=A[2],E.ops.push(T);break}A[2]&&E.ops.pop(),E.trys.pop();continue}T=h.call(t,E)}catch(t){T=[6,t],w=0}finally{y=A=0}if(5&T[0])throw T[1];return{value:T[0]?T[1]:void 0,done:!0}}([T,j])}}},_i=function(){function PdfService(t){this.serviceProvider=t}return PdfService.prototype.getPdfLib=function(){var t=this;if(!this.pdfLib){var h=this.serviceProvider.toolsConfigService.isEditor();this.pdfLib=PdfService_awaiter(t,void 0,void 0,(function(){var t,y,w;return PdfService_generator(this,(function(A){return(t={pdfjsLib:yi,pdfjsViewer:bi,_cMapsUrl:""}).pdfjsLib.verbosity=t.pdfjsLib.VerbosityLevel.ERRORS,y="/assets/",t.pdfjsLib.AnnotationLayer.imageResourcesPath=y,h&&(t.pdfjsViewer.AnnotationLayerBuilder.imageResourcesPath=y),"undefined"!=typeof window&&"Worker"in window&&(t.pdfjsLib.GlobalWorkerOptions.workerPort=new gi),w=t.pdfjsLib.version,t._cMapsUrl="https://unpkg.com/pdfjs-dist@"+w+"/cmaps/",this.pdfLibRef=t,[2,t]}))}))}return this.pdfLib},PdfService.prototype.isValidPassword=function(t){var h=this;return from(this.getDocument(t)).pipe(take(1),map((function(){return!0})),catchError((function(t){return h.isPasswordError(t)?of(!1):throwError(t)})))},PdfService.prototype.getDocument=function(t){return PdfService_awaiter(this,void 0,void 0,(function(){return PdfService_generator(this,(function(h){return[2,this.getPdfLib().then((function(h){return h.pdfjsLib.getDocument(t).promise}))]}))}))},PdfService.prototype.getFirstPageInfo=function(t){return this.getPageInfo(t,1)},PdfService.prototype.getPageInfo=function(t,h){var y=this;return from(this.getPdfLib()).pipe(take(1),switchMap((function(w){return from(w.pdfjsLib.getDocument(t).promise).pipe(take(1),switchMap((function(t){return from(y.getPDFPageLoadingTask(t,h)).pipe(take(1),map((function(h){return{pdfRef:w,doc:t,page:h}})))})))})))},PdfService.prototype.createImageUrl=function(t,h,y,w,A){return void 0===A&&(A="image/png"),from(t.render(h).promise).pipe(take(1),switchMap((function(){return y.drawImage(w,0,0),new W((function(t){w.toBlob((function(h){var y=window.URL.createObjectURL(h);t.next(y)}),A,1)}))})))},PdfService.prototype.drawCanvas=function(t,h){return from(t.render(h).promise).pipe(take(1),map((function(){return!0})))},PdfService.prototype.getViewPortByScale=function(t,h){return t.getViewport({scale:h})},PdfService.prototype.isPasswordError=function(t){return t&&t.name&&"PasswordException"===t.name},PdfService.prototype.getPDFPageLoadingTask=function(t,h){return PdfService_awaiter(this,void 0,void 0,(function(){return PdfService_generator(this,(function(y){switch(y.label){case 0:return[4,t.getPage(h)];case 1:return[2,y.sent()]}}))}))},PdfService.prototype.readMetadata=function(t){return PdfService_awaiter(this,void 0,void 0,(function(){return PdfService_generator(this,(function(h){switch(h.label){case 0:return[4,this.getDocument(t).then((function(t){return t.getMetadata()})).then((function(t){return t&&t.info?t.info:null}))];case 1:return[2,h.sent()]}}))}))},PdfService.prototype.getViewPortInfo=function(t,h){var y=t.getViewport({scale:1}),w={width:y.width,height:y.height},A=this.serviceProvider.fileRenderService.getScale(w,h),T=t.getViewport({scale:A});return{documentSize:w,currentSize:{width:T.width,height:T.height},viewport:T}},PdfService.prototype.pdfDataToDateTimeStr=function(t){var h=this.removeStr(t,0,2);h=this.removeStr(h,14,7);var y=[];y.push(h.substr(0,4)),y.push("-"),y.push(h.substr(4,2)),y.push("-"),y.push(h.substr(6,2)),y.push("T"),y.push(h.substr(8,2)),y.push(":"),y.push(h.substr(10,2)),y.push(":"),y.push(h.substr(12,2)),y.push(".000Z");var w=y.join("");return new Date(w).toJSON()},PdfService.prototype.renderZoom$=function(t,h,y){var w=$("<canvas>"),A=t.getViewport({scale:1}),T=w.get(0);T.width=A.width,T.height=A.height;var E=T.getContext("2d"),j={canvasContext:E,viewport:A,intent:"print"};return this.serviceProvider.pdfService.createImageUrl(t,j,E,T).pipe(takeUntil(y),takeUntil(h),take(1),map((function(t){return{url:t,dimensions:{width:A.width,height:A.height}}})))},PdfService.prototype.removeStr=function(t,h,y){return t.substr(0,h)+t.substr(h+y)},PdfService}(),Si=function(){function FileConverterService(t){this.serviceProvider=t}return FileConverterService.prototype.storeToWork=function(t,h){return void 0===h&&(h=0),{guid:t.guid,options:{angle:0},order:h,blob:t.blob,fileType:this.serviceProvider.fileMetaDataService.getFileTypeByExt(t.ext),fileName:t.name,exportName:t.hashedName}},FileConverterService}(),wi=function(){function FileRenderService(){}return FileRenderService.prototype.renderImage$=function(t,h){var y=this;return new W((function(w){var A=new Image;A.src=t,A.onload=function(){var T={width:A.width,height:A.height},E=y.getScale(T,h),j={width:A.width*E,height:A.height*E};w.next({documentSize:T,currentSize:j,blobUrl:t})}}))},FileRenderService.prototype.getScale=function(t,h){return t.height>t.width?h/t.height:h/t.width},FileRenderService}();function finalize(t){return function(h){return h.lift(new Pi(t))}}var Ci,Pi=function(){function FinallyOperator(t){this.callback=t}return FinallyOperator.prototype.call=function(t,h){return h.subscribe(new ki(t,this.callback))},FinallyOperator}(),ki=function(t){function FinallySubscriber(h,y){var w=t.call(this,h)||this;return w.add(new E(y)),w}return __extends(FinallySubscriber,t),FinallySubscriber}(B),xi=function(){function BasePickerService(t){this.serviceProvider=t,this.locked=!1}return BasePickerService.prototype.isLocked=function(){return this.locked},BasePickerService.prototype.handleFiles=function(t,h,y,w){var A=this.serviceProvider.toolsConfigService,T=this.serviceProvider.localPickerService,E=w||A.getConfigModel(),j=this.checkFiles(t,E),B=E.maxFilesCount,N=A.getMaxFilesSizeByCfg(E.maxFileSize),V=j.error;return(j=T.filterMaxFilesSize(j,h,N)).error&&!V&&(V=j.error),(j=T.filterTotalCount(j,y,B)).error&&!V&&(V=j.error),j.error=V,j},BasePickerService.prototype.filterMaxFilesSize=function(t,h,y){var w=h,A=[];return t.readyFiles.forEach((function(h){y>=w+h.size?(w+=h.size,A.push(h)):t.error={type:Ro.maxFilesSize,item:h}})),t.readyFiles=A,t},BasePickerService.prototype.filterTotalCount=function(t,h,y){if(t.readyFiles.length+h>y){var w=y-h;w<0&&(w=0),t.readyFiles.length=w,t.error={type:Ro.maxFilesCount,item:null}}return t},BasePickerService.prototype.checkFiles=function(t,h){var y;if(!this.serviceProvider.stateService.isStoreFilesEventData(t))throw new Error("!is not file data");var w=this.serviceProvider.fileReaderService.prepareFiles(t.files,h||this.serviceProvider.toolsConfigService.getConfigModel()),A=w.errors,T=w.output,E={data:w,error:null,readyFiles:T};if(A.length){var j=((y={})[Ro.extensionIsInvalid]=[],y[Ro.minFileSize]=[],y[Ro.maxFileSize]=[],y);A.forEach((function(t){j[t.type].push(t.item)})),j[Ro.extensionIsInvalid].length?E.error={item:j[Ro.extensionIsInvalid][0],type:Ro.extensionIsInvalid}:j[Ro.minFileSize].length?E.error={item:j[Ro.minFileSize][0],type:Ro.minFileSize}:j[Ro.maxFileSize].length&&(E.error={item:j[Ro.maxFileSize][0],type:Ro.maxFileSize})}else T.length||(E.error={item:null,type:Ro.isEmpty});return E},BasePickerService.prototype.createStoreFilesData=function(t){var h=this;return forkJoin(t.map((function(t){return h.serviceProvider.fileReaderService.readFile(t).pipe(take(1))}))).pipe(map((function(t){var y=(t||[]).map((function(t,h){return t.order=h,t}));return h.serviceProvider.stateService.createStoreFilesData(y)})),take(1))},BasePickerService}(),Ai=function(){var extendStatics=function(t,h){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,h){t.__proto__=h}||function(t,h){for(var y in h)Object.prototype.hasOwnProperty.call(h,y)&&(t[y]=h[y])},extendStatics(t,h)};return function(t,h){if("function"!=typeof h&&null!==h)throw new TypeError("Class extends value "+String(h)+" is not a constructor or null");function __(){this.constructor=t}extendStatics(t,h),t.prototype=null===h?Object.create(h):(__.prototype=h.prototype,new __)}}(),Ii=function(t){function LocalPickerService(h){return t.call(this,h)||this}return Ai(LocalPickerService,t),LocalPickerService.prototype.showPicker=function(){throw new Error("Method not implemented.")},LocalPickerService.prototype.readFiles=function(t){return this.pickFiles(Array.from(t))},LocalPickerService.prototype.pickFiles=function(t){var h=this;return this.locked?throwError("LocalPickerService:locked"):(this.locked=!0,this.createStoreFilesData(t).pipe(finalize((function(){h.locked=!1}))))},LocalPickerService}(xi),Ti=function(){function SortableService(t){this.serviceProvider=t,this.libName="Sortable"}return SortableService.prototype.initSortable$=function(t,h){var y=this,w=this.config;if(!this.useSortableByCfg(w))return of(null);var A=this.getDefaultLib(w);return A?this.getSortableLib(A.defaultPath).pipe(map((function(w){return y.initSortableRoot(t,w,h)}))):of(null)},SortableService.prototype.useSortable=function(){var t=this.config;return this.useSortableByCfg(t)||!!this.getDefaultLib(t)},SortableService.prototype.sortArray=function(t,h,y){var w=this;return t.sort((function(t,A){return w.sortFn(t,A,h,y)})),t},SortableService.prototype.toIndexMap=function(t,h){var y=Object.create(null);return t.forEach((function(t,w){y[h(t)]=w})),y},SortableService.prototype.sortDomElementsBySortedItems=function(t,h,y,w){var A=this.toIndexMap(t,h),T=this.serviceProvider.domHelper.getById(y),E=T.children(w);this.sortArray(E,(function(t){return A[t.id]}),!0),E.appendTo(T)},SortableService.prototype.sortFn=function(t,h,y,w){var A=y(t),T=y(h);return A<T?w?-1:1:A>T?w?1:-1:0},SortableService.prototype.getDefaultLib=function(t){var h=this;return this.useSortableByCfg(t)?t.advancedLibs.find((function(t){return t.name===h.libName})):null},SortableService.prototype.useSortableByCfg=function(t){return!!t.advancedLibs&&!!t.advancedLibs.length},Object.defineProperty(SortableService.prototype,"config",{get:function(){return this.serviceProvider.toolsConfigService.getToolConfig()},enumerable:!1,configurable:!0}),SortableService.prototype.getSortableLib=function(t){var h=this.serviceProvider.scriptLoaderService;return h.hasLib(this.libName)||h.addScript({src:t,windowName:this.libName}),from(h.loadLib(this.libName))},SortableService.prototype.initSortableRoot=function(t,h,y){y||(y=Object.create(null));var w=Object.assign(this.createDefaultConfig(),y);return new h(t.get(0),w)},SortableService.prototype.createDefaultConfig=function(){return{animation:200,easing:"cubic-bezier(1, 0, 0, 1)",ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",filter:".page-item--actions",forceFallback:si.isSafari(),draggable:".page-item"}},SortableService}(),Oi="3.6.345";!function(t){t.error="error",t.info="info"}(Ci||(Ci={}));var Ei=function(){function SendLogDto(){this.clientVersion=Oi}return SendLogDto.fromData=function(t){var h=new SendLogDto,y=at.asJson(t);return Object.assign(h,y),h},SendLogDto}();var Fi=function(){function GoogleAnalyticSenderService(t){this.serviceProvider=t,this.fileApiName="Files-3-0"}return GoogleAnalyticSenderService.prototype.onFirstFileAddToTool=function(t){if(t){var h=t.filter((function(t){return!!t}));if(h.length){var y="",w=0;if(h.length>1)y="multi",w=h.map((function(t){return t.size||0})).reduce((function(t,h){return t+h}));else{var A=h[0];y=this.serviceProvider.toolsConfigService.getToolName(),w=A.size}ga("send","event",this.fileApiName,"upload",y,w),console.info("ga:onFirstFileAddToTool",{type:y,size:w})}}},GoogleAnalyticSenderService.prototype.onExtensionIsInvalid=function(t){var h=this.serviceProvider.toolsConfigService.getToolName(),y="inv-ext-"+h;console.info("ga:onExtensionIsInvalid",{name:h,loadedExt:t}),ga("send","event",this.fileApiName,y,t)},GoogleAnalyticSenderService.prototype.onRequestFail=function(t){var h=this.serviceProvider.toolsConfigService.getToolName();console.info("ga:onRequestFail",{toolName:h});var y="failed";ga("send","event",this.fileApiName,y,h),this.sendLog(Ci.error,{method:"onRequestFail",action:y,toolName:h},t)},GoogleAnalyticSenderService.prototype.onProcessingStart=function(){var t=this.serviceProvider.toolsConfigService.getToolName();console.info("ga:onProcessingStart",{name:t}),ga("send","event",this.fileApiName,"startprocess",t)},GoogleAnalyticSenderService.prototype.onFileSizeIsInvalid=function(t){var h=this.serviceProvider.toolsConfigService.getToolName();console.info("ga:onFileSizeIsInvalid",{name:h}),ga("send","event",this.fileApiName,"upload-inv-size",h,t.size)},GoogleAnalyticSenderService.prototype.onMaxFilesCountLimited=function(){var t=this.serviceProvider.toolsConfigService.getToolName();console.info("ga:onMaxFilesCountLimited",{name:t}),ga("send","event",this.fileApiName,"upload-inv-files-number",t)},GoogleAnalyticSenderService.prototype.onMaxFilesSizeLimited=function(){var t=this.serviceProvider.toolsConfigService.getToolName();console.info("ga:onMaxFilesSizeLimited",{name:t}),ga("send","event",this.fileApiName,"upload-inv-total-size",t)},GoogleAnalyticSenderService.prototype.onMaxPagesLimited=function(){var t=this.serviceProvider.toolsConfigService.getToolName();console.info("ga:onMaxPagesLimited",{name:t}),ga("send","event",this.fileApiName,"upload-inv-pages-number",t)},GoogleAnalyticSenderService.prototype.onInvalidJob=function(t){var h=this.serviceProvider.toolsConfigService.getToolName(),y="invalid-job";ga("send","event",this.fileApiName,y,name,""),console.info("ga:onInvalidJob",{errorData:t}),this.sendLog(Ci.info,{method:"onInvalidJob",action:y,toolName:h},t)},GoogleAnalyticSenderService.prototype.onLimitOperations=function(){var t=this.serviceProvider.toolsConfigService.getToolName();console.info("ga:onLimitOperations",{name:t}),ga("send","event",this.fileApiName,"limit-main",t)},GoogleAnalyticSenderService.prototype.sendSpeed=function(t){var h=this.serviceProvider.toolsConfigService.getToolName();console.info("ga:sendSpeed",{name:h,kbPerSecond:t}),ga("send","event",this.fileApiName,"upload-speed",h,t)},GoogleAnalyticSenderService.prototype.onEditorError=function(t){ga("send","event",this.fileApiName,"failed","edit-pdf",t.message)},GoogleAnalyticSenderService.prototype.sendLog=function(t,h,y){var w=Ei.fromData({type:t,data:h,error:y}),A=this.serviceProvider.toolsConfigService.getConfigModel();console.info("sendLog",{cfg:A,type:t,data:h,error:y}),function sendLog(t,h){h&&h.loggerEndpoint&&"string"==typeof h.loggerEndpoint&&fetch(h.loggerEndpoint,{method:"POST",mode:"no-cors",headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json"},body:JSON.stringify(t)})}(w,A)},GoogleAnalyticSenderService.prototype.getSaveMeta=function(t){return{name:t.name,size:t.size,type:t.type,ext:t.ext}},GoogleAnalyticSenderService}(),Ri=function(){var extendStatics=function(t,h){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,h){t.__proto__=h}||function(t,h){for(var y in h)Object.prototype.hasOwnProperty.call(h,y)&&(t[y]=h[y])},extendStatics(t,h)};return function(t,h){if("function"!=typeof h&&null!==h)throw new TypeError("Class extends value "+String(h)+" is not a constructor or null");function __(){this.constructor=t}extendStatics(t,h),t.prototype=null===h?Object.create(h):(__.prototype=h.prototype,new __)}}(),Di=__webpack_require__(45950),Mi=function(t){function DialogErrorDefaultComponent(h,y){var w=t.call(this,h)||this;return w.options=y,w.onClose=new J,w.ids={componentId:w.componentId,btnCloseId:ke.createQuickGuidAsString(),btnOkId:ke.createQuickGuidAsString()},w}return Ri(DialogErrorDefaultComponent,t),Object.defineProperty(DialogErrorDefaultComponent.prototype,"$btnClose",{get:function(){return this.helper.getById(this.ids.btnCloseId)},enumerable:!1,configurable:!0}),Object.defineProperty(DialogErrorDefaultComponent.prototype,"close$",{get:function(){return this.onClose.asObservable()},enumerable:!1,configurable:!0}),DialogErrorDefaultComponent.prototype.init=function(){var h=this.serviceProvider.Translate;this.model={title:this.options.title,message:this.options.body,btnOkLabel:h.get("component-ok-close"),candyIcon:Kt.Candy,tryLabel:h.get("component-or-try"),tryCandyDesktopLabel:h.get("component-try-candy-desktop")},t.prototype.init.call(this),this.toggleModelCss(!!this.options.modalCss)},DialogErrorDefaultComponent.prototype.show=function(){this.toggleModelCss(!!this.options.modalCss)},DialogErrorDefaultComponent.prototype.hide=function(){this.unbind(),this.destroyComponent()},DialogErrorDefaultComponent.prototype.destroyComponent=function(){this.toggleModelCss(!1),t.prototype.destroyComponent.call(this)},DialogErrorDefaultComponent.prototype.createTemplate=function(){var t=this.setTemplateValuesByModel(Di,this.ids);return this.setTemplateValuesByModel(t,this.model)},DialogErrorDefaultComponent.prototype.bind=function(){var t=this;this.$btnClose.on("click",(function(){return t.close()})),this.helper.getById(this.ids.btnOkId).on("click",(function(){return t.close()})),fromEvent(document,"keydown").pipe(takeUntil(this.destroyEvent),filter((function(t){return"Escape"===t.key})),take(1)).subscribe((function(){return t.close()}))},DialogErrorDefaultComponent.prototype.close=function(){this.options.okCallback instanceof Function&&this.options.okCallback(),this.toggleModelCss(!1),this.onClose.next()},DialogErrorDefaultComponent.prototype.toggleModelCss=function(t){this.options.modalCss&&this.$component.toggleClass(this.options.modalCss,t)},DialogErrorDefaultComponent}(Ht),ji=function(){var extendStatics=function(t,h){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,h){t.__proto__=h}||function(t,h){for(var y in h)Object.prototype.hasOwnProperty.call(h,y)&&(t[y]=h[y])},extendStatics(t,h)};return function(t,h){if("function"!=typeof h&&null!==h)throw new TypeError("Class extends value "+String(h)+" is not a constructor or null");function __(){this.constructor=t}extendStatics(t,h),t.prototype=null===h?Object.create(h):(__.prototype=h.prototype,new __)}}(),Li=__webpack_require__(41320),Bi=function(t){function DialogErrorFreeComponent(h,y){var w=t.call(this,h)||this;return w.options=y,w.onClose=new J,w.ids={componentId:w.componentId,btnCloseId:ke.createQuickGuidAsString(),btnSignupId:ke.createQuickGuidAsString()},w}return ji(DialogErrorFreeComponent,t),Object.defineProperty(DialogErrorFreeComponent.prototype,"$btnClose",{get:function(){return this.helper.getById(this.ids.btnCloseId)},enumerable:!1,configurable:!0}),Object.defineProperty(DialogErrorFreeComponent.prototype,"close$",{get:function(){return this.onClose.asObservable()},enumerable:!1,configurable:!0}),DialogErrorFreeComponent.prototype.init=function(){var h=this.serviceProvider.Translate,y=this.serviceProvider.toolsConfigService;this.model={freeLimitIcon:Kt.freeLimit,title:this.options.title,message:this.options.body,btnSignupLabel:h.get("signup-button-text"),btnSignupUrl:y.getLocalizedUrl("pricing.html")},t.prototype.init.call(this),this.toggleModelCss(!!this.options.modalCss)},DialogErrorFreeComponent.prototype.show=function(){this.toggleModelCss(!!this.options.modalCss)},DialogErrorFreeComponent.prototype.hide=function(){this.unbind(),this.destroyComponent()},DialogErrorFreeComponent.prototype.destroyComponent=function(){this.toggleModelCss(!1),t.prototype.destroyComponent.call(this)},DialogErrorFreeComponent.prototype.createTemplate=function(){var t=this.setTemplateValuesByModel(Li,this.ids);return this.setTemplateValuesByModel(t,this.model)},DialogErrorFreeComponent.prototype.bind=function(){var t=this;this.$btnClose.on("click",(function(){return t.close()})),this.helper.getById(this.ids.btnSignupId).on("click",(function(){return t.close()})),fromEvent(document,"keydown").pipe(takeUntil(this.destroyEvent),filter((function(t){return"Escape"===t.key})),take(1)).subscribe((function(){return t.close()}))},DialogErrorFreeComponent.prototype.close=function(){this.options.okCallback instanceof Function&&this.options.okCallback(),this.toggleModelCss(!1),this.onClose.next()},DialogErrorFreeComponent.prototype.toggleModelCss=function(t){this.options.modalCss&&this.$component.toggleClass(this.options.modalCss,t)},DialogErrorFreeComponent}(Ht),Ni=function(){function DialogErrorComponent(t,h){this.options=h,this.onDestroy=new J,this.innerComponent=this.factory(t,h)}return DialogErrorComponent.prototype.init=function(){var t=this;this.innerComponent.init(),this.innerComponent.close$.pipe(takeUntil(this.onDestroy)).subscribe((function(){Dt.getContainer().get(Go).onComponentClose(t)}))},DialogErrorComponent.prototype.show=function(){this.innerComponent.show()},DialogErrorComponent.prototype.hide=function(){this.innerComponent.hide()},DialogErrorComponent.prototype.destroyComponent=function(){this.innerComponent.destroyComponent(),this.innerComponent=null},DialogErrorComponent.prototype.factory=function(t,h){var y=Dt.getContainer().get(Mo);return this.isDependsOnUserTypeError()&&!y.isProUser()?new Bi(t,h):new Mi(t,h)},DialogErrorComponent.prototype.isDependsOnUserTypeError=function(){switch(this.options.type){case Ro.maxFileSize:case Ro.maxFilesSize:return!0;default:return!1}},DialogErrorComponent}(),Vi=function(){function ErrorDialogService(t){this.serviceProvider=t}return Object.defineProperty(ErrorDialogService.prototype,"ga",{get:function(){return this.serviceProvider.ga},enumerable:!1,configurable:!0}),ErrorDialogService.prototype.open=function(t){return this.serviceProvider.modalService.show((function(h){return new Ni(h,t)})),this.serviceProvider.modalService.onCreate$.pipe(take(1))},ErrorDialogService.prototype.showFormatError=function(t,h,y,w){void 0===y&&(y=!0),void 0===w&&(w=function(){});var A=this.serviceProvider.Translate;return y&&this.ga.onExtensionIsInvalid(h),this.open({title:A.get("component-invalid-format"),body:A.get("component-please-use-format")+" <b>"+t+"</b>",modalCss:"--format-error",okCallback:function(){return w()}})},ErrorDialogService.prototype.showMinFileSizeError=function(t,h,y){void 0===h&&(h=!0),void 0===y&&(y=function(){});var w=this.serviceProvider.Translate;return h&&this.ga.onFileSizeIsInvalid(t),this.open({title:w.get("component-small-files-cant-be-processed"),body:w.get("component-files-small-than"),okCallback:function(){return y()},type:Ro.minFileSize})},ErrorDialogService.prototype.showMaxFileSizeError=function(t,h,y,w){void 0===y&&(y=!0),void 0===w&&(w=function(){});var A=this.serviceProvider.Translate,T=h/1048576;y&&this.ga.onFileSizeIsInvalid(t);var E=this.serviceProvider.toolsConfigService.isProUser()?"component-files-large-than":"component-free-files-large-than";return this.open({title:A.get("component-large-files-cant-be-processed"),body:A.get(E).replace("%s",T.toFixed(0)),okCallback:function(){return w()},type:Ro.maxFileSize})},ErrorDialogService.prototype.showMaxFilesCountError=function(t,h,y){void 0===h&&(h=!0),void 0===y&&(y=function(){});var w=this.serviceProvider.Translate;return h&&this.ga.onMaxFilesCountLimited(),this.open({title:w.get("component-files-number-per-task"),body:w.get("component-only-files-count").replace("%",t.toString()),okCallback:function(){return y()}})},ErrorDialogService.prototype.showMaxFilesSizeError=function(t,h,y){void 0===h&&(h=!0),void 0===y&&(y=function(){});var w=this.serviceProvider.Translate,A=t/1048576;h&&this.ga.onMaxFilesSizeLimited();var T=this.serviceProvider.toolsConfigService.isProUser()?"component-total-size-limit-info":"component-free-total-size-limit-info";return this.open({title:w.get("component-total-size-limit-title"),body:w.get(T).replace("%s",A.toFixed(0)),okCallback:function(){return y()},type:Ro.maxFilesSize})},ErrorDialogService.prototype.showMaxPagesError=function(t,h,y,w){void 0===w&&(w=!0),w&&this.ga.onMaxPagesLimited();var A=this.serviceProvider.Translate,T="error-too-many-pages-title",E="error-too-many-pages-body",j="Too many pages",B="<div> The document @@documentName@@ has been limited by pages. <br> Max pages per document:@@currentPages@@, current:@@maxPages@@ </div>";A.has(T)&&(j=A.get(T)),A.has(E)&&(B=A.get(E));var N={documentName:t,currentPages:y,maxPages:h};return Object.keys(N).forEach((function(t){var h=new RegExp("%\\("+t+"\\)","g");B=B.replace(h,N[t])})),this.open({title:j,body:B,okCallback:function(){}})},ErrorDialogService.prototype.handleError=function(t,h,y,w){void 0===y&&(y=!0);var A=this.serviceProvider.errorDialogService,T=this.serviceProvider.toolsConfigService,E=w||T.getConfigModel();switch(!0){case!0==!t.error:break;case t.error.type===Ro.extensionIsInvalid:var j=T.getAcceptedErrorFormats();A.showFormatError(j,t.error.item.ext,y,h).subscribe();break;case t.error.type===Ro.minFileSize:A.showMinFileSizeError(t.error.item,y,h).subscribe();break;case t.error.type===Ro.maxFileSize:A.showMaxFileSizeError(t.error.item,E.maxFileSize,y,h).subscribe();break;case t.error.type===Ro.maxFilesSize:A.showMaxFilesSizeError(T.getMaxFilesSize(),y,h).subscribe();break;case t.error.type===Ro.maxFilesCount:A.showMaxFilesCountError(E.maxFilesCount,y,h).subscribe();break;case t.error.type===Ro.isEmpty:console.warn("isEmpty",{data:t}),h()}},ErrorDialogService}(),Ui=function(){var extendStatics=function(t,h){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,h){t.__proto__=h}||function(t,h){for(var y in h)Object.prototype.hasOwnProperty.call(h,y)&&(t[y]=h[y])},extendStatics(t,h)};return function(t,h){if("function"!=typeof h&&null!==h)throw new TypeError("Class extends value "+String(h)+" is not a constructor or null");function __(){this.constructor=t}extendStatics(t,h),t.prototype=null===h?Object.create(h):(__.prototype=h.prototype,new __)}}(),Wi=function(t){function GDrivePickerService(h){var y=t.call(this,h)||this;return y.pickerApiLoaded=!1,y.scope=["https://www.googleapis.com/auth/drive.readonly"],y}return Ui(GDrivePickerService,t),Object.defineProperty(GDrivePickerService.prototype,"gapi",{get:function(){return window.gapi},enumerable:!1,configurable:!0}),Object.defineProperty(GDrivePickerService.prototype,"google",{get:function(){return window.google},enumerable:!1,configurable:!0}),GDrivePickerService.prototype.readFiles=function(t){return this.pickFiles(Array.from(t))},GDrivePickerService.prototype.showPicker=function(){var t=this.serviceProvider.toolsConfigService.getConfigModel().gdrive;this.picker&&this.appId===t.appId&&this.clientId===t.clientId?this.picker.setVisible(!0):(this.clientId=t.clientId,this.appId=t.appId,this.loadPicker())},GDrivePickerService.prototype.onAuthApiLoad=function(){var t=this;this.gapi.auth.authorize({client_id:this.clientId,scope:this.scope,immediate:!1},(function(h){return t.handleAuthResult(h)}))},GDrivePickerService.prototype.handleAuthResult=function(t){t?(this.oauthToken=t.access_token,t.error?console.warn("authResult.error",{error:t.error}):this.picker||this.createPicker()):this.oauthToken=void 0},GDrivePickerService.prototype.onPickerApiLoad=function(){this.pickerApiLoaded=!0,this.oauthToken&&this.createPicker()},GDrivePickerService.prototype.loadPicker=function(){var t=this,h=window.gapi;this.oauthToken||h.load("auth",{callback:function(){return t.onAuthApiLoad()}}),h.load("picker",{callback:function(){return t.onPickerApiLoad()}})},GDrivePickerService.prototype.createPicker=function(){var t=this;if(!this.picker){var h=window.google;if(this.pickerApiLoaded&&this.oauthToken){var y=new h.picker.DocsView(h.picker.ViewId.FOLDERS),w=new h.picker.DocsView(h.picker.ViewId.DOCS),A=this.serviceProvider.toolsConfigService.getConfigModel().fileAccept.split(",").map((function(t){return t.trim()})).filter((function(t){return!!t&&"."!==t[0]})).join(",");y.setMimeTypes(A),w.setMimeTypes(A),this.origin=window.location.protocol+"//"+window.location.host;var T=(new h.picker.PickerBuilder).setOrigin(this.origin).setAppId(this.appId).setOAuthToken(this.oauthToken).addView(h.picker.ViewId.DOCUMENTS).addView(h.picker.ViewId.PDFS).addView(h.picker.ViewId.DOCS_IMAGES).addView(w).addView(y).setSelectableMimeTypes(A).setCallback((function(h){return t.pickerCallback(h)}));this.serviceProvider.toolsConfigService.allowMultipleFiles()&&(T=T.enableFeature(h.picker.Feature.MULTISELECT_ENABLED)),(T=T.build()).setVisible(!0),this.picker=T}}},GDrivePickerService.prototype.pickerCallback=function(t){var h=this,y=this.google,w=this.gapi;t.action===y.picker.Action.PICKED&&w.load("client",(function(){w.client.load("drive","v3",(function(){h.picker.setVisible(!1);var y=(t.docs||[]).map((function(t){return h.toMeta(t)}));y&&y.length&&h.serviceProvider.inputService.dropFiles(y)}))}))},GDrivePickerService.prototype.toMeta=function(t){var h=this.serviceProvider.fileMetaDataService,y=h.getFileExtension(t.name),w=t.mimeType||h.getMimeTypeByExtension(y);return{name:t.name,size:t.sizeBytes,type:w,ext:y,isFile:!1,url:"https://www.googleapis.com/drive/v3/files/"+t.id+"?alt=media",headers:{Authorization:"Bearer "+this.oauthToken}}},GDrivePickerService.prototype.pickFiles=function(t){var h=this;return this.locked?throwError("LocalPickerService:locked"):(this.locked=!0,this.createStoreFilesData(t).pipe(finalize((function(){h.locked=!1}))))},GDrivePickerService}(xi),Hi=function(){var extendStatics=function(t,h){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,h){t.__proto__=h}||function(t,h){for(var y in h)Object.prototype.hasOwnProperty.call(h,y)&&(t[y]=h[y])},extendStatics(t,h)};return function(t,h){if("function"!=typeof h&&null!==h)throw new TypeError("Class extends value "+String(h)+" is not a constructor or null");function __(){this.constructor=t}extendStatics(t,h),t.prototype=null===h?Object.create(h):(__.prototype=h.prototype,new __)}}(),Gi=function(t){function DropboxPickerService(h){return t.call(this,h)||this}return Hi(DropboxPickerService,t),DropboxPickerService.prototype.readFiles=function(t){return this.pickFiles(Array.from(t))},DropboxPickerService.prototype.showPicker=function(){if(!this.isOpened){this.isOpened=!0;var t=this.getOptions();Dropbox.choose(t)}},DropboxPickerService.prototype.createOptions=function(){var t=this,h=this.serviceProvider.toolsConfigService,y=h.getConfigModel(),w={linkType:"direct",multiselect:h.allowMultipleFiles(),extensions:y.fileExtensions.map((function(t){return"."===t[0]?t:"."+t})),folderselect:!1,sizeLimit:y.maxFileSize,success:function(h){t.isOpened=!1;var y=h.map((function(h){return t.toMeta(h)}));y&&y.length&&t.serviceProvider.inputService.dropFiles(y)},cancel:function(){t.isOpened=!1}};return w},DropboxPickerService.prototype.getOptions=function(){return this.options||(this.options=this.createOptions()),this.options},DropboxPickerService.prototype.useFakeDropBox=function(t){var h="#tempFileInput",remove=function(){$(h).off(),$("body").remove(h)};$(h).length&&remove();var y="<input class='"+this.serviceProvider.domHelper.css.displayNone+'\' id="tempFileInput" type="file"/>';$("body").append(y),$(h).on("change",(function(y){if(y.target.files){var w=Array.from(y.target.files).map((function(t){return{name:t.name,bytes:t.size,link:window.URL.createObjectURL(t),icon:"",isDir:!1,thumbnailLink:""}}));setTimeout((function(){t.success(w)}),500),$(h).val(null),remove()}})).click()},DropboxPickerService.prototype.pickFiles=function(t){var h=this;return this.locked?throwError("LocalPickerService:locked"):(this.locked=!0,this.createStoreFilesData(t).pipe(finalize((function(){h.locked=!1}))))},DropboxPickerService.prototype.toMeta=function(t){console.log("toMeta",{x:t});var h=this.serviceProvider.fileMetaDataService,y=h.getFileExtension(t.name),w=h.getMimeTypeByExtension(y);return{name:t.name,size:t.bytes,type:w,ext:y,isFile:!1,previewUrl:t.icon,url:t.link}},DropboxPickerService}(xi),zi=__webpack_require__(68788),qi="undefined"!=typeof self?self:global;const $i="undefined"!=typeof navigator,Ji=$i&&"undefined"==typeof HTMLImageElement,Xi=!("undefined"==typeof global||"undefined"==typeof process||!process.versions||!process.versions.node),Qi=qi.Buffer,Ki=qi.BigInt,Yi=!!Qi,o=t=>t;function l(t,h=o){if(Xi)try{return"function"==typeof require?Promise.resolve(h(require(t))):import(t).then(h)}catch(h){console.warn(`Couldn't load ${t}`)}}let Zi=qi.fetch;if(!qi.fetch){const t=l("http",(t=>t)),h=l("https",(t=>t)),i=(y,{headers:w}={})=>new Promise((async(A,T)=>{let{port:E,hostname:j,pathname:B,protocol:N,search:V}=new URL(y);const W={method:"GET",hostname:j,path:encodeURI(B)+V,headers:w};""!==E&&(W.port=Number(E));const H=("https:"===N?await h:await t).request(W,(t=>{if(301===t.statusCode||302===t.statusCode){let h=new URL(t.headers.location,y).toString();return i(h,{headers:w}).then(A).catch(T)}A({status:t.statusCode,arrayBuffer:()=>new Promise((h=>{let y=[];t.on("data",(t=>y.push(t))),t.on("end",(()=>h(Buffer.concat(y))))}))})}));H.on("error",T),H.end()}));(t=>{Zi=t})(i)}function c(t,h,y){return h in t?Object.defineProperty(t,h,{value:y,enumerable:!0,configurable:!0,writable:!0}):t[h]=y,t}const f=t=>p(t)?void 0:t,d=t=>void 0!==t;function p(t){return void 0===t||(t instanceof Map?0===t.size:0===Object.values(t).filter(d).length)}function g(t){let h=new Error(t);throw delete h.stack,h}function m(t){return""===(t=function(t){for(;t.endsWith("\0");)t=t.slice(0,-1);return t}(t).trim())?void 0:t}function S(t){let h=function(t){let h=0;return t.ifd0.enabled&&(h+=1024),t.exif.enabled&&(h+=2048),t.makerNote&&(h+=2048),t.userComment&&(h+=1024),t.gps.enabled&&(h+=512),t.interop.enabled&&(h+=100),t.ifd1.enabled&&(h+=1024),h+2048}(t);return t.jfif.enabled&&(h+=50),t.xmp.enabled&&(h+=2e4),t.iptc.enabled&&(h+=14e3),t.icc.enabled&&(h+=6e3),h}const C=t=>String.fromCharCode.apply(null,t),ea="undefined"!=typeof TextDecoder?new TextDecoder("utf-8"):void 0;function b(t){return ea?ea.decode(t):Yi?Buffer.from(t).toString("utf8"):decodeURIComponent(escape(C(t)))}class I{static from(t,h){return t instanceof this&&t.le===h?t:new I(t,void 0,void 0,h)}constructor(t,h=0,y,w){if("boolean"==typeof w&&(this.le=w),Array.isArray(t)&&(t=new Uint8Array(t)),0===t)this.byteOffset=0,this.byteLength=0;else if(t instanceof ArrayBuffer){void 0===y&&(y=t.byteLength-h);let w=new DataView(t,h,y);this._swapDataView(w)}else if(t instanceof Uint8Array||t instanceof DataView||t instanceof I){void 0===y&&(y=t.byteLength-h),(h+=t.byteOffset)+y>t.byteOffset+t.byteLength&&g("Creating view outside of available memory in ArrayBuffer");let w=new DataView(t.buffer,h,y);this._swapDataView(w)}else if("number"==typeof t){let h=new DataView(new ArrayBuffer(t));this._swapDataView(h)}else g("Invalid input argument for BufferView: "+t)}_swapArrayBuffer(t){this._swapDataView(new DataView(t))}_swapBuffer(t){this._swapDataView(new DataView(t.buffer,t.byteOffset,t.byteLength))}_swapDataView(t){this.dataView=t,this.buffer=t.buffer,this.byteOffset=t.byteOffset,this.byteLength=t.byteLength}_lengthToEnd(t){return this.byteLength-t}set(t,h,y=I){return t instanceof DataView||t instanceof I?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t instanceof ArrayBuffer&&(t=new Uint8Array(t)),t instanceof Uint8Array||g("BufferView.set(): Invalid data argument."),this.toUint8().set(t,h),new y(this,h,t.byteLength)}subarray(t,h){return h=h||this._lengthToEnd(t),new I(this,t,h)}toUint8(){return new Uint8Array(this.buffer,this.byteOffset,this.byteLength)}getUint8Array(t,h){return new Uint8Array(this.buffer,this.byteOffset+t,h)}getString(t=0,h=this.byteLength){return b(this.getUint8Array(t,h))}getLatin1String(t=0,h=this.byteLength){let y=this.getUint8Array(t,h);return C(y)}getUnicodeString(t=0,h=this.byteLength){const y=[];for(let w=0;w<h&&t+w<this.byteLength;w+=2)y.push(this.getUint16(t+w));return C(y)}getInt8(t){return this.dataView.getInt8(t)}getUint8(t){return this.dataView.getUint8(t)}getInt16(t,h=this.le){return this.dataView.getInt16(t,h)}getInt32(t,h=this.le){return this.dataView.getInt32(t,h)}getUint16(t,h=this.le){return this.dataView.getUint16(t,h)}getUint32(t,h=this.le){return this.dataView.getUint32(t,h)}getFloat32(t,h=this.le){return this.dataView.getFloat32(t,h)}getFloat64(t,h=this.le){return this.dataView.getFloat64(t,h)}getFloat(t,h=this.le){return this.dataView.getFloat32(t,h)}getDouble(t,h=this.le){return this.dataView.getFloat64(t,h)}getUintBytes(t,h,y){switch(h){case 1:return this.getUint8(t,y);case 2:return this.getUint16(t,y);case 4:return this.getUint32(t,y);case 8:return this.getUint64&&this.getUint64(t,y)}}getUint(t,h,y){switch(h){case 8:return this.getUint8(t,y);case 16:return this.getUint16(t,y);case 32:return this.getUint32(t,y);case 64:return this.getUint64&&this.getUint64(t,y)}}toString(t){return this.dataView.toString(t,this.constructor.name)}ensureChunk(){}}function P(t,h){g(`${t} '${h}' was not loaded, try using full build of exifr.`)}class k extends Map{constructor(t){super(),this.kind=t}get(t,h){return this.has(t)||P(this.kind,t),h&&(t in h||function(t,h){g(`Unknown ${t} '${h}'.`)}(this.kind,t),h[t].enabled||P(this.kind,t)),super.get(t)}keyList(){return Array.from(this.keys())}}var ta=new k("file parser"),ra=new k("segment parser"),na=new k("file reader");function D(t,h){return"string"==typeof t?O(t,h):$i&&!Ji&&t instanceof HTMLImageElement?O(t.src,h):t instanceof Uint8Array||t instanceof ArrayBuffer||t instanceof DataView?new I(t):$i&&t instanceof Blob?x(t,h,"blob",R):void g("Invalid input argument")}function O(t,h){return(y=t).startsWith("data:")||y.length>1e4?v(t,h,"base64"):Xi&&t.includes("://")?x(t,h,"url",M):Xi?v(t,h,"fs"):$i?x(t,h,"url",M):void g("Invalid input argument");var y}async function x(t,h,y,w){return na.has(y)?v(t,h,y):w?async function(t,h){let y=await h(t);return new I(y)}(t,w):void g(`Parser ${y} is not loaded`)}async function v(t,h,y){let w=new(na.get(y))(t,h);return await w.read(),w}const M=t=>Zi(t).then((t=>t.arrayBuffer())),R=t=>new Promise(((h,y)=>{let w=new FileReader;w.onloadend=()=>h(w.result||new ArrayBuffer),w.onerror=y,w.readAsArrayBuffer(t)}));class L extends Map{get tagKeys(){return this.allKeys||(this.allKeys=Array.from(this.keys())),this.allKeys}get tagValues(){return this.allValues||(this.allValues=Array.from(this.values())),this.allValues}}function U(t,h,y){let w=new L;for(let[t,h]of y)w.set(t,h);if(Array.isArray(h))for(let y of h)t.set(y,w);else t.set(h,w);return w}function F(t,h,y){let w,A=t.get(h);for(w of y)A.set(w[0],w[1])}const oa=new Map,ia=new Map,aa=new Map,sa=["chunked","firstChunkSize","firstChunkSizeNode","firstChunkSizeBrowser","chunkSize","chunkLimit"],la=["jfif","xmp","icc","iptc","ihdr"],ca=["tiff",...la],ua=["ifd0","ifd1","exif","gps","interop"],pa=[...ca,...ua],da=["makerNote","userComment"],fa=["translateKeys","translateValues","reviveValues","multiSegment"],ha=[...fa,"sanitize","mergeOutput","silentErrors"];class _{get translate(){return this.translateKeys||this.translateValues||this.reviveValues}}class Y extends _{get needed(){return this.enabled||this.deps.size>0}constructor(t,h,y,w){if(super(),c(this,"enabled",!1),c(this,"skip",new Set),c(this,"pick",new Set),c(this,"deps",new Set),c(this,"translateKeys",!1),c(this,"translateValues",!1),c(this,"reviveValues",!1),this.key=t,this.enabled=h,this.parse=this.enabled,this.applyInheritables(w),this.canBeFiltered=ua.includes(t),this.canBeFiltered&&(this.dict=oa.get(t)),void 0!==y)if(Array.isArray(y))this.parse=this.enabled=!0,this.canBeFiltered&&y.length>0&&this.translateTagSet(y,this.pick);else if("object"==typeof y){if(this.enabled=!0,this.parse=!1!==y.parse,this.canBeFiltered){let{pick:t,skip:h}=y;t&&t.length>0&&this.translateTagSet(t,this.pick),h&&h.length>0&&this.translateTagSet(h,this.skip)}this.applyInheritables(y)}else!0===y||!1===y?this.parse=this.enabled=y:g(`Invalid options argument: ${y}`)}applyInheritables(t){let h,y;for(h of fa)y=t[h],void 0!==y&&(this[h]=y)}translateTagSet(t,h){if(this.dict){let y,w,{tagKeys:A,tagValues:T}=this.dict;for(y of t)"string"==typeof y?(w=T.indexOf(y),-1===w&&(w=A.indexOf(Number(y))),-1!==w&&h.add(Number(A[w]))):h.add(y)}else for(let y of t)h.add(y)}finalizeFilters(){!this.enabled&&this.deps.size>0?(this.enabled=!0,ee(this.pick,this.deps)):this.enabled&&this.pick.size>0&&ee(this.pick,this.deps)}}var va={jfif:!1,tiff:!0,xmp:!1,icc:!1,iptc:!1,ifd0:!0,ifd1:!1,exif:!0,gps:!0,interop:!1,ihdr:void 0,makerNote:!1,userComment:!1,multiSegment:!1,skip:[],pick:[],translateKeys:!0,translateValues:!0,reviveValues:!0,sanitize:!0,mergeOutput:!0,silentErrors:!0,chunked:!0,firstChunkSize:void 0,firstChunkSizeNode:512,firstChunkSizeBrowser:65536,chunkSize:65536,chunkLimit:5},ma=new Map;class q extends _{static useCached(t){let h=ma.get(t);return void 0!==h||(h=new this(t),ma.set(t,h)),h}constructor(t){super(),!0===t?this.setupFromTrue():void 0===t?this.setupFromUndefined():Array.isArray(t)?this.setupFromArray(t):"object"==typeof t?this.setupFromObject(t):g(`Invalid options argument ${t}`),void 0===this.firstChunkSize&&(this.firstChunkSize=$i?this.firstChunkSizeBrowser:this.firstChunkSizeNode),this.mergeOutput&&(this.ifd1.enabled=!1),this.filterNestedSegmentTags(),this.traverseTiffDependencyTree(),this.checkLoadedPlugins()}setupFromUndefined(){let t;for(t of sa)this[t]=va[t];for(t of ha)this[t]=va[t];for(t of da)this[t]=va[t];for(t of pa)this[t]=new Y(t,va[t],void 0,this)}setupFromTrue(){let t;for(t of sa)this[t]=va[t];for(t of ha)this[t]=va[t];for(t of da)this[t]=!0;for(t of pa)this[t]=new Y(t,!0,void 0,this)}setupFromArray(t){let h;for(h of sa)this[h]=va[h];for(h of ha)this[h]=va[h];for(h of da)this[h]=va[h];for(h of pa)this[h]=new Y(h,!1,void 0,this);this.setupGlobalFilters(t,void 0,ua)}setupFromObject(t){let h;for(h of(ua.ifd0=ua.ifd0||ua.image,ua.ifd1=ua.ifd1||ua.thumbnail,Object.assign(this,t),sa))this[h]=Z(t[h],va[h]);for(h of ha)this[h]=Z(t[h],va[h]);for(h of da)this[h]=Z(t[h],va[h]);for(h of ca)this[h]=new Y(h,va[h],t[h],this);for(h of ua)this[h]=new Y(h,va[h],t[h],this.tiff);this.setupGlobalFilters(t.pick,t.skip,ua,pa),!0===t.tiff?this.batchEnableWithBool(ua,!0):!1===t.tiff?this.batchEnableWithUserValue(ua,t):Array.isArray(t.tiff)?this.setupGlobalFilters(t.tiff,void 0,ua):"object"==typeof t.tiff&&this.setupGlobalFilters(t.tiff.pick,t.tiff.skip,ua)}batchEnableWithBool(t,h){for(let y of t)this[y].enabled=h}batchEnableWithUserValue(t,h){for(let y of t){let t=h[y];this[y].enabled=!1!==t&&void 0!==t}}setupGlobalFilters(t,h,y,w=y){if(t&&t.length){for(let t of w)this[t].enabled=!1;let h=Q(t,y);for(let[t,y]of h)ee(this[t].pick,y),this[t].enabled=!0}else if(h&&h.length){let t=Q(h,y);for(let[h,y]of t)ee(this[h].skip,y)}}filterNestedSegmentTags(){let{ifd0:t,exif:h,xmp:y,iptc:w,icc:A}=this;this.makerNote?h.deps.add(37500):h.skip.add(37500),this.userComment?h.deps.add(37510):h.skip.add(37510),y.enabled||t.skip.add(700),w.enabled||t.skip.add(33723),A.enabled||t.skip.add(34675)}traverseTiffDependencyTree(){let{ifd0:t,exif:h,gps:y,interop:w}=this;w.needed&&(h.deps.add(40965),t.deps.add(40965)),h.needed&&t.deps.add(34665),y.needed&&t.deps.add(34853),this.tiff.enabled=ua.some((t=>!0===this[t].enabled))||this.makerNote||this.userComment;for(let t of ua)this[t].finalizeFilters()}get onlyTiff(){return!la.map((t=>this[t].enabled)).some((t=>!0===t))&&this.tiff.enabled}checkLoadedPlugins(){for(let t of ca)this[t].enabled&&!ra.has(t)&&P("segment parser",t)}}function Q(t,h){let y,w,A,T,E=[];for(A of h){for(T of(y=oa.get(A),w=[],y))(t.includes(T[0])||t.includes(T[1]))&&w.push(T[0]);w.length&&E.push([A,w])}return E}function Z(t,h){return void 0!==t?t:void 0!==h?h:void 0}function ee(t,h){for(let y of h)t.add(y)}c(q,"default",va);class te{constructor(t){c(this,"parsers",{}),c(this,"output",{}),c(this,"errors",[]),c(this,"pushToErrors",(t=>this.errors.push(t))),this.options=q.useCached(t)}async read(t){this.file=await D(t,this.options)}setup(){if(this.fileParser)return;let{file:t}=this,h=t.getUint16(0);for(let[y,w]of ta)if(w.canHandle(t,h))return this.fileParser=new w(this.options,this.file,this.parsers),t[y]=!0;this.file.close&&this.file.close(),g("Unknown file format")}async parse(){let{output:t,errors:h}=this;return this.setup(),this.options.silentErrors?(await this.executeParsers().catch(this.pushToErrors),h.push(...this.fileParser.errors)):await this.executeParsers(),this.file.close&&this.file.close(),this.options.silentErrors&&h.length>0&&(t.errors=h),f(t)}async executeParsers(){let{output:t}=this;await this.fileParser.parse();let h=Object.values(this.parsers).map((async h=>{let y=await h.parse();h.assignToOutput(t,y)}));this.options.silentErrors&&(h=h.map((t=>t.catch(this.pushToErrors)))),await Promise.all(h)}async extractThumbnail(){this.setup();let{options:t,file:h}=this,y=ra.get("tiff",t);var w;if(h.tiff?w={start:0,type:"tiff"}:h.jpeg&&(w=await this.fileParser.getOrFindSegment("tiff")),void 0===w)return;let A=await this.fileParser.ensureSegmentChunk(w),T=this.parsers.tiff=new y(A,t,h),E=await T.extractThumbnail();return h.close&&h.close(),E}}async function ie(t,h){let y=new te(h);return await y.read(t),y.parse()}var ya=Object.freeze({__proto__:null,parse:ie,Exifr:te,fileParsers:ta,segmentParsers:ra,fileReaders:na,tagKeys:oa,tagValues:ia,tagRevivers:aa,createDictionary:U,extendDictionary:F,fetchUrlAsArrayBuffer:M,readBlobAsArrayBuffer:R,chunkedProps:sa,otherSegments:la,segments:ca,tiffBlocks:ua,segmentsAndBlocks:pa,tiffExtractables:da,inheritables:fa,allFormatters:ha,Options:q});class se{constructor(t,h,y){c(this,"errors",[]),c(this,"ensureSegmentChunk",(async t=>{let h=t.start,y=t.size||65536;if(this.file.chunked)if(this.file.available(h,y))t.chunk=this.file.subarray(h,y);else try{t.chunk=await this.file.readChunk(h,y)}catch(h){g(`Couldn't read segment: ${JSON.stringify(t)}. ${h.message}`)}else this.file.byteLength>h+y?t.chunk=this.file.subarray(h,y):void 0===t.size?t.chunk=this.file.subarray(h):g("Segment unreachable: "+JSON.stringify(t));return t.chunk})),this.extendOptions&&this.extendOptions(t),this.options=t,this.file=h,this.parsers=y}injectSegment(t,h){this.options[t].enabled&&this.createParser(t,h)}createParser(t,h){let y=new(ra.get(t))(h,this.options,this.file);return this.parsers[t]=y}createParsers(t){for(let h of t){let{type:t,chunk:y}=h,w=this.options[t];if(w&&w.enabled){let h=this.parsers[t];h&&h.append||h||this.createParser(t,y)}}}async readSegments(t){let h=t.map(this.ensureSegmentChunk);await Promise.all(h)}}class re{static findPosition(t,h){let y=t.getUint16(h+2)+2,w="function"==typeof this.headerLength?this.headerLength(t,h,y):this.headerLength,A=h+w,T=y-w;return{offset:h,length:y,headerLength:w,start:A,size:T,end:A+T}}static parse(t,h={}){return new this(t,new q({[this.type]:h}),t).parse()}normalizeInput(t){return t instanceof I?t:new I(t)}constructor(t,h={},y){c(this,"errors",[]),c(this,"raw",new Map),c(this,"handleError",(t=>{if(!this.options.silentErrors)throw t;this.errors.push(t.message)})),this.chunk=this.normalizeInput(t),this.file=y,this.type=this.constructor.type,this.globalOptions=this.options=h,this.localOptions=h[this.type],this.canTranslate=this.localOptions&&this.localOptions.translate}translate(){this.canTranslate&&(this.translated=this.translateBlock(this.raw,this.type))}get output(){return this.translated?this.translated:this.raw?Object.fromEntries(this.raw):void 0}translateBlock(t,h){let y=aa.get(h),w=ia.get(h),A=oa.get(h),T=this.options[h],E=T.reviveValues&&!!y,j=T.translateValues&&!!w,B=T.translateKeys&&!!A,N={};for(let[h,T]of t)E&&y.has(h)?T=y.get(h)(T):j&&w.has(h)&&(T=this.translateValue(T,w.get(h))),B&&A.has(h)&&(h=A.get(h)||h),N[h]=T;return N}translateValue(t,h){return h[t]||h.DEFAULT||t}assignToOutput(t,h){this.assignObjectToOutput(t,this.constructor.type,h)}assignObjectToOutput(t,h,y){if(this.globalOptions.mergeOutput)return Object.assign(t,y);t[h]?Object.assign(t[h],y):t[h]=y}}function ae(t){return 192===t||194===t||196===t||219===t||221===t||218===t||254===t}function oe(t){return t>=224&&t<=239}function le(t,h,y){for(let[w,A]of ra)if(A.canHandle(t,h,y))return w}c(re,"headerLength",4),c(re,"type",void 0),c(re,"multiSegment",!1),c(re,"canHandle",(()=>!1));class he extends se{constructor(...t){super(...t),c(this,"appSegments",[]),c(this,"jpegSegments",[]),c(this,"unknownSegments",[])}static canHandle(t,h){return 65496===h}async parse(){await this.findAppSegments(),await this.readSegments(this.appSegments),this.mergeMultiSegments(),this.createParsers(this.mergedAppSegments||this.appSegments)}setupSegmentFinderArgs(t){!0===t?(this.findAll=!0,this.wanted=new Set(ra.keyList())):(t=void 0===t?ra.keyList().filter((t=>this.options[t].enabled)):t.filter((t=>this.options[t].enabled&&ra.has(t))),this.findAll=!1,this.remaining=new Set(t),this.wanted=new Set(t)),this.unfinishedMultiSegment=!1}async findAppSegments(t=0,h){this.setupSegmentFinderArgs(h);let{file:y,findAll:w,wanted:A,remaining:T}=this;if(!w&&this.file.chunked&&(w=Array.from(A).some((t=>{let h=ra.get(t),y=this.options[t];return h.multiSegment&&y.multiSegment})),w&&await this.file.readWhole()),t=this.findAppSegmentsInRange(t,y.byteLength),!this.options.onlyTiff&&y.chunked){let h=!1;for(;T.size>0&&!h&&(y.canReadNextChunk||this.unfinishedMultiSegment);){let{nextChunkOffset:w}=y,A=this.appSegments.some((t=>!this.file.available(t.offset||t.start,t.length||t.size)));if(h=t>w&&!A?!await y.readNextChunk(t):!await y.readNextChunk(w),void 0===(t=this.findAppSegmentsInRange(t,y.byteLength)))return}}}findAppSegmentsInRange(t,h){h-=2;let y,w,A,T,E,j,{file:B,findAll:N,wanted:V,remaining:W,options:H}=this;for(;t<h;t++)if(255===B.getUint8(t))if(y=B.getUint8(t+1),oe(y)){if(w=B.getUint16(t+2),A=le(B,t,w),A&&V.has(A)&&(T=ra.get(A),E=T.findPosition(B,t),j=H[A],E.type=A,this.appSegments.push(E),!N&&(T.multiSegment&&j.multiSegment?(this.unfinishedMultiSegment=E.chunkNumber<E.chunkCount,this.unfinishedMultiSegment||W.delete(A)):W.delete(A),0===W.size)))break;H.recordUnknownSegments&&(E=re.findPosition(B,t),E.marker=y,this.unknownSegments.push(E)),t+=w+1}else if(ae(y)){if(w=B.getUint16(t+2),218===y&&!1!==H.stopAfterSos)return;H.recordJpegSegments&&this.jpegSegments.push({offset:t,length:w,marker:y}),t+=w+1}return t}mergeMultiSegments(){if(!this.appSegments.some((t=>t.multiSegment)))return;let t=function(t,h){let y,w,A,T=new Map;for(let h=0;h<t.length;h++)y=t[h],w=y.type,T.has(w)?A=T.get(w):T.set(w,A=[]),A.push(y);return Array.from(T)}(this.appSegments);this.mergedAppSegments=t.map((([t,h])=>{let y=ra.get(t,this.options);return y.handleMultiSegments?{type:t,chunk:y.handleMultiSegments(h)}:h[0]}))}getSegment(t){return this.appSegments.find((h=>h.type===t))}async getOrFindSegment(t){let h=this.getSegment(t);return void 0===h&&(await this.findAppSegments(0,[t]),h=this.getSegment(t)),h}}c(he,"type","jpeg"),ta.set("jpeg",he);const ba=[void 0,1,1,2,4,8,1,1,2,4,8,4,8,4];class ce extends re{parseHeader(){var t=this.chunk.getUint16();18761===t?this.le=!0:19789===t&&(this.le=!1),this.chunk.le=this.le,this.headerParsed=!0}parseTags(t,h,y=new Map){let{pick:w,skip:A}=this.options[h];w=new Set(w);let T=w.size>0,E=0===A.size,j=this.chunk.getUint16(t);t+=2;for(let B=0;B<j;B++){let j=this.chunk.getUint16(t);if(T){if(w.has(j)&&(y.set(j,this.parseTag(t,j,h)),w.delete(j),0===w.size))break}else!E&&A.has(j)||y.set(j,this.parseTag(t,j,h));t+=12}return y}parseTag(t,h,y){let{chunk:w}=this,A=w.getUint16(t+2),T=w.getUint32(t+4),E=ba[A];if(E*T<=4?t+=8:t=w.getUint32(t+8),(A<1||A>13)&&g(`Invalid TIFF value type. block: ${y.toUpperCase()}, tag: ${h.toString(16)}, type: ${A}, offset ${t}`),t>w.byteLength&&g(`Invalid TIFF value offset. block: ${y.toUpperCase()}, tag: ${h.toString(16)}, type: ${A}, offset ${t} is outside of chunk size ${w.byteLength}`),1===A)return w.getUint8Array(t,T);if(2===A)return m(w.getString(t,T));if(7===A)return w.getUint8Array(t,T);if(1===T)return this.parseTagValue(A,t);{let h=new(function(t){switch(t){case 1:return Uint8Array;case 3:return Uint16Array;case 4:return Uint32Array;case 5:case 10:default:return Array;case 6:return Int8Array;case 8:return Int16Array;case 9:return Int32Array;case 11:return Float32Array;case 12:return Float64Array}}(A))(T),y=E;for(let w=0;w<T;w++)h[w]=this.parseTagValue(A,t),t+=y;return h}}parseTagValue(t,h){let{chunk:y}=this;switch(t){case 1:return y.getUint8(h);case 3:return y.getUint16(h);case 4:case 13:return y.getUint32(h);case 5:return y.getUint32(h)/y.getUint32(h+4);case 6:return y.getInt8(h);case 8:return y.getInt16(h);case 9:return y.getInt32(h);case 10:return y.getInt32(h)/y.getInt32(h+4);case 11:return y.getFloat(h);case 12:return y.getDouble(h);default:g(`Invalid tiff type ${t}`)}}}class fe extends ce{static canHandle(t,h){return 225===t.getUint8(h+1)&&1165519206===t.getUint32(h+4)&&0===t.getUint16(h+8)}async parse(){this.parseHeader();let{options:t}=this;return t.ifd0.enabled&&await this.parseIfd0Block(),t.exif.enabled&&await this.safeParse("parseExifBlock"),t.gps.enabled&&await this.safeParse("parseGpsBlock"),t.interop.enabled&&await this.safeParse("parseInteropBlock"),t.ifd1.enabled&&await this.safeParse("parseThumbnailBlock"),this.createOutput()}safeParse(t){let h=this[t]();return void 0!==h.catch&&(h=h.catch(this.handleError)),h}findIfd0Offset(){void 0===this.ifd0Offset&&(this.ifd0Offset=this.chunk.getUint32(4))}findIfd1Offset(){if(void 0===this.ifd1Offset){this.findIfd0Offset();let t=this.chunk.getUint16(this.ifd0Offset),h=this.ifd0Offset+2+12*t;this.ifd1Offset=this.chunk.getUint32(h)}}parseBlock(t,h){let y=new Map;return this[h]=y,this.parseTags(t,h,y),y}async parseIfd0Block(){if(this.ifd0)return;let{file:t}=this;this.findIfd0Offset(),this.ifd0Offset<8&&g("Malformed EXIF data"),!t.chunked&&this.ifd0Offset>t.byteLength&&g(`IFD0 offset points to outside of file.\nthis.ifd0Offset: ${this.ifd0Offset}, file.byteLength: ${t.byteLength}`),t.tiff&&await t.ensureChunk(this.ifd0Offset,S(this.options));let h=this.parseBlock(this.ifd0Offset,"ifd0");return 0!==h.size?(this.exifOffset=h.get(34665),this.interopOffset=h.get(40965),this.gpsOffset=h.get(34853),this.xmp=h.get(700),this.iptc=h.get(33723),this.icc=h.get(34675),this.options.sanitize&&(h.delete(34665),h.delete(40965),h.delete(34853),h.delete(700),h.delete(33723),h.delete(34675)),h):void 0}async parseExifBlock(){if(this.exif)return;if(this.ifd0||await this.parseIfd0Block(),void 0===this.exifOffset)return;this.file.tiff&&await this.file.ensureChunk(this.exifOffset,S(this.options));let t=this.parseBlock(this.exifOffset,"exif");return this.interopOffset||(this.interopOffset=t.get(40965)),this.makerNote=t.get(37500),this.userComment=t.get(37510),this.options.sanitize&&(t.delete(40965),t.delete(37500),t.delete(37510)),this.unpack(t,41728),this.unpack(t,41729),t}unpack(t,h){let y=t.get(h);y&&1===y.length&&t.set(h,y[0])}async parseGpsBlock(){if(this.gps)return;if(this.ifd0||await this.parseIfd0Block(),void 0===this.gpsOffset)return;let t=this.parseBlock(this.gpsOffset,"gps");return t&&t.has(2)&&t.has(4)&&(t.set("latitude",de(...t.get(2),t.get(1))),t.set("longitude",de(...t.get(4),t.get(3)))),t}async parseInteropBlock(){if(!this.interop&&(this.ifd0||await this.parseIfd0Block(),void 0!==this.interopOffset||this.exif||await this.parseExifBlock(),void 0!==this.interopOffset))return this.parseBlock(this.interopOffset,"interop")}async parseThumbnailBlock(t=!1){if(!this.ifd1&&!this.ifd1Parsed&&(!this.options.mergeOutput||t))return this.findIfd1Offset(),this.ifd1Offset>0&&(this.parseBlock(this.ifd1Offset,"ifd1"),this.ifd1Parsed=!0),this.ifd1}async extractThumbnail(){if(this.headerParsed||this.parseHeader(),this.ifd1Parsed||await this.parseThumbnailBlock(!0),void 0===this.ifd1)return;let t=this.ifd1.get(513),h=this.ifd1.get(514);return this.chunk.getUint8Array(t,h)}get image(){return this.ifd0}get thumbnail(){return this.ifd1}createOutput(){let t,h,y,w={};for(h of ua)if(t=this[h],!p(t))if(y=this.canTranslate?this.translateBlock(t,h):Object.fromEntries(t),this.options.mergeOutput){if("ifd1"===h)continue;Object.assign(w,y)}else w[h]=y;return this.makerNote&&(w.makerNote=this.makerNote),this.userComment&&(w.userComment=this.userComment),w}assignToOutput(t,h){if(this.globalOptions.mergeOutput)Object.assign(t,h);else for(let[y,w]of Object.entries(h))this.assignObjectToOutput(t,y,w)}}function de(t,h,y,w){var A=t+h/60+y/3600;return"S"!==w&&"W"!==w||(A*=-1),A}c(fe,"type","tiff"),c(fe,"headerLength",10),ra.set("tiff",fe);var _a=Object.freeze({__proto__:null,default:ya,Exifr:te,fileParsers:ta,segmentParsers:ra,fileReaders:na,tagKeys:oa,tagValues:ia,tagRevivers:aa,createDictionary:U,extendDictionary:F,fetchUrlAsArrayBuffer:M,readBlobAsArrayBuffer:R,chunkedProps:sa,otherSegments:la,segments:ca,tiffBlocks:ua,segmentsAndBlocks:pa,tiffExtractables:da,inheritables:fa,allFormatters:ha,Options:q,parse:ie});const Sa={ifd0:!1,ifd1:!1,exif:!1,gps:!1,interop:!1,sanitize:!1,reviveValues:!0,translateKeys:!1,translateValues:!1,mergeOutput:!1},wa=Object.assign({},Sa,{firstChunkSize:4e4,gps:[1,2,3,4]});async function Se(t){let h=new te(wa);await h.read(t);let y=await h.parse();if(y&&y.gps){let{latitude:t,longitude:h}=y.gps;return{latitude:t,longitude:h}}}const Ca=Object.assign({},Sa,{tiff:!1,ifd1:!0,mergeOutput:!1});async function ye(t){let h=new te(Ca);await h.read(t);let y=await h.extractThumbnail();return y&&Yi?Qi.from(y):y}async function be(t){let h=await this.thumbnail(t);if(void 0!==h){let t=new Blob([h]);return URL.createObjectURL(t)}}const Pa=Object.assign({},Sa,{firstChunkSize:4e4,ifd0:[274]});async function Pe(t){let h=new te(Pa);await h.read(t);let y=await h.parse();if(y&&y.ifd0)return y.ifd0[274]}const ka=Object.freeze({1:{dimensionSwapped:!1,scaleX:1,scaleY:1,deg:0,rad:0},2:{dimensionSwapped:!1,scaleX:-1,scaleY:1,deg:0,rad:0},3:{dimensionSwapped:!1,scaleX:1,scaleY:1,deg:180,rad:180*Math.PI/180},4:{dimensionSwapped:!1,scaleX:-1,scaleY:1,deg:180,rad:180*Math.PI/180},5:{dimensionSwapped:!0,scaleX:1,scaleY:-1,deg:90,rad:90*Math.PI/180},6:{dimensionSwapped:!0,scaleX:1,scaleY:1,deg:90,rad:90*Math.PI/180},7:{dimensionSwapped:!0,scaleX:1,scaleY:-1,deg:270,rad:270*Math.PI/180},8:{dimensionSwapped:!0,scaleX:1,scaleY:1,deg:270,rad:270*Math.PI/180}});let xa=!0,Aa=!0;if("object"==typeof navigator){let t=navigator.userAgent;if(t.includes("iPad")||t.includes("iPhone")){let h=t.match(/OS (\d+)_(\d+)/);if(h){let[,t,y]=h,w=Number(t)+.1*Number(y);xa=w<13.4,Aa=!1}}else if(t.includes("OS X 10")){let[,h]=t.match(/OS X 10[_.](\d+)/);xa=Aa=Number(h)<15}if(t.includes("Chrome/")){let[,h]=t.match(/Chrome\/(\d+)/);xa=Aa=Number(h)<81}else if(t.includes("Firefox/")){let[,h]=t.match(/Firefox\/(\d+)/);xa=Aa=Number(h)<77}}async function Ae(t){let h=await Pe(t);return Object.assign({canvas:xa,css:Aa},ka[h])}class De extends I{constructor(...t){super(...t),c(this,"ranges",new Oe),0!==this.byteLength&&this.ranges.add(0,this.byteLength)}_tryExtend(t,h,y){if(0===t&&0===this.byteLength&&y){let t=new DataView(y.buffer||y,y.byteOffset,y.byteLength);this._swapDataView(t)}else{let y=t+h;if(y>this.byteLength){let{dataView:t}=this._extend(y);this._swapDataView(t)}}}_extend(t){let h;h=Yi?Qi.allocUnsafe(t):new Uint8Array(t);let y=new DataView(h.buffer,h.byteOffset,h.byteLength);return h.set(new Uint8Array(this.buffer,this.byteOffset,this.byteLength),0),{uintView:h,dataView:y}}subarray(t,h,y=!1){return h=h||this._lengthToEnd(t),y&&this._tryExtend(t,h),this.ranges.add(t,h),super.subarray(t,h)}set(t,h,y=!1){y&&this._tryExtend(h,t.byteLength,t);let w=super.set(t,h);return this.ranges.add(h,w.byteLength),w}async ensureChunk(t,h){this.chunked&&(this.ranges.available(t,h)||await this.readChunk(t,h))}available(t,h){return this.ranges.available(t,h)}}class Oe{constructor(){c(this,"list",[])}get length(){return this.list.length}add(t,h,y=0){let w=t+h,A=this.list.filter((h=>xe(t,h.offset,w)||xe(t,h.end,w)));if(A.length>0){t=Math.min(t,...A.map((t=>t.offset))),w=Math.max(w,...A.map((t=>t.end))),h=w-t;let y=A.shift();y.offset=t,y.length=h,y.end=w,this.list=this.list.filter((t=>!A.includes(t)))}else this.list.push({offset:t,length:h,end:w})}available(t,h){let y=t+h;return this.list.some((h=>h.offset<=t&&y<=h.end))}}function xe(t,h,y){return t<=h&&h<=y}class ve extends De{constructor(t,h){super(0),c(this,"chunksRead",0),this.input=t,this.options=h}async readWhole(){this.chunked=!1,await this.readChunk(this.nextChunkOffset)}async readChunked(){this.chunked=!0,await this.readChunk(0,this.options.firstChunkSize)}async readNextChunk(t=this.nextChunkOffset){if(this.fullyRead)return this.chunksRead++,!1;let h=this.options.chunkSize,y=await this.readChunk(t,h);return!!y&&y.byteLength===h}async readChunk(t,h){if(this.chunksRead++,0!==(h=this.safeWrapAddress(t,h)))return this._readChunk(t,h)}safeWrapAddress(t,h){return void 0!==this.size&&t+h>this.size?Math.max(0,this.size-t):h}get nextChunkOffset(){if(0!==this.ranges.list.length)return this.ranges.list[0].length}get canReadNextChunk(){return this.chunksRead<this.options.chunkLimit}get fullyRead(){return void 0!==this.size&&this.nextChunkOffset===this.size}read(){return this.options.chunked?this.readChunked():this.readWhole()}close(){}}na.set("blob",class extends ve{async readWhole(){this.chunked=!1;let t=await R(this.input);this._swapArrayBuffer(t)}readChunked(){return this.chunked=!0,this.size=this.input.size,super.readChunked()}async _readChunk(t,h){let y=h?t+h:void 0,w=this.input.slice(t,y),A=await R(w);return this.set(A,t,!0)}});var Ia=Object.freeze({__proto__:null,default:_a,Exifr:te,fileParsers:ta,segmentParsers:ra,fileReaders:na,tagKeys:oa,tagValues:ia,tagRevivers:aa,createDictionary:U,extendDictionary:F,fetchUrlAsArrayBuffer:M,readBlobAsArrayBuffer:R,chunkedProps:sa,otherSegments:la,segments:ca,tiffBlocks:ua,segmentsAndBlocks:pa,tiffExtractables:da,inheritables:fa,allFormatters:ha,Options:q,parse:ie,gpsOnlyOptions:wa,gps:Se,thumbnailOnlyOptions:Ca,thumbnail:ye,thumbnailUrl:be,orientationOnlyOptions:Pa,orientation:Pe,rotations:ka,get rotateCanvas(){return xa},get rotateCss(){return Aa},rotation:Ae});na.set("url",class extends ve{async readWhole(){this.chunked=!1;let t=await M(this.input);t instanceof ArrayBuffer?this._swapArrayBuffer(t):t instanceof Uint8Array&&this._swapBuffer(t)}async _readChunk(t,h){let y=h?t+h-1:void 0,w=this.options.httpHeaders||{};(t||y)&&(w.range=`bytes=${[t,y].join("-")}`);let A=await Zi(this.input,{headers:w}),T=await A.arrayBuffer(),E=T.byteLength;if(416!==A.status)return E!==h&&(this.size=t+E),this.set(T,t,!0)}}),I.prototype.getUint64=function(t){let h=this.getUint32(t),y=this.getUint32(t+4);return h<1048575?h<<32|y:void 0!==typeof Ki?(console.warn("Using BigInt because of type 64uint but JS can only handle 53b numbers."),Ki(h)<<Ki(32)|Ki(y)):void g("Trying to read 64b value but JS can only handle 53b numbers.")};class Re extends se{parseBoxes(t=0){let h=[];for(;t<this.file.byteLength-4;){let y=this.parseBoxHead(t);if(h.push(y),0===y.length)break;t+=y.length}return h}parseSubBoxes(t){t.boxes=this.parseBoxes(t.start)}findBox(t,h){return void 0===t.boxes&&this.parseSubBoxes(t),t.boxes.find((t=>t.kind===h))}parseBoxHead(t){let h=this.file.getUint32(t),y=this.file.getString(t+4,4),w=t+8;return 1===h&&(h=this.file.getUint64(t+8),w+=8),{offset:t,length:h,kind:y,start:w}}parseBoxFullHead(t){if(void 0!==t.version)return;let h=this.file.getUint32(t.start);t.version=h>>24,t.start+=4}}class Le extends Re{static canHandle(t,h){if(0!==h)return!1;let y=t.getUint16(2);if(y>50)return!1;let w=16,A=[];for(;w<y;)A.push(t.getString(w,4)),w+=4;return A.includes(this.type)}async parse(){let t=this.file.getUint32(0),h=this.parseBoxHead(t);for(;"meta"!==h.kind;)t+=h.length,await this.file.ensureChunk(t,16),h=this.parseBoxHead(t);await this.file.ensureChunk(h.offset,h.length),this.parseBoxFullHead(h),this.parseSubBoxes(h),this.options.icc.enabled&&await this.findIcc(h),this.options.tiff.enabled&&await this.findExif(h)}async registerSegment(t,h,y){await this.file.ensureChunk(h,y);let w=this.file.subarray(h,y);this.createParser(t,w)}async findIcc(t){let h=this.findBox(t,"iprp");if(void 0===h)return;let y=this.findBox(h,"ipco");if(void 0===y)return;let w=this.findBox(y,"colr");void 0!==w&&await this.registerSegment("icc",w.offset+12,w.length)}async findExif(t){let h=this.findBox(t,"iinf");if(void 0===h)return;let y=this.findBox(t,"iloc");if(void 0===y)return;let w=this.findExifLocIdInIinf(h),A=this.findExtentInIloc(y,w);if(void 0===A)return;let[T,E]=A;await this.file.ensureChunk(T,E);let j=4+this.file.getUint32(T);T+=j,E-=j,await this.registerSegment("tiff",T,E)}findExifLocIdInIinf(t){this.parseBoxFullHead(t);let h,y,w,A,T=t.start,E=this.file.getUint16(T);for(T+=2;E--;){if(h=this.parseBoxHead(T),this.parseBoxFullHead(h),y=h.start,h.version>=2&&(w=3===h.version?4:2,A=this.file.getString(y+w+2,4),"Exif"===A))return this.file.getUintBytes(y,w);T+=h.length}}get8bits(t){let h=this.file.getUint8(t);return[h>>4,15&h]}findExtentInIloc(t,h){this.parseBoxFullHead(t);let y=t.start,[w,A]=this.get8bits(y++),[T,E]=this.get8bits(y++),j=2===t.version?4:2,B=1===t.version||2===t.version?2:0,N=E+w+A,V=2===t.version?4:2,W=this.file.getUintBytes(y,V);for(y+=V;W--;){let t=this.file.getUintBytes(y,j);y+=j+B+2+T;let V=this.file.getUint16(y);if(y+=2,t===h)return V>1&&console.warn("ILOC box has more than one extent but we're only processing one\nPlease create an issue at https://github.com/MikeKovarik/exifr with this file"),[this.file.getUintBytes(y+E,w),this.file.getUintBytes(y+E+w,A)];y+=V*N}}}class Ue extends Le{}c(Ue,"type","heic");class Fe extends Le{}c(Fe,"type","avif"),ta.set("heic",Ue),ta.set("avif",Fe),U(oa,["ifd0","ifd1"],[[256,"ImageWidth"],[257,"ImageHeight"],[258,"BitsPerSample"],[259,"Compression"],[262,"PhotometricInterpretation"],[270,"ImageDescription"],[271,"Make"],[272,"Model"],[273,"StripOffsets"],[274,"Orientation"],[277,"SamplesPerPixel"],[278,"RowsPerStrip"],[279,"StripByteCounts"],[282,"XResolution"],[283,"YResolution"],[284,"PlanarConfiguration"],[296,"ResolutionUnit"],[301,"TransferFunction"],[305,"Software"],[306,"ModifyDate"],[315,"Artist"],[316,"HostComputer"],[317,"Predictor"],[318,"WhitePoint"],[319,"PrimaryChromaticities"],[513,"ThumbnailOffset"],[514,"ThumbnailLength"],[529,"YCbCrCoefficients"],[530,"YCbCrSubSampling"],[531,"YCbCrPositioning"],[532,"ReferenceBlackWhite"],[700,"ApplicationNotes"],[33432,"Copyright"],[33723,"IPTC"],[34665,"ExifIFD"],[34675,"ICC"],[34853,"GpsIFD"],[330,"SubIFD"],[40965,"InteropIFD"],[40091,"XPTitle"],[40092,"XPComment"],[40093,"XPAuthor"],[40094,"XPKeywords"],[40095,"XPSubject"]]),U(oa,"exif",[[33434,"ExposureTime"],[33437,"FNumber"],[34850,"ExposureProgram"],[34852,"SpectralSensitivity"],[34855,"ISO"],[34858,"TimeZoneOffset"],[34859,"SelfTimerMode"],[34864,"SensitivityType"],[34865,"StandardOutputSensitivity"],[34866,"RecommendedExposureIndex"],[34867,"ISOSpeed"],[34868,"ISOSpeedLatitudeyyy"],[34869,"ISOSpeedLatitudezzz"],[36864,"ExifVersion"],[36867,"DateTimeOriginal"],[36868,"CreateDate"],[36873,"GooglePlusUploadCode"],[36880,"OffsetTime"],[36881,"OffsetTimeOriginal"],[36882,"OffsetTimeDigitized"],[37121,"ComponentsConfiguration"],[37122,"CompressedBitsPerPixel"],[37377,"ShutterSpeedValue"],[37378,"ApertureValue"],[37379,"BrightnessValue"],[37380,"ExposureCompensation"],[37381,"MaxApertureValue"],[37382,"SubjectDistance"],[37383,"MeteringMode"],[37384,"LightSource"],[37385,"Flash"],[37386,"FocalLength"],[37393,"ImageNumber"],[37394,"SecurityClassification"],[37395,"ImageHistory"],[37396,"SubjectArea"],[37500,"MakerNote"],[37510,"UserComment"],[37520,"SubSecTime"],[37521,"SubSecTimeOriginal"],[37522,"SubSecTimeDigitized"],[37888,"AmbientTemperature"],[37889,"Humidity"],[37890,"Pressure"],[37891,"WaterDepth"],[37892,"Acceleration"],[37893,"CameraElevationAngle"],[40960,"FlashpixVersion"],[40961,"ColorSpace"],[40962,"ExifImageWidth"],[40963,"ExifImageHeight"],[40964,"RelatedSoundFile"],[41483,"FlashEnergy"],[41486,"FocalPlaneXResolution"],[41487,"FocalPlaneYResolution"],[41488,"FocalPlaneResolutionUnit"],[41492,"SubjectLocation"],[41493,"ExposureIndex"],[41495,"SensingMethod"],[41728,"FileSource"],[41729,"SceneType"],[41730,"CFAPattern"],[41985,"CustomRendered"],[41986,"ExposureMode"],[41987,"WhiteBalance"],[41988,"DigitalZoomRatio"],[41989,"FocalLengthIn35mmFormat"],[41990,"SceneCaptureType"],[41991,"GainControl"],[41992,"Contrast"],[41993,"Saturation"],[41994,"Sharpness"],[41996,"SubjectDistanceRange"],[42016,"ImageUniqueID"],[42032,"OwnerName"],[42033,"SerialNumber"],[42034,"LensInfo"],[42035,"LensMake"],[42036,"LensModel"],[42037,"LensSerialNumber"],[42080,"CompositeImage"],[42081,"CompositeImageCount"],[42082,"CompositeImageExposureTimes"],[42240,"Gamma"],[59932,"Padding"],[59933,"OffsetSchema"],[65e3,"OwnerName"],[65001,"SerialNumber"],[65002,"Lens"],[65100,"RawFile"],[65101,"Converter"],[65102,"WhiteBalance"],[65105,"Exposure"],[65106,"Shadows"],[65107,"Brightness"],[65108,"Contrast"],[65109,"Saturation"],[65110,"Sharpness"],[65111,"Smoothness"],[65112,"MoireFilter"],[40965,"InteropIFD"]]),U(oa,"gps",[[0,"GPSVersionID"],[1,"GPSLatitudeRef"],[2,"GPSLatitude"],[3,"GPSLongitudeRef"],[4,"GPSLongitude"],[5,"GPSAltitudeRef"],[6,"GPSAltitude"],[7,"GPSTimeStamp"],[8,"GPSSatellites"],[9,"GPSStatus"],[10,"GPSMeasureMode"],[11,"GPSDOP"],[12,"GPSSpeedRef"],[13,"GPSSpeed"],[14,"GPSTrackRef"],[15,"GPSTrack"],[16,"GPSImgDirectionRef"],[17,"GPSImgDirection"],[18,"GPSMapDatum"],[19,"GPSDestLatitudeRef"],[20,"GPSDestLatitude"],[21,"GPSDestLongitudeRef"],[22,"GPSDestLongitude"],[23,"GPSDestBearingRef"],[24,"GPSDestBearing"],[25,"GPSDestDistanceRef"],[26,"GPSDestDistance"],[27,"GPSProcessingMethod"],[28,"GPSAreaInformation"],[29,"GPSDateStamp"],[30,"GPSDifferential"],[31,"GPSHPositioningError"]]),U(ia,["ifd0","ifd1"],[[274,{1:"Horizontal (normal)",2:"Mirror horizontal",3:"Rotate 180",4:"Mirror vertical",5:"Mirror horizontal and rotate 270 CW",6:"Rotate 90 CW",7:"Mirror horizontal and rotate 90 CW",8:"Rotate 270 CW"}],[296,{1:"None",2:"inches",3:"cm"}]]);let Ta=U(ia,"exif",[[34850,{0:"Not defined",1:"Manual",2:"Normal program",3:"Aperture priority",4:"Shutter priority",5:"Creative program",6:"Action program",7:"Portrait mode",8:"Landscape mode"}],[37121,{0:"-",1:"Y",2:"Cb",3:"Cr",4:"R",5:"G",6:"B"}],[37383,{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"}],[37384,{0:"Unknown",1:"Daylight",2:"Fluorescent",3:"Tungsten (incandescent light)",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 - 5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"}],[37385,{0:"Flash did not fire",1:"Flash fired",5:"Strobe return light not detected",7:"Strobe return light detected",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"}],[41495,{1:"Not defined",2:"One-chip color area sensor",3:"Two-chip color area sensor",4:"Three-chip color area sensor",5:"Color sequential area sensor",7:"Trilinear sensor",8:"Color sequential linear sensor"}],[41728,{1:"Film Scanner",2:"Reflection Print Scanner",3:"Digital Camera"}],[41729,{1:"Directly photographed"}],[41985,{0:"Normal",1:"Custom",2:"HDR (no original saved)",3:"HDR (original saved)",4:"Original (for HDR)",6:"Panorama",7:"Portrait HDR",8:"Portrait"}],[41986,{0:"Auto",1:"Manual",2:"Auto bracket"}],[41987,{0:"Auto",1:"Manual"}],[41990,{0:"Standard",1:"Landscape",2:"Portrait",3:"Night",4:"Other"}],[41991,{0:"None",1:"Low gain up",2:"High gain up",3:"Low gain down",4:"High gain down"}],[41996,{0:"Unknown",1:"Macro",2:"Close",3:"Distant"}],[42080,{0:"Unknown",1:"Not a Composite Image",2:"General Composite Image",3:"Composite Image Captured While Shooting"}]]);const Oa={1:"No absolute unit of measurement",2:"Inch",3:"Centimeter"};Ta.set(37392,Oa),Ta.set(41488,Oa);const Ea={0:"Normal",1:"Low",2:"High"};function Ge(t){return"object"==typeof t&&void 0!==t.length?t[0]:t}function Ve(t){let h=Array.from(t).slice(1);return h[1]>15&&(h=h.map((t=>String.fromCharCode(t)))),"0"!==h[2]&&0!==h[2]||h.pop(),h.join(".")}function ze(t){if("string"==typeof t){var[h,y,w,A,T,E]=t.trim().split(/[-: ]/g).map(Number),j=new Date(h,y-1,w);return Number.isNaN(A)||Number.isNaN(T)||Number.isNaN(E)||(j.setHours(A),j.setMinutes(T),j.setSeconds(E)),Number.isNaN(+j)?t:j}}function He(t){if("string"==typeof t)return t;let h=[];if(0===t[1]&&0===t[t.length-1])for(let y=0;y<t.length;y+=2)h.push(je(t[y+1],t[y]));else for(let y=0;y<t.length;y+=2)h.push(je(t[y],t[y+1]));return m(String.fromCodePoint(...h))}function je(t,h){return t<<8|h}Ta.set(41992,Ea),Ta.set(41993,Ea),Ta.set(41994,Ea),U(aa,["ifd0","ifd1"],[[50827,function(t){return"string"!=typeof t?b(t):t}],[306,ze],[40091,He],[40092,He],[40093,He],[40094,He],[40095,He]]),U(aa,"exif",[[40960,Ve],[36864,Ve],[36867,ze],[36868,ze],[40962,Ge],[40963,Ge]]),U(aa,"gps",[[0,t=>Array.from(t).join(".")],[7,t=>Array.from(t).join(":")]]);class We extends re{static canHandle(t,h){return 225===t.getUint8(h+1)&&1752462448===t.getUint32(h+4)&&"http://ns.adobe.com/"===t.getString(h+4,20)}static headerLength(t,h){return"http://ns.adobe.com/xmp/extension/"===t.getString(h+4,34)?79:33}static findPosition(t,h){let y=super.findPosition(t,h);return y.multiSegment=y.extended=79===y.headerLength,y.multiSegment?(y.chunkCount=t.getUint8(h+72),y.chunkNumber=t.getUint8(h+76),0!==t.getUint8(h+77)&&y.chunkNumber++):(y.chunkCount=1/0,y.chunkNumber=-1),y}static handleMultiSegments(t){return t.map((t=>t.chunk.getString())).join("")}normalizeInput(t){return"string"==typeof t?t:I.from(t).getString()}parse(t=this.chunk){if(!this.localOptions.parse)return t;t=function(t){let h={},y={};for(let t of Fa)h[t]=[],y[t]=0;return t.replace(Ra,((t,w,A)=>{if("<"===w){let w=++y[A];return h[A].push(w),`${t}#${w}`}return`${t}#${h[A].pop()}`}))}(t);let h=Xe.findAll(t,"rdf","Description");0===h.length&&h.push(new Xe("rdf","Description",void 0,t));let y,w={};for(let t of h)for(let h of t.properties)y=Je(h.ns,w),_e(h,y);return function(t){let h;for(let y in t)h=t[y]=f(t[y]),void 0===h&&delete t[y];return f(t)}(w)}assignToOutput(t,h){if(this.localOptions.parse)for(let[y,w]of Object.entries(h))switch(y){case"tiff":this.assignObjectToOutput(t,"ifd0",w);break;case"exif":this.assignObjectToOutput(t,"exif",w);break;case"xmlns":break;default:this.assignObjectToOutput(t,y,w)}else t.xmp=h}}c(We,"type","xmp"),c(We,"multiSegment",!0),ra.set("xmp",We);class Ke{static findAll(t){return qe(t,/([a-zA-Z0-9-]+):([a-zA-Z0-9-]+)=("[^"]*"|'[^']*')/gm).map(Ke.unpackMatch)}static unpackMatch(t){let h=t[1],y=t[2],w=t[3].slice(1,-1);return w=Qe(w),new Ke(h,y,w)}constructor(t,h,y){this.ns=t,this.name=h,this.value=y}serialize(){return this.value}}class Xe{static findAll(t,h,y){if(void 0!==h||void 0!==y){h=h||"[\\w\\d-]+",y=y||"[\\w\\d-]+";var w=new RegExp(`<(${h}):(${y})(#\\d+)?((\\s+?[\\w\\d-:]+=("[^"]*"|'[^']*'))*\\s*)(\\/>|>([\\s\\S]*?)<\\/\\1:\\2\\3>)`,"gm")}else w=/<([\w\d-]+):([\w\d-]+)(#\d+)?((\s+?[\w\d-:]+=("[^"]*"|'[^']*'))*\s*)(\/>|>([\s\S]*?)<\/\1:\2\3>)/gm;return qe(t,w).map(Xe.unpackMatch)}static unpackMatch(t){let h=t[1],y=t[2],w=t[4],A=t[8];return new Xe(h,y,w,A)}constructor(t,h,y,w){this.ns=t,this.name=h,this.attrString=y,this.innerXml=w,this.attrs=Ke.findAll(y),this.children=Xe.findAll(w),this.value=0===this.children.length?Qe(w):void 0,this.properties=[...this.attrs,...this.children]}get isPrimitive(){return void 0!==this.value&&0===this.attrs.length&&0===this.children.length}get isListContainer(){return 1===this.children.length&&this.children[0].isList}get isList(){let{ns:t,name:h}=this;return"rdf"===t&&("Seq"===h||"Bag"===h||"Alt"===h)}get isListItem(){return"rdf"===this.ns&&"li"===this.name}serialize(){if(0===this.properties.length&&void 0===this.value)return;if(this.isPrimitive)return this.value;if(this.isListContainer)return this.children[0].serialize();if(this.isList)return $e(this.children.map(Ye));if(this.isListItem&&1===this.children.length&&0===this.attrs.length)return this.children[0].serialize();let t={};for(let h of this.properties)_e(h,t);return void 0!==this.value&&(t.value=this.value),f(t)}}function _e(t,h){let y=t.serialize();void 0!==y&&(h[t.name]=y)}var Ye=t=>t.serialize(),$e=t=>1===t.length?t[0]:t,Je=(t,h)=>h[t]?h[t]:h[t]={};function qe(t,h){let y,w=[];if(!t)return w;for(;null!==(y=h.exec(t));)w.push(y);return w}function Qe(t){if(function(t){return null==t||"null"===t||"undefined"===t||""===t||""===t.trim()}(t))return;let h=Number(t);if(!Number.isNaN(h))return h;let y=t.toLowerCase();return"true"===y||"false"!==y&&t.trim()}const Fa=["rdf:li","rdf:Seq","rdf:Bag","rdf:Alt","rdf:Description"],Ra=new RegExp(`(<|\\/)(${Fa.join("|")})`,"g");var Da=Object.freeze({__proto__:null,default:Ia,Exifr:te,fileParsers:ta,segmentParsers:ra,fileReaders:na,tagKeys:oa,tagValues:ia,tagRevivers:aa,createDictionary:U,extendDictionary:F,fetchUrlAsArrayBuffer:M,readBlobAsArrayBuffer:R,chunkedProps:sa,otherSegments:la,segments:ca,tiffBlocks:ua,segmentsAndBlocks:pa,tiffExtractables:da,inheritables:fa,allFormatters:ha,Options:q,parse:ie,gpsOnlyOptions:wa,gps:Se,thumbnailOnlyOptions:Ca,thumbnail:ye,thumbnailUrl:be,orientationOnlyOptions:Pa,orientation:Pe,rotations:ka,get rotateCanvas(){return xa},get rotateCss(){return Aa},rotation:Ae});let Ma=l("fs",(t=>t.promises));na.set("fs",class extends ve{async readWhole(){this.chunked=!1,this.fs=await Ma;let t=await this.fs.readFile(this.input);this._swapBuffer(t)}async readChunked(){this.chunked=!0,this.fs=await Ma,await this.open(),await this.readChunk(0,this.options.firstChunkSize)}async open(){void 0===this.fh&&(this.fh=await this.fs.open(this.input,"r"),this.size=(await this.fh.stat(this.input)).size)}async _readChunk(t,h){void 0===this.fh&&await this.open(),t+h>this.size&&(h=this.size-t);var y=this.subarray(t,h,!0);return await this.fh.read(y.dataView,0,h,t),y}async close(){if(this.fh){let t=this.fh;this.fh=void 0,await t.close()}}}),na.set("base64",class extends ve{constructor(...t){super(...t),this.input=this.input.replace(/^data:([^;]+);base64,/gim,""),this.size=this.input.length/4*3,this.input.endsWith("==")?this.size-=2:this.input.endsWith("=")&&(this.size-=1)}async _readChunk(t,h){let y,w,A=this.input;void 0===t?(t=0,y=0,w=0):(y=4*Math.floor(t/3),w=t-y/4*3),void 0===h&&(h=this.size);let T=t+h,E=y+4*Math.ceil(T/3);A=A.slice(y,E);let j=Math.min(h,this.size-t);if(Yi){let h=Qi.from(A,"base64").slice(w,w+j);return this.set(h,t,!0)}{let h=this.subarray(t,j,!0),y=atob(A),T=h.toUint8();for(let t=0;t<j;t++)T[t]=y.charCodeAt(w+t);return h}}});class ot extends se{static canHandle(t,h){return 18761===h||19789===h}extendOptions(t){let{ifd0:h,xmp:y,iptc:w,icc:A}=t;y.enabled&&h.deps.add(700),w.enabled&&h.deps.add(33723),A.enabled&&h.deps.add(34675),h.finalizeFilters()}async parse(){let{tiff:t,xmp:h,iptc:y,icc:w}=this.options;if(t.enabled||h.enabled||y.enabled||w.enabled){let t=Math.max(S(this.options),this.options.chunkSize);await this.file.ensureChunk(0,t),this.createParser("tiff",this.file),this.parsers.tiff.parseHeader(),await this.parsers.tiff.parseIfd0Block(),this.adaptTiffPropAsSegment("xmp"),this.adaptTiffPropAsSegment("iptc"),this.adaptTiffPropAsSegment("icc")}}adaptTiffPropAsSegment(t){if(this.parsers.tiff[t]){let h=this.parsers.tiff[t];this.injectSegment(t,h)}}}c(ot,"type","tiff"),ta.set("tiff",ot);let ja=l("zlib");const La=["ihdr","iccp","text","itxt","exif"];class ut extends se{constructor(...t){super(...t),c(this,"catchError",(t=>this.errors.push(t))),c(this,"metaChunks",[]),c(this,"unknownChunks",[])}static canHandle(t,h){return 35152===h&&2303741511===t.getUint32(0)&&218765834===t.getUint32(4)}async parse(){let{file:t}=this;await this.findPngChunksInRange(8,t.byteLength),await this.readSegments(this.metaChunks),this.findIhdr(),this.parseTextChunks(),await this.findExif().catch(this.catchError),await this.findXmp().catch(this.catchError),await this.findIcc().catch(this.catchError)}async findPngChunksInRange(t,h){let{file:y}=this;for(;t<h;){let h=y.getUint32(t),w=y.getUint32(t+4),A=y.getString(t+4,4).toLowerCase(),T=h+4+4+4,E={type:A,offset:t,length:T,start:t+4+4,size:h,marker:w};La.includes(A)?this.metaChunks.push(E):this.unknownChunks.push(E),t+=T}}parseTextChunks(){let t=this.metaChunks.filter((t=>"text"===t.type));for(let h of t){let[t,y]=this.file.getString(h.start,h.size).split("\0");this.injectKeyValToIhdr(t,y)}}injectKeyValToIhdr(t,h){let y=this.parsers.ihdr;y&&y.raw.set(t,h)}findIhdr(){let t=this.metaChunks.find((t=>"ihdr"===t.type));t&&!1!==this.options.ihdr.enabled&&this.createParser("ihdr",t.chunk)}async findExif(){let t=this.metaChunks.find((t=>"exif"===t.type));t&&this.injectSegment("tiff",t.chunk)}async findXmp(){let t=this.metaChunks.filter((t=>"itxt"===t.type));for(let h of t)"XML:com.adobe.xmp"===h.chunk.getString(0,17)&&this.injectSegment("xmp",h.chunk)}async findIcc(){let t=this.metaChunks.find((t=>"iccp"===t.type));if(!t)return;let{chunk:h}=t,y=h.getUint8Array(0,81),w=0;for(;w<80&&0!==y[w];)w++;let A=w+2,T=h.getString(0,w);if(this.injectKeyValToIhdr("ProfileName",T),Xi){let t=await ja,y=h.getUint8Array(A);y=t.inflateSync(y),this.injectSegment("icc",y)}}}c(ut,"type","png"),ta.set("png",ut),U(oa,"interop",[[1,"InteropIndex"],[2,"InteropVersion"],[4096,"RelatedImageFileFormat"],[4097,"RelatedImageWidth"],[4098,"RelatedImageHeight"]]),F(oa,"ifd0",[[11,"ProcessingSoftware"],[254,"SubfileType"],[255,"OldSubfileType"],[263,"Thresholding"],[264,"CellWidth"],[265,"CellLength"],[266,"FillOrder"],[269,"DocumentName"],[280,"MinSampleValue"],[281,"MaxSampleValue"],[285,"PageName"],[286,"XPosition"],[287,"YPosition"],[290,"GrayResponseUnit"],[297,"PageNumber"],[321,"HalftoneHints"],[322,"TileWidth"],[323,"TileLength"],[332,"InkSet"],[337,"TargetPrinter"],[18246,"Rating"],[18249,"RatingPercent"],[33550,"PixelScale"],[34264,"ModelTransform"],[34377,"PhotoshopSettings"],[50706,"DNGVersion"],[50707,"DNGBackwardVersion"],[50708,"UniqueCameraModel"],[50709,"LocalizedCameraModel"],[50736,"DNGLensInfo"],[50739,"ShadowScale"],[50740,"DNGPrivateData"],[33920,"IntergraphMatrix"],[33922,"ModelTiePoint"],[34118,"SEMInfo"],[34735,"GeoTiffDirectory"],[34736,"GeoTiffDoubleParams"],[34737,"GeoTiffAsciiParams"],[50341,"PrintIM"],[50721,"ColorMatrix1"],[50722,"ColorMatrix2"],[50723,"CameraCalibration1"],[50724,"CameraCalibration2"],[50725,"ReductionMatrix1"],[50726,"ReductionMatrix2"],[50727,"AnalogBalance"],[50728,"AsShotNeutral"],[50729,"AsShotWhiteXY"],[50730,"BaselineExposure"],[50731,"BaselineNoise"],[50732,"BaselineSharpness"],[50734,"LinearResponseLimit"],[50735,"CameraSerialNumber"],[50741,"MakerNoteSafety"],[50778,"CalibrationIlluminant1"],[50779,"CalibrationIlluminant2"],[50781,"RawDataUniqueID"],[50827,"OriginalRawFileName"],[50828,"OriginalRawFileData"],[50831,"AsShotICCProfile"],[50832,"AsShotPreProfileMatrix"],[50833,"CurrentICCProfile"],[50834,"CurrentPreProfileMatrix"],[50879,"ColorimetricReference"],[50885,"SRawType"],[50898,"PanasonicTitle"],[50899,"PanasonicTitle2"],[50931,"CameraCalibrationSig"],[50932,"ProfileCalibrationSig"],[50933,"ProfileIFD"],[50934,"AsShotProfileName"],[50936,"ProfileName"],[50937,"ProfileHueSatMapDims"],[50938,"ProfileHueSatMapData1"],[50939,"ProfileHueSatMapData2"],[50940,"ProfileToneCurve"],[50941,"ProfileEmbedPolicy"],[50942,"ProfileCopyright"],[50964,"ForwardMatrix1"],[50965,"ForwardMatrix2"],[50966,"PreviewApplicationName"],[50967,"PreviewApplicationVersion"],[50968,"PreviewSettingsName"],[50969,"PreviewSettingsDigest"],[50970,"PreviewColorSpace"],[50971,"PreviewDateTime"],[50972,"RawImageDigest"],[50973,"OriginalRawFileDigest"],[50981,"ProfileLookTableDims"],[50982,"ProfileLookTableData"],[51043,"TimeCodes"],[51044,"FrameRate"],[51058,"TStop"],[51081,"ReelName"],[51089,"OriginalDefaultFinalSize"],[51090,"OriginalBestQualitySize"],[51091,"OriginalDefaultCropSize"],[51105,"CameraLabel"],[51107,"ProfileHueSatMapEncoding"],[51108,"ProfileLookTableEncoding"],[51109,"BaselineExposureOffset"],[51110,"DefaultBlackRender"],[51111,"NewRawImageDigest"],[51112,"RawToPreviewGain"]]);let Ba=[[273,"StripOffsets"],[279,"StripByteCounts"],[288,"FreeOffsets"],[289,"FreeByteCounts"],[291,"GrayResponseCurve"],[292,"T4Options"],[293,"T6Options"],[300,"ColorResponseUnit"],[320,"ColorMap"],[324,"TileOffsets"],[325,"TileByteCounts"],[326,"BadFaxLines"],[327,"CleanFaxData"],[328,"ConsecutiveBadFaxLines"],[330,"SubIFD"],[333,"InkNames"],[334,"NumberofInks"],[336,"DotRange"],[338,"ExtraSamples"],[339,"SampleFormat"],[340,"SMinSampleValue"],[341,"SMaxSampleValue"],[342,"TransferRange"],[343,"ClipPath"],[344,"XClipPathUnits"],[345,"YClipPathUnits"],[346,"Indexed"],[347,"JPEGTables"],[351,"OPIProxy"],[400,"GlobalParametersIFD"],[401,"ProfileType"],[402,"FaxProfile"],[403,"CodingMethods"],[404,"VersionYear"],[405,"ModeNumber"],[433,"Decode"],[434,"DefaultImageColor"],[435,"T82Options"],[437,"JPEGTables"],[512,"JPEGProc"],[515,"JPEGRestartInterval"],[517,"JPEGLosslessPredictors"],[518,"JPEGPointTransforms"],[519,"JPEGQTables"],[520,"JPEGDCTables"],[521,"JPEGACTables"],[559,"StripRowCounts"],[999,"USPTOMiscellaneous"],[18247,"XP_DIP_XML"],[18248,"StitchInfo"],[28672,"SonyRawFileType"],[28688,"SonyToneCurve"],[28721,"VignettingCorrection"],[28722,"VignettingCorrParams"],[28724,"ChromaticAberrationCorrection"],[28725,"ChromaticAberrationCorrParams"],[28726,"DistortionCorrection"],[28727,"DistortionCorrParams"],[29895,"SonyCropTopLeft"],[29896,"SonyCropSize"],[32781,"ImageID"],[32931,"WangTag1"],[32932,"WangAnnotation"],[32933,"WangTag3"],[32934,"WangTag4"],[32953,"ImageReferencePoints"],[32954,"RegionXformTackPoint"],[32955,"WarpQuadrilateral"],[32956,"AffineTransformMat"],[32995,"Matteing"],[32996,"DataType"],[32997,"ImageDepth"],[32998,"TileDepth"],[33300,"ImageFullWidth"],[33301,"ImageFullHeight"],[33302,"TextureFormat"],[33303,"WrapModes"],[33304,"FovCot"],[33305,"MatrixWorldToScreen"],[33306,"MatrixWorldToCamera"],[33405,"Model2"],[33421,"CFARepeatPatternDim"],[33422,"CFAPattern2"],[33423,"BatteryLevel"],[33424,"KodakIFD"],[33445,"MDFileTag"],[33446,"MDScalePixel"],[33447,"MDColorTable"],[33448,"MDLabName"],[33449,"MDSampleInfo"],[33450,"MDPrepDate"],[33451,"MDPrepTime"],[33452,"MDFileUnits"],[33589,"AdventScale"],[33590,"AdventRevision"],[33628,"UIC1Tag"],[33629,"UIC2Tag"],[33630,"UIC3Tag"],[33631,"UIC4Tag"],[33918,"IntergraphPacketData"],[33919,"IntergraphFlagRegisters"],[33921,"INGRReserved"],[34016,"Site"],[34017,"ColorSequence"],[34018,"IT8Header"],[34019,"RasterPadding"],[34020,"BitsPerRunLength"],[34021,"BitsPerExtendedRunLength"],[34022,"ColorTable"],[34023,"ImageColorIndicator"],[34024,"BackgroundColorIndicator"],[34025,"ImageColorValue"],[34026,"BackgroundColorValue"],[34027,"PixelIntensityRange"],[34028,"TransparencyIndicator"],[34029,"ColorCharacterization"],[34030,"HCUsage"],[34031,"TrapIndicator"],[34032,"CMYKEquivalent"],[34152,"AFCP_IPTC"],[34232,"PixelMagicJBIGOptions"],[34263,"JPLCartoIFD"],[34306,"WB_GRGBLevels"],[34310,"LeafData"],[34687,"TIFF_FXExtensions"],[34688,"MultiProfiles"],[34689,"SharedData"],[34690,"T88Options"],[34732,"ImageLayer"],[34750,"JBIGOptions"],[34856,"Opto-ElectricConvFactor"],[34857,"Interlace"],[34908,"FaxRecvParams"],[34909,"FaxSubAddress"],[34910,"FaxRecvTime"],[34929,"FedexEDR"],[34954,"LeafSubIFD"],[37387,"FlashEnergy"],[37388,"SpatialFrequencyResponse"],[37389,"Noise"],[37390,"FocalPlaneXResolution"],[37391,"FocalPlaneYResolution"],[37392,"FocalPlaneResolutionUnit"],[37397,"ExposureIndex"],[37398,"TIFF-EPStandardID"],[37399,"SensingMethod"],[37434,"CIP3DataFile"],[37435,"CIP3Sheet"],[37436,"CIP3Side"],[37439,"StoNits"],[37679,"MSDocumentText"],[37680,"MSPropertySetStorage"],[37681,"MSDocumentTextPosition"],[37724,"ImageSourceData"],[40965,"InteropIFD"],[40976,"SamsungRawPointersOffset"],[40977,"SamsungRawPointersLength"],[41217,"SamsungRawByteOrder"],[41218,"SamsungRawUnknown"],[41484,"SpatialFrequencyResponse"],[41485,"Noise"],[41489,"ImageNumber"],[41490,"SecurityClassification"],[41491,"ImageHistory"],[41494,"TIFF-EPStandardID"],[41995,"DeviceSettingDescription"],[42112,"GDALMetadata"],[42113,"GDALNoData"],[44992,"ExpandSoftware"],[44993,"ExpandLens"],[44994,"ExpandFilm"],[44995,"ExpandFilterLens"],[44996,"ExpandScanner"],[44997,"ExpandFlashLamp"],[46275,"HasselbladRawImage"],[48129,"PixelFormat"],[48130,"Transformation"],[48131,"Uncompressed"],[48132,"ImageType"],[48256,"ImageWidth"],[48257,"ImageHeight"],[48258,"WidthResolution"],[48259,"HeightResolution"],[48320,"ImageOffset"],[48321,"ImageByteCount"],[48322,"AlphaOffset"],[48323,"AlphaByteCount"],[48324,"ImageDataDiscard"],[48325,"AlphaDataDiscard"],[50215,"OceScanjobDesc"],[50216,"OceApplicationSelector"],[50217,"OceIDNumber"],[50218,"OceImageLogic"],[50255,"Annotations"],[50459,"HasselbladExif"],[50547,"OriginalFileName"],[50560,"USPTOOriginalContentType"],[50656,"CR2CFAPattern"],[50710,"CFAPlaneColor"],[50711,"CFALayout"],[50712,"LinearizationTable"],[50713,"BlackLevelRepeatDim"],[50714,"BlackLevel"],[50715,"BlackLevelDeltaH"],[50716,"BlackLevelDeltaV"],[50717,"WhiteLevel"],[50718,"DefaultScale"],[50719,"DefaultCropOrigin"],[50720,"DefaultCropSize"],[50733,"BayerGreenSplit"],[50737,"ChromaBlurRadius"],[50738,"AntiAliasStrength"],[50752,"RawImageSegmentation"],[50780,"BestQualityScale"],[50784,"AliasLayerMetadata"],[50829,"ActiveArea"],[50830,"MaskedAreas"],[50935,"NoiseReductionApplied"],[50974,"SubTileBlockSize"],[50975,"RowInterleaveFactor"],[51008,"OpcodeList1"],[51009,"OpcodeList2"],[51022,"OpcodeList3"],[51041,"NoiseProfile"],[51114,"CacheVersion"],[51125,"DefaultUserCrop"],[51157,"NikonNEFInfo"],[65024,"KdcIFD"]];F(oa,"ifd0",Ba),F(oa,"exif",Ba),U(ia,"gps",[[23,{M:"Magnetic North",T:"True North"}],[25,{K:"Kilometers",M:"Miles",N:"Nautical Miles"}]]);class ft extends re{static canHandle(t,h){return 224===t.getUint8(h+1)&&1246120262===t.getUint32(h+4)&&0===t.getUint8(h+8)}parse(){return this.parseTags(),this.translate(),this.output}parseTags(){this.raw=new Map([[0,this.chunk.getUint16(0)],[2,this.chunk.getUint8(2)],[3,this.chunk.getUint16(3)],[5,this.chunk.getUint16(5)],[7,this.chunk.getUint8(7)],[8,this.chunk.getUint8(8)]])}}c(ft,"type","jfif"),c(ft,"headerLength",9),ra.set("jfif",ft),U(oa,"jfif",[[0,"JFIFVersion"],[2,"ResolutionUnit"],[3,"XResolution"],[5,"YResolution"],[7,"ThumbnailWidth"],[8,"ThumbnailHeight"]]);class dt extends re{parse(){return this.parseTags(),this.translate(),this.output}parseTags(){this.raw=new Map([[0,this.chunk.getUint32(0)],[4,this.chunk.getUint32(4)],[8,this.chunk.getUint8(8)],[9,this.chunk.getUint8(9)],[10,this.chunk.getUint8(10)],[11,this.chunk.getUint8(11)],[12,this.chunk.getUint8(12)],...Array.from(this.raw)])}}c(dt,"type","ihdr"),ra.set("ihdr",dt),U(oa,"ihdr",[[0,"ImageWidth"],[4,"ImageHeight"],[8,"BitDepth"],[9,"ColorType"],[10,"Compression"],[11,"Filter"],[12,"Interlace"]]),U(ia,"ihdr",[[9,{0:"Grayscale",2:"RGB",3:"Palette",4:"Grayscale with Alpha",6:"RGB with Alpha",DEFAULT:"Unknown"}],[10,{0:"Deflate/Inflate",DEFAULT:"Unknown"}],[11,{0:"Adaptive",DEFAULT:"Unknown"}],[12,{0:"Noninterlaced",1:"Adam7 Interlace",DEFAULT:"Unknown"}]]);class pt extends re{static canHandle(t,h){return 226===t.getUint8(h+1)&&1229144927===t.getUint32(h+4)}static findPosition(t,h){let y=super.findPosition(t,h);return y.chunkNumber=t.getUint8(h+16),y.chunkCount=t.getUint8(h+17),y.multiSegment=y.chunkCount>1,y}static handleMultiSegments(t){return function(t){let h=function(t){let h=t[0].constructor,y=0;for(let h of t)y+=h.length;let w=new h(y),A=0;for(let h of t)w.set(h,A),A+=h.length;return w}(t.map((t=>t.chunk.toUint8())));return new I(h)}(t)}parse(){return this.raw=new Map,this.parseHeader(),this.parseTags(),this.translate(),this.output}parseHeader(){let{raw:t}=this;this.chunk.byteLength<84&&g("ICC header is too short");for(let[h,y]of Object.entries(Na)){h=parseInt(h,10);let w=y(this.chunk,h);"\0\0\0\0"!==w&&t.set(h,w)}}parseTags(){let t,h,y,w,A,{raw:T}=this,E=this.chunk.getUint32(128),j=132,B=this.chunk.byteLength;for(;E--;){if(t=this.chunk.getString(j,4),h=this.chunk.getUint32(j+4),y=this.chunk.getUint32(j+8),w=this.chunk.getString(h,4),h+y>B)return void console.warn("reached the end of the first ICC chunk. Enable options.tiff.multiSegment to read all ICC segments.");A=this.parseTag(w,h,y),void 0!==A&&"\0\0\0\0"!==A&&T.set(t,A),j+=12}}parseTag(t,h,y){switch(t){case"desc":return this.parseDesc(h);case"mluc":return this.parseMluc(h);case"text":return this.parseText(h,y);case"sig ":return this.parseSig(h)}if(!(h+y>this.chunk.byteLength))return this.chunk.getUint8Array(h,y)}parseDesc(t){let h=this.chunk.getUint32(t+8)-1;return m(this.chunk.getString(t+12,h))}parseText(t,h){return m(this.chunk.getString(t+8,h-8))}parseSig(t){return m(this.chunk.getString(t+8,4))}parseMluc(t){let{chunk:h}=this,y=h.getUint32(t+8),w=h.getUint32(t+12),A=t+16,T=[];for(let E=0;E<y;E++){let y=h.getString(A+0,2),E=h.getString(A+2,2),j=h.getUint32(A+4),B=h.getUint32(A+8)+t,N=m(h.getUnicodeString(B,j));T.push({lang:y,country:E,text:N}),A+=w}return 1===y?T[0].text:T}translateValue(t,h){return"string"==typeof t?h[t]||h[t.toLowerCase()]||t:h[t]||t}}c(pt,"type","icc"),c(pt,"multiSegment",!0),c(pt,"headerLength",18);const Na={4:mt,8:function(t,h){return[t.getUint8(h),t.getUint8(h+1)>>4,t.getUint8(h+1)%16].map((t=>t.toString(10))).join(".")},12:mt,16:mt,20:mt,24:function(t,h){const y=t.getUint16(h),w=t.getUint16(h+2)-1,A=t.getUint16(h+4),T=t.getUint16(h+6),E=t.getUint16(h+8),j=t.getUint16(h+10);return new Date(Date.UTC(y,w,A,T,E,j))},36:mt,40:mt,48:mt,52:mt,64:(t,h)=>t.getUint32(h),80:mt};function mt(t,h){return m(t.getString(h,4))}ra.set("icc",pt),U(oa,"icc",[[4,"ProfileCMMType"],[8,"ProfileVersion"],[12,"ProfileClass"],[16,"ColorSpaceData"],[20,"ProfileConnectionSpace"],[24,"ProfileDateTime"],[36,"ProfileFileSignature"],[40,"PrimaryPlatform"],[44,"CMMFlags"],[48,"DeviceManufacturer"],[52,"DeviceModel"],[56,"DeviceAttributes"],[64,"RenderingIntent"],[68,"ConnectionSpaceIlluminant"],[80,"ProfileCreator"],[84,"ProfileID"],["Header","ProfileHeader"],["MS00","WCSProfiles"],["bTRC","BlueTRC"],["bXYZ","BlueMatrixColumn"],["bfd","UCRBG"],["bkpt","MediaBlackPoint"],["calt","CalibrationDateTime"],["chad","ChromaticAdaptation"],["chrm","Chromaticity"],["ciis","ColorimetricIntentImageState"],["clot","ColorantTableOut"],["clro","ColorantOrder"],["clrt","ColorantTable"],["cprt","ProfileCopyright"],["crdi","CRDInfo"],["desc","ProfileDescription"],["devs","DeviceSettings"],["dmdd","DeviceModelDesc"],["dmnd","DeviceMfgDesc"],["dscm","ProfileDescriptionML"],["fpce","FocalPlaneColorimetryEstimates"],["gTRC","GreenTRC"],["gXYZ","GreenMatrixColumn"],["gamt","Gamut"],["kTRC","GrayTRC"],["lumi","Luminance"],["meas","Measurement"],["meta","Metadata"],["mmod","MakeAndModel"],["ncl2","NamedColor2"],["ncol","NamedColor"],["ndin","NativeDisplayInfo"],["pre0","Preview0"],["pre1","Preview1"],["pre2","Preview2"],["ps2i","PS2RenderingIntent"],["ps2s","PostScript2CSA"],["psd0","PostScript2CRD0"],["psd1","PostScript2CRD1"],["psd2","PostScript2CRD2"],["psd3","PostScript2CRD3"],["pseq","ProfileSequenceDesc"],["psid","ProfileSequenceIdentifier"],["psvm","PS2CRDVMSize"],["rTRC","RedTRC"],["rXYZ","RedMatrixColumn"],["resp","OutputResponse"],["rhoc","ReflectionHardcopyOrigColorimetry"],["rig0","PerceptualRenderingIntentGamut"],["rig2","SaturationRenderingIntentGamut"],["rpoc","ReflectionPrintOutputColorimetry"],["sape","SceneAppearanceEstimates"],["scoe","SceneColorimetryEstimates"],["scrd","ScreeningDesc"],["scrn","Screening"],["targ","CharTarget"],["tech","Technology"],["vcgt","VideoCardGamma"],["view","ViewingConditions"],["vued","ViewingCondDesc"],["wtpt","MediaWhitePoint"]]);const Va={"4d2p":"Erdt Systems",AAMA:"Aamazing Technologies",ACER:"Acer",ACLT:"Acolyte Color Research",ACTI:"Actix Sytems",ADAR:"Adara Technology",ADBE:"Adobe",ADI:"ADI Systems",AGFA:"Agfa Graphics",ALMD:"Alps Electric",ALPS:"Alps Electric",ALWN:"Alwan Color Expertise",AMTI:"Amiable Technologies",AOC:"AOC International",APAG:"Apago",APPL:"Apple Computer",AST:"AST","AT&T":"AT&T",BAEL:"BARBIERI electronic",BRCO:"Barco NV",BRKP:"Breakpoint",BROT:"Brother",BULL:"Bull",BUS:"Bus Computer Systems","C-IT":"C-Itoh",CAMR:"Intel",CANO:"Canon",CARR:"Carroll Touch",CASI:"Casio",CBUS:"Colorbus PL",CEL:"Crossfield",CELx:"Crossfield",CGS:"CGS Publishing Technologies International",CHM:"Rochester Robotics",CIGL:"Colour Imaging Group, London",CITI:"Citizen",CL00:"Candela",CLIQ:"Color IQ",CMCO:"Chromaco",CMiX:"CHROMiX",COLO:"Colorgraphic Communications",COMP:"Compaq",COMp:"Compeq/Focus Technology",CONR:"Conrac Display Products",CORD:"Cordata Technologies",CPQ:"Compaq",CPRO:"ColorPro",CRN:"Cornerstone",CTX:"CTX International",CVIS:"ColorVision",CWC:"Fujitsu Laboratories",DARI:"Darius Technology",DATA:"Dataproducts",DCP:"Dry Creek Photo",DCRC:"Digital Contents Resource Center, Chung-Ang University",DELL:"Dell Computer",DIC:"Dainippon Ink and Chemicals",DICO:"Diconix",DIGI:"Digital","DL&C":"Digital Light & Color",DPLG:"Doppelganger",DS:"Dainippon Screen",DSOL:"DOOSOL",DUPN:"DuPont",EPSO:"Epson",ESKO:"Esko-Graphics",ETRI:"Electronics and Telecommunications Research Institute",EVER:"Everex Systems",EXAC:"ExactCODE",Eizo:"Eizo",FALC:"Falco Data Products",FF:"Fuji Photo Film",FFEI:"FujiFilm Electronic Imaging",FNRD:"Fnord Software",FORA:"Fora",FORE:"Forefront Technology",FP:"Fujitsu",FPA:"WayTech Development",FUJI:"Fujitsu",FX:"Fuji Xerox",GCC:"GCC Technologies",GGSL:"Global Graphics Software",GMB:"Gretagmacbeth",GMG:"GMG",GOLD:"GoldStar Technology",GOOG:"Google",GPRT:"Giantprint",GTMB:"Gretagmacbeth",GVC:"WayTech Development",GW2K:"Sony",HCI:"HCI",HDM:"Heidelberger Druckmaschinen",HERM:"Hermes",HITA:"Hitachi America",HP:"Hewlett-Packard",HTC:"Hitachi",HiTi:"HiTi Digital",IBM:"IBM",IDNT:"Scitex",IEC:"Hewlett-Packard",IIYA:"Iiyama North America",IKEG:"Ikegami Electronics",IMAG:"Image Systems",IMI:"Ingram Micro",INTC:"Intel",INTL:"N/A (INTL)",INTR:"Intra Electronics",IOCO:"Iocomm International Technology",IPS:"InfoPrint Solutions Company",IRIS:"Scitex",ISL:"Ichikawa Soft Laboratory",ITNL:"N/A (ITNL)",IVM:"IVM",IWAT:"Iwatsu Electric",Idnt:"Scitex",Inca:"Inca Digital Printers",Iris:"Scitex",JPEG:"Joint Photographic Experts Group",JSFT:"Jetsoft Development",JVC:"JVC Information Products",KART:"Scitex",KFC:"KFC Computek Components",KLH:"KLH Computers",KMHD:"Konica Minolta",KNCA:"Konica",KODA:"Kodak",KYOC:"Kyocera",Kart:"Scitex",LCAG:"Leica",LCCD:"Leeds Colour",LDAK:"Left Dakota",LEAD:"Leading Technology",LEXM:"Lexmark International",LINK:"Link Computer",LINO:"Linotronic",LITE:"Lite-On",Leaf:"Leaf",Lino:"Linotronic",MAGC:"Mag Computronic",MAGI:"MAG Innovision",MANN:"Mannesmann",MICN:"Micron Technology",MICR:"Microtek",MICV:"Microvitec",MINO:"Minolta",MITS:"Mitsubishi Electronics America",MITs:"Mitsuba",MNLT:"Minolta",MODG:"Modgraph",MONI:"Monitronix",MONS:"Monaco Systems",MORS:"Morse Technology",MOTI:"Motive Systems",MSFT:"Microsoft",MUTO:"MUTOH INDUSTRIES",Mits:"Mitsubishi Electric",NANA:"NANAO",NEC:"NEC",NEXP:"NexPress Solutions",NISS:"Nissei Sangyo America",NKON:"Nikon",NONE:"none",OCE:"Oce Technologies",OCEC:"OceColor",OKI:"Oki",OKID:"Okidata",OKIP:"Okidata",OLIV:"Olivetti",OLYM:"Olympus",ONYX:"Onyx Graphics",OPTI:"Optiquest",PACK:"Packard Bell",PANA:"Matsushita Electric Industrial",PANT:"Pantone",PBN:"Packard Bell",PFU:"PFU",PHIL:"Philips Consumer Electronics",PNTX:"HOYA",POne:"Phase One A/S",PREM:"Premier Computer Innovations",PRIN:"Princeton Graphic Systems",PRIP:"Princeton Publishing Labs",QLUX:"Hong Kong",QMS:"QMS",QPCD:"QPcard AB",QUAD:"QuadLaser",QUME:"Qume",RADI:"Radius",RDDx:"Integrated Color Solutions",RDG:"Roland DG",REDM:"REDMS Group",RELI:"Relisys",RGMS:"Rolf Gierling Multitools",RICO:"Ricoh",RNLD:"Edmund Ronald",ROYA:"Royal",RPC:"Ricoh Printing Systems",RTL:"Royal Information Electronics",SAMP:"Sampo",SAMS:"Samsung",SANT:"Jaime Santana Pomares",SCIT:"Scitex",SCRN:"Dainippon Screen",SDP:"Scitex",SEC:"Samsung",SEIK:"Seiko Instruments",SEIk:"Seikosha",SGUY:"ScanGuy.com",SHAR:"Sharp Laboratories",SICC:"International Color Consortium",SONY:"Sony",SPCL:"SpectraCal",STAR:"Star",STC:"Sampo Technology",Scit:"Scitex",Sdp:"Scitex",Sony:"Sony",TALO:"Talon Technology",TAND:"Tandy",TATU:"Tatung",TAXA:"TAXAN America",TDS:"Tokyo Denshi Sekei",TECO:"TECO Information Systems",TEGR:"Tegra",TEKT:"Tektronix",TI:"Texas Instruments",TMKR:"TypeMaker",TOSB:"Toshiba",TOSH:"Toshiba",TOTK:"TOTOKU ELECTRIC",TRIU:"Triumph",TSBT:"Toshiba",TTX:"TTX Computer Products",TVM:"TVM Professional Monitor",TW:"TW Casper",ULSX:"Ulead Systems",UNIS:"Unisys",UTZF:"Utz Fehlau & Sohn",VARI:"Varityper",VIEW:"Viewsonic",VISL:"Visual communication",VIVO:"Vivo Mobile Communication",WANG:"Wang",WLBR:"Wilbur Imaging",WTG2:"Ware To Go",WYSE:"WYSE Technology",XERX:"Xerox",XRIT:"X-Rite",ZRAN:"Zoran",Zebr:"Zebra Technologies",appl:"Apple Computer",bICC:"basICColor",berg:"bergdesign",ceyd:"Integrated Color Solutions",clsp:"MacDermid ColorSpan",ds:"Dainippon Screen",dupn:"DuPont",ffei:"FujiFilm Electronic Imaging",flux:"FluxData",iris:"Scitex",kart:"Scitex",lcms:"Little CMS",lino:"Linotronic",none:"none",ob4d:"Erdt Systems",obic:"Medigraph",quby:"Qubyx Sarl",scit:"Scitex",scrn:"Dainippon Screen",sdp:"Scitex",siwi:"SIWI GRAFIKA",yxym:"YxyMaster"},Ua={scnr:"Scanner",mntr:"Monitor",prtr:"Printer",link:"Device Link",abst:"Abstract",spac:"Color Space Conversion Profile",nmcl:"Named Color",cenc:"ColorEncodingSpace profile",mid:"MultiplexIdentification profile",mlnk:"MultiplexLink profile",mvis:"MultiplexVisualization profile",nkpf:"Nikon Input Device Profile (NON-STANDARD!)"};U(ia,"icc",[[4,Va],[12,Ua],[40,Object.assign({},Va,Ua)],[48,Va],[80,Va],[64,{0:"Perceptual",1:"Relative Colorimetric",2:"Saturation",3:"Absolute Colorimetric"}],["tech",{amd:"Active Matrix Display",crt:"Cathode Ray Tube Display",kpcd:"Photo CD",pmd:"Passive Matrix Display",dcam:"Digital Camera",dcpj:"Digital Cinema Projector",dmpc:"Digital Motion Picture Camera",dsub:"Dye Sublimation Printer",epho:"Electrophotographic Printer",esta:"Electrostatic Printer",flex:"Flexography",fprn:"Film Writer",fscn:"Film Scanner",grav:"Gravure",ijet:"Ink Jet Printer",imgs:"Photo Image Setter",mpfr:"Motion Picture Film Recorder",mpfs:"Motion Picture Film Scanner",offs:"Offset Lithography",pjtv:"Projection Television",rpho:"Photographic Paper Printer",rscn:"Reflective Scanner",silk:"Silkscreen",twax:"Thermal Wax Printer",vidc:"Video Camera",vidm:"Video Monitor"}]]);class yt extends re{static canHandle(t,h,y){return 237===t.getUint8(h+1)&&"Photoshop"===t.getString(h+4,9)&&void 0!==this.containsIptc8bim(t,h,y)}static headerLength(t,h,y){let w,A=this.containsIptc8bim(t,h,y);if(void 0!==A)return w=t.getUint8(h+A+7),w%2!=0&&(w+=1),0===w&&(w=4),A+8+w}static containsIptc8bim(t,h,y){for(let w=0;w<y;w++)if(this.isIptcSegmentHead(t,h+w))return w}static isIptcSegmentHead(t,h){return 56===t.getUint8(h)&&943868237===t.getUint32(h)&&1028===t.getUint16(h+4)}parse(){let{raw:t}=this,h=this.chunk.byteLength-1,y=!1;for(let w=0;w<h;w++)if(28===this.chunk.getUint8(w)&&2===this.chunk.getUint8(w+1)){y=!0;let h=this.chunk.getUint16(w+3),A=this.chunk.getUint8(w+2),T=this.chunk.getLatin1String(w+5,h);t.set(A,this.pluralizeValue(t.get(A),T)),w+=4+h}else if(y)break;return this.translate(),this.output}pluralizeValue(t,h){return void 0!==t?t instanceof Array?(t.push(h),t):[t,h]:h}}c(yt,"type","iptc"),c(yt,"translateValues",!1),c(yt,"reviveValues",!1),ra.set("iptc",yt),U(oa,"iptc",[[0,"ApplicationRecordVersion"],[3,"ObjectTypeReference"],[4,"ObjectAttributeReference"],[5,"ObjectName"],[7,"EditStatus"],[8,"EditorialUpdate"],[10,"Urgency"],[12,"SubjectReference"],[15,"Category"],[20,"SupplementalCategories"],[22,"FixtureIdentifier"],[25,"Keywords"],[26,"ContentLocationCode"],[27,"ContentLocationName"],[30,"ReleaseDate"],[35,"ReleaseTime"],[37,"ExpirationDate"],[38,"ExpirationTime"],[40,"SpecialInstructions"],[42,"ActionAdvised"],[45,"ReferenceService"],[47,"ReferenceDate"],[50,"ReferenceNumber"],[55,"DateCreated"],[60,"TimeCreated"],[62,"DigitalCreationDate"],[63,"DigitalCreationTime"],[65,"OriginatingProgram"],[70,"ProgramVersion"],[75,"ObjectCycle"],[80,"Byline"],[85,"BylineTitle"],[90,"City"],[92,"Sublocation"],[95,"State"],[100,"CountryCode"],[101,"Country"],[103,"OriginalTransmissionReference"],[105,"Headline"],[110,"Credit"],[115,"Source"],[116,"CopyrightNotice"],[118,"Contact"],[120,"Caption"],[121,"LocalCaption"],[122,"Writer"],[125,"RasterizedCaption"],[130,"ImageType"],[131,"ImageOrientation"],[135,"LanguageIdentifier"],[150,"AudioType"],[151,"AudioSamplingRate"],[152,"AudioSamplingResolution"],[153,"AudioDuration"],[154,"AudioOutcue"],[184,"JobID"],[185,"MasterDocumentID"],[186,"ShortDocumentID"],[187,"UniqueDocumentID"],[188,"OwnerID"],[200,"ObjectPreviewFileFormat"],[201,"ObjectPreviewFileVersion"],[202,"ObjectPreviewData"],[221,"Prefs"],[225,"ClassifyState"],[228,"SimilarityIndex"],[230,"DocumentNotes"],[231,"DocumentHistory"],[232,"ExifCameraInfo"],[255,"CatalogSets"]]),U(ia,"iptc",[[10,{0:"0 (reserved)",1:"1 (most urgent)",2:"2",3:"3",4:"4",5:"5 (normal urgency)",6:"6",7:"7",8:"8 (least urgent)",9:"9 (user-defined priority)"}],[75,{a:"Morning",b:"Both Morning and Evening",p:"Evening"}],[131,{L:"Landscape",P:"Portrait",S:"Square"}]]);var Wa,Ha=Da,Ga=((Wa={})[1]={rotation:0,mirrored:!1},Wa[2]={rotation:0,mirrored:!0},Wa[3]={rotation:180,mirrored:!1},Wa[4]={rotation:180,mirrored:!0},Wa[5]={rotation:90,mirrored:!1},Wa[6]={rotation:90,mirrored:!0},Wa[7]={rotation:270,mirrored:!1},Wa[8]={rotation:270,mirrored:!0},Wa),ImageRotation_read=function(t,h){var y="function"==typeof Symbol&&t[Symbol.iterator];if(!y)return t;var w,A,T=y.call(t),E=[];try{for(;(void 0===h||h-- >0)&&!(w=T.next()).done;)E.push(w.value)}catch(t){A={error:t}}finally{try{w&&!w.done&&(y=T.return)&&y.call(T)}finally{if(A)throw A.error}}return E},za=function(){function ImageRotation(){}return ImageRotation.prototype.restore=function(t){return new Promise((function(h){var onError=function(y){console.error(y),h(t)},y=document.createElement("img");y.src=URL.createObjectURL(t),y.onload=function(){Ha.parse(y,{exif:!0,translateValues:!1,pick:["Orientation","ExifImageWidth","ExifImageHeight"]}).then((function(w){var A;if(w&&1!==w.Orientation&&w.ExifImageWidth===y.width){var T=Ga[w.Orientation]||{},E=y.width,j=y.height,B=T.rotation||0;90!==B&&270!==B||(E=(A=ImageRotation_read([j,E],2))[0],j=A[1]);var N=document.createElement("canvas");N.width=E,N.height=j;var V=N.getContext("2d");if(!V)return void onError("Canvas context was not created");V.translate(E/2,j/2);var W=B*(Math.PI/180);V.rotate(W),V.drawImage(y,-y.width/2,-y.height/2),N.toBlob((function(y){y?("name"in t&&(y.name=t.name),h(y)):onError("Canvas was not converted to blob")}),t.type,1)}else h(t)})).catch((function(t){return onError(t)}))},y.onerror=function(t){onError(t)}}))},ImageRotation}();(0,zi.init)();var qa,$a=function(){function InputService(){this.dropEvent=new J,this.selectFileClick=new J,this.acceptChange=new J}return Object.defineProperty(InputService.prototype,"selectFileClick$",{get:function(){return this.selectFileClick.asObservable()},enumerable:!1,configurable:!0}),Object.defineProperty(InputService.prototype,"onFilesDrop$",{get:function(){return this.dropEvent.asObservable().pipe(filter((function(t){return!!t})))},enumerable:!1,configurable:!0}),Object.defineProperty(InputService.prototype,"acceptChange$",{get:function(){return this.acceptChange.asObservable()},enumerable:!1,configurable:!0}),InputService.prototype.dropFiles=function(t){var h=this;if(t&&t.length){if(!/(iphone|ipad|ipod|macintosh)/.test(navigator.userAgent.toLowerCase()))return void this.dropEvent.next(Array.from(t));for(var y=new za,w=[],A=0;A<t.length;A++){var T=t[A];/\/(jpe?g|png)$/i.test(T.type)?w.push(y.restore(T)):w.push(Promise.resolve(T))}Promise.all(w).then((function(t){h.dropEvent.next(Array.from(t))}))}},InputService.prototype.selectFile=function(t){this.selectFileClick.next(t)},InputService.prototype.setAccept=function(t){this.acceptChange.next(t)},InputService}(),Ja=function(){function PickerHandlerService(t){this.serviceProvider=t}return PickerHandlerService.prototype.onAddFile=function(t){switch(t){case tr.device:break;case tr.dropBox:this.serviceProvider.dropboxPickerService.showPicker();break;case tr.gDrive:this.serviceProvider.gDrivePickerService.showPicker();break;default:throw new Error("Not supported type")}},PickerHandlerService.prototype.subscribeDefault=function(t){var h=this;this.serviceProvider.inputService.selectFileClick$.pipe(takeUntil(t)).subscribe((function(t){return h.onAddFile(t)}))},PickerHandlerService}(),Xa=function(){function FileMetaDataService(t){this.serviceProvider=t}return FileMetaDataService.prototype.getFileTypeByFileName=function(t){return this.getFileTypeByExt(this.getFileExtension(t))},FileMetaDataService.prototype.getFileTypeByExt=function(t){var h=this.serviceProvider.toolsConfigService.getToolConfig().fileType;switch(t){case _t.pdf:return Et.pdf;case _t.jpeg:case _t.jpg:case _t.png:case _t.gif:case _t.bmp:case _t.tif:case _t.tiff:case _t.jfif:return Et.image;case _t.docx:case _t.doc:case _t.odt:case _t.rtf:case _t.ods:case _t.xlsx:case _t.xls:case _t.xlt:case _t.xla:case _t.pptx:case _t.ppt:return Et.document;case _t.epub:case _t.djvu:case _t.djv:case _t.mobi:case _t.fb2:return Et.book;case _t.txt:case _t.xml:case _t.html:case _t.chm:return Et.text}return h},FileMetaDataService.prototype.getMimeTypeByExtension=function(t){if(!t)return null;switch(t){case _t.epub:return hn.epub;case _t.djvu:case _t.djv:return hn.djvuX;case _t.mobi:return hn.mobi;case _t.fb2:return hn.fb2;case _t.txt:return hn.txt;case _t.xml:return hn.xml;case _t.html:return hn.html;case _t.chm:return hn.chm;case _t.png:return hn.png;case _t.jpg:return hn.jpg;case _t.jpeg:return hn.jpeg;case _t.jfif:return hn.jfif;case _t.bmp:return hn.bmp;case _t.gif:return hn.gif;case _t.tif:case _t.tiff:return hn.tiff;case _t.docx:return hn.docX;case _t.doc:return hn.doc;case _t.rtf:return hn.rtfX;case _t.odt:return hn.odt;case _t.ods:return hn.ods;case _t.xlsx:return hn.xlsx;case _t.xls:return hn.xls;case _t.xlt:return hn.xlt;case _t.xla:return hn.xla;case _t.pptx:return hn.pptx;case _t.ppt:return hn.ppt;case _t.pdf:return hn.pdf}return null},FileMetaDataService.prototype.getFileExtension=function(t){return(t||"").split(".").slice(-1)[0].toLowerCase()},FileMetaDataService.prototype.getMimeTypeByFileName=function(t){var h=this.getFileExtension(t);return this.getMimeTypeByExtension(h)},FileMetaDataService}(),Qa=function(){function ToolOptionService(t){this.serviceProvider=t,this.prefix="TOOL_OPTIONS"}return ToolOptionService.prototype.getDefault=function(t){var h=this.serviceProvider.toolsConfigService.getToolName();return localStorage.getItem(this.createKey(h,t))},ToolOptionService.prototype.setDefault=function(t,h){var y=this.serviceProvider.toolsConfigService.getToolName(),w=this.createKey(y,t);null!=h?localStorage.setItem(w,h.toString()):localStorage.removeItem(w)},ToolOptionService.prototype.useDefaultOption=function(){return this.serviceProvider.toolsConfigService.getToolConfig().useDefaultOption||!1},ToolOptionService.prototype.saveCurrentOptions=function(t){this.currentOptions=t},ToolOptionService.prototype.hasCurrentOptions=function(){return!!this.currentOptions},ToolOptionService.prototype.getCurrentOptions=function(){return at.asJson(this.currentOptions)},ToolOptionService.prototype.getOptionsDto=function(){var t=this,h=this.getCurrentOptions(),y=Object.create(null);return Object.keys(h).forEach((function(w){if(w===Ct.paperSize){var A=t.getPaperSize(h);A&&(y[w]=A.map((function(t){return String(t)})))}else y[w]=h[w]})),y},ToolOptionService.prototype.getPaperSize=function(t){if(t.paperSize){var h=t[Ct.paperSize].toString().split(",").map((function(t){return t.trim()}));if(h&&2===h.length)return h.map((function(t){return+t}))}return null},ToolOptionService.prototype.createKey=function(t,h){return this.prefix+":"+t+":"+h},ToolOptionService}(),Ka=function(){function ViewerService(){this.defaultMaxItemSize=160,this.defaultMinItemSize=120,this.createSubjects()}return Object.defineProperty(ViewerService.prototype,"viewItemsChange$",{get:function(){return this.viewItemsChange.asObservable()},enumerable:!1,configurable:!0}),Object.defineProperty(ViewerService.prototype,"fileCountChange$",{get:function(){return this.fileCountChange.asObservable()},enumerable:!1,configurable:!0}),Object.defineProperty(ViewerService.prototype,"runJobDisabledChange$",{get:function(){return this.runJobDisabledChange.asObservable().pipe(filter((function(t){return null!==t})))},enumerable:!1,configurable:!0}),Object.defineProperty(ViewerService.prototype,"filesUpdated$",{get:function(){return this.filesUpdated.asObservable()},enumerable:!1,configurable:!0}),Object.defineProperty(ViewerService.prototype,"minMaxItemSizeChanged$",{get:function(){return this.minMaxItemSizeChanged.asObservable()},enumerable:!1,configurable:!0}),Object.defineProperty(ViewerService.prototype,"viewItemReady$",{get:function(){return this.viewItemRendered.asObservable().pipe(filter((function(t){return null!==t})))},enumerable:!1,configurable:!0}),ViewerService.prototype.onViewItemsChange=function(t){this.viewItemsChange.next(t),this.fileCountChange.next(t.length)},ViewerService.prototype.onViewItemRendered=function(t){this.viewItemRendered.next(t)},ViewerService.prototype.onFilesUpdated=function(t){this.filesUpdated.next(t)},ViewerService.prototype.onRunJobDisabledChange=function(t){this.runJobDisabledChange.value!==t&&this.runJobDisabledChange.next(t)},ViewerService.prototype.setViewItemSize=function(t,h){this.minMaxItemSizeChanged.next({min:t,max:h})},ViewerService.prototype.getMinMaxItemValue=function(){return at.asJson(this.minMaxItemSizeChanged.value)},ViewerService.prototype.clean=function(){this.fileCountChange.complete(),this.viewItemsChange.complete(),this.viewItemRendered.complete(),this.filesUpdated.complete(),this.runJobDisabledChange.complete(),this.minMaxItemSizeChanged.complete(),this.createSubjects()},ViewerService.prototype.createSubjects=function(){this.fileCountChange=new J,this.viewItemsChange=new J,this.viewItemRendered=new Te(null),this.filesUpdated=new Te([]),this.runJobDisabledChange=new Te(null),this.minMaxItemSizeChanged=new Te({min:this.defaultMinItemSize,max:this.defaultMaxItemSize})},ViewerService}(),Ya=function(){function SplitService(t){this.serviceProvider=t,this.selectAllPagesChange=new Te(!1),this.documentRed=new J}return Object.defineProperty(SplitService.prototype,"selectAllPagesChange$",{get:function(){return this.selectAllPagesChange.asObservable()},enumerable:!1,configurable:!0}),Object.defineProperty(SplitService.prototype,"onDocumentRead$",{get:function(){return this.documentRed.asObservable().pipe(take(1))},enumerable:!1,configurable:!0}),SplitService.prototype.onSelectAllPagesChange=function(t){this.selectAllPagesChange.next(t)},SplitService.prototype.onDocumentRead=function(t){this.documentRed.next(t)},SplitService}();!function(t){t.closed="closed",t.valid="valid",t.invalid="invalid"}(qa||(qa={}));var Za=function(){var extendStatics=function(t,h){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,h){t.__proto__=h}||function(t,h){for(var y in h)Object.prototype.hasOwnProperty.call(h,y)&&(t[y]=h[y])},extendStatics(t,h)};return function(t,h){if("function"!=typeof h&&null!==h)throw new TypeError("Class extends value "+String(h)+" is not a constructor or null");function __(){this.constructor=t}extendStatics(t,h),t.prototype=null===h?Object.create(h):(__.prototype=h.prototype,new __)}}(),es=__webpack_require__(34231),ts=function(t){function DialogEnterPasswordComponent(h,y){var w=t.call(this,h)||this;return w.options=y,w.ids={componentId:w.componentId,btnCloseId:ke.createQuickGuidAsString(),btnOkId:ke.createQuickGuidAsString(),pwContainerId:ke.createQuickGuidAsString()},w.stateChange=new J,w}return Za(DialogEnterPasswordComponent,t),Object.defineProperty(DialogEnterPasswordComponent.prototype,"$btnClose",{get:function(){return this.helper.getById(this.ids.btnCloseId)},enumerable:!1,configurable:!0}),Object.defineProperty(DialogEnterPasswordComponent.prototype,"stateChange$",{get:function(){return this.stateChange.asObservable().pipe(takeUntil(this.destroyEvent))},enumerable:!1,configurable:!0}),Object.defineProperty(DialogEnterPasswordComponent.prototype,"$btnRead",{get:function(){return this.helper.getById(this.ids.btnOkId)},enumerable:!1,configurable:!0}),DialogEnterPasswordComponent.prototype.init=function(){var h=this.serviceProvider.Translate;this.model={modalCss:"--password-dialog",title:h.get("component-requires-password"),fileName:this.options.fileName,iconLock:Kt.lock,btnLabelUnlock:h.get("component-unlock"),btnLabelSkip:h.get("component-skip-file")},this.createControls(),t.prototype.init.call(this)},DialogEnterPasswordComponent.prototype.show=function(){var t=this;this.toggleModelCss(!!this.model.modalCss),setTimeout((function(){t.destroyed||t.pwControl.focus()}))},DialogEnterPasswordComponent.prototype.hide=function(){this.unbind(),this.destroyComponent()},DialogEnterPasswordComponent.prototype.destroyComponent=function(){this.toggleModelCss(!1),this.pwControl&&(this.pwControl.destroyComponent(),this.pwControl=null),this.stateChange.complete(),t.prototype.destroyComponent.call(this)},DialogEnterPasswordComponent.prototype.createTemplate=function(){var t=this.setTemplateValuesByModel(es,this.ids);return this.setTemplateValuesByModel(t,this.model)},DialogEnterPasswordComponent.prototype.bind=function(){var t=this,h=this.serviceProvider.Translate;this.pwControl.init(),this.pwControl.setPrefixIcon(Kt.lock),this.pwControl.change$.pipe(takeUntil(this.destroyEvent)).subscribe((function(h){return t.onPasswordChange(h)})),this.pwControl.input$.pipe(takeUntil(this.destroyEvent)).subscribe((function(h){h.event.isDefaultPrevented()||t.onPasswordChange(h.value)})),this.$btnRead.on("click",(function(){var y=t.pwControl,w=y.getValue();if(!w)return t.helper.toggleDisabled(t.$btnRead,!1),void t.pwControl.showError(h.get("component-enter-password"));y.setDisableState(!0),t.helper.toggleDisabled(t.$btnRead,!0),t.helper.toggleDisabled(t.$btnClose,!0),t.options.readPasswordFn(w).pipe(takeUntil(t.destroyEvent),take(1)).subscribe({error:function(y){console.warn("readPasswordFn:error",{error:y}),t.helper.toggleDisabled(t.$btnRead,!1),t.pwControl.showError(h.get("component-unexpected-error"))},next:function(w){w?(t.toggleModelCss(!1),t.stateChange.next(qa.valid),t.serviceProvider.modalService.onComponentClose(t)):(t.options.disallowClose||t.helper.toggleDisabled(t.$btnClose,!1),t.pwControl.showError(h.get("err_unlock_invalid_password")),y.setDisableState(!1))}})})),this.options.disallowClose?this.$btnClose.addClass(this.helper.css.displayNone):(this.$btnClose.on("click",(function(){t.helper.isDisabled(t.$btnClose)||t.close()})),fromEvent(document,"keydown").pipe(takeUntil(this.destroyEvent),filter((function(t){return"Escape"===t.key})),take(1)).subscribe((function(){return t.close()})),fromEvent(document,"keydown").pipe(takeUntil(this.destroyEvent),filter((function(t){return"Enter"===t.key}))).subscribe((function(h){if(!h.defaultPrevented){var y=t.pwControl,w=t.$btnRead;t.helper.isDisabled(w)||y.isDisabled()||!y.isValid()||(h.preventDefault(),w.trigger("click"))}})))},DialogEnterPasswordComponent.prototype.close=function(){this.toggleModelCss(!1),this.stateChange.next(qa.closed),this.serviceProvider.modalService.onComponentClose(this)},DialogEnterPasswordComponent.prototype.toggleModelCss=function(t){this.model.modalCss&&this.$component.toggleClass(this.model.modalCss,t)},DialogEnterPasswordComponent.prototype.createControls=function(){this.pwControl=new Vr(this.ids.pwContainerId,"password",{inputType:gr.password,formGroupCss:"form-group--dialog-enter",labelKey:this.options.fileName,placeholderKey:"component-enter-password",usePrefixIcon:!0})},DialogEnterPasswordComponent.prototype.onPasswordChange=function(t){var h=!!t&&!!(t||"").trim();h&&this.pwControl.hideError(),this.helper.toggleDisabled(this.$btnRead,!h)},DialogEnterPasswordComponent}(Ht),rs=function(){var extendStatics=function(t,h){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,h){t.__proto__=h}||function(t,h){for(var y in h)Object.prototype.hasOwnProperty.call(h,y)&&(t[y]=h[y])},extendStatics(t,h)};return function(t,h){if("function"!=typeof h&&null!==h)throw new TypeError("Class extends value "+String(h)+" is not a constructor or null");function __(){this.constructor=t}extendStatics(t,h),t.prototype=null===h?Object.create(h):(__.prototype=h.prototype,new __)}}(),ns=__webpack_require__(62452),os=function(t){function UnlockFileItemComponent(h,y){var w=t.call(this,h)||this;return w.options=y,w.ids={componentId:w.componentId,passwordContainerId:ke.createQuickGuidAsString(),deleteId:ke.createQuickGuidAsString()},w.deleteSubject=new J,w}return rs(UnlockFileItemComponent,t),Object.defineProperty(UnlockFileItemComponent.prototype,"delete$",{get:function(){return this.deleteSubject.asObservable()},enumerable:!1,configurable:!0}),UnlockFileItemComponent.prototype.init=function(){this.createControls(),t.prototype.init.call(this)},UnlockFileItemComponent.prototype.destroyComponent=function(){this.destroyed||(this.deleteSubject.complete(),t.prototype.destroyComponent.call(this))},UnlockFileItemComponent.prototype.validate=function(t){var h=this;return this.valid?of({valid:!0,password:this.pwControl.getValue()}):(t=t||this.pwControl.getValue(),this.serviceProvider.pdfService.isValidPassword({url:this.options.blobUrl,password:t}).pipe(map((function(y){return y?(h.valid=!0,h.pwControl.setDisableState(!0),h.pwControl.hideError()):h.showInvalidError(),h.pwControl.setValidation(y),{valid:y,password:t}}))))},UnlockFileItemComponent.prototype.isValid=function(){return this.valid},UnlockFileItemComponent.prototype.focus=function(){this.pwControl.focus()},UnlockFileItemComponent.prototype.isDisabled=function(){return this.pwControl.isDisabled()},UnlockFileItemComponent.prototype.createTemplate=function(){var t=this.setTemplateValuesByModel(ns,this.ids),h={fileName:this.options.fileName,pdfIcon:Kt.getToolIcon(_t.pdf),closeIconUrl:Kt.createSvgIconUrl("Close")};return this.setTemplateValuesByModel(t,h)},UnlockFileItemComponent.prototype.bind=function(){var t=this;if(this.pwControl.init(),this.pwControl.setPrefixIcon(Kt.lock),this.pwControl.change$.pipe(takeUntil(this.destroyEvent)).subscribe((function(h){return t.onPasswordChange(h)})),this.pwControl.input$.pipe(takeUntil(this.destroyEvent),filter((function(t){return!t.event.isDefaultPrevented()})),map((function(t){return t.value}))).subscribe((function(h){return t.onPasswordChange(h)})),this.options.usePerItemDelete){var h=this.helper.getById(this.ids.deleteId);h.removeClass(this.helper.css.displayNone),fromEvent(h.get(0),"click").pipe(takeUntil(this.destroyEvent)).subscribe((function(){t.deleteSubject.next()}))}},UnlockFileItemComponent.prototype.createControls=function(){this.pwControl=new Vr(this.ids.passwordContainerId,"password",{inputType:gr.password,formGroupCss:"form-group--show-label",labelKey:this.options.fileName,placeholderKey:"component-enter-password",usePrefixIcon:!0})},UnlockFileItemComponent.prototype.onPasswordChange=function(t){this.valid||(!!t&&!!(t||"").trim()?(this.pwControl.hideError(),this.pwControl.setValidation(!0)):this.showInvalidError())},UnlockFileItemComponent.prototype.showInvalidError=function(){this.pwControl.setValidation(!1),this.pwControl.showError("Invalid password")},UnlockFileItemComponent}(Ht);function arrayRemove(t,h){var y=t.findIndex((function(t){return h(t)})),w=t.splice(y,1);if(w.length)return w[0]}var as=function(){var extendStatics=function(t,h){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,h){t.__proto__=h}||function(t,h){for(var y in h)Object.prototype.hasOwnProperty.call(h,y)&&(t[y]=h[y])},extendStatics(t,h)};return function(t,h){if("function"!=typeof h&&null!==h)throw new TypeError("Class extends value "+String(h)+" is not a constructor or null");function __(){this.constructor=t}extendStatics(t,h),t.prototype=null===h?Object.create(h):(__.prototype=h.prototype,new __)}}(),ss=__webpack_require__(64508),ls=function(t){function DialogUnlockFilesComponent(h,y){var w=t.call(this,h)||this;return w.options=y,w.ids={componentId:w.componentId,btnCloseId:ke.createQuickGuidAsString(),btnOkId:ke.createQuickGuidAsString(),listId:ke.createQuickGuidAsString()},w.ok=new J,w.deleteSubject=new J,w.close=new J,w}return as(DialogUnlockFilesComponent,t),Object.defineProperty(DialogUnlockFilesComponent.prototype,"ok$",{get:function(){return this.ok.asObservable().pipe(takeUntil(this.destroyEvent),take(1))},enumerable:!1,configurable:!0}),Object.defineProperty(DialogUnlockFilesComponent.prototype,"delete$",{get:function(){return this.deleteSubject.asObservable().pipe(takeUntil(this.destroyEvent))},enumerable:!1,configurable:!0}),Object.defineProperty(DialogUnlockFilesComponent.prototype,"close$",{get:function(){return this.close.asObservable().pipe(takeUntil(this.destroyEvent),take(1))},enumerable:!1,configurable:!0}),DialogUnlockFilesComponent.prototype.show=function(){},DialogUnlockFilesComponent.prototype.hide=function(){this.unbind(),this.destroyComponent()},DialogUnlockFilesComponent.prototype.destroyComponent=function(){this.destroyed||(this.list.forEach((function(t){return t.component.destroyComponent()})),this.list=null,this.ok.complete(),this.close.complete(),this.deleteSubject.complete(),t.prototype.destroyComponent.call(this))},DialogUnlockFilesComponent.prototype.createTemplate=function(){var t=this.setTemplateValuesByModel(ss,this.ids),h=this.serviceProvider.Translate,y={btnLabelUnlock:h.get("component-unlock"),title:h.get("component-requires-password")};return this.setTemplateValuesByModel(t,y)},DialogUnlockFilesComponent.prototype.bind=function(){var t=this,h=this.options.items.map((function(h,y,w){return{component:new os(t.ids.listId,{fileName:h.storedFile.name,useCheckboxApplyToAll:0===y&&w.length>1,blobUrl:h.storedFile.blobUrl,usePerItemDelete:!!t.options.usePerItemDelete}),valid:!1,itemData:h}}));h.forEach((function(y){y.component.init(),t.options.usePerItemDelete&&y.component.delete$.pipe(takeUntil(t.destroyEvent),takeUntil(y.component.getOnDestroy$())).subscribe((function(){var w=t.helper.getById(t.ids.btnOkId);if(!t.helper.isDisabled(w)){var A=y.itemData.fileId;arrayRemove(h,(function(t){return t===y})),y.component.destroyComponent(),t.deleteSubject.next(A),h.length||t.helper.getById(t.ids.btnCloseId).get(0).click()}}))})),this.list=h;var click$=function(h){return fromEvent(t.helper.getById(h).get(0),"click").pipe(takeUntil(t.destroyEvent))};click$(this.ids.btnCloseId).subscribe((function(){t.close.next(),t.serviceProvider.modalService.onComponentClose(t)})),click$(this.ids.btnOkId).pipe(map((function(){return t.helper.getById(t.ids.btnOkId)})),filter((function(h){return!t.helper.isDisabled(h)})),switchMap((function(h){var y=t.list.filter((function(t){return!t.component.isValid()}));if(!y.length)return of(!0);t.helper.toggleDisabled(h,!0);var w=y.map((function(t){return t.component.validate().pipe(map((function(h){return t.valid=h.valid,t.valid&&(t.itemData.workFile.readPassword=h.password),t})))}));return forkJoin(w).pipe(map((function(y){var w=y.filter((function(t){return!t.valid}));return t.helper.toggleDisabled(h,!1),!w.length})),catchError((function(y){return t.helper.toggleDisabled(h,!1),throwError(y)})))})),filter((function(t){return t}))).subscribe((function(){return t.ok.next()})),fromEvent(document,"keydown").pipe(takeUntil(this.destroyEvent),filter((function(t){return"Escape"===t.key})),take(1)).subscribe((function(){return t.helper.getById(t.ids.btnCloseId).get(0).click()})),setTimeout((function(){t.list.find((function(t){return!t.component.isDisabled()})).component.focus()}))},DialogUnlockFilesComponent.prototype.onPasswordClosed=function(t){this.serviceProvider.modalService.onComponentClose(this)},DialogUnlockFilesComponent}(Ht),cs=function(){function PasswordDialogService(t){this.serviceProvider=t}return PasswordDialogService.prototype.openFileDialog=function(t){return this.serviceProvider.modalService.show((function(h){return new ts(h,t)})),this.serviceProvider.modalService.onCreate$.pipe(take(1))},PasswordDialogService.prototype.openFileListDialog=function(t){return this.serviceProvider.modalService.show((function(h){return new ls(h,t)})),this.serviceProvider.modalService.onCreate$.pipe(take(1))},PasswordDialogService}(),us=function(){function DeletePagesService(t){this.serviceProvider=t,this.selectAllPagesChange=new Te(!1),this.documentRed=new J}return Object.defineProperty(DeletePagesService.prototype,"selectAllPagesChange$",{get:function(){return this.selectAllPagesChange.asObservable()},enumerable:!1,configurable:!0}),Object.defineProperty(DeletePagesService.prototype,"onDocumentRead$",{get:function(){return this.documentRed.asObservable().pipe(take(1))},enumerable:!1,configurable:!0}),DeletePagesService.prototype.onDocumentRead=function(t){this.documentRed.next(t)},DeletePagesService.prototype.onSelectAllPagesChange=function(t){this.selectAllPagesChange.next(t)},DeletePagesService}(),ps=function(){function RotatePagesService(t){this.serviceProvider=t,this.documentRed=new J}return Object.defineProperty(RotatePagesService.prototype,"onDocumentRead$",{get:function(){return this.documentRed.asObservable().pipe(take(1))},enumerable:!1,configurable:!0}),RotatePagesService.prototype.onDocumentRead=function(t){this.documentRed.next(t)},RotatePagesService}(),ds=function(){function InterceptorService(){this.initialized=!1,this.interceptors=[]}return InterceptorService.prototype.init=function(t,h){void 0===h&&(h=[]),this.initialized||(this.interceptors=h,this.configure(t),this.initialized=!0)},InterceptorService.prototype.reset=function(){this.initialized=!1},InterceptorService.prototype.configure=function(t){var h=this;$.ajaxSetup({beforeSend:function(y,w){(w.url===t.endpoint||t.getConfigEndpoint&&w.url===t.getConfigEndpoint)&&h.interceptors.forEach((function(h){return h.intercept(y,w,t)}))}})},InterceptorService}(),fs=function(){function AppService(t){this.serviceProvider=t,this.lockDropzone=new J,this.startOver=new J}return Object.defineProperty(AppService.prototype,"startOver$",{get:function(){var t=this;return this.startOver.asObservable().pipe(take(1),map((function(h){return t.startOverCustomHandler instanceof Function?t.startOverCustomHandler(h):t.onStartOverDefault(h),h})))},enumerable:!1,configurable:!0}),AppService.prototype.setApp=function(t){this.app=t},AppService.prototype.getApp=function(){return this.app},Object.defineProperty(AppService.prototype,"lockDropzone$",{get:function(){return this.lockDropzone.asObservable()},enumerable:!1,configurable:!0}),AppService.prototype.setLockDropzoneState=function(t){this.lockDropzone.next(t)},AppService.prototype.geConfig$=function(t){var h=this.serviceProvider.toolsConfigService.getConfigModel(),y=h.getConfigEndpoint;return new W((function(w){(new FormData).append("payload",JSON.stringify({job:t})),$.ajax({type:"POST",url:y,data:JSON.stringify({job:t}),contentType:"application/json",dataType:"json",processData:!1,success:function(y){var A=Object.assign(at.asJson(h),y);A.toolName=t,!y.maxFilesCount&&y.maxFileCount&&(A.maxFilesCount=y.maxFileCount),w.next(A)},error:function(t){return w.error(t)}})})).pipe(take(1))},AppService.prototype.onStartOver=function(t){this.startOver.next(t)},AppService.prototype.onStartOverDefault=function(t){var h=this.serviceProvider.toolsConfigService.getConfigModel().fileAccept;this.serviceProvider.inputService.setAccept(h),t.gotTo(ge.destroy)},AppService.prototype.getEditor=function(){return this.editor||(this.editor=Promise.all([__webpack_require__.e(398),__webpack_require__.e(28)]).then(__webpack_require__.t.bind(__webpack_require__,398,23)).then((function(t){return t.CandyEdit}))),this.editor},AppService}(),hs=function(){function LimitOperationsService(){this.LIMIT_OPERATIONS_SELECTOR=".limit.notification-block"}return LimitOperationsService.prototype.getSelector=function(){return this.LIMIT_OPERATIONS_SELECTOR},LimitOperationsService.prototype.hasLimit=function(){return!!$(this.LIMIT_OPERATIONS_SELECTOR).length},LimitOperationsService}(),vs=function(){function LimitOperationsStatisticService(t){this.serviceProvider=t,this.KEY_OF_SENT="LIMIT_OPERATIONS_IS_SENT"}return Object.defineProperty(LimitOperationsStatisticService.prototype,"gaService",{get:function(){return this.serviceProvider.ga},enumerable:!1,configurable:!0}),LimitOperationsStatisticService.prototype.send=function(){this.gaService.onLimitOperations()},LimitOperationsStatisticService.prototype.isSent=function(){return!!localStorage.getItem(this.KEY_OF_SENT)},LimitOperationsStatisticService.prototype.setKeyOfSent=function(){localStorage.setItem(this.KEY_OF_SENT,"1")},LimitOperationsStatisticService.prototype.removeKeyOfSent=function(){localStorage.removeItem(this.KEY_OF_SENT)},LimitOperationsStatisticService}(),ms=function(){function FormValuesService(){this.storage=new Xo}return FormValuesService.prototype.get=function(t){return this.storage.getItem(t)},FormValuesService.prototype.save=function(t,h){this.storage.add(t,h)},FormValuesService.prototype.remove=function(t){this.storage.remove(t)},FormValuesService.prototype.has=function(t){return this.storage.hasItem(t)},FormValuesService}(),ys=function(){function ServiceProvider(t){this.serviceInjector=t}return Object.defineProperty(ServiceProvider.prototype,"Translate",{get:function(){return this.serviceInjector.get(Rt)},enumerable:!1,configurable:!0}),Object.defineProperty(ServiceProvider.prototype,"mediaService",{get:function(){return this.serviceInjector.get(bt)},enumerable:!1,configurable:!0}),Object.defineProperty(ServiceProvider.prototype,"domHelper",{get:function(){return this.serviceInjector.get(Ie)},enumerable:!1,configurable:!0}),Object.defineProperty(ServiceProvider.prototype,"toolsConfigService",{get:function(){return this.serviceInjector.get(Mo)},enumerable:!1,configurable:!0}),Object.defineProperty(ServiceProvider.prototype,"stateService",{get:function(){return this.serviceInjector.get(Uo)},enumerable:!1,configurable:!0}),Object.defineProperty(ServiceProvider.prototype,"fileReaderService",{get:function(){return this.serviceInjector.get(Ho)},enumerable:!1,configurable:!0}),Object.defineProperty(ServiceProvider.prototype,"modalService",{get:function(){return this.serviceInjector.get(Go)},enumerable:!1,configurable:!0}),Object.defineProperty(ServiceProvider.prototype,"workFileStoreService",{get:function(){return this.serviceInjector.get(Qo)},enumerable:!1,configurable:!0}),Object.defineProperty(ServiceProvider.prototype,"fileTransferService",{get:function(){return this.serviceInjector.get(pi)},enumerable:!1,configurable:!0}),Object.defineProperty(ServiceProvider.prototype,"webSocketService",{get:function(){return this.serviceInjector.get(di)},enumerable:!1,configurable:!0}),Object.defineProperty(ServiceProvider.prototype,"jobService",{get:function(){return this.serviceInjector.get(fi)},enumerable:!1,configurable:!0}),Object.defineProperty(ServiceProvider.prototype,"scriptLoaderService",{get:function(){return this.serviceInjector.get(hi)},enumerable:!1,configurable:!0}),Object.defineProperty(ServiceProvider.prototype,"pdfService",{get:function(){return this.serviceInjector.get(_i)},enumerable:!1,configurable:!0}),Object.defineProperty(ServiceProvider.prototype,"fileConverterService",{get:function(){return this.serviceInjector.get(Si)},enumerable:!1,configurable:!0}),Object.defineProperty(ServiceProvider.prototype,"fileRenderService",{get:function(){return this.serviceInjector.get(wi)},enumerable:!1,configurable:!0}),Object.defineProperty(ServiceProvider.prototype,"localPickerService",{get:function(){return this.serviceInjector.get(Ii)},enumerable:!1,configurable:!0}),Object.defineProperty(ServiceProvider.prototype,"gDrivePickerService",{get:function(){return this.serviceInjector.get(Wi)},enumerable:!1,configurable:!0}),Object.defineProperty(ServiceProvider.prototype,"dropboxPickerService",{get:function(){return this.serviceInjector.get(Gi)},enumerable:!1,configurable:!0}),Object.defineProperty(ServiceProvider.prototype,"pickerHandlerService",{get:function(){return this.serviceInjector.get(Ja)},enumerable:!1,configurable:!0}),Object.defineProperty(ServiceProvider.prototype,"sortableService",{get:function(){return this.serviceInjector.get(Ti)},enumerable:!1,configurable:!0}),Object.defineProperty(ServiceProvider.prototype,"ga",{get:function(){return this.serviceInjector.get(Fi)},enumerable:!1,configurable:!0}),Object.defineProperty(ServiceProvider.prototype,"errorDialogService",{get:function(){return this.serviceInjector.get(Vi)},enumerable:!1,configurable:!0}),Object.defineProperty(ServiceProvider.prototype,"passwordDialogService",{get:function(){return this.serviceInjector.get(cs)},enumerable:!1,configurable:!0}),Object.defineProperty(ServiceProvider.prototype,"inputService",{get:function(){return this.serviceInjector.get($a)},enumerable:!1,configurable:!0}),Object.defineProperty(ServiceProvider.prototype,"fileMetaDataService",{get:function(){return this.serviceInjector.get(Xa)},enumerable:!1,configurable:!0}),Object.defineProperty(ServiceProvider.prototype,"toolOptionService",{get:function(){return this.serviceInjector.get(Qa)},enumerable:!1,configurable:!0}),Object.defineProperty(ServiceProvider.prototype,"viewerService",{get:function(){return this.serviceInjector.get(Ka)},enumerable:!1,configurable:!0}),Object.defineProperty(ServiceProvider.prototype,"formValuesService",{get:function(){return this.serviceInjector.get(ms)},enumerable:!1,configurable:!0}),Object.defineProperty(ServiceProvider.prototype,"splitService",{get:function(){return this.serviceInjector.get(Ya)},enumerable:!1,configurable:!0}),Object.defineProperty(ServiceProvider.prototype,"deletePagesService",{get:function(){return this.serviceInjector.get(us)},enumerable:!1,configurable:!0}),Object.defineProperty(ServiceProvider.prototype,"rotatePagesService",{get:function(){return this.serviceInjector.get(ps)},enumerable:!1,configurable:!0}),Object.defineProperty(ServiceProvider.prototype,"interceptorService",{get:function(){return this.serviceInjector.get(ds)},enumerable:!1,configurable:!0}),Object.defineProperty(ServiceProvider.prototype,"appService",{get:function(){return this.serviceInjector.get(fs)},enumerable:!1,configurable:!0}),Object.defineProperty(ServiceProvider.prototype,"limitOperationsService",{get:function(){return this.serviceInjector.get(hs)},enumerable:!1,configurable:!0}),Object.defineProperty(ServiceProvider.prototype,"limitOperationsStatisticService",{get:function(){return this.serviceInjector.get(vs)},enumerable:!1,configurable:!0}),ServiceProvider}(),gs=function(){function BaseState(t,h){this.component=t,this.stateName=h,this.css={host:"app-state-root"},this.componentId=ke.createQuickGuidAsString(),this.destroyEvent=new J,this.serviceProvider=Dt.getContainer().get(ys)}return Object.defineProperty(BaseState.prototype,"stateService",{get:function(){return this.serviceProvider.stateService},enumerable:!1,configurable:!0}),BaseState.prototype.initComponent=function(){this.template||(this.template=this.createTemplate(),this.appendTemplate(),this.bindEvents(),ge.init===this.stateName||ge.dropZone===this.stateName?$("body").removeClass("module-workspace"):$("body").addClass("module-workspace"))},BaseState.prototype.destroyComponent=function(){this.destroyEvent.next(!0),this.destroyEvent.complete(),this.onDestroy()},BaseState.prototype.gotTo=function(t,h){this.component.gotTo(t,h)},BaseState.prototype.isDestroyed=function(){return this.destroyed},BaseState.prototype.isThisState=function(t){return this.stateName===t},BaseState.prototype.createTemplate=function(t){return void 0===t&&(t="Not implemented Template"),'<div id="'+this.componentId+'" class="'+this.css.host+'">'+t+"</div>"},BaseState.prototype.bindEvents=function(){var t=this;this.serviceProvider.mediaService.change$.pipe(filter((function(){return ge.dropZone!==t.stateName})),takeUntil(this.destroyEvent)).subscribe((function(h){var y,w=$(t.serviceProvider.domHelper.cssToSelector(t.css.host)),removeHeight=function(){w.css("height",""),w.removeClass(t.css.host+"_calc-height")};if(h.isMobile&&ge.pageViewer!==t.stateName){var A=w.offset().top,T=w.width(),E=w.height(),j=document.documentElement.clientWidth,B=document.documentElement.clientHeight,N=(j-T)/2;if(A+E+N<=B)y=B-A-N,w.addClass(t.css.host+"_calc-height"),setTimeout((function(){w.css("height",y)}));else removeHeight()}else removeHeight()}))},BaseState.prototype.appendTemplate=function(){this.serviceProvider.domHelper.getById(this.component.rootContainerId).append(this.template)},BaseState.prototype.onDestroy=function(){this.serviceProvider.domHelper.destroyComponent(this.componentId),this.template="",this.destroyed=!0},BaseState.prototype.destroyChildren=function(t){var h=this;(t||[]).forEach((function(t){h[t]&&h[t].destroyComponent instanceof Function&&(h[t].destroyComponent(),h[t]=null)}))},BaseState}(),bs=function(){var extendStatics=function(t,h){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,h){t.__proto__=h}||function(t,h){for(var y in h)Object.prototype.hasOwnProperty.call(h,y)&&(t[y]=h[y])},extendStatics(t,h)};return function(t,h){if("function"!=typeof h&&null!==h)throw new TypeError("Class extends value "+String(h)+" is not a constructor or null");function __(){this.constructor=t}extendStatics(t,h),t.prototype=null===h?Object.create(h):(__.prototype=h.prototype,new __)}}(),_s=function(t){function InitState(h,y){return t.call(this,h,ge.init)||this}return bs(InitState,t),InitState.prototype.initComponent=function(){var t=this.serviceProvider.toolsConfigService.getConfigModel();t.firstFileUrl?(this.gotTo(ge.dropZone,{sourceState:this.stateName,targetState:ge.dropZone,data:{isDropZoneData:!0,url:t.firstFileUrl.url,size:t.firstFileUrl.size}}),t.firstFileUrl&&(t.firstFileUrl=void 0)):this.gotTo(ge.dropZone)},InitState}(gs),Ss=function(){var extendStatics=function(t,h){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,h){t.__proto__=h}||function(t,h){for(var y in h)Object.prototype.hasOwnProperty.call(h,y)&&(t[y]=h[y])},extendStatics(t,h)};return function(t,h){if("function"!=typeof h&&null!==h)throw new TypeError("Class extends value "+String(h)+" is not a constructor or null");function __(){this.constructor=t}extendStatics(t,h),t.prototype=null===h?Object.create(h):(__.prototype=h.prototype,new __)}}(),ws=function(t){function DestroyState(h,y){return t.call(this,h,ge.destroy)||this}return Ss(DestroyState,t),DestroyState.prototype.initComponent=function(){this.stateService.next(null),this.serviceProvider.workFileStoreService.clean(),this.serviceProvider.fileTransferService.cleanStores(),this.serviceProvider.viewerService.clean(),this.serviceProvider.webSocketService.clean(),this.component.gotTo(ge.init)},DestroyState.prototype.createTemplate=function(){return""},DestroyState.prototype.bindEvents=function(){},DestroyState}(gs),Cs=function(){var extendStatics=function(t,h){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,h){t.__proto__=h}||function(t,h){for(var y in h)Object.prototype.hasOwnProperty.call(h,y)&&(t[y]=h[y])},extendStatics(t,h)};return function(t,h){if("function"!=typeof h&&null!==h)throw new TypeError("Class extends value "+String(h)+" is not a constructor or null");function __(){this.constructor=t}extendStatics(t,h),t.prototype=null===h?Object.create(h):(__.prototype=h.prototype,new __)}}(),Ps=__webpack_require__(30597),ks=function(t){function GlobalDropZoneComponent(h,y){var w=t.call(this,h)||this;return w.bindToBody=y,w.css={dragover:"dragover",parent:"global-drop-zone--parent"},w.isOpened=!1,w}return Cs(GlobalDropZoneComponent,t),GlobalDropZoneComponent.prototype.bind=function(){var t=this;this.initDropZoneEvents(),this.$parent.addClass(this.css.parent),this.serviceProvider.appService.lockDropzone$.pipe(takeUntil(this.destroyEvent)).subscribe((function(h){t.blockFileDrop=h}))},GlobalDropZoneComponent.prototype.createTemplate=function(){var t=this.serviceProvider.Translate,h={componentId:this.componentId,dropzoneLabel:t.get("misc-drop-here")};return this.setTemplateValuesByModel(Ps,h)},GlobalDropZoneComponent.prototype.initDropZoneEvents=function(){var t,h,y=this,event=function(t,h){return fromEvent(t.get(0),h).pipe(takeUntil(y.destroyEvent),map((function(t){return t})),filter((function(t){return!t.defaultPrevented})))};event(t=this.bindToBody?$("body"):this.$parent,"dragover").pipe(tap((function(){si.isSafari()&&(clearTimeout(h),h=setTimeout((function(){return y.toggleDragOver(!1)}),200))})),filter((function(){return!y.blockFileDrop})),filter((function(){return!y.isOpened}))).subscribe((function(t){if(!y.allowEvent(t))return!1;t.preventDefault(),t.stopPropagation();var h=t.dataTransfer.types;y.toggleDragOver(h&&h.includes("Files"))})),event(t,"drop").pipe(filter((function(){return!y.blockFileDrop&&y.isOpened}))).subscribe((function(t){t.preventDefault(),t.stopPropagation();var h=t.dataTransfer;h&&h.files&&h.files.length&&y.serviceProvider.inputService.dropFiles(h.files),y.toggleDragOver(!1)})),si.isSafari()||event(t,"dragleave").pipe(filter((function(){return y.isOpened}))).subscribe((function(t){var h=$(t.relatedTarget),w=$("#"+y.componentId);y.isOutOfContainer(h,w)&&(y.toggleDragOver(!1),t.preventDefault(),t.stopPropagation())}))},GlobalDropZoneComponent.prototype.toggleDragOver=function(t){this.isOpened=t,this.$parent.toggleClass(this.css.dragover,t)},GlobalDropZoneComponent.prototype.allowEvent=function(t){var h=t.dataTransfer;return!!h&&(!!h.dropEffect&&!!h.effectAllowed)},GlobalDropZoneComponent.prototype.isOutOfContainer=function(t,h){return!t||0===t.length||!t.is(h)&&0===h.find(t).length},GlobalDropZoneComponent}(Ht),xs=function(){var extendStatics=function(t,h){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,h){t.__proto__=h}||function(t,h){for(var y in h)Object.prototype.hasOwnProperty.call(h,y)&&(t[y]=h[y])},extendStatics(t,h)};return function(t,h){if("function"!=typeof h&&null!==h)throw new TypeError("Class extends value "+String(h)+" is not a constructor or null");function __(){this.constructor=t}extendStatics(t,h),t.prototype=null===h?Object.create(h):(__.prototype=h.prototype,new __)}}(),As=__webpack_require__(62461),Is=function(t){function DropZoneComponent(h){var y=t.call(this,h)||this;return y.disabled=!1,y.ids={componentId:y.componentId,btnAddLocalId:ke.createQuickGuidAsString(),btnAddDropBoxId:ke.createQuickGuidAsString(),btnAddGdriveId:ke.createQuickGuidAsString(),inputId:ke.createQuickGuidAsString(),dropZoneContentId:ke.createQuickGuidAsString()},y.dropZoneComponent=new ks(y.componentId,!0),y}return xs(DropZoneComponent,t),DropZoneComponent.prototype.destroyComponent=function(){this.dropZoneComponent.destroyComponent(),t.prototype.destroyComponent.call(this)},DropZoneComponent.prototype.setDisableState=function(t){this.disabled=t},DropZoneComponent.prototype.hide=function(){this.$component.hide()},DropZoneComponent.prototype.bind=function(){var t=this,clickHandler=function(h,y){if(!t.disabled)return h.isDefaultPrevented()||(h.preventDefault(),h.stopImmediatePropagation(),t.serviceProvider.inputService.selectFile(y)),!1};this.$btnAddLocal.off("click").on("click",(function(t){return clickHandler(t,tr.device)})),this.$dropZoneContent.off("click").on("click",(function(t){return clickHandler(t,tr.device)})),this.$btnAddDropBox.off("click").on("click",(function(t){return clickHandler(t,tr.dropBox)})),this.$btnAddGdrive.off("click").on("click",(function(t){return clickHandler(t,tr.gDrive)})),this.serviceProvider.pickerHandlerService.subscribeDefault(this.destroyEvent),this.dropZoneComponent.init()},DropZoneComponent.prototype.createTemplate=function(){var t=this.setTemplateValuesByModel(As,this.ids),h=this.serviceProvider.toolsConfigService.allowMultipleFiles()?"drag-and-drop-mobile-text":"drag-and-drop-mobile-text-one",y=this.serviceProvider.Translate,w={btnAddLocalLabel:y.get(h),gDriveIcon:Kt.GDrive,gDriveLabel:"Google Drive",dropBoxIcon:Kt.DropBox,dropBoxLabel:"Dropbox",dragAndDropText:y.get("drag-and-drop-text")};return this.setTemplateValuesByModel(t,w)},Object.defineProperty(DropZoneComponent.prototype,"$btnAddLocal",{get:function(){return this.helper.getById(this.ids.btnAddLocalId)},enumerable:!1,configurable:!0}),Object.defineProperty(DropZoneComponent.prototype,"$btnAddDropBox",{get:function(){return this.helper.getById(this.ids.btnAddDropBoxId)},enumerable:!1,configurable:!0}),Object.defineProperty(DropZoneComponent.prototype,"$btnAddGdrive",{get:function(){return this.helper.getById(this.ids.btnAddGdriveId)},enumerable:!1,configurable:!0}),Object.defineProperty(DropZoneComponent.prototype,"$dropZoneContent",{get:function(){return this.helper.getById(this.ids.dropZoneContentId)},enumerable:!1,configurable:!0}),DropZoneComponent}(Ht),Ts=function(){var extendStatics=function(t,h){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,h){t.__proto__=h}||function(t,h){for(var y in h)Object.prototype.hasOwnProperty.call(h,y)&&(t[y]=h[y])},extendStatics(t,h)};return function(t,h){if("function"!=typeof h&&null!==h)throw new TypeError("Class extends value "+String(h)+" is not a constructor or null");function __(){this.constructor=t}extendStatics(t,h),t.prototype=null===h?Object.create(h):(__.prototype=h.prototype,new __)}}(),Os=__webpack_require__(25143),Es={useSelect:!0},Fs=function(t){function DropZoneSelectComponent(h,y){var w=t.call(this,h)||this;return w.disabled=!1,w.config=Object.assign({},Es,y),w.ids={componentId:w.componentId,btnAddLocalId:ke.createQuickGuidAsString(),btnSelectId:ke.createQuickGuidAsString(),btnAddDropBoxId:ke.createQuickGuidAsString(),btnAddGdriveId:ke.createQuickGuidAsString(),inputId:ke.createQuickGuidAsString(),dropZoneContentId:ke.createQuickGuidAsString(),dropZoneImportButtonsId:ke.createQuickGuidAsString()},w.dropZoneComponent=new ks(w.componentId,!0),w.onDocumentClick=onDocumentClick.bind(w),w}return Ts(DropZoneSelectComponent,t),DropZoneSelectComponent.prototype.destroyComponent=function(){$("body").off("click",this.onDocumentClick),this.dropZoneComponent.destroyComponent(),t.prototype.destroyComponent.call(this)},DropZoneSelectComponent.prototype.setDisableState=function(t){this.disabled=t},DropZoneSelectComponent.prototype.hide=function(){this.$component.hide()},DropZoneSelectComponent.prototype.bind=function(){var t=this,clickHandler=function(h,y){if(!t.disabled)return h.isDefaultPrevented()||(h.preventDefault(),h.stopImmediatePropagation(),setOpened.call(t,!1),t.serviceProvider.inputService.selectFile(y)),!1};$("body").off("click",this.onDocumentClick).on("click",this.onDocumentClick);var h=this.$btnSelect;h.off("click").on("click",(function(y){y.preventDefault(),setOpened.call(t,!h.hasClass("btn-select_opened"))})),this.$btnAddLocal.off("click").on("click",(function(t){return clickHandler(t,tr.device)})),this.$dropZoneContent.off("click").on("click",(function(t){return clickHandler(t,tr.device)})),this.$btnAddDropBox.off("click").on("click",(function(t){return clickHandler(t,tr.dropBox)})),this.$btnAddGdrive.off("click").on("click",(function(t){return clickHandler(t,tr.gDrive)})),this.serviceProvider.pickerHandlerService.subscribeDefault(this.destroyEvent),this.dropZoneComponent.init()},DropZoneSelectComponent.prototype.createTemplate=function(){var t=this.setTemplateValuesByModel(Os,this.ids),h=this.serviceProvider.toolsConfigService.allowMultipleFiles()?"drag-and-drop-mobile-text":"drag-and-drop-mobile-text-one",y=this.serviceProvider.Translate,w=this.serviceProvider.toolsConfigService.getConfigModel().hide_drop_zone_select_text,A={btnAddLocalLabel:y.get(h),gDriveIcon:Kt.GDrive,gDriveLabel:y.get("download-from").replace("%s","Google Drive"),dropBoxIcon:Kt.DropBox,dropBoxLabel:y.get("download-from").replace("%s","Dropbox"),dragAndDropText:y.get("drag-and-drop-text"),displayNone:w?"display-none":"",useSelect:this.config.useSelect?"":"display-none"};return this.setTemplateValuesByModel(t,A)},Object.defineProperty(DropZoneSelectComponent.prototype,"$btnAddLocal",{get:function(){return this.helper.getById(this.ids.btnAddLocalId)},enumerable:!1,configurable:!0}),Object.defineProperty(DropZoneSelectComponent.prototype,"$btnSelect",{get:function(){return this.helper.getById(this.ids.btnSelectId)},enumerable:!1,configurable:!0}),Object.defineProperty(DropZoneSelectComponent.prototype,"$btnAddDropBox",{get:function(){return this.helper.getById(this.ids.btnAddDropBoxId)},enumerable:!1,configurable:!0}),Object.defineProperty(DropZoneSelectComponent.prototype,"$btnAddGdrive",{get:function(){return this.helper.getById(this.ids.btnAddGdriveId)},enumerable:!1,configurable:!0}),Object.defineProperty(DropZoneSelectComponent.prototype,"$dropZoneContent",{get:function(){return this.helper.getById(this.ids.dropZoneContentId)},enumerable:!1,configurable:!0}),Object.defineProperty(DropZoneSelectComponent.prototype,"$dropZoneImportButtons",{get:function(){return this.helper.getById(this.ids.dropZoneImportButtonsId)},enumerable:!1,configurable:!0}),DropZoneSelectComponent}(Ht);function onDocumentClick(t){t.defaultPrevented||setOpened.call(this,!1)}function setOpened(t){this.$btnSelect.toggleClass("btn-select_opened",t),this.$dropZoneImportButtons.toggleClass("drop-zone-select--import-buttons_opened",t)}var Rs=function(){function DropZoneComponentFactory(){}return DropZoneComponentFactory.create=function(t,h){var y=h.useNewLanding,w=void 0!==y&&y,A=h.config;return w?new Fs(t,void 0===A?{}:A):new Is(t)},DropZoneComponentFactory}(),Ds=function(){var extendStatics=function(t,h){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,h){t.__proto__=h}||function(t,h){for(var y in h)Object.prototype.hasOwnProperty.call(h,y)&&(t[y]=h[y])},extendStatics(t,h)};return function(t,h){if("function"!=typeof h&&null!==h)throw new TypeError("Class extends value "+String(h)+" is not a constructor or null");function __(){this.constructor=t}extendStatics(t,h),t.prototype=null===h?Object.create(h):(__.prototype=h.prototype,new __)}}(),Ms=__webpack_require__(91597),js=function(t){function PendingComponent(h){var y=t.call(this,h)||this;return y.ids={componentId:y.componentId},y}return Ds(PendingComponent,t),PendingComponent.prototype.createTemplate=function(){return t.prototype.setTemplateValuesByModel.call(this,Ms,this.ids)},PendingComponent.prototype.bind=function(){},PendingComponent}(Ht),Ls=function(){var extendStatics=function(t,h){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,h){t.__proto__=h}||function(t,h){for(var y in h)Object.prototype.hasOwnProperty.call(h,y)&&(t[y]=h[y])},extendStatics(t,h)};return function(t,h){if("function"!=typeof h&&null!==h)throw new TypeError("Class extends value "+String(h)+" is not a constructor or null");function __(){this.constructor=t}extendStatics(t,h),t.prototype=null===h?Object.create(h):(__.prototype=h.prototype,new __)}}(),Bs=function(t){function DropZoneState(h,y){var w=t.call(this,h,ge.dropZone)||this;w.inputData=y,w.locked=!1;var A=w.serviceProvider.toolsConfigService.getConfigModel(),T=A.new_landing,E=A.use_external_services;return w.view=Rs.create(w.componentId,{useNewLanding:T,config:{useSelect:null==E||E}}),w.pendingView=new js(w.componentId),w}return Ls(DropZoneState,t),Object.defineProperty(DropZoneState.prototype,"fileReaderService",{get:function(){return this.serviceProvider.fileReaderService},enumerable:!1,configurable:!0}),Object.defineProperty(DropZoneState.prototype,"limitOperationsService",{get:function(){return this.serviceProvider.limitOperationsService},enumerable:!1,configurable:!0}),Object.defineProperty(DropZoneState.prototype,"limitOperationsStatisticService",{get:function(){return this.serviceProvider.limitOperationsStatisticService},enumerable:!1,configurable:!0}),DropZoneState.prototype.createTemplate=function(){return t.prototype.createTemplate.call(this,"")},DropZoneState.prototype.bindEvents=function(){var h=this;t.prototype.bindEvents.call(this),this.view.init();var y=!1;if(this.serviceProvider.inputService.onFilesDrop$.pipe(takeUntil(this.destroyEvent),filter((function(){return!y})),map((function(t){return h.limitOperationsService.hasLimit()?h.gotTo(ge.limits):h.limitOperationsStatisticService.removeKeyOfSent(),t})),switchMap((function(t){return h.locked?throwError("DropZoneState:locked"):forkJoin(t.map((function(t){return h.fileReaderService.readFile(t).pipe(take(1))})))}))).subscribe((function(t){var y=(t||[]).map((function(t,h){return t.order=h,t}));if(y.length){var w={sourceState:h.stateName,targetState:ge.readFiles,data:h.stateService.createStoreFilesData(y)};h.gotTo(ge.readFiles,w)}})),this.inputData&&this.inputData.data&&this.inputData.data.isDropZoneData){y=!0,this.view.setDisableState(!0),this.view.hide(),this.pendingView.init();var w=this.inputData.data.url,A=this.inputData.data.size,T=this.serviceProvider.toolsConfigService,E=T.getConfigModel(),j=decodeURI(w).split("?").shift().split("/").pop(),B=this.serviceProvider.fileMetaDataService.getMimeTypeByFileName(j);if(!T.isAllowSize(E,A))return void this.serviceProvider.errorDialogService.showMaxFileSizeError({name:j,type:B,size:A},E.maxFileSize,!1,(function(){h.gotTo(ge.destroy)})).subscribe();from(this.serviceProvider.fileTransferService.downloadByUrl(w,E.token,B,j)).pipe(takeUntil(this.destroyEvent),take(1),catchError((function(t){throw y=!1,h.view.setDisableState(!1),alert("Entered file was not loaded"),console.warn("e",{e:t,url:w,name:j,type:B}),t})),switchMap((function(t){return h.fileReaderService.readFile(t).pipe(takeUntil(h.destroyEvent),take(1))}))).subscribe((function(t){var y={sourceState:h.stateName,targetState:ge.readFiles,data:h.stateService.createStoreFilesData([t])};h.gotTo(ge.readFiles,y)}))}},DropZoneState.prototype.onDestroy=function(){this.destroyChildren(["view","pendingView"]),t.prototype.onDestroy.call(this)},DropZoneState}(gs),Ns=function(){var extendStatics=function(t,h){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,h){t.__proto__=h}||function(t,h){for(var y in h)Object.prototype.hasOwnProperty.call(h,y)&&(t[y]=h[y])},extendStatics(t,h)};return function(t,h){if("function"!=typeof h&&null!==h)throw new TypeError("Class extends value "+String(h)+" is not a constructor or null");function __(){this.constructor=t}extendStatics(t,h),t.prototype=null===h?Object.create(h):(__.prototype=h.prototype,new __)}}(),Vs=function(t){function LimitOperationsState(h,y){var w=t.call(this,h,ge.limits)||this;return w.inputData=y,w}return Ns(LimitOperationsState,t),Object.defineProperty(LimitOperationsState.prototype,"limitOperationsService",{get:function(){return this.serviceProvider.limitOperationsService},enumerable:!1,configurable:!0}),Object.defineProperty(LimitOperationsState.prototype,"limitOperationsStatisticService",{get:function(){return this.serviceProvider.limitOperationsStatisticService},enumerable:!1,configurable:!0}),LimitOperationsState.prototype.initComponent=function(){this.template=this.createTemplate(),t.prototype.initComponent.call(this),this.limitOperationsService.hasLimit()&&(this.showLimitNotification(),this.sendAnalytics())},LimitOperationsState.prototype.createTemplate=function(){return t.prototype.createTemplate.call(this,"")},LimitOperationsState.prototype.showLimitNotification=function(){var t=$(this.limitOperationsService.getSelector()).css("display","flex");this.serviceProvider.domHelper.getById(this.component.rootContainerId).append(t)},LimitOperationsState.prototype.sendAnalytics=function(){this.limitOperationsStatisticService.isSent()||(this.limitOperationsStatisticService.send(),this.limitOperationsStatisticService.setKeyOfSent())},LimitOperationsState}(gs),Us=function(){var extendStatics=function(t,h){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,h){t.__proto__=h}||function(t,h){for(var y in h)Object.prototype.hasOwnProperty.call(h,y)&&(t[y]=h[y])},extendStatics(t,h)};return function(t,h){if("function"!=typeof h&&null!==h)throw new TypeError("Class extends value "+String(h)+" is not a constructor or null");function __(){this.constructor=t}extendStatics(t,h),t.prototype=null===h?Object.create(h):(__.prototype=h.prototype,new __)}}(),Ws=function(t){function ReadFilesState(h,y){var w=t.call(this,h,ge.readFiles)||this;if(!y)throw new Error("!inputData");if(!w.stateService.isStoreFilesEventData(y.data))throw new Error("is not file data");return w.inputData=y,w.view=new js(w.componentId),w}return Us(ReadFilesState,t),Object.defineProperty(ReadFilesState.prototype,"fileReaderService",{get:function(){return this.serviceProvider.fileReaderService},enumerable:!1,configurable:!0}),ReadFilesState.prototype.createTemplate=function(){return t.prototype.createTemplate.call(this,"")},ReadFilesState.prototype.bindEvents=function(){var t=this;this.view.init();var h=this.stateService.eventDataToStoreFilesArray(this.inputData.data);h.length?(this.gotTo(ge.pending),forkJoin(h.map((function(h){return t.fileReaderService.readBlob(h)}))).pipe(take(1)).subscribe((function(h){var y={targetState:ge.checkFiles,sourceState:t.stateName,data:t.stateService.createStoreFilesData(h)};t.gotTo(ge.checkFiles,y)}))):this.gotTo(ge.destroy)},ReadFilesState.prototype.onDestroy=function(){this.destroyChildren(["view"]),t.prototype.onDestroy.call(this)},ReadFilesState}(gs),Hs=function(){var extendStatics=function(t,h){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,h){t.__proto__=h}||function(t,h){for(var y in h)Object.prototype.hasOwnProperty.call(h,y)&&(t[y]=h[y])},extendStatics(t,h)};return function(t,h){if("function"!=typeof h&&null!==h)throw new TypeError("Class extends value "+String(h)+" is not a constructor or null");function __(){this.constructor=t}extendStatics(t,h),t.prototype=null===h?Object.create(h):(__.prototype=h.prototype,new __)}}(),Gs=function(t){function PendingState(h,y){var w=t.call(this,h,ge.pending)||this;return w.view=new js(w.componentId),w}return Hs(PendingState,t),PendingState.prototype.createTemplate=function(){return t.prototype.createTemplate.call(this,"")},PendingState.prototype.bindEvents=function(){this.view.init()},PendingState.prototype.onDestroy=function(){this.destroyChildren(["view"]),t.prototype.onDestroy.call(this)},PendingState}(gs),zs=function(){var extendStatics=function(t,h){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,h){t.__proto__=h}||function(t,h){for(var y in h)Object.prototype.hasOwnProperty.call(h,y)&&(t[y]=h[y])},extendStatics(t,h)};return function(t,h){if("function"!=typeof h&&null!==h)throw new TypeError("Class extends value "+String(h)+" is not a constructor or null");function __(){this.constructor=t}extendStatics(t,h),t.prototype=null===h?Object.create(h):(__.prototype=h.prototype,new __)}}(),qs=function(t){function CheckFilesState(h,y){var w=t.call(this,h,ge.checkFiles)||this;if(!y)throw new Error("!inputData");if(!w.stateService.isStoreFilesEventData(y.data))throw new Error("!is not file data");return w.inputData=y,w.view=new js(w.componentId),w}return zs(CheckFilesState,t),Object.defineProperty(CheckFilesState.prototype,"fileReaderService",{get:function(){return this.serviceProvider.fileReaderService},enumerable:!1,configurable:!0}),Object.defineProperty(CheckFilesState.prototype,"toolsConfigService",{get:function(){return this.serviceProvider.toolsConfigService},enumerable:!1,configurable:!0}),CheckFilesState.prototype.createTemplate=function(){return t.prototype.createTemplate.call(this,"")},CheckFilesState.prototype.bindEvents=function(){var t=this;this.view.init();var h=this.serviceProvider.localPickerService.handleFiles(this.inputData.data,0,0),onClose=function(){return t.onClose(h.readyFiles)};h.error?this.serviceProvider.errorDialogService.handleError(h,onClose,!0):onClose()},CheckFilesState.prototype.onDestroy=function(){this.destroyChildren(["view"]),t.prototype.onDestroy.call(this)},CheckFilesState.prototype.onClose=function(t){if(t.length){var h=this.stateService.createStoreFilesData(t),y={targetState:ge.selectViewerState,sourceState:this.stateName,data:h};this.serviceProvider.ga.onFirstFileAddToTool(h.files),this.gotTo(ge.selectViewerState,y)}else this.gotTo(ge.destroy)},CheckFilesState}(gs),$s=function(){var extendStatics=function(t,h){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,h){t.__proto__=h}||function(t,h){for(var y in h)Object.prototype.hasOwnProperty.call(h,y)&&(t[y]=h[y])},extendStatics(t,h)};return function(t,h){if("function"!=typeof h&&null!==h)throw new TypeError("Class extends value "+String(h)+" is not a constructor or null");function __(){this.constructor=t}extendStatics(t,h),t.prototype=null===h?Object.create(h):(__.prototype=h.prototype,new __)}}(),Js=function(t){function SelectViewerState(h,y){var w=t.call(this,h,ge.selectViewerState)||this;if(!y)throw new Error("!inputData");if(!w.stateService.isStoreFilesEventData(y.data))throw new Error("is not file data");return w.view=new js(w.componentId),w.inputData=y,w}return $s(SelectViewerState,t),Object.defineProperty(SelectViewerState.prototype,"toolsConfigService",{get:function(){return this.serviceProvider.toolsConfigService},enumerable:!1,configurable:!0}),Object.defineProperty(SelectViewerState.prototype,"fileReaderService",{get:function(){return this.serviceProvider.fileReaderService},enumerable:!1,configurable:!0}),SelectViewerState.prototype.createTemplate=function(){return t.prototype.createTemplate.call(this,"")},SelectViewerState.prototype.bindEvents=function(){var t=this,h=this.toolsConfigService;this.view.init();var y=this.stateService.eventDataToStoreFilesArray(this.inputData.data);y.forEach((function(h){return t.serviceProvider.workFileStoreService.add(h.guid,h)}));var w=void 0;if(!this.serviceProvider.toolsConfigService.getToolConfig().blockInstantUploading){var A=h.getConfigModel();w=this.serviceProvider.fileTransferService.upload(y,A)}var T={items:y,initUploadTransactionId:w,isViewerOptions:!0},E={targetState:null,sourceState:this.stateName,data:T};h.useEditor()?E.targetState=ge.editViewer:h.useInstantViewer()?E.targetState=ge.instantViewer:h.useFileViewer()?E.targetState=ge.fileViewer:h.usePerPageViewer()&&(E.targetState=ge.pageViewer),E.targetState&&this.gotTo(E.targetState,E)},SelectViewerState.prototype.onDestroy=function(){this.destroyChildren(["view"]),t.prototype.onDestroy.call(this)},SelectViewerState}(gs),Xs=function(){var extendStatics=function(t,h){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,h){t.__proto__=h}||function(t,h){for(var y in h)Object.prototype.hasOwnProperty.call(h,y)&&(t[y]=h[y])},extendStatics(t,h)};return function(t,h){if("function"!=typeof h&&null!==h)throw new TypeError("Class extends value "+String(h)+" is not a constructor or null");function __(){this.constructor=t}extendStatics(t,h),t.prototype=null===h?Object.create(h):(__.prototype=h.prototype,new __)}}(),Qs=function(t){function InstantViewerState(h,y,w){void 0===w&&(w=ge.instantViewer);var A=t.call(this,h,w)||this;if(!y)throw new Error("!inputData");if(!y.data.isViewerOptions)throw new Error("is not isViewerOptions");return A.inputData=y,A.pwMap=new Map,A}return Xs(InstantViewerState,t),Object.defineProperty(InstantViewerState.prototype,"toolsConfigService",{get:function(){return this.serviceProvider.toolsConfigService},enumerable:!1,configurable:!0}),InstantViewerState.prototype.initComponent=function(){this.bindEvents()},InstantViewerState.prototype.createTemplate=function(){return""},InstantViewerState.prototype.createTemplateBase=function(h){return t.prototype.createTemplate.call(this,h)},InstantViewerState.prototype.initComponentBase=function(){return t.prototype.initComponent.call(this)},InstantViewerState.prototype.bindEvents=function(){var t=this,h=this.inputData.data,y=h.items.length;if(this.hasPdf(h))if(this.serviceProvider.appService.startOver$.pipe(take(1)).subscribe(),1===y){var w=h.items[0];this.waitBlobUrl$(w).pipe(switchMap((function(){var h={url:w.blobUrl};return w.password&&(h.password=w.password),t.serviceProvider.pdfService.isValidPassword(h).pipe(map((function(y){return y&&w.password?t.pwMap.set(w.guid,h.password):delete w.password,y})))})),switchMap((function(h){return h?of(!0):t.openPasswordDialog(w)})),filter((function(t){return!!t})),take(1)).subscribe((function(){return t.startListening(h)})),this.gotTo(ge.pending)}else{var A={status:ci.errored,hasError:!0,data:{message:"More than one pdf file does not support"}};this.gotTo(ge.errorViewer,{targetState:ge.errorViewer,sourceState:this.stateName,data:A})}else this.startListening(h)},InstantViewerState.prototype.waitBlobUrl$=function(t){return(t.waitBlobUrl$?t.waitBlobUrl$:this.serviceProvider.fileTransferService.hasFilesForDownload([t])?this.serviceProvider.fileTransferService.download(t):of(!0)).pipe(take(1))},InstantViewerState.prototype.startListening=function(t){var h=this,y=this.serviceProvider.fileTransferService.progressEvent$,w=this.createUploadEventData(y);this.gotTo(ge.uploadState,w),this.serviceProvider.fileTransferService.progressEvent$.pipe(filter((function(t){return!!t})),filter((function(h){return h.transactionId===t.initUploadTransactionId})),catchError((function(t){return throwError({status:ci.errored,hasError:!0,data:t})}))).pipe(filter((function(t){return t.progress.completed})),take(1)).subscribe((function(){h.gotTo(ge.runJobState,h.createRunJobData(t.items))}),(function(t){if(!t||!t.hasError)throw new Error("!error || !error.hasError");h.gotTo(ge.errorViewer,{targetState:ge.errorViewer,sourceState:h.stateName,data:t})}))},InstantViewerState.prototype.hasPdf=function(t){return!!t.items.find((function(t){return t.ext===_t.pdf}))},InstantViewerState.prototype.createRunJobData=function(t){return{sourceState:this.stateName,targetState:ge.runJobState,data:this.stateService.createWorkFilesEventData(this.storeToWorkFiles(t))}},InstantViewerState.prototype.createUploadEventData=function(t){return{sourceState:this.stateName,targetState:ge.uploadState,data:this.stateService.createProgressEventData(t.pipe(map((function(t){return t.progress}))))}},InstantViewerState.prototype.storeToWorkFiles=function(t){var h=this;return t.map((function(t,y){var w=h.serviceProvider.fileConverterService.storeToWork(t,y+1);return w.readPassword=h.pwMap.get(t.guid),w}))},InstantViewerState.prototype.isValidPassword=function(t,h){var y={url:t.blobUrl};return h&&(y.password=h),this.serviceProvider.pdfService.isValidPassword(y)},InstantViewerState.prototype.openPasswordDialog=function(t){var h=this;return this.serviceProvider.passwordDialogService.openFileDialog({fileName:t.name,readPasswordFn:function(y){return h.isValidPassword(t,y).pipe(map((function(w){return w?h.pwMap.set(t.guid,y):h.pwMap.has(t.guid)&&h.pwMap.delete(t.guid),w})))}}).pipe(take(1),switchMap((function(t){return t.stateChange$.pipe(takeUntil(h.destroyEvent))})),switchMap((function(t){if(t===qa.closed)h.serviceProvider.appService.onStartOver(h);return of(t)})),filter((function(t){return t===qa.valid})),map((function(){return!0})))},InstantViewerState}(gs);function isNumeric(t){return!w(t)&&t-parseFloat(t)+1>=0}function timer_dispatch(t){var h=t.index,y=t.period,w=t.subscriber;if(w.next(h),!w.closed){if(-1===y)return w.complete();t.index=h+1,this.schedule(t,y)}}var Ks,Ys=function(){var extendStatics=function(t,h){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,h){t.__proto__=h}||function(t,h){for(var y in h)Object.prototype.hasOwnProperty.call(h,y)&&(t[y]=h[y])},extendStatics(t,h)};return function(t,h){if("function"!=typeof h&&null!==h)throw new TypeError("Class extends value "+String(h)+" is not a constructor or null");function __(){this.constructor=t}extendStatics(t,h),t.prototype=null===h?Object.create(h):(__.prototype=h.prototype,new __)}}(),Zs=__webpack_require__(85104),el=function(t){function QueueComponent(h,y){var w=t.call(this,h)||this;return w.seconds=y,w.ids={componentId:w.componentId,timerId:ke.createQuickGuidAsString(),canvasContainerId:ke.createQuickGuidAsString()},w}return Ys(QueueComponent,t),QueueComponent.prototype.start=function(t){var h=this;void 0===t&&(t=1e3);var y=1e3*this.seconds,w=Math.round(y/t);(!w||w<1)&&(y=0,w=0);var A=this.helper.getById(this.ids.canvasContainerId);return A.html(""),A.append($("<img/>",{src:"/assets/sand-time.svg",height:100})),function timer(t,h,y){void 0===t&&(t=0);var w=-1;return isNumeric(h)?w=Number(h)<1?1:Number(h):isScheduler(h)&&(y=h),isScheduler(y)||(y=Ze),new W((function(h){var A=isNumeric(t)?t:+t-y.now();return y.schedule(timer_dispatch,A,{index:0,period:w,subscriber:h})}))}(0,t).pipe(takeUntil(this.destroyEvent),map((function(A){var T=y-A*t;return h.setTime(T/1e3),w--})),filter((function(t){return t<=0})),take(1),map((function(){})))},QueueComponent.prototype.createTemplate=function(){var h=this.serviceProvider.Translate,y={windowsIcon:Kt.Candy,windowsMessage:h.get("q-tired-of-waiting"),queueLabel:this.getQueLabelValue(this.seconds)},w=t.prototype.setTemplateValuesByModel.call(this,Zs,this.ids);return t.prototype.setTemplateValuesByModel.call(this,w,y)},QueueComponent.prototype.bind=function(){},Object.defineProperty(QueueComponent.prototype,"$timer",{get:function(){return this.helper.getById(this.ids.timerId)},enumerable:!1,configurable:!0}),QueueComponent.prototype.setTime=function(t){this.$timer.find(".sleep").text(t+"")},QueueComponent.prototype.getQueLabelValue=function(t){return this.serviceProvider.Translate.get("queue-text-header").replace("%s",""+t)},QueueComponent}(Ht),tl=function(){var extendStatics=function(t,h){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,h){t.__proto__=h}||function(t,h){for(var y in h)Object.prototype.hasOwnProperty.call(h,y)&&(t[y]=h[y])},extendStatics(t,h)};return function(t,h){if("function"!=typeof h&&null!==h)throw new TypeError("Class extends value "+String(h)+" is not a constructor or null");function __(){this.constructor=t}extendStatics(t,h),t.prototype=null===h?Object.create(h):(__.prototype=h.prototype,new __)}}();!function(t){t.complete="complete",t.error="error"}(Ks||(Ks={}));var rl,nl=function(t){function QueueState(h,y){var w=t.call(this,h,ge.queueState)||this;return w.second=w.serviceProvider.toolsConfigService.getQueSecond(),w.second<1&&(w.second=0),w.view=new el(w.componentId,w.second),w}return tl(QueueState,t),QueueState.prototype.createTemplate=function(){return t.prototype.createTemplate.call(this,"")},QueueState.prototype.bindEvents=function(){var t=this;0===this.second?this.stateService.next({sourceState:this.stateName,targetState:this.stateName,data:{queueState:Ks.complete,isQueStateOption:!0}}):(this.view.init(),this.view.start().pipe(takeUntil(this.destroyEvent)).subscribe({complete:function(){t.stateService.next({sourceState:t.stateName,targetState:t.stateName,data:{queueState:Ks.complete,isQueStateOption:!0}})},error:function(h){t.stateService.next({sourceState:t.stateName,targetState:t.stateName,data:{queueState:Ks.error,isQueStateOption:!0,error:h}})}}))},QueueState.prototype.onDestroy=function(){this.destroyChildren(["view"]),t.prototype.onDestroy.call(this)},QueueState}(gs),ol=function(){var extendStatics=function(t,h){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,h){t.__proto__=h}||function(t,h){for(var y in h)Object.prototype.hasOwnProperty.call(h,y)&&(t[y]=h[y])},extendStatics(t,h)};return function(t,h){if("function"!=typeof h&&null!==h)throw new TypeError("Class extends value "+String(h)+" is not a constructor or null");function __(){this.constructor=t}extendStatics(t,h),t.prototype=null===h?Object.create(h):(__.prototype=h.prototype,new __)}}(),il=__webpack_require__(23005),al=function(t){function ProgressViewComponent(h,y){var w=t.call(this,h)||this;return w.progress$=y,w.ids={componentId:w.componentId,percentFillId:ke.createQuickGuidAsString(),percentValueId:ke.createQuickGuidAsString()},w}return ol(ProgressViewComponent,t),ProgressViewComponent.prototype.bind=function(){var t=this;this.progress$.pipe(takeUntil(this.destroyEvent)).subscribe((function(h){t.$percentValue.text(""+h.percent.toFixed(0)),t.$percentFill.css({width:h.percent.toFixed(2)+"%"})}))},ProgressViewComponent.prototype.createTemplate=function(){var t=this.serviceProvider.Translate,h={windowsIcon:Kt.Candy,windowsMessage:t.get("tired-of-waiting"),uploadedMessage:t.get("component-uploaded").replace("%s","")},y=this.setTemplateValuesByModel(il,this.ids);return this.setTemplateValuesByModel(y,h)},Object.defineProperty(ProgressViewComponent.prototype,"$percentValue",{get:function(){return this.helper.getById(this.ids.percentValueId)},enumerable:!1,configurable:!0}),Object.defineProperty(ProgressViewComponent.prototype,"$percentFill",{get:function(){return this.helper.getById(this.ids.percentFillId)},enumerable:!1,configurable:!0}),ProgressViewComponent}(Ht),sl=function(){var extendStatics=function(t,h){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,h){t.__proto__=h}||function(t,h){for(var y in h)Object.prototype.hasOwnProperty.call(h,y)&&(t[y]=h[y])},extendStatics(t,h)};return function(t,h){if("function"!=typeof h&&null!==h)throw new TypeError("Class extends value "+String(h)+" is not a constructor or null");function __(){this.constructor=t}extendStatics(t,h),t.prototype=null===h?Object.create(h):(__.prototype=h.prototype,new __)}}(),ll=function(t){function UploadState(h,y){var w=t.call(this,h,ge.uploadState)||this;if(!y)throw new Error("!inputData");if(!w.stateService.isProgressEventData(y.data))throw new Error("!progress observable was not set to instance");return w.progress$=y.data.progress$,w.view=new al(w.componentId,w.progress$.pipe(takeUntil(w.destroyEvent))),w}return sl(UploadState,t),UploadState.prototype.createTemplate=function(){return t.prototype.createTemplate.call(this,"")},UploadState.prototype.bindEvents=function(){this.view.init()},UploadState.prototype.onDestroy=function(){this.destroyChildren(["view"]),t.prototype.onDestroy.call(this)},UploadState}(gs),cl=function(){function ProcessAnimation(){}return ProcessAnimation.run=function(t,h){if(this.isSupported(t)){if(si.isIE())return void console.warn("ie doesnt support this animations",{isIe:si.isIE(),version:si.getMajorVersion()});__webpack_require__.e(935).then(__webpack_require__.t.bind(__webpack_require__,4935,19)).then((function(t){return t.CandyCssAnimation})).then((function(y){y.createAnimation(t,h.get(0))}))}},ProcessAnimation.isSupported=function(t){return!![wt.addPdfPageNumbers,wt.compressPdf,wt.cropPdf,wt.deletePdf,wt.editPdf,wt.signPdf,wt.editMetadataPdf,wt.mergePdf,wt.protectPdf,wt.addPdfHeaderAndFooter,wt.rotatePdf,wt.pdfResize,wt.unlockPdf,wt.addPdfWatermark,wt.rearrangePdf,wt.extractImages,wt.splitPdf,wt.pdfOcr].find((function(h){return h==t}))},ProcessAnimation}(),ul=function(){var extendStatics=function(t,h){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,h){t.__proto__=h}||function(t,h){for(var y in h)Object.prototype.hasOwnProperty.call(h,y)&&(t[y]=h[y])},extendStatics(t,h)};return function(t,h){if("function"!=typeof h&&null!==h)throw new TypeError("Class extends value "+String(h)+" is not a constructor or null");function __(){this.constructor=t}extendStatics(t,h),t.prototype=null===h?Object.create(h):(__.prototype=h.prototype,new __)}}(),RunJobComponent_read=function(t,h){var y="function"==typeof Symbol&&t[Symbol.iterator];if(!y)return t;var w,A,T=y.call(t),E=[];try{for(;(void 0===h||h-- >0)&&!(w=T.next()).done;)E.push(w.value)}catch(t){A={error:t}}finally{try{w&&!w.done&&(y=T.return)&&y.call(T)}finally{if(A)throw A.error}}return E},pl=__webpack_require__(53037),dl=function(t){function RunJobComponent(h){var y=t.call(this,h)||this;return y.ids={componentId:y.componentId,canvasContainerId:ke.createQuickGuidAsString(),iconsContainerId:ke.createQuickGuidAsString(),canvasId:ke.createQuickGuidAsString(),progressPercentId:ke.createQuickGuidAsString()},y}return ul(RunJobComponent,t),RunJobComponent.prototype.setProgress=function(t){t&&this.helper.getById(this.ids.progressPercentId).html(t+"%")},RunJobComponent.prototype.createTemplate=function(){var h,y=this.serviceProvider.Translate,w=t.prototype.setTemplateValuesByModel.call(this,pl,this.ids),A=this.serviceProvider.toolsConfigService.getToolConfig(),T=this.serviceProvider.toolsConfigService.getConfigModel(),E="",j="",B=[],N=A.convertToIcons;if(N&&N.length){var V=Kt.arrow;B.push(V),B.push(V),B.push(V),h=RunJobComponent_read(N.map((function(t){return Kt.getToolIcon(t)})),2),E=h[0],j=h[1],this.useIcons=!0}var W={convertFromIcon:E,arrowsIcon:B.join(""),convertToIcon:j,windowsIcon:Kt.Candy,windowsMessage:y.get("tired-of-waiting"),jobLabel:y.get(T.toolName+"-animation")};return t.prototype.setTemplateValuesByModel.call(this,w,W)},RunJobComponent.prototype.bind=function(){this.runAnimation()},RunJobComponent.prototype.runAnimation=function(){if(this.useIcons)this.helper.getById(this.ids.iconsContainerId).show();else{var t=this.serviceProvider.toolsConfigService.getToolName();if(cl.isSupported(t)){var h=this.helper.getById(this.ids.canvasContainerId);h.html(""),cl.run(t,h),h.show()}}},RunJobComponent}(Ht),fl=function(){var extendStatics=function(t,h){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,h){t.__proto__=h}||function(t,h){for(var y in h)Object.prototype.hasOwnProperty.call(h,y)&&(t[y]=h[y])},extendStatics(t,h)};return function(t,h){if("function"!=typeof h&&null!==h)throw new TypeError("Class extends value "+String(h)+" is not a constructor or null");function __(){this.constructor=t}extendStatics(t,h),t.prototype=null===h?Object.create(h):(__.prototype=h.prototype,new __)}}();!function(t){t.password="password",t.skip="skip"}(rl||(rl={}));var hl,vl=function vl(t,h,y){this.storedFile=h,this.workFile=t,this.destroy$=y,this.fileId=t.guid,this.documentSize=null,this.currentSize=null,this.pdfPage=null,this.rendered=!1,this.waitPassword=!0,this.locked=!0,this.maxSize=h.size,this.viewOrder=h.order,this.subscribed=!1},ml=function(t){function RunJobState(h,y){var w=t.call(this,h,ge.runJobState)||this;if(!y)throw new Error("!inputData");if(!w.stateService.isWorkFileEventData(y.data))throw new Error("is not work files data");return w.view=new dl(w.componentId),w.files=w.stateService.eventDataToWorkFileArray(y.data),w}return fl(RunJobState,t),RunJobState.prototype.destroyComponent=function(){this.lockDestroy||t.prototype.destroyComponent.call(this)},RunJobState.prototype.createTemplate=function(){return t.prototype.createTemplate.call(this,"")},RunJobState.prototype.bindEvents=function(){var t=this;this.lockDestroy=!0,this.stateService.changeState$.pipe(filter((function(t){return t.sourceState===ge.queueState})),take(1)).subscribe((function(h){if(t.lockDestroy=!1,h.data&&h.data.queueState===Ks.error){if(!h.data||!h.data.hasError)throw new Error("!error || !error.hasError");var y={status:ci.errored,hasError:!0,data:h};t.gotTo(ge.errorViewer,{targetState:ge.errorViewer,sourceState:t.stateName,data:y})}else t.component.setCurrentState(t),t.view.init(),t.serviceProvider.jobService.runJob(t.files).pipe(catchError((function(h){var y=t.getSocketData(h&&h.data?h:{data:h.statusText});return console.warn("catchError",{e:h,errorData:y}),t.handleError(y),throwError(h)})),takeUntil(t.destroyEvent),switchMap((function(h){return h.session_id&&(t.sessionId=h.session_id),t.getJobData(h).pipe(takeUntil(t.destroyEvent),map((function(h){return h&&h.hasError&&h.status==ci.passwordError?(t.onPasswordError(h.data.message),null):h})),filter((function(t){return!!t})),catchError((function(h){var y=t.getSocketData(h&&h.data?h:{data:h.statusText});return console.warn("catchError",{e:h,errorData:y}),t.handleError(y),throwError(h)})))}))).subscribe((function(h){if(h.status===ci.finished)t.redirectToResult();else{if(!h.hasError)throw console.warn("RunJobState:runJob:error",{socketData:h}),new Error("unexpected result");t.handleError(h)}}))})),this.gotTo(ge.queueState)},RunJobState.prototype.onDestroy=function(){this.destroyChildren(["view"]),t.prototype.onDestroy.call(this)},RunJobState.prototype.handleError=function(t){t.hasError&&(t.status===ci.passwordError||(t.status!==ci.expectedError&&this.serviceProvider.ga.onInvalidJob({error:t,success:!1}),this.gotTo(ge.errorViewer,{targetState:ge.errorViewer,sourceState:this.stateName,data:t})))},RunJobState.prototype.getSocketData=function(t){var h;try{h=JSON.parse(t.data)}catch(h){return console.error("something went wrong. "+JSON.stringify(h)),{data:t.data,status:ci.parseError,hasError:!0}}if(!h)return{data:null,status:ci.isEmptyData,hasError:!0};if(h.expectedError)return{data:{status:h.status,type:Ro.expectedError,message:h.expectedError,data:h},status:ci.expectedError,hasError:!0};if(h.passwordException)return{data:{message:h.message,data:h},status:ci.passwordError,hasError:!0};switch(h.status){case ci.finished:return{data:h,status:ci.finished,hasError:!1};case ci.errored:return{data:h,status:ci.errored,hasError:!0};case ci.processing:return{data:h,status:ci.processing,hasError:!1}}if(h.error===Ro.notImplemented)console.error("backend:"+h.error);else console.error("not expected status from response. "+JSON.stringify(h));return{data:h,status:ci.errored,hasError:!0}},RunJobState.prototype.getJobData=function(t){var h=this;if(!t)return of({data:t,status:ci.errored,hasError:!0});if(t.status===ci.waiting){if(!t.websocket)throw new Error("!data.websocket");var y=this.serviceProvider.toolsConfigService.getConfigModel();y.webSocket!==t.websocket&&(y.webSocket=t.websocket);var w=this.serviceProvider.webSocketService;return w.startConnection(y),new W((function(y){var A=!1;w.error$.pipe(takeUntil(h.destroyEvent),takeWhile((function(){return!A}))).subscribe((function(h){A=!0;var w={data:{data:t,error:h},hasError:!0,status:ci.errored};y.error(w),y.complete(),console.warn("getJobData:error",{e:h})})),w.close$.pipe(takeUntil(h.destroyEvent),takeWhile((function(){return!A}))).subscribe((function(h){A=!0;var w={data:{data:t,error:h},hasError:!0,status:ci.errored};y.error(w),y.complete()})),h.serviceProvider.webSocketService.receiveMessage$.pipe(takeUntil(h.destroyEvent),takeWhile((function(){return!A}))).subscribe((function(t){var w=h.getSocketData(t);w.hasError?w.status===ci.passwordError?y.next(w):(A=!0,y.next(w),y.complete()):w.status===ci.finished?(A=!0,y.next(w),y.complete()):w.status===ci.processing&&w.data&&w.data.progress&&h.view.setProgress(w.data.progress)}))}))}return t.ok?of({data:t,status:ci.finished,hasError:!1}):of({data:t,status:ci.errored,hasError:!0})},RunJobState.prototype.redirectToResult=function(){var t="result/"+this.sessionId+".html",h=this.serviceProvider.toolsConfigService.getLocalizedUrl(t),y=this.serviceProvider.toolsConfigService.getConfigModel();(this.serviceProvider.webSocketService.clean(),y.isDevelopmentMode)?confirm("Job complete, reload?")&&window.location.reload():window.location.href=h},RunJobState.prototype.onPasswordError=function(t){var h=this;if(!this.isPwDialogPending){var y=t,w=y.map((function(t){return t.replace(/\.pdf$/,"")})),A=this.files,T=this.serviceProvider.workFileStoreService.getStore(),E=new J,j=E.asObservable().pipe(take(1),tap((function(){h.isPwDialogPending=!1}))),B=w.map((function(t){var h=A.find((function(h){return h.guid===t})),y=T.find((function(h){return h.guid===t}));return h&&y?new vl(h,y,j):null})).filter((function(t){return!!t}));this.isPwDialogPending=!0;var onSkip=function(){var t={entry:y,password:[],type:rl.skip};h.serviceProvider.webSocketService.send(JSON.stringify(t)).subscribe(),E.next()};B.length?this.serviceProvider.passwordDialogService.openFileListDialog({items:B,usePerItemDelete:!0}).pipe(takeUntil(j),tap((function(t){t.delete$.pipe(takeUntil(j)).subscribe((function(t){return y=t,h.serviceProvider.workFileStoreService.remove(y),arrayRemove(h.files||[],(function(t){return t.guid===y})),void arrayRemove(B||[],(function(t){return t.fileId===y}));var y})),t.close$.subscribe((function(){return onSkip()})),t.ok$.pipe(takeUntil(j)).subscribe((function(){var t;h.serviceProvider.modalService.hide(),t={entry:y,password:B.map((function(t){return{id:t.fileId,fileName:t.workFile.exportName,password:t.workFile.readPassword}})).filter((function(t){return!!(t.password||"").trim()})),type:rl.password},E.next(),h.serviceProvider.webSocketService.send(JSON.stringify(t)).subscribe(),console.log("items:ok",{selectedFiles:B,ids:w})}))}))).subscribe((function(){}),(function(){return E.next()})):onSkip()}},RunJobState}(gs),yl=function(){var extendStatics=function(t,h){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,h){t.__proto__=h}||function(t,h){for(var y in h)Object.prototype.hasOwnProperty.call(h,y)&&(t[y]=h[y])},extendStatics(t,h)};return function(t,h){if("function"!=typeof h&&null!==h)throw new TypeError("Class extends value "+String(h)+" is not a constructor or null");function __(){this.constructor=t}extendStatics(t,h),t.prototype=null===h?Object.create(h):(__.prototype=h.prototype,new __)}}(),gl=__webpack_require__(6343),bl=function(t){function DialogZoomComponent(h,y){var w=t.call(this,h)||this;return w.options=y,w.ids={componentId:w.componentId,btnCloseId:ke.createQuickGuidAsString(),workCanvasId:ke.createQuickGuidAsString(),workCanvasContainerId:ke.createQuickGuidAsString()},w}return yl(DialogZoomComponent,t),DialogZoomComponent.prototype.createTemplate=function(){return this.setTemplateValuesByModel(gl,this.ids)},DialogZoomComponent.prototype.init=function(){t.prototype.init.call(this)},DialogZoomComponent.prototype.show=function(){var t=this;if(!this.options.imageInfo)throw new Error("!this.options.imageInfo");var h=new Image,y=this.options.imageInfo,w=y.dimensions,A=w.width,T=w.height;h.src=y.url,h.width=A,h.height=T,h.onload=function(){var w=t.$workCanvas,E=t.getInnerDimensions(),j=w.get(0);j.width=A,j.height=T,j.getContext("2d").drawImage(h,0,0);var B=E.width/E.height,N=A/T,V=t.calcCss(E,B,N,y.angle);w.css({width:V.width,height:V.height}),y.angle&&w.css("transform","rotate("+y.angle+"deg)"),t.setBtnPosition()}},DialogZoomComponent.prototype.hide=function(){this.unbind(),this.destroyComponent()},DialogZoomComponent.prototype.bind=function(){var t=this,h=this.close.bind(this);this.$btnClose.on("click",h),this.$parent.on("click",h),this.destroyEvent.pipe(take(1)).subscribe((function(){t.$parent.off("click",h)})),fromEvent(document,"keydown").pipe(takeUntil(this.destroyEvent),filter((function(t){return"Escape"===t.key})),take(1)).subscribe((function(){return h()}))},DialogZoomComponent.prototype.close=function(){this.destroyed||(this.onClose instanceof Function&&this.onClose(),this.serviceProvider.modalService.onComponentClose(this))},Object.defineProperty(DialogZoomComponent.prototype,"$btnClose",{get:function(){return this.helper.getById(this.ids.btnCloseId)},enumerable:!1,configurable:!0}),Object.defineProperty(DialogZoomComponent.prototype,"$workCanvas",{get:function(){return this.helper.getById(this.ids.workCanvasId)},enumerable:!1,configurable:!0}),Object.defineProperty(DialogZoomComponent.prototype,"$workContainer",{get:function(){return this.helper.getById(this.ids.workCanvasContainerId)},enumerable:!1,configurable:!0}),DialogZoomComponent.prototype.getInnerDimensions=function(){var t=window.innerWidth,h=window.innerHeight,y=this.$btnClose.width();return{width:t-20-y-60,height:h-20-60-y-60}},DialogZoomComponent.prototype.calcCss=function(t,h,y,w){w||(w=0);var A=90===(w=Math.abs(w%360))||270===w;return y>1||y<1?h>=1?A?{width:t.height,height:t.height/y}:{width:t.height*y,height:t.height}:A?{width:t.width*y,height:t.width}:{width:t.width,height:t.width/y}:h>=1?{width:t.height,height:t.height}:{width:t.width,height:t.width}},DialogZoomComponent.prototype.setBtnPosition=function(){var t=this.$workCanvas,h=this.$btnClose,y=t.offset(),w=h.offset(),A=w.top-y.top,T=w.left-y.left+h.width()-20;h.css({top:-A-60,left:T})},DialogZoomComponent}(Ht),_l=function(){var extendStatics=function(t,h){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,h){t.__proto__=h}||function(t,h){for(var y in h)Object.prototype.hasOwnProperty.call(h,y)&&(t[y]=h[y])},extendStatics(t,h)};return function(t,h){if("function"!=typeof h&&null!==h)throw new TypeError("Class extends value "+String(h)+" is not a constructor or null");function __(){this.constructor=t}extendStatics(t,h),t.prototype=null===h?Object.create(h):(__.prototype=h.prototype,new __)}}(),Sl=function(t){function BaseViewerComponent(h,y){var w=t.call(this,h)||this;return w.currentState=y,w.viewItems=[],w.trans=[],w.options={isZoomDialogOpened:!1,useRotate:!1,useZoom:!1,usePageBox:!1,showPageNumber:!1,loadDisabled:!1,useDelete:!1},w.ids={componentId:w.componentId,headerContainerId:w.createChildId("header"),viewerContainerId:w.createChildId("viewerContainer"),footerContainerId:w.createChildId("footerContainer"),workCanvasId:w.createChildId("workCanvas")},w.dropZoneComponent=new ks(w.componentId,!0),w}return _l(BaseViewerComponent,t),Object.defineProperty(BaseViewerComponent.prototype,"$workCanvas",{get:function(){return this.helper.getById(this.ids.workCanvasId)},enumerable:!1,configurable:!0}),BaseViewerComponent.prototype.addFilesToWorkStore=function(t){var h=this;t.forEach((function(t){h.serviceProvider.workFileStoreService.add(t.guid,t)}))},BaseViewerComponent.prototype.waitBlobUrl$=function(t,h){return(t.waitBlobUrl$?t.waitBlobUrl$:this.serviceProvider.fileTransferService.hasFilesForDownload([t])?this.serviceProvider.fileTransferService.download(t):of(!0)).pipe(take(1),takeUntil(this.destroyEvent),takeUntil(h))},BaseViewerComponent.prototype.hasLockedFiles=function(){return!!this.viewItems.find((function(t){return t.locked}))},BaseViewerComponent.prototype.hasNotRenderedItems=function(){return!!this.viewItems.find((function(t){return!t.rendered}))},BaseViewerComponent.prototype.updateViewCounters=function(t,h){var y=this;void 0===h&&(h=!0),h&&this.serviceProvider.sortableService.sortArray(t,(function(t){return t.viewOrder}),!0),t.forEach((function(t,h){y.updateViewItemCounter(t,h+1)}))},BaseViewerComponent.prototype.updateViewItemCounter=function(t,h){t.viewOrder=h,t.component.setPageNumber(h)},BaseViewerComponent.prototype.openPasswordDialog=function(t,h){var y=this,w=this.serviceProvider.passwordDialogService.openFileDialog({fileName:t.storedFile.name,readPasswordFn:function(y){return t.workFile.readPassword=y,h(y).pipe(map((function(h){return h||delete t.workFile.readPassword,h})))}}).pipe(takeUntil(this.destroyEvent)).pipe(switchMap((function(t){return t.stateChange$.pipe(takeUntil(y.destroyEvent),map((function(t){var h={closed:!1,state:t};switch(t){case qa.valid:case qa.closed:return h.closed=!0,h;default:return h}})))})));return w},BaseViewerComponent.prototype.onZoom=function(t){var h=this;if(!this.options.isZoomDialogOpened&&this.options.useZoom){var y=this.viewItems.find((function(h){return h.fileId===t}));if(y){var w;if(this.options.isZoomDialogOpened=!0,y.zoomImageInfo)w=of(y.zoomImageInfo).pipe(take(1));else try{y.zoomImageInfo={angle:0,dimensions:null,url:void 0},w=this.renderZoom$(y.pdfPage,y.destroy$).pipe(map((function(t){return Object.assign(y.zoomImageInfo,t),y.zoomImageInfo})),take(1))}catch(t){return this.options.isZoomDialogOpened=!1,void console.error("renderZoom$:error",{error:t,item:y})}w.subscribe((function(){Object.assign(y.zoomImageInfo,{angle:h.getAngle(y)}),h.serviceProvider.modalService.show((function(t){var w=new bl(t,{imageInfo:y.zoomImageInfo});return w.onClose=function(){h.options.isZoomDialogOpened=!1},w}))}))}}},BaseViewerComponent.prototype.getAngle=function(t){return t&&t.workFile&&t.workFile.options&&t.workFile.options.angle?t.workFile.options.angle:0},BaseViewerComponent.prototype.renderZoom$=function(t,h){return this.serviceProvider.pdfService.renderZoom$(t,h,this.destroyEvent)},BaseViewerComponent.prototype.isPasswordError=function(t){return this.serviceProvider.pdfService.isPasswordError(t)},BaseViewerComponent}(Ht),wl=function(){var extendStatics=function(t,h){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,h){t.__proto__=h}||function(t,h){for(var y in h)Object.prototype.hasOwnProperty.call(h,y)&&(t[y]=h[y])},extendStatics(t,h)};return function(t,h){if("function"!=typeof h&&null!==h)throw new TypeError("Class extends value "+String(h)+" is not a constructor or null");function __(){this.constructor=t}extendStatics(t,h),t.prototype=null===h?Object.create(h):(__.prototype=h.prototype,new __)}}(),FileViewerComponent_awaiter=function(t,h,y,w){return new(y||(y=Promise))((function(A,T){function fulfilled(t){try{step(w.next(t))}catch(t){T(t)}}function rejected(t){try{step(w.throw(t))}catch(t){T(t)}}function step(t){t.done?A(t.value):function adopt(t){return t instanceof y?t:new y((function(h){h(t)}))}(t.value).then(fulfilled,rejected)}step((w=w.apply(t,h||[])).next())}))},FileViewerComponent_generator=function(t,h){var y,w,A,T,E={label:0,sent:function(){if(1&A[0])throw A[1];return A[1]},trys:[],ops:[]};return T={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(T[Symbol.iterator]=function(){return this}),T;function verb(T){return function(j){return function step(T){if(y)throw new TypeError("Generator is already executing.");for(;E;)try{if(y=1,w&&(A=2&T[0]?w.return:T[0]?w.throw||((A=w.return)&&A.call(w),0):w.next)&&!(A=A.call(w,T[1])).done)return A;switch(w=0,A&&(T=[2&T[0],A.value]),T[0]){case 0:case 1:A=T;break;case 4:return E.label++,{value:T[1],done:!1};case 5:E.label++,w=T[1],T=[0];continue;case 7:T=E.ops.pop(),E.trys.pop();continue;default:if(!(A=E.trys,(A=A.length>0&&A[A.length-1])||6!==T[0]&&2!==T[0])){E=0;continue}if(3===T[0]&&(!A||T[1]>A[0]&&T[1]<A[3])){E.label=T[1];break}if(6===T[0]&&E.label<A[1]){E.label=A[1],A=T;break}if(A&&E.label<A[2]){E.label=A[2],E.ops.push(T);break}A[2]&&E.ops.pop(),E.trys.pop();continue}T=h.call(t,E)}catch(t){T=[6,t],w=0}finally{y=A=0}if(5&T[0])throw T[1];return{value:T[0]?T[1]:void 0,done:!0}}([T,j])}}},FileViewerComponent_read=function(t,h){var y="function"==typeof Symbol&&t[Symbol.iterator];if(!y)return t;var w,A,T=y.call(t),E=[];try{for(;(void 0===h||h-- >0)&&!(w=T.next()).done;)E.push(w.value)}catch(t){A={error:t}}finally{try{w&&!w.done&&(y=T.return)&&y.call(T)}finally{if(A)throw A.error}}return E},Cl=__webpack_require__(3247),Pl=function(t){function FileViewerComponent(h,y){var w=t.call(this,h,y)||this;return w.toolConfig=w.serviceProvider.toolsConfigService.getToolConfig(),w}return wl(FileViewerComponent,t),FileViewerComponent.prototype.init=function(){if(!this.entryOptions)throw new Error("!this.entryOptions");var t=this.serviceProvider.toolsConfigService;if(this.initBase()){this.trans.push({files:this.entryOptions.items.map((function(t){return t.guid})),tranId:this.entryOptions.initUploadTransactionId});var h=this.options;h.useZoom=this.toolConfig.showZoomUi,h.usePageBox=t.showPageCounter(),h.useRotate=t.isRotatable(),h.useDelete=!this.toolConfig.hideDelete;var y=t.isSingleFileTool();h.showPageNumber=!y,y||this.dropZoneComponent.init(),this.onFilesEnter(this.entryOptions.items)}},FileViewerComponent.prototype.destroyComponent=function(){this.dropZoneComponent&&this.dropZoneComponent.destroyComponent(),t.prototype.destroyComponent.call(this)},FileViewerComponent.prototype.initBase=function(){return!this.destroyed&&(t.prototype.init.call(this),!this.destroyed)},FileViewerComponent.prototype.createTemplate=function(){var t=this.setTemplateValuesByModel(Cl,this.ids),h=this.serviceProvider.viewerService.getMinMaxItemValue(),y={canvasWidth:h.min,canvasHeight:h.max};return this.setTemplateValuesByModel(t,y)},FileViewerComponent.prototype.bind=function(){var t=this;this.destroyed||this.initFooter(),this.destroyed||this.initHeader(),this.destroyed||this.initFileActions(),this.destroyed||this.initSortable(),this.serviceProvider.inputService.onFilesDrop$.pipe(takeUntil(this.destroyEvent),filter((function(){return t.serviceProvider.mediaService.isMobile()})),delay(40)).subscribe((function(){var h="app-state-root",y=$(t.serviceProvider.domHelper.cssToSelector(h)),w=y.find(".file-viewer--content"),A=w.offset().top+w.height(),T=w.find(".page-item").last();A<T.offset().top+T.height()&&(y.css("height",""),y.removeClass(h+"_calc-height"))}))},FileViewerComponent.prototype.initFooter=function(){var t=this,h=this.serviceProvider.toolsConfigService.getToolConfig();h.footerFactory&&(this.footerComponent=h.footerFactory(this.ids.footerContainerId,this.currentState),this.footerComponent.init(),this.footerComponent.runJob$.pipe(takeUntil(this.destroyEvent)).subscribe((function(){t.helper.scrollMoreThan(350)&&t.helper.scrollToStart(),t.onRunJob()})),this.serviceProvider.pickerHandlerService.subscribeDefault(this.destroyEvent))},FileViewerComponent.prototype.onRunJobReady=function(){var t=this;this.serviceProvider.sortableService.sortArray(this.viewItems,(function(t){return t.viewOrder}),!0);var h=this.viewItems.map((function(t){return t.fileId})),y=this.viewItems.map((function(t){return t.workFile})),w=this.serviceProvider.fileTransferService,A=w.progressEvent$.pipe(map((function(){return w.getStoredProgress(h)})));this.currentState.gotTo(ge.uploadState,{sourceState:this.currentState.stateName,targetState:ge.uploadState,data:this.serviceProvider.stateService.createProgressEventData(A)}),w.progressEvent$.pipe(catchError((function(t){return throwError({status:ci.errored,hasError:!0,data:t})})),filter((function(t){return t.progress.completed})),take(1)).subscribe({error:function(h){if(!h||!h.hasError)throw new Error("!error || !error.hasError");t.currentState.gotTo(ge.errorViewer,{targetState:ge.errorViewer,sourceState:t.currentState.stateName,data:h})}}),combineLatest([w.progressEvent$.pipe(filter((function(t){return t.status===ai.completed}))),A.pipe(filter((function(t){return t.completed})),take(1))]).subscribe((function(h){var w=FileViewerComponent_read(h,2),A=(w[0],w[1],t.serviceProvider.stateService.createWorkFilesEventData(y));t.currentState.gotTo(ge.runJobState,{sourceState:t.currentState.stateName,targetState:ge.runJobState,data:A})}))},FileViewerComponent.prototype.onRunJob=function(){var t=this;if(!this.hasLockedFiles())return this.hasNotRenderedItems()?(console.warn("hasNotRenderedFiles",{items:this.viewItems}),void alert("Please wait while the file rendering is finished.")):void this.onRunJobReady();this.serviceProvider.passwordDialogService.openFileListDialog({items:this.viewItems.filter((function(t){return t.locked}))}).pipe(takeUntil(this.destroyEvent)).subscribe((function(h){h.ok$.subscribe((function(){t.serviceProvider.modalService.hide(),t.onRunJobReady()}))}))},FileViewerComponent.prototype.initHeader=function(){var t=this;this.toolConfig.headerFactory&&(this.headerComponent=this.toolConfig.headerFactory(this.ids.headerContainerId,this.currentState),this.headerComponent.init(),this.headerComponent.hasSortable&&this.headerComponent.sort$.pipe(takeUntil(this.destroyEvent)).subscribe((function(h){return t.sort(h)})))},FileViewerComponent.prototype.initFileActions=function(){var t=this;this.serviceProvider.inputService.onFilesDrop$.pipe(takeUntil(this.destroyEvent)).subscribe((function(h){var y=t.serviceProvider.localPickerService;y.isLocked()?console.error("picker in progress"):y.readFiles(h).pipe(takeUntil(t.destroyEvent),map((function(h){var w=arraySum(t.viewItems.map((function(t){return t.storedFile.size})));return y.handleFiles(h,w,t.viewItems.length)}))).subscribe((function(h){var onReady=function(){h.readyFiles.length&&(t.addFilesToWorkStore(h.readyFiles),t.onFilesEnter(h.readyFiles,!0))};h.error?t.serviceProvider.errorDialogService.handleError(h,onReady,!0):onReady()}))}))},FileViewerComponent.prototype.onFilesEnter=function(t,h){var y=this;if(void 0===h&&(h=!1),t&&t.length){this.options.loadDisabled=!0,this.footerComponent.setRunJobDisabledState(this.options.loadDisabled);var w=this.viewItems.length||0,A=t.map((function(t){w++;var h=y.createPageItem(y.ids.viewerContainerId,t.guid);h.setViewModelOptions({imageUrl:void 0,name:t.name,totalPages:1,totalPagesLabel:"",useDelete:y.options.useDelete}),h.init(),h.setRenderingState(!0);var A=y.serviceProvider.viewerService.getMinMaxItemValue(),T={component:h,fileId:t.guid,storedFile:t,rendered:!1,locked:!1,workFile:y.serviceProvider.fileConverterService.storeToWork(t),currentSize:void 0,documentSize:void 0,maxSize:A.max,destroy$:h.getOnDestroy$(),subscribed:!1,viewOrder:w,waitPassword:!1};y.viewItems.push(T);var E=y.viewItems.length;return T.workFile.order=E,h.setPageNumber(E),h.setZoomBtnVisibleState(y.options.useZoom),h.setRotateVisibleState(y.options.useRotate),h.setPageNumberVisibleState(y.options.showPageNumber),h.setDeleteBtnVisible(y.options.useDelete),h.setPageBoxVisibleState(!1),y.initPageItem$(T)})),T=this.serviceProvider.fileTransferService,E=T.hasFilesForDownload(t);forkJoin(A).pipe(takeUntil(this.destroyEvent)).subscribe((function(){if(y.options.loadDisabled=!1,y.footerComponent.setRunJobDisabledState(y.options.loadDisabled),y.serviceProvider.viewerService.onFilesUpdated(y.viewItems),h){var w=T.hasFilesForDownload(t);if(E&&!w)y.uploadOnLoaded(t);else if(E&&w)throw new Error("Logic error")}})),h&&!E?this.uploadOnLoaded(t):console.info("hasFilesForDownload",{hasFilesForDownload:E}),this.serviceProvider.viewerService.onViewItemsChange(this.viewItems.map((function(t){return t.component})))}},FileViewerComponent.prototype.uploadOnLoaded=function(t){var h=this.serviceProvider.toolsConfigService.getConfigModel(),y=this.serviceProvider.fileTransferService.upload(t,h);this.trans.push({files:t.map((function(t){return t.guid})),tranId:y})},FileViewerComponent.prototype.createPageItem=function(t,h){return new Bn(t,h)},FileViewerComponent.prototype.initPageItem$=function(t){if(!t.subscribed)return this.subscribePageItem(t),t.workFile.fileType===Et.pdf?this.renderPdfFactory$(t):this.serviceProvider.toolsConfigService.useIconForPagePreview(t.storedFile.ext)?this.renderDocument$(t).pipe(map((function(){return t}))):this.renderImage$(t).pipe(map((function(){return t})))},FileViewerComponent.prototype.getViewPortBySize=function(t,h,y){var w=this.serviceProvider.pdfService.getViewPortInfo(h,y);return t.documentSize=w.documentSize,t.currentSize=w.currentSize,w.viewport},FileViewerComponent.prototype.renderPdf$=function(t){var h=this;return this.waitBlobUrl$(t.storedFile,t.destroy$).pipe(switchMap((function(){return h.serviceProvider.pdfService.getFirstPageInfo({url:t.storedFile.blobUrl,password:t.workFile.readPassword||t.storedFile.password||void 0}).pipe(takeUntil(h.destroyEvent),takeUntil(t.destroy$),switchMap((function(y){t.pdfPage=y.page,t.totalPages=y.doc.numPages||0,t.component.setTotalPages(y.doc.numPages);var w=h.getViewPortBySize(t,y.page,t.maxSize),A=h.$workCanvas.get(0);if(!A)return of(null).pipe(take(1));var T=A.getContext("2d");T.clearRect(0,0,A.width,A.height),A.width=w.width,A.height=w.height;var E=$("<canvas>").get(0);E.width=w.width,E.height=w.height;var j={canvasContext:E.getContext("2d"),viewport:w,intent:"print"};return h.serviceProvider.pdfService.createImageUrl(y.page,j,T,E).pipe(takeUntil(h.destroyEvent),takeUntil(t.destroy$),take(1),switchMap((function(y){return t.component.setImage(y,w.width,w.height),h.options.useZoom,of(!0).pipe(take(1))})),finalize((function(){t.component.setRenderingState(!1),t.component.setPageBoxVisibleState(h.options.usePageBox),t.rendered=!0})))})),filter((function(t){return!!t})))})),map((function(){return!0})))},FileViewerComponent.prototype.renderPdfFactory$=function(t){var h=this;return this.renderPdf$(t).pipe(take(1),catchError((function(y){return h.isPasswordError(y)?(t.locked=!0,t.component.setRenderingState(!1),t.component.setLockedState(!0),t.waitPassword=!0,h.toolConfig.requirePdfPassword?h.readPassword(t).pipe(takeUntil(h.destroyEvent),take(1),map((function(){return t}))):of(null)):(console.warn("renderPdf:error",{e:y}),throwError(y))})),map((function(y){return y&&(t.waitPassword=!1,h.serviceProvider.viewerService.onViewItemRendered(t)),t})))},FileViewerComponent.prototype.renderImage$=function(t){var h=this;return t.component.setPageBoxVisibleState(!1),this.options.useZoom&&t.component.setZoomBtnVisibleState(this.serviceProvider.toolsConfigService.showZoomUi(t.storedFile.ext)),this.waitBlobUrl$(t.storedFile,t.destroy$).pipe(switchMap((function(){return h.serviceProvider.fileRenderService.renderImage$(t.storedFile.blobUrl,t.maxSize).pipe(takeUntil(h.destroyEvent),takeUntil(t.destroy$),take(1),map((function(y){t.documentSize=y.documentSize,t.currentSize=y.currentSize,t.zoomImageInfo=Object.assign(t.zoomImageInfo||{},{url:y.blobUrl,dimensions:{height:t.documentSize.height,width:t.documentSize.width}},{angle:h.getAngle(t)}),t.component.setImage(y.blobUrl,t.currentSize.width,t.currentSize.height),t.component.setRenderingState(!1),t.rendered=!0})))})))},FileViewerComponent.prototype.renderDocument$=function(t){var h=this;return t.component.setPageBoxVisibleState(!1),t.component.setRotateVisibleState(!1),t.component.setZoomBtnVisibleState(!1),this.waitBlobUrl$(t.storedFile,t.destroy$).pipe(map((function(){var y=h.serviceProvider.viewerService;t.documentSize=null;var w=y.getMinMaxItemValue();t.currentSize={height:w.max,width:w.min};var A=Kt.getToolIcon(t.storedFile.ext);t.component.setImageAsSvg(A,t.currentSize.width,t.currentSize.height),t.rendered=!0,t.component.setRenderingState(!1)})))},FileViewerComponent.prototype.onDelete=function(t){var h=arrayRemove(this.viewItems,(function(h){return h.fileId===t}));h&&h.component.destroyComponent(),this.updateViewCounters(this.viewItems);var y=this.trans.find((function(h){return h.files.find((function(h){return h===t}))}));y&&(arrayRemove(y.files,(function(h){return h===t})),this.viewItems.length||(this.headerComponent&&this.headerComponent.startOver instanceof Function?this.headerComponent.startOver():this.currentState.gotTo(ge.destroy))),this.serviceProvider.viewerService.onViewItemsChange(this.viewItems.map((function(t){return t.component})))},FileViewerComponent.prototype.subscribePageItem=function(t){var h=this;t.subscribed||(t.component.delete$.pipe(takeUntil(this.destroyEvent)).subscribe((function(t){return h.onDelete(t)})),t.component.zoom$.pipe(takeUntil(this.destroyEvent)).subscribe((function(t){return h.onZoom(t)})),t.component.lock$.pipe(takeUntil(this.destroyEvent)).subscribe((function(y){return FileViewerComponent_awaiter(h,void 0,void 0,(function(){return FileViewerComponent_generator(this,(function(h){switch(h.label){case 0:return t.fileId!==y?[3,2]:[4,this.onItemLocked(t)];case 1:h.sent(),h.label=2;case 2:return[2]}}))}))})),t.component.rotate$.pipe(takeUntil(this.destroyEvent)).subscribe((function(y){if(y.itemId===t.fileId){var w=y.direction===Pn.left?-1:1,A=h.getAngle(t);A+=90*w,A%=360,t.workFile.options.angle=A,t.component.setRotateImage(A)}})),t.subscribed=!0)},FileViewerComponent.prototype.sort=function(t){this.serviceProvider.sortableService.sortArray(this.viewItems,(function(t){return t.storedFile.name.toLocaleLowerCase()}),t===or.asc),this.updateViewCounters(this.viewItems,!1),this.serviceProvider.sortableService.sortDomElementsBySortedItems(this.viewItems,(function(t){return t.fileId}),this.ids.viewerContainerId,".page-item")},FileViewerComponent.prototype.initSortable=function(){var t=this;this.serviceProvider.sortableService.useSortable()&&this.serviceProvider.sortableService.initSortable$(this.helper.getById(this.ids.viewerContainerId),{sort:!0,onStart:function(h){t.serviceProvider.appService.setLockDropzoneState(!0)},onEnd:function(h){t.helper.getById(t.ids.viewerContainerId).find(".page-item").each((function(h,y){var w=t.viewItems.find((function(t){return t.fileId===y.id})),A=h+1;w.component.setPageNumber(A),w.viewOrder=A})),t.serviceProvider.appService.setLockDropzoneState(!1)}}).pipe(takeUntil(this.destroyEvent),filter((function(t){return!!t}))).subscribe()},FileViewerComponent.prototype.onItemLocked=function(t){return FileViewerComponent_awaiter(this,void 0,void 0,(function(){return FileViewerComponent_generator(this,(function(h){switch(h.label){case 0:return t.component.setLockedState(!0),t.locked=!0,[4,this.readPassword(t).toPromise()];case 1:return h.sent(),[2,!0]}}))}))},FileViewerComponent.prototype.readPassword=function(t){var h=this;return this.openPasswordDialog(t,(function(y){return function(y){return y?h.renderPdf$(t).pipe(map((function(y){return y&&(t.component.setLockedState(!1),t.locked=!1,h.onPasswordRed(t)),y})),catchError((function(t){if(h.isPasswordError(t))return of(!1);throwError(t)})),takeUntil(h.destroyEvent),take(1)):of(!1)}(y)})).pipe(filter((function(y){var w=y.closed,A=y.state;if(w&&A===qa.closed){if(h.toolConfig.requirePdfPassword)return h.onPasswordSkiped(t),!1;h.onPasswordClosed(t)}return w})),map((function(){})))},FileViewerComponent.prototype.onPasswordSkiped=function(t){this.currentState.gotTo(ge.destroy)},FileViewerComponent.prototype.onPasswordClosed=function(t){},FileViewerComponent.prototype.onPasswordRed=function(t){},FileViewerComponent}(Sl),kl=function(){var extendStatics=function(t,h){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,h){t.__proto__=h}||function(t,h){for(var y in h)Object.prototype.hasOwnProperty.call(h,y)&&(t[y]=h[y])},extendStatics(t,h)};return function(t,h){if("function"!=typeof h&&null!==h)throw new TypeError("Class extends value "+String(h)+" is not a constructor or null");function __(){this.constructor=t}extendStatics(t,h),t.prototype=null===h?Object.create(h):(__.prototype=h.prototype,new __)}}(),xl=__webpack_require__(72579),Al=function(t){function PageItemCropComponent(h,y,w){var A=t.call(this,h,y,w)||this;return A.registrated=!1,A.cropOptions={mobile:{size:200},desktop:{size:358},current:{size:358},isMobile:null,renderLocked:!1,onRendered:null,css:{isMobile:"is-mobile",useFields:"use-fields"},minCropSpace:40,isInputSource:!1,mediaKey:"cropMobileMax"},A.form={valid:!0,pending:!1,bottom:0,left:0,right:0,top:0},A.media={x:1159.99,y:659.99,queries:Object.create(null)},A.initMedia(),A}return kl(PageItemCropComponent,t),Object.defineProperty(PageItemCropComponent.prototype,"$image",{get:function(){return this.helper.getById(this.ids.imageId)},enumerable:!1,configurable:!0}),PageItemCropComponent.prototype.destroyComponent=function(){this.itemData=null,this.Cropper=null,this.cropper&&(this.cropper.destroy(),this.cropper=null),this.registrated=!1,t.prototype.destroyComponent.call(this)},PageItemCropComponent.prototype.registrateCropEvents=function(t,h){if(!h)throw new Error("!cropperLib");this.registrated||(this.Cropper=h,this.itemData=t,this.initCropper())},PageItemCropComponent.prototype.getDesktopSize=function(){return this.cropOptions.desktop.size},PageItemCropComponent.prototype.bind=function(){t.prototype.bind.call(this)},PageItemCropComponent.prototype.createTemplate=function(){return t.prototype.createTemplate.call(this)},PageItemCropComponent.prototype.getHtmlTemplate=function(){return xl},PageItemCropComponent.prototype.createInitModel=function(){var h=t.prototype.createInitModel.call(this);return h.formContainerTop=ke.createQuickGuidAsString(),h.formContainerRight=ke.createQuickGuidAsString(),h.formContainerBottom=ke.createQuickGuidAsString(),h.formContainerLeft=ke.createQuickGuidAsString(),h},PageItemCropComponent.prototype.bindActions=function(){var t=this,clickHandler=function(t,h){return t.isDefaultPrevented()||(t.preventDefault(),h()),!1};this.helper.getById(this.ids.btnUnlockId).on("click",(function(h){return clickHandler(h,(function(){return t.onUnlock()}))})),this.$component.on("click",(function(h){return clickHandler(h,(function(){return t.onUnlock()}))}))},PageItemCropComponent.prototype.onDelete=function(){},PageItemCropComponent.prototype.onZoom=function(){},PageItemCropComponent.prototype.onRotate=function(t){},PageItemCropComponent.prototype.onClick=function(){},PageItemCropComponent.prototype.fixModel=function(t,h,y,w,A){var T=!1;(!(y=+y)||y<0)&&(y=0),t[h]=y;var E=this.cropOptions.minCropSpace/A;switch(h){case"left":var j=w.width-E-t.right;y>j&&(t[h]=j,T=!0);break;case"top":var B=w.height-E-t.bottom;y>B&&(t[h]=B,T=!0);break;case"right":var N=w.width-E-t.left;y>N&&(t[h]=N,T=!0);break;case"bottom":var V=w.height-E-t.top;y>V&&(t[h]=V,T=!0)}return T},PageItemCropComponent.prototype.initCropper=function(t){var h=this;void 0===t&&(t=!0),this.cropper&&(this.cropper.destroy(),this.cropper=null);var y=this.cropOptions.minCropSpace,w=this.getViewDocumentSize(),A={left:0,top:0,right:0,bottom:0},T=!1,E=Object.create(null);return this.cropper=new this.Cropper(this.$image.get(0),{rotatable:!1,scalable:!1,zoomable:!1,zoomOnTouch:!1,zoomOnWheel:!1,cropBoxMovable:!0,autoCrop:!1,background:!1,minCropBoxWidth:y,minCropBoxHeight:y,autoCropArea:1,viewMode:3,restore:!1,minCanvasWidth:w.width,minCanvasHeight:w.height,minContainerWidth:w.width,minContainerHeight:w.height,ready:function(){var t=h.getViewDocumentSize();h.cropper.setData({x:0,y:0,width:t.width,height:t.height,rotate:0,scaleX:1,scaleY:1}),h.cropper.crop()},cropstart:function(t){var y=h.getViewDocumentSize(),w=h.cropper.getData();switch(t.detail.action){case"n":case"ne":E.bottom=y.height-w.height-w.y;break;case"w":case"sw":E.right=y.width-w.width-w.x;break;case"nw":E.right=y.width-w.width-w.x,E.bottom=y.height-w.height-w.y}},cropend:function(){if(void 0!==E.right||void 0!==E.bottom){var t=h.getViewDocumentSize(),y=h.cropper.getData(!0);E.right&&h.cropper.setData({width:t.width-y.x-E.right}),E.bottom&&h.cropper.setData({height:t.height-y.y-E.bottom}),h.cropper.crop(),E=Object.create(null)}},crop:function(){var t=h.cropper.getCanvasData(),y=t.width/t.naturalWidth,w=h.cropper.getData(!1);w.x*=y,w.y*=y,w.width*=y,w.height*=y;var E=h.getRawDocumentSize(),j=h.getDocumentScale(),B=h.scaleCropEvent(w,1/j);if(T||(A.left=B.x,A.top=B.y,A.right=E.width-B.x-B.width,A.bottom=E.height-B.y-B.height,T=!0),!h.cropOptions.isInputSource){var N={left:B.x-A.left,top:B.y-A.top,right:E.width-B.x-B.width-A.right,bottom:E.height-B.y-B.height-A.bottom},V=Object.create(null);Object.keys(N).forEach((function(t){return h.fixModel(V,t,N[t],E,j)}));var W=h.roundOffset(V);h.updateModel(W)}}}),t&&this.serviceProvider.mediaService.change$.pipe(takeUntil(this.destroyEvent)).subscribe((function(t){if(t&&t.data&&t.data.key===h.cropOptions.mediaKey){var y=h.getViewMediaOptions();h.toggleMobileOptions(y.isMobile);var w=h.serviceProvider.pdfService.getViewPortInfo(h.itemData.pdfPage,h.cropOptions.current.size),A={width:Math.round(w.currentSize.width),height:Math.round(w.currentSize.height)};h.itemData.currentSize=A,h.helper.setImageSize(h.$image,A),h.initCropper(!1)}})),this.cropper},PageItemCropComponent.prototype.getViewDocumentSize=function(){var t=this.itemData.currentSize;return{width:Math.floor(t.width),height:Math.floor(t.height)}},PageItemCropComponent.prototype.getRawDocumentSize=function(){var t=this.itemData.documentSize;return{width:Math.floor(t.width),height:Math.floor(t.height)}},PageItemCropComponent.prototype.getDocumentScale=function(){return this.itemData.currentSize.width/this.itemData.documentSize.width},PageItemCropComponent.prototype.roundOffset=function(t){return{top:Math.round(t.top),right:Math.round(t.right),bottom:Math.round(t.bottom),left:Math.round(t.left)}},PageItemCropComponent.prototype.scaleCropEvent=function(t,h){return{x:t.x*h,y:t.y*h,width:t.width*h,height:t.height*h}},PageItemCropComponent.prototype.updateModel=function(t){Object.assign(this.form||(this.form=Object.create(null)),t),this.serviceProvider.toolsConfigService.setFormValue(this.form)},PageItemCropComponent.prototype.getViewMediaOptions=function(){var t=this.media.queries,h=t.maxWidth,y=t.maxHeight,w=this.serviceProvider.mediaService.queryHelper,A=w.matchMedia(h),T=w.matchMedia(y);return{hIsMobile:T,wIsMobile:A,isMobile:A||T,useFields:!A}},PageItemCropComponent.prototype.toggleMobileOptions=function(t){var h=this.cropOptions;h.isMobile=t,h.current.size=t?h.mobile.size:h.desktop.size,this.$component.toggleClass(h.css.isMobile,h.isMobile)},PageItemCropComponent.prototype.initMedia=function(){var t=this.serviceProvider.mediaService,h=t.queryHelper,y=h.maxWidth(this.media.x),w=h.maxHeight(this.media.y);this.media.queries={maxWidth:y,maxHeight:w};var A=[y,w],T=this.getViewMediaOptions();this.toggleMobileOptions(T.isMobile);var E=A.join(",");t.addCustomMedia(E,this.cropOptions.mediaKey,{x:this.media.x,y:this.media.y})},PageItemCropComponent}(Bn),Il=function(){var extendStatics=function(t,h){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,h){t.__proto__=h}||function(t,h){for(var y in h)Object.prototype.hasOwnProperty.call(h,y)&&(t[y]=h[y])},extendStatics(t,h)};return function(t,h){if("function"!=typeof h&&null!==h)throw new TypeError("Class extends value "+String(h)+" is not a constructor or null");function __(){this.constructor=t}extendStatics(t,h),t.prototype=null===h?Object.create(h):(__.prototype=h.prototype,new __)}}(),FileCropViewerComponent_awaiter=function(t,h,y,w){return new(y||(y=Promise))((function(A,T){function fulfilled(t){try{step(w.next(t))}catch(t){T(t)}}function rejected(t){try{step(w.throw(t))}catch(t){T(t)}}function step(t){t.done?A(t.value):function adopt(t){return t instanceof y?t:new y((function(h){h(t)}))}(t.value).then(fulfilled,rejected)}step((w=w.apply(t,h||[])).next())}))},FileCropViewerComponent_generator=function(t,h){var y,w,A,T,E={label:0,sent:function(){if(1&A[0])throw A[1];return A[1]},trys:[],ops:[]};return T={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(T[Symbol.iterator]=function(){return this}),T;function verb(T){return function(j){return function step(T){if(y)throw new TypeError("Generator is already executing.");for(;E;)try{if(y=1,w&&(A=2&T[0]?w.return:T[0]?w.throw||((A=w.return)&&A.call(w),0):w.next)&&!(A=A.call(w,T[1])).done)return A;switch(w=0,A&&(T=[2&T[0],A.value]),T[0]){case 0:case 1:A=T;break;case 4:return E.label++,{value:T[1],done:!1};case 5:E.label++,w=T[1],T=[0];continue;case 7:T=E.ops.pop(),E.trys.pop();continue;default:if(!(A=E.trys,(A=A.length>0&&A[A.length-1])||6!==T[0]&&2!==T[0])){E=0;continue}if(3===T[0]&&(!A||T[1]>A[0]&&T[1]<A[3])){E.label=T[1];break}if(6===T[0]&&E.label<A[1]){E.label=A[1],A=T;break}if(A&&E.label<A[2]){E.label=A[2],E.ops.push(T);break}A[2]&&E.ops.pop(),E.trys.pop();continue}T=h.call(t,E)}catch(t){T=[6,t],w=0}finally{y=A=0}if(5&T[0])throw T[1];return{value:T[0]?T[1]:void 0,done:!0}}([T,j])}}},Tl=function(t){function FileCropViewerComponent(h,y){var w=t.call(this,h,y)||this;return w.hasFile=!1,w.lib=w.initCropperLib(),w}return Il(FileCropViewerComponent,t),FileCropViewerComponent.prototype.init=function(){if(!this.entryOptions)throw new Error("!this.entryOptions");this.toolConfig=this.serviceProvider.toolsConfigService.getToolConfig(),this.initBase()&&(this.trans.push({files:this.entryOptions.items.map((function(t){return t.guid})),tranId:this.entryOptions.initUploadTransactionId}),this.options.useZoom=!1,this.options.usePageBox=!1,this.options.useRotate=!1,this.options.showPageNumber=!1,this.onFilesEnter(this.entryOptions.items))},FileCropViewerComponent.prototype.onFilesEnter=function(h){this.hasFile||h&&h.length&&(t.prototype.onFilesEnter.call(this,[h[0]]),this.hasFile=!0)},FileCropViewerComponent.prototype.createPageItem=function(t,h){return new Al(t,h)},FileCropViewerComponent.prototype.initPageItem$=function(t){var h=this;if(!t.subscribed){if(t.workFile.fileType!==Et.pdf)throw new Error("item.workFile.fileType !== FileType.pdf");return this.subscribePageItem(t),this.serviceProvider.viewerService.viewItemReady$.pipe(takeUntil(this.destroyEvent),takeUntil(t.destroy$),filter((function(h){return h.fileId===t.fileId}))).subscribe((function(){h.lib.then((function(){t.component.registrateCropEvents(t,h.Cropper)}))})),this.renderPdfFactory$(t).pipe(map((function(t){return t})))}},FileCropViewerComponent.prototype.subscribePageItem=function(t){var h=this;t.component.lock$.pipe(takeUntil(this.destroyEvent)).subscribe((function(y){return FileCropViewerComponent_awaiter(h,void 0,void 0,(function(){return FileCropViewerComponent_generator(this,(function(h){switch(h.label){case 0:return t.fileId!==y?[3,2]:[4,this.onItemLocked(t)];case 1:h.sent(),h.label=2;case 2:return[2]}}))}))}))},FileCropViewerComponent.prototype.getViewPortBySize=function(t,h,y){var w=t.component.getDesktopSize(),A=this.serviceProvider.pdfService.getViewPortInfo(h,w);return t.documentSize=A.documentSize,t.currentSize=A.currentSize,A.viewport},FileCropViewerComponent.prototype.initCropperLib=function(){return FileCropViewerComponent_awaiter(this,void 0,void 0,(function(){var t,h,y,w,A,T,E,j,B;return FileCropViewerComponent_generator(this,(function(N){switch(N.label){case 0:if(!(t=this.toolConfig).advancedLibs||!t.advancedLibs.length)throw new Error("!cfg.advancedLibs || !cfg.advancedLibs.length");return h="Cropper",y="CropperCss",w=t.advancedLibs.find((function(t){return t.name===h})),A=t.advancedLibs.find((function(t){return t.name===y})),T=this.serviceProvider.scriptLoaderService,E=T.hasLib(h),j=T.hasLib(y),E||T.addScript({src:w.defaultPath,windowName:h}),j||T.addScript({src:A.defaultPath,windowName:y,isCss:!0}),[4,T.loadChain([h,y])];case 1:return B=N.sent(),this.Cropper=B[0],[2,!0]}}))}))},FileCropViewerComponent}(Pl),ExtHelper_read=function(t,h){var y="function"==typeof Symbol&&t[Symbol.iterator];if(!y)return t;var w,A,T=y.call(t),E=[];try{for(;(void 0===h||h-- >0)&&!(w=T.next()).done;)E.push(w.value)}catch(t){A={error:t}}finally{try{w&&!w.done&&(y=T.return)&&y.call(T)}finally{if(A)throw A.error}}return E},ExtHelper_spreadArray=function(t,h){for(var y=0,w=h.length,A=t.length;y<w;y++,A++)t[A]=h[y];return t},Ol=function(){function ExtHelper(){}return ExtHelper.getRelatedExtensions=function(t){var h=this.getRelatedArr(t)||[];return ExtHelper_spreadArray([],ExtHelper_read(h))},ExtHelper.getTool=function(t,h){var y=this.getGroupExt(t);return this.getToolByExt(y,h)},ExtHelper.getGroupExt=function(t){if(!t||!t.length)throw new Error("!from || !from.length");var h=t[0],y=this.getRelatedArr(h);switch(!0){case this.map.pdf===y:return _t.pdf;case this.map.image===y:return _t.jpg;case this.map.docs===y:return _t.doc;case this.map.excl===y:return _t.xlsx;case this.map.pp===y:return _t.ppt;case this.map.text===y:return _t.txt;case this.map.chm===y:return _t.chm;case this.map.xml===y:return _t.xml;case this.map.html===y:return _t.html;case this.map.books===y:return _t.epub;case this.map.booksDjv===y:return _t.djv;default:throw new Error("getGroupExt: Not supported Ext")}},ExtHelper.isImage=function(t){switch(t){case _t.png:case _t.jpg:case _t.jpeg:case _t.bmp:case _t.tif:case _t.tiff:case _t.gif:return!0}return!1},ExtHelper.getToolByExt=function(t,h){if(t===_t.pdf)switch(h){case _t.png:return wt.pdfToPng;case _t.jpg:case _t.jpeg:return wt.pdfToJpg;case _t.bmp:return wt.pdfToBmp;case _t.tif:case _t.tiff:return wt.pdfToTiff;case _t.doc:case _t.odt:case _t.rtf:return wt.pdfToWord;case _t.docx:return wt.pdfToDocx;case _t.xlsx:case _t.xls:case _t.xlt:case _t.xla:case _t.pptx:case _t.ppt:case _t.epub:case _t.djvu:case _t.djv:case _t.mobi:case _t.fb2:case _t.txt:case _t.xml:case _t.html:case _t.chm:throw new Error("getToolByExt: "+h+" not supported ex.");default:throw new Error("getToolByExt: from:"+t+",to:"+h+" not supported ex.")}else{if(h!==_t.pdf)throw new Error("getToolByExt:  not supported tool from:"+t+",to:"+h);switch(t){case _t.png:return wt.pngToPdf;case _t.jpg:case _t.jpeg:return wt.jpgToPdf;case _t.bmp:return wt.bmpToPdf;case _t.tif:case _t.tiff:return wt.tiffToPdf;case _t.odt:return wt.odtToPdf;case _t.rtf:return wt.rtfToPdf;case _t.doc:return wt.wordToPdf;case _t.docx:return wt.docxToPdf;case _t.xlsx:case _t.xls:case _t.xlt:case _t.xla:return wt.excelToPdf;case _t.pptx:case _t.ppt:return wt.pptToPdf;case _t.epub:return wt.epubToPdf;case _t.djvu:case _t.djv:return wt.djvuToPdf;case _t.mobi:return wt.mobiToPdf;case _t.fb2:return wt.fb2ToPdf;case _t.txt:return wt.txtToPdf;case _t.xml:return wt.xmlToPdf;case _t.html:case _t.htm:return wt.htmlToPdf;case _t.chm:return wt.chmToPdf;default:throw new Error("getToolByExt: from:"+t+",to:"+h+" not supported ex.")}}},ExtHelper.getRelatedArr=function(t){var h=this;return Object.keys(this.map).map((function(t){return h.map[t]})).find((function(h){return h.indexOf(t)>-1}))},ExtHelper.map={pdf:[_t.pdf],image:[_t.png,_t.jpg,_t.jpeg,_t.bmp,_t.tiff,_t.tif,_t.jfif,_t.gif],docs:[_t.docx,_t.doc,_t.odt,_t.rtf],excl:[_t.ods,_t.xlsx,_t.xls,_t.xlt,_t.xla],pp:[_t.ppt,_t.pptx],text:[_t.txt],chm:[_t.chm],xml:[_t.xml],html:[_t.html,_t.htm],books:[_t.epub,_t.mobi,_t.fb2],booksDjv:[_t.djvu,_t.djv]},ExtHelper}(),El=function(){var extendStatics=function(t,h){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,h){t.__proto__=h}||function(t,h){for(var y in h)Object.prototype.hasOwnProperty.call(h,y)&&(t[y]=h[y])},extendStatics(t,h)};return function(t,h){if("function"!=typeof h&&null!==h)throw new TypeError("Class extends value "+String(h)+" is not a constructor or null");function __(){this.constructor=t}extendStatics(t,h),t.prototype=null===h?Object.create(h):(__.prototype=h.prototype,new __)}}(),Fl=__webpack_require__(64797),Rl=function(t){function FooterConverterComponent(h,y){var w=t.call(this,h,{popover:function(t){return new lr(t)}})||this;return w.options=y,w.btnNextKey="next",w.ids.btnNextId=ke.createQuickGuidAsString(),w.ids.btnToDocId=ke.createQuickGuidAsString(),w.ids.btnToDocXId=ke.createQuickGuidAsString(),w.ids.btnToJpgId=ke.createQuickGuidAsString(),w.next=new J,w}return El(FooterConverterComponent,t),Object.defineProperty(FooterConverterComponent.prototype,"next$",{get:function(){return this.next.asObservable().pipe(takeUntil(this.destroyEvent))},enumerable:!1,configurable:!0}),Object.defineProperty(FooterConverterComponent.prototype,"$btnRunJob",{get:function(){return this.$btnNext},enumerable:!1,configurable:!0}),Object.defineProperty(FooterConverterComponent.prototype,"$actionContainer",{get:function(){return this.helper.getById(this.ids.formContainerId)},enumerable:!1,configurable:!0}),Object.defineProperty(FooterConverterComponent.prototype,"$btnNext",{get:function(){return this.helper.getById(this.ids.btnNextId)},enumerable:!1,configurable:!0}),FooterConverterComponent.prototype.init=function(){t.prototype.init.call(this),this.options.from.find((function(t){return t===_t.pdf}))?(this.isPdfToDirection=!0,this.initPdfTo()):(this.isPdfToDirection=!1,this.initToPdf())},FooterConverterComponent.prototype.isPdfTo=function(){return this.isPdfToDirection},FooterConverterComponent.prototype.setRunJobDisabledState=function(t,h){void 0===h&&(h=!0)},FooterConverterComponent.prototype.setFilesCount=function(t,h){},FooterConverterComponent.prototype.setPdfControlsDisabledState=function(t){var h=this;[this.ids.btnToDocId,this.ids.btnToDocXId,this.ids.btnToJpgId].forEach((function(y){var w=h.helper.getById(y);h.helper.toggleDisabled(w,t)}))},FooterConverterComponent.prototype.getDefaultLabelKey=function(){return this.btnNextKey},FooterConverterComponent.prototype.createLabelKey=function(t){return this.btnNextKey},FooterConverterComponent.prototype.setDisableState=function(t){this.helper.toggleDisabled(this.helper.getById(this.ids.btnNextId),t),this.popover.setDisabledState(t)},FooterConverterComponent.prototype.getFromExt=function(){return this.options.from},FooterConverterComponent.prototype.nextClick=function(){this.$btnNext.get(0).click()},FooterConverterComponent.prototype.createTemplate=function(){var t=this.setTemplateValuesByModel(Fl,this.ids),h=this.serviceProvider.Translate,getValue=function(t,y){return h.has(t)?h.get(t):y};return t=this.setTemplateValuesByModel(t,{btnToDoc:getValue("converter-btn-to-doc","To Doc"),btnToDocX:getValue("converter-btn-to-docx","To DocX"),btnToJpg:getValue("converter-btn-to-jpg","To JPG")})},FooterConverterComponent.prototype.onPopoverInit=function(){},FooterConverterComponent.prototype.getLabelKey=function(t){return this.btnNextKey},FooterConverterComponent.prototype.initPdfTo=function(){var t=this;this.$actionContainer.removeClass(this.helper.css.displayNone);var clickHandler=function(h){return function(){t.$actionContainer.addClass(t.helper.css.displayNone),t.bindNext(h),t.nextClick()}};this.bindBtn(this.ids.btnToDocId,clickHandler(_t.doc)),this.bindBtn(this.ids.btnToDocXId,clickHandler(_t.docx)),this.bindBtn(this.ids.btnToJpgId,clickHandler(_t.jpg)),this.serviceProvider.inputService.setAccept(this.extToAccept([_t.pdf]))},FooterConverterComponent.prototype.initToPdf=function(){var t=this;this.bindNext(_t.pdf);var h=this.options.from,y=this.extToAccept(h);this.serviceProvider.inputService.setAccept(y),setTimeout((function(){t.nextClick()}))},FooterConverterComponent.prototype.bindNext=function(t){var h=this;this.bindBtn(this.ids.btnNextId,(function(){h.next.next({from:h.options.from,to:t})}))},FooterConverterComponent.prototype.bindBtn=function(t,h){var y=this;fromEvent(this.helper.getById(t).get(0),"click").pipe(takeUntil(this.destroyEvent)).subscribe((function(w){return w.defaultPrevented||y.helper.isDisabled(y.helper.getById(t))||(w.preventDefault(),h()),!1}))},FooterConverterComponent.prototype.extToAccept=function(t){var h=this;return t.map((function(t){return h.serviceProvider.fileMetaDataService.getMimeTypeByExtension(t)+",."+t})).join(",")},FooterConverterComponent}(ur);!function(t){t.sourceIsEmpty="sourceIsEmpty",t.fileListIsEmpty="fileListIsEmpty",t.uniqueListIsEmpty="uniqueListIsEmpty",t.relatedIsEmpty="relatedIsEmpty",t.notPermittedItems="notPermittedItems"}(hl||(hl={}));var Dl,Extensions_read=function(t,h){var y="function"==typeof Symbol&&t[Symbol.iterator];if(!y)return t;var w,A,T=y.call(t),E=[];try{for(;(void 0===h||h-- >0)&&!(w=T.next()).done;)E.push(w.value)}catch(t){A={error:t}}finally{try{w&&!w.done&&(y=T.return)&&y.call(T)}finally{if(A)throw A.error}}return E},Extensions_spreadArray=function(t,h){for(var y=0,w=h.length,A=t.length;y<w;y++,A++)t[A]=h[y];return t},Ml=function(){function Extensions(t){this.items=t}return Extensions.prototype.init=function(){if(this.items.length){if(!this.fileExtensions){var t=this.getExtensionsFromFile(this.items);if(!t.length)return void(this.extensionsError=hl.fileListIsEmpty);this.fileExtensions=this.getUniqueExtensions(t)}this.fileExtensions.length?(this.relatedExtensions||(this.relatedExtensions=this.getRelatedExtensions(this.fileExtensions)),this.relatedExtensions.length?(this.notPermittedItems||(this.notPermittedItems=this.getNotPermittedItems(this.fileExtensions,this.relatedExtensions)),this.notPermittedItems.length&&(this.extensionsError=hl.notPermittedItems)):this.extensionsError=hl.relatedIsEmpty):this.extensionsError=hl.uniqueListIsEmpty}else this.extensionsError=hl.sourceIsEmpty},Extensions.prototype.handleError=function(t){switch(console.error("Extensions:error",{err:t,this:this}),t){case hl.fileListIsEmpty:alert("ExtensionsError.fileListIsEmpty");break;case hl.uniqueListIsEmpty:case hl.relatedIsEmpty:alert("ExtensionsError.uniqueListIsEmpty")}},Extensions.prototype.hasError=function(){return!!this.extensionsError},Extensions.prototype.getError=function(){return this.extensionsError},Extensions.prototype.clean=function(){this.fileExtensions=null,this.relatedExtensions=null,this.notPermittedItems=null,this.extensionsError=null,this.items=null},Extensions.prototype.getExtensionsFromFile=function(t){return t.map((function(t){return t.ext})).filter((function(t){return!!t}))},Extensions.prototype.getUniqueExtensions=function(t){return Extensions_spreadArray([],Extensions_read(new Set(t)))},Extensions.prototype.getRelatedExtensions=function(t){return Ol.getRelatedExtensions(t[0])},Extensions.prototype.getNotPermittedItems=function(t,h){return t.filter((function(t){return!h.includes(t)}))},Extensions}(),jl=function(){var extendStatics=function(t,h){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,h){t.__proto__=h}||function(t,h){for(var y in h)Object.prototype.hasOwnProperty.call(h,y)&&(t[y]=h[y])},extendStatics(t,h)};return function(t,h){if("function"!=typeof h&&null!==h)throw new TypeError("Class extends value "+String(h)+" is not a constructor or null");function __(){this.constructor=t}extendStatics(t,h),t.prototype=null===h?Object.create(h):(__.prototype=h.prototype,new __)}}(),Ll=function(t){function ConverterViewerComponent(h,y){var w=t.call(this,h,y)||this;return w.converterCss={pending:"pending"},w.pendingView=new js(w.parentId),w}return jl(ConverterViewerComponent,t),ConverterViewerComponent.prototype.appendTemplate=function(){var h=this;this.$parent.addClass(this.converterCss.pending),t.prototype.appendTemplate.call(this),this.pendingView.init(),this.getOnDestroy$().pipe(take(1)).subscribe((function(){h.pendingView&&h.pendingView.destroyComponent()}))},ConverterViewerComponent.prototype.initFooter=function(){var t=this,h=new Ml(this.entryOptions.items);if(h.init(),h.hasError())return h.handleError(h.getError()),h.getError()===hl.notPermittedItems&&this.onNotPermittedItems(h),h.clean(),void this.currentState.gotTo(ge.destroy);this.footerComponent=new Rl(this.ids.footerContainerId,{from:h.relatedExtensions}),this.footerComponent.init(),this.serviceProvider.pickerHandlerService.subscribeDefault(this.destroyEvent),this.footerComponent.next$.pipe(takeUntil(this.destroyEvent),take(1)).subscribe((function(h){t.footerComponent.setDisableState(!0),t.serviceProvider.appService.setLockDropzoneState(!0);var y=Ol.getTool(h.from,h.to);t.onNext(y)})),this.footerComponent.isPdfTo()&&this.pendingView&&(this.$parent.removeClass(this.converterCss.pending),this.pendingView.destroyComponent(),this.pendingView=null)},ConverterViewerComponent.prototype.onFilesEnter=function(h,y){void 0===y&&(y=!1);var w=new Ml(h),A=this.footerComponent.getFromExt();if(w.relatedExtensions=A,w.init(),w.hasError()){var T=w.getError();return w.handleError(T),T===hl.notPermittedItems&&this.onNotPermittedItems(w),void w.clean()}t.prototype.onFilesEnter.call(this,h,y)},ConverterViewerComponent.prototype.onPasswordClosed=function(t){t.component.deleteItem()},ConverterViewerComponent.prototype.onPasswordRed=function(t){this.footerComponent.isPdfTo()&&this.viewItems.every((function(t){return!t.locked}))&&this.footerComponent.setPdfControlsDisabledState(!1)},ConverterViewerComponent.prototype.renderPdfFactory$=function(h){var y=this;return t.prototype.renderPdfFactory$.call(this,h).pipe(map((function(t){return y.footerComponent.isPdfTo()&&t.locked&&y.footerComponent.setPdfControlsDisabledState(!0),t})))},ConverterViewerComponent.prototype.uploadOnLoaded=function(t){},ConverterViewerComponent.prototype.onNext=function(t){var h=this,y=this.viewItems.map((function(t){var h=t.workFile.blob;return h.password=t.workFile.readPassword,h})),w=this.viewItems.map((function(t){return t.storedFile})),onError=function(){h.serviceProvider.appService.onStartOver(h.currentState)};this.serviceProvider.appService.geConfig$(t).subscribe((function(t){var A=h.serviceProvider.localPickerService,T=arraySum(w.map((function(t){return t.size}))),E=A.handleFiles({files:w,isStoreFilesArray:!0},T,0,t);if(E.error)h.serviceProvider.errorDialogService.handleError(E,(function(){return onError()}),!0,t);else{t.fromConverter=!0;var j=h.serviceProvider.appService.deps;h.currentState.gotTo(ge.destroy),h.serviceProvider.appService.getApp().rebuild(t,j);var B=h.serviceProvider.toolsConfigService.getToolConfig();t.maxFilesCount>1&&B.viewerType===St.instant&&(B.viewerType=St.file),h.serviceProvider.inputService.dropFiles(y)}}),(function(t){h.serviceProvider.errorDialogService.open({body:"GetConfig: Error",title:"GetConfig: Error",okCallback:function(){return onError()}})}))},ConverterViewerComponent.prototype.onNotPermittedItems=function(t){var h=t.relatedExtensions.join(", ").toUpperCase(),y=t.notPermittedItems.join(", ");this.serviceProvider.errorDialogService.showFormatError(h,y,!0).subscribe(),this.serviceProvider.appService.onStartOver(this.currentState)},ConverterViewerComponent}(Pl),Bl=function(){var extendStatics=function(t,h){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,h){t.__proto__=h}||function(t,h){for(var y in h)Object.prototype.hasOwnProperty.call(h,y)&&(t[y]=h[y])},extendStatics(t,h)};return function(t,h){if("function"!=typeof h&&null!==h)throw new TypeError("Class extends value "+String(h)+" is not a constructor or null");function __(){this.constructor=t}extendStatics(t,h),t.prototype=null===h?Object.create(h):(__.prototype=h.prototype,new __)}}(),Nl=function(t){function UnlockViewerComponent(h,y){return t.call(this,h,y)||this}return Bl(UnlockViewerComponent,t),UnlockViewerComponent.prototype.onRunJob=function(){this.onRunJobReady()},UnlockViewerComponent}(Pl),Vl=function(){var extendStatics=function(t,h){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,h){t.__proto__=h}||function(t,h){for(var y in h)Object.prototype.hasOwnProperty.call(h,y)&&(t[y]=h[y])},extendStatics(t,h)};return function(t,h){if("function"!=typeof h&&null!==h)throw new TypeError("Class extends value "+String(h)+" is not a constructor or null");function __(){this.constructor=t}extendStatics(t,h),t.prototype=null===h?Object.create(h):(__.prototype=h.prototype,new __)}}(),Ul=function(t){function FileViewerState(h,y){var w=t.call(this,h,ge.fileViewer)||this;if(!y)throw new Error("!inputData");if(!y.data.isViewerOptions)throw new Error("is not isViewerOptions");switch(w.options=y.data,w.serviceProvider.toolsConfigService.getToolConfig().viewerType){case St.fileCrop:w.view=new Tl(w.componentId,w);break;case St.fileConverter:w.view=new Ll(w.componentId,w);break;case St.fileUnlock:w.view=new Nl(w.componentId,w);break;default:w.view=new Pl(w.componentId,w)}return w}return Vl(FileViewerState,t),Object.defineProperty(FileViewerState.prototype,"toolsConfigService",{get:function(){return this.serviceProvider.toolsConfigService},enumerable:!1,configurable:!0}),FileViewerState.prototype.createTemplate=function(){return t.prototype.createTemplate.call(this,"")},FileViewerState.prototype.bindEvents=function(){t.prototype.bindEvents.call(this),this.view.entryOptions=this.options,this.view.init()},FileViewerState.prototype.onDestroy=function(){this.destroyChildren(["view"]),t.prototype.onDestroy.call(this)},FileViewerState}(gs),Wl=function(){var extendStatics=function(t,h){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,h){t.__proto__=h}||function(t,h){for(var y in h)Object.prototype.hasOwnProperty.call(h,y)&&(t[y]=h[y])},extendStatics(t,h)};return function(t,h){if("function"!=typeof h&&null!==h)throw new TypeError("Class extends value "+String(h)+" is not a constructor or null");function __(){this.constructor=t}extendStatics(t,h),t.prototype=null===h?Object.create(h):(__.prototype=h.prototype,new __)}}(),PdfPerPageViewerComponent_awaiter=function(t,h,y,w){return new(y||(y=Promise))((function(A,T){function fulfilled(t){try{step(w.next(t))}catch(t){T(t)}}function rejected(t){try{step(w.throw(t))}catch(t){T(t)}}function step(t){t.done?A(t.value):function adopt(t){return t instanceof y?t:new y((function(h){h(t)}))}(t.value).then(fulfilled,rejected)}step((w=w.apply(t,h||[])).next())}))},PdfPerPageViewerComponent_generator=function(t,h){var y,w,A,T,E={label:0,sent:function(){if(1&A[0])throw A[1];return A[1]},trys:[],ops:[]};return T={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(T[Symbol.iterator]=function(){return this}),T;function verb(T){return function(j){return function step(T){if(y)throw new TypeError("Generator is already executing.");for(;E;)try{if(y=1,w&&(A=2&T[0]?w.return:T[0]?w.throw||((A=w.return)&&A.call(w),0):w.next)&&!(A=A.call(w,T[1])).done)return A;switch(w=0,A&&(T=[2&T[0],A.value]),T[0]){case 0:case 1:A=T;break;case 4:return E.label++,{value:T[1],done:!1};case 5:E.label++,w=T[1],T=[0];continue;case 7:T=E.ops.pop(),E.trys.pop();continue;default:if(!(A=E.trys,(A=A.length>0&&A[A.length-1])||6!==T[0]&&2!==T[0])){E=0;continue}if(3===T[0]&&(!A||T[1]>A[0]&&T[1]<A[3])){E.label=T[1];break}if(6===T[0]&&E.label<A[1]){E.label=A[1],A=T;break}if(A&&E.label<A[2]){E.label=A[2],E.ops.push(T);break}A[2]&&E.ops.pop(),E.trys.pop();continue}T=h.call(t,E)}catch(t){T=[6,t],w=0}finally{y=A=0}if(5&T[0])throw T[1];return{value:T[0]?T[1]:void 0,done:!0}}([T,j])}}},Hl=__webpack_require__(84368),Gl=function(t){function PdfPerPageViewerComponent(h,y){var w=t.call(this,h,y)||this;return w.initialized=!1,w.waitRender=!1,w.scrollLocked=!1,w.waitScroll=!0,w.maxPerPagePages=100,w.serviceProvider.pdfService.getPdfLib(),w.pendingView=new js(w.parentId),w.onItemsRendered=new J,w}return Wl(PdfPerPageViewerComponent,t),Object.defineProperty(PdfPerPageViewerComponent.prototype,"onItemsRendered$",{get:function(){return this.onItemsRendered.pipe(takeUntil(this.destroyEvent),take(1))},enumerable:!1,configurable:!0}),PdfPerPageViewerComponent.prototype.init=function(){if(!this.entryOptions)throw new Error("!this.entryOptions");var h=this.serviceProvider.toolsConfigService;this.toolConfig=h.getToolConfig(),this.pendingView.init(),t.prototype.init.call(this),this.trans.push({files:this.entryOptions.items.map((function(t){return t.guid})),tranId:this.entryOptions.initUploadTransactionId}),this.options.useZoom=this.toolConfig.showZoomUi,this.options.showPageNumber=this.toolConfig.showOrderUi,this.options.usePageBox=h.showPageCounter(),this.options.useRotate=h.isRotatable(),this.options.useDelete=!this.toolConfig.hideDelete,this.onFilesEnter(this.entryOptions.items)},PdfPerPageViewerComponent.prototype.destroyComponent=function(){this.dropZoneComponent&&this.dropZoneComponent.destroyComponent(),this.headerComponent&&this.headerComponent.destroyComponent();var h=this.footerComponent;h&&h.destroyComponent(),t.prototype.destroyComponent.call(this)},PdfPerPageViewerComponent.prototype.createTemplate=function(){return this.setTemplateValuesByModel(Hl,this.ids)},PdfPerPageViewerComponent.prototype.bind=function(){var t=this;this.initHeader(),this.initFooter(),this.serviceProvider.viewerService.viewItemsChange$.pipe(takeUntil(this.destroyEvent),filter((function(){return t.serviceProvider.mediaService.isMobile()})),delay(40)).subscribe((function(){var h="app-state-root",y=$(t.serviceProvider.domHelper.cssToSelector(h)),w=y.offset().top,A=y.width(),T=y.height(),E=document.documentElement.clientWidth,j=document.documentElement.clientHeight,B=(E-A)/2;if(w+T+B<=j){var N=j-w-B;y.addClass(h+"_calc-height"),setTimeout((function(){y.css("height",N)}))}else y.css("height",""),y.removeClass(h+"_calc-height")}))},PdfPerPageViewerComponent.prototype.onFilesEnter=function(t,h){return PdfPerPageViewerComponent_awaiter(this,void 0,void 0,(function(){var h,y,w;return PdfPerPageViewerComponent_generator(this,(function(A){switch(A.label){case 0:if(!t||!t.length||this.initialized)return[2];if(t.length>1)throw new Error("files.length > 1: doesnt support");return this.options.loadDisabled=!0,h=t[0],y=this.serviceProvider.viewerService.getMinMaxItemValue(),this.document={component:null,fileId:h.guid,storedFile:h,rendered:!1,locked:!1,workFile:this.serviceProvider.fileConverterService.storeToWork(h),currentSize:void 0,documentSize:void 0,maxSize:y.max,destroy$:this.getOnDestroy$(),subscribed:!1,viewOrder:0,waitPassword:!1,pdfDocumentProxy:void 0},[4,this.waitBlobUrl$(this.document.storedFile,this.document.destroy$).toPromise()];case 1:return A.sent(),w=this.document,[4,this.getPdfDocument(this.document)];case 2:return w.pdfDocumentProxy=A.sent(),this.document.pdfDocumentProxy?(this.document.totalPages=this.document.pdfDocumentProxy.numPages,this.onDocumentRead(),[2]):(this.currentState.gotTo(ge.destroy),[2])}}))}))},PdfPerPageViewerComponent.prototype.initFooter=function(){var t=this,h=this.serviceProvider.toolsConfigService.getToolConfig();h.footerFactory&&(this.footerComponent=h.footerFactory(this.ids.footerContainerId,this.currentState),this.footerComponent.init(),this.footerComponent.setRunJobDisabledState(!0),this.footerComponent.runJob$.pipe(takeUntil(this.destroyEvent)).subscribe((function(){if(t.initialized){t.helper.scrollMoreThan(350)&&t.helper.scrollToStart(),t.onBeforeRunJob();var h=[t.document.fileId],y=[t.document.workFile],w=t.serviceProvider.fileTransferService,A=w.progressEvent$.pipe(map((function(){return w.getStoredProgress(h)})));t.currentState.gotTo(ge.uploadState,{sourceState:t.currentState.stateName,targetState:ge.uploadState,data:t.serviceProvider.stateService.createProgressEventData(A)}),w.progressEvent$.pipe(catchError((function(t){return throwError({status:ci.errored,hasError:!0,data:t})})),filter((function(t){return t.progress.completed}))).subscribe({error:function(h){if(!h||!h.hasError)throw new Error("!error || !error.hasError");t.currentState.gotTo(ge.errorViewer,{targetState:ge.errorViewer,sourceState:t.currentState.stateName,data:h})}}),A.pipe(filter((function(t){return t.completed})),take(1)).subscribe((function(){var h=t.serviceProvider.stateService.createWorkFilesEventData(y);t.currentState.gotTo(ge.runJobState,{sourceState:t.currentState.stateName,targetState:ge.runJobState,data:h})}))}})))},PdfPerPageViewerComponent.prototype.onBeforeRunJob=function(){},PdfPerPageViewerComponent.prototype.initHeader=function(){this.toolConfig.headerFactory&&(this.headerComponent=this.toolConfig.headerFactory(this.ids.headerContainerId,this.currentState),this.onBeforeHeaderInit(),this.headerComponent.init())},PdfPerPageViewerComponent.prototype.initScroll=function(){var t=this;this.scroll$||(this.scroll$=fromEvent(document,"scroll").pipe(takeUntil(this.destroyEvent),takeWhile((function(){return t.waitScroll})),filter((function(){return t.waitRender})),tap((function(){return t.onScroll()}))))},PdfPerPageViewerComponent.prototype.onBeforeHeaderInit=function(){},PdfPerPageViewerComponent.prototype.onDocumentRead=function(){var t=this;this.viewItems=this.createPageItems(this.document.pdfDocumentProxy),this.viewItems.forEach((function(h){var y=h.component;y.init(),y.setRenderingState(!0),t.subscribePageItem(h),y.setPageNumber(h.initPageNumber),y.setPageNumberVisibleState(t.options.showPageNumber),y.setRotateVisibleState(t.options.useRotate),y.setZoomBtnVisibleState(t.options.useZoom),y.setDeleteBtnVisible(t.options.useDelete)})),this.destroyPending(),this.$component.toggleClass(this.helper.css.displayNone,!1),this.waitRender=!0,this.serviceProvider.viewerService.onViewItemsChange(this.viewItems.map((function(t){return t.component}))),this.scroll$.subscribe(),this.onScroll(),this.initialized=!0},PdfPerPageViewerComponent.prototype.getPdfDocument=function(t){return PdfPerPageViewerComponent_awaiter(this,void 0,void 0,(function(){var h,y,w=this;return PdfPerPageViewerComponent_generator(this,(function(A){return h=function(h){return new W((function(y){from(w.serviceProvider.pdfService.getDocument({url:t.storedFile.blobUrl,password:h})).subscribe({next:function(h){t.waitPassword=!1,y.next({documentProxy:h,openDialog:!1})},error:function(h){w.isPasswordError(h)?(t.waitPassword=!0,t.locked=!0,y.next({documentProxy:null,openDialog:!0})):w.currentState.gotTo(ge.destroy)}})})).pipe(takeUntil(w.destroyEvent),take(1))},y=h("").pipe(switchMap((function(y){if(!y.openDialog&&y.documentProxy)return of(y.documentProxy);if(!y.openDialog&&!y.documentProxy)return of(null);return w.openPasswordDialog(t,(function(t){return h(t).pipe(map((function(t){return y.documentProxy=t.documentProxy,!!t.documentProxy})))})).pipe(map((function(t){switch(t.state){case qa.closed:return null;case qa.valid:return y.documentProxy}})))}))),[2,y.toPromise()]}))}))},PdfPerPageViewerComponent.prototype.createPageItems=function(t){for(var h=[],y=t.numPages,w=this.document,A=0;A<y;A++){var T=A+1,E=this.createChildId(String(T),w.fileId),j=new Bn(this.ids.viewerContainerId,E);j.setViewModelOptions({imageUrl:void 0,useDelete:this.options.useDelete});var B=this.serviceProvider.viewerService.getMinMaxItemValue(),N={component:j,fileId:E,storedFile:w.storedFile,rendered:!1,locked:!1,workFile:this.serviceProvider.fileConverterService.storeToWork(w.storedFile,A),currentSize:void 0,documentSize:void 0,maxSize:B.max,destroy$:j.getOnDestroy$(),subscribed:!1,viewOrder:T,waitPassword:!1,initPageNumber:T};h.push(N)}return h},PdfPerPageViewerComponent.prototype.subscribePageItem=function(t){var h=this;t.subscribed||(t.component.delete$.pipe(takeUntil(this.destroyEvent),takeUntil(t.destroy$)).subscribe((function(t){return h.onDelete(t)})),t.component.zoom$.pipe(takeUntil(this.destroyEvent),takeUntil(t.destroy$)).subscribe((function(t){return h.onZoom(t)})),t.component.rotate$.pipe(takeUntil(this.destroyEvent),takeUntil(t.destroy$)).subscribe((function(y){y.itemId===t.fileId&&h.onRotate(y,t)})),t.subscribed=!0)},PdfPerPageViewerComponent.prototype.onDelete=function(t){var h=arrayRemove(this.viewItems,(function(h){return h.fileId===t}));if(h&&h.component.destroyComponent(),this.updateViewCounters(this.viewItems),!this.viewItems.length){var y=this.document.fileId,w=this.trans.find((function(t){return t.files.find((function(t){return t===y}))}));w&&arrayRemove(w.files,(function(t){return t===y})),this.currentState.gotTo(ge.destroy)}this.serviceProvider.viewerService.onViewItemsChange(this.viewItems.map((function(t){return t.component})))},PdfPerPageViewerComponent.prototype.onRotate=function(t,h){var y=0,w=this.getAngle(h);switch(t.direction){case Pn.left:y=-1;break;case Pn.right:y=1;break;case Pn.zero:y=0,w=0}w+=90*y,w%=360,h.workFile.options.angle=w,h.component.setRotateImage(w)},PdfPerPageViewerComponent.prototype.onScroll=function(){return PdfPerPageViewerComponent_awaiter(this,void 0,void 0,(function(){var t;return PdfPerPageViewerComponent_generator(this,(function(h){switch(h.label){case 0:return this.scrollLocked||this.destroyed?[2,!1]:(this.scrollLocked=!0,t=this.viewItems.find((function(t){return!t.rendered})),t?[4,this.renderPdfPage(t)]:[3,2]);case 1:return h.sent()&&(this.scrollLocked=!1,this.onScroll()),[3,3];case 2:return this.waitRender=!1,this.scrollLocked=!1,this.waitScroll=!1,this.onItemsRendered.next(),[2,!1];case 3:return[2,!0]}}))}))},PdfPerPageViewerComponent.prototype.renderPdfPage=function(t){return PdfPerPageViewerComponent_awaiter(this,void 0,void 0,(function(){var h,y,w,A,T,E,j,B;return PdfPerPageViewerComponent_generator(this,(function(N){switch(N.label){case 0:return t.rendered?[2,!0]:(t.component.setRenderingState(!0),[4,(h=this.serviceProvider.pdfService).getPDFPageLoadingTask(this.document.pdfDocumentProxy,t.initPageNumber)]);case 1:return y=N.sent(),t.pdfPage=y,w=this.serviceProvider.pdfService.getViewPortInfo(y,t.maxSize),A=w.viewport,t.documentSize=w.documentSize,t.currentSize=w.currentSize,(T=this.$workCanvas.get(0))?(T.getContext("2d").clearRect(0,0,T.width,T.height),T.width=A.width,T.height=A.height,E=$("<canvas/>"),(j=E.get(0)).width=A.width,j.height=A.height,B={canvasContext:j.getContext("2d"),viewport:A,intent:"print",enableWebGL:!0},[2,h.drawCanvas(y,B).toPromise().then((function(){return t.component.replaceImageWithCanvas(E,A.width,A.height),t.component.setRenderingState(!1),t.rendered=!0,y.cleanup(),!0}))]):[2,!1]}}))}))},PdfPerPageViewerComponent.prototype.destroyPending=function(){this.pendingView&&(this.pendingView.destroyComponent(),this.pendingView=null)},PdfPerPageViewerComponent}(Sl),PageItemsHandler_read=function(t,h){var y="function"==typeof Symbol&&t[Symbol.iterator];if(!y)return t;var w,A,T=y.call(t),E=[];try{for(;(void 0===h||h-- >0)&&!(w=T.next()).done;)E.push(w.value)}catch(t){A={error:t}}finally{try{w&&!w.done&&(y=T.return)&&y.call(T)}finally{if(A)throw A.error}}return E},PageItemsHandler_spreadArray=function(t,h){for(var y=0,w=h.length,A=t.length;y<w;y++,A++)t[A]=h[y];return t},zl=function(){function PageItemsHandler(t,h){var y=this;this.totalPages=t,this.pageItemsMap=new Map,this.pageInfoMap=new Map,this.pageNumbers=[],this.destroyed=!1,h&&h.forEach((function(t,h){y.pageItemsMap.set(h+1,t)}));for(var w=0;w<t;w++){var A=w+1;this.pageNumbers.push(A),this.pageInfoMap.set(A,{pageNumber:A,selected:!1})}}return PageItemsHandler.prototype.destroy=function(){this.destroyed||(this.pageInfoMap.clear(),this.pageItemsMap.clear(),this.pageNumbers=null,this.destroyed=!0)},PageItemsHandler.prototype.changeValueHandler=function(t){var h="";if(t&&(h=t),In.lastIsSeparator(h))throw new Error("lastIsSeparator");this.deselectAll();var y=In.parseValue(h);y&&y.length&&this.changePagesSelectedStatus(y,!0)},PageItemsHandler.prototype.getOnClickedValue=function(t,h){this.onItemSelectedChange(t,h);var y=this.getSelectedPages()||[];return this.changePagesSelectedStatus(y,!0),In.pagesToValue(y)},PageItemsHandler.prototype.selectAll=function(){this.changePagesSelectedStatus(this.pageNumbers,!0)},PageItemsHandler.prototype.deselectAll=function(){this.changePagesSelectedStatus(this.getAllPages(),!1)},PageItemsHandler.prototype.getAllPages=function(){return PageItemsHandler_spreadArray([],PageItemsHandler_read(this.pageNumbers))},PageItemsHandler.prototype.getAllPagesViewValue=function(){return In.createAllPagesValue(this.totalPages)},PageItemsHandler.prototype.getSelectedPages=function(){var t=this;return this.pageNumbers.map((function(h){return t.pageInfoMap.get(h)})).filter((function(t){return t&&t.selected})).map((function(t){return t.pageNumber}))},PageItemsHandler.prototype.setPages=function(t,h){var y=this;this.getAllPages().forEach((function(t){return y.onItemSelectedChange(t,!1)})),this.changePagesSelectedStatus(t,h)},PageItemsHandler.prototype.changePagesSelectedStatus=function(t,h){var y=this;PageItemsHandler_spreadArray([],PageItemsHandler_read(new Set(t))).forEach((function(t){return y.onItemSelectedChange(t,h)}))},PageItemsHandler.prototype.onItemSelectedChange=function(t,h){var y=this.pageInfoMap.get(t);if(y){y.selected=h;var w=this.pageItemsMap.get(t);w&&w.component.setSelected(h)}},PageItemsHandler}(),ql=function(){function Range(){}return Range.prototype.setFrom=function(t,h){this.from=t,this.fromIsSelectMode=h},Range.prototype.setTo=function(t,h){this.to=t,this.toIsSelectedMode=h},Range.prototype.isLeft=function(){return this.from>this.to},Range.prototype.isRight=function(){return this.from<this.to},Range.prototype.isSame=function(){return this.from===this.to},Range}(),$l=function(){function StackStore(t){void 0===t&&(t=2),this.maxLen=t,this.stack=[]}return StackStore.prototype.add=function(t){for(this.stack.push(t);this.stack.length>this.maxLen;)this.stack.shift()},StackStore.prototype.prev=function(){return this.stack.length?this.stack.length<this.maxLen?this.stack[this.stack.length-1]:this.stack[this.maxLen-2]:0},StackStore.prototype.last=function(){return this.stack.length?this.stack[this.stack.length-1]:0},StackStore.prototype.lastIsSameAs=function(t){return this.last()===t},StackStore.prototype.isEmpty=function(){return!this.stack.length},StackStore}(),Jl=function(){function PageItemsShiftHandler(t,h){this.destroy$=t,this.items=h,this.change=new J,this.stack=new $l}return Object.defineProperty(PageItemsShiftHandler.prototype,"change$",{get:function(){return this.change.asObservable().pipe(takeUntil(this.destroy$))},enumerable:!1,configurable:!0}),PageItemsShiftHandler.prototype.init=function(){var t=this,h=fromEvent(document,"keydown").pipe(takeUntil(this.destroy$),filter((function(t){return t.shiftKey})),tap((function(){t.shiftDown=!0}))),y=fromEvent(document,"keyup").pipe(takeUntil(this.destroy$),tap((function(){t.shiftDown=!1,t.range=null})));h.subscribe(),y.subscribe(),this.items.forEach((function(h){h.component.click$.pipe(takeUntil(h.destroy$),delay(1),map((function(h){t.stack.isEmpty()&&t.stack.add(0);var y=t.getIndex(h.itemId);t.stack.lastIsSameAs(y)||t.stack.add(y);var w=t.stack.prev(),A=t.stack.last();return t.range||(t.range=new ql),t.range.setFrom(w,t.items[w].component.isSelected()),t.range.setTo(A,t.items[A].component.isSelected()),h})),filter((function(){return t.shiftDown}))).subscribe((function(h){if(!t.range.isSame()){var y=!1;t.range.fromIsSelectMode&&t.range.toIsSelectedMode?y=!0:t.range.fromIsSelectMode&&!t.range.toIsSelectedMode?y=!1:!t.range.fromIsSelectMode&&t.range.toIsSelectedMode?y=!0:t.range.fromIsSelectMode||t.range.toIsSelectedMode||(y=!1);var w=Object.create(null);t.items.filter((function(t){return t.component.isSelected()})).forEach((function(t){return w[t.viewOrder]=!0}));var A,T=t.range,E=t.range.from+1,j=t.range.to+1;if(T.isRight())A=t.items.filter((function(t){return t.viewOrder>=E&&t.viewOrder<=j}));else{if(!T.isLeft())return void console.warn("shift +click:same",{range:t.range,items:A,src:t.items});A=t.items.filter((function(t){return t.viewOrder>=j&&t.viewOrder<=E}))}y?A.forEach((function(t){return w[t.viewOrder]=!0})):A.forEach((function(t){delete w[t.viewOrder]}));var B=In.objToPages(w);t.change.next(B)}}))}))},PageItemsShiftHandler.prototype.getIndex=function(t){return this.items.findIndex((function(h){return h.fileId===t}))},PageItemsShiftHandler}(),Xl=function(){var extendStatics=function(t,h){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,h){t.__proto__=h}||function(t,h){for(var y in h)Object.prototype.hasOwnProperty.call(h,y)&&(t[y]=h[y])},extendStatics(t,h)};return function(t,h){if("function"!=typeof h&&null!==h)throw new TypeError("Class extends value "+String(h)+" is not a constructor or null");function __(){this.constructor=t}extendStatics(t,h),t.prototype=null===h?Object.create(h):(__.prototype=h.prototype,new __)}}(),SplitViewerComponent_awaiter=function(t,h,y,w){return new(y||(y=Promise))((function(A,T){function fulfilled(t){try{step(w.next(t))}catch(t){T(t)}}function rejected(t){try{step(w.throw(t))}catch(t){T(t)}}function step(t){t.done?A(t.value):function adopt(t){return t instanceof y?t:new y((function(h){h(t)}))}(t.value).then(fulfilled,rejected)}step((w=w.apply(t,h||[])).next())}))},SplitViewerComponent_generator=function(t,h){var y,w,A,T,E={label:0,sent:function(){if(1&A[0])throw A[1];return A[1]},trys:[],ops:[]};return T={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(T[Symbol.iterator]=function(){return this}),T;function verb(T){return function(j){return function step(T){if(y)throw new TypeError("Generator is already executing.");for(;E;)try{if(y=1,w&&(A=2&T[0]?w.return:T[0]?w.throw||((A=w.return)&&A.call(w),0):w.next)&&!(A=A.call(w,T[1])).done)return A;switch(w=0,A&&(T=[2&T[0],A.value]),T[0]){case 0:case 1:A=T;break;case 4:return E.label++,{value:T[1],done:!1};case 5:E.label++,w=T[1],T=[0];continue;case 7:T=E.ops.pop(),E.trys.pop();continue;default:if(!(A=E.trys,(A=A.length>0&&A[A.length-1])||6!==T[0]&&2!==T[0])){E=0;continue}if(3===T[0]&&(!A||T[1]>A[0]&&T[1]<A[3])){E.label=T[1];break}if(6===T[0]&&E.label<A[1]){E.label=A[1],A=T;break}if(A&&E.label<A[2]){E.label=A[2],E.ops.push(T);break}A[2]&&E.ops.pop(),E.trys.pop();continue}T=h.call(t,E)}catch(t){T=[6,t],w=0}finally{y=A=0}if(5&T[0])throw T[1];return{value:T[0]?T[1]:void 0,done:!0}}([T,j])}}},Ql=function(t){function SplitViewerComponent(h,y){var w=t.call(this,h,y)||this;return w.splitCss={ok:"icon--ok",iconDelete:"icon--delete"},w}return Xl(SplitViewerComponent,t),Object.defineProperty(SplitViewerComponent.prototype,"formComponent",{get:function(){return this.footerComponent.getFormComponent()},enumerable:!1,configurable:!0}),SplitViewerComponent.prototype.destroyComponent=function(){this.pageHandler&&(this.pageHandler.destroy(),this.pageHandler=null),t.prototype.destroyComponent.call(this)},SplitViewerComponent.prototype.initScroll=function(){},SplitViewerComponent.prototype.onBeforeHeaderInit=function(){this.headerComponent.setService(this.serviceProvider.splitService)},SplitViewerComponent.prototype.onDocumentRead=function(){this.document.totalPages>this.maxPerPagePages?this.initAsDocument():this.initAsPages()},SplitViewerComponent.prototype.subscribePageItem=function(t){var h=this;t.subscribed||(t.component.zoom$.pipe(takeUntil(this.destroyEvent)).subscribe((function(t){return h.onZoom(t)})),t.component.click$.pipe(takeUntil(this.destroyEvent)).subscribe((function(y){h.value.pages=h.pageHandler.getOnClickedValue(t.initPageNumber,y.isSelected),h.formComponent.setValue(h.value)})))},SplitViewerComponent.prototype.getInitValue=function(){return this.value={mode:Tt.single,pages:In.createAllPagesValue(this.document.totalPages),pending:!1,valid:!0},at.asJson(this.value)},SplitViewerComponent.prototype.initAsDocument=function(){return SplitViewerComponent_awaiter(this,void 0,void 0,(function(){var t,h,y,w,A=this;return SplitViewerComponent_generator(this,(function(T){switch(T.label){case 0:return this.asDocument=!0,this.headerComponent.setToggleVisible(!1),t=this.document,this.serviceProvider.splitService.onDocumentRead(t.totalPages),h=t.storedFile.guid,(y=new Bn(this.ids.viewerContainerId,h)).setViewModelOptions({imageUrl:void 0,useDelete:!1}),w=this.serviceProvider.viewerService.getMinMaxItemValue(),t.component=y,t.viewOrder=1,t.initPageNumber=1,t.maxSize=w.max,this.viewItems=[t],y.init(),y.setRenderingState(!0),y.zoom$.pipe(takeUntil(this.destroyEvent),takeUntil(t.destroy$)).subscribe((function(t){return A.onZoom(t)})),y.setTotalPages(t.totalPages),y.setPageBoxVisibleState(!0),y.setPageNumberVisibleState(!1),y.setRotateVisibleState(!1),y.setZoomBtnVisibleState(!0),y.setDeleteBtnVisible(!1),this.destroyPending(),this.$component.toggleClass(this.helper.css.displayNone,!1),this.waitRender=!1,this.scrollLocked=!1,this.waitScroll=!1,this.serviceProvider.viewerService.onViewItemsChange([y]),[4,this.renderDocument(t)];case 1:return T.sent(),this.formComponent.setTotalPages(t.totalPages),this.formComponent.change$.pipe(takeUntil(this.destroyEvent)).subscribe((function(t){return A.formByDocumentChange(t)})),this.initialized=!0,this.formComponent.setAllPages(),[2]}}))}))},SplitViewerComponent.prototype.renderDocument=function(t){return SplitViewerComponent_awaiter(this,void 0,void 0,(function(){var h,y,w,A;return SplitViewerComponent_generator(this,(function(T){switch(T.label){case 0:return t.rendered?[2,!0]:[4,this.serviceProvider.pdfService.getPDFPageLoadingTask(this.document.pdfDocumentProxy,t.initPageNumber)];case 1:return h=T.sent(),y=this.serviceProvider.pdfService.getViewPortInfo(h,t.maxSize),w=y.viewport,t.documentSize=y.documentSize,t.currentSize=y.currentSize,A=t,[4,this.renderZoom$(h,t.destroy$).toPromise()];case 2:return A.zoomImageInfo=T.sent(),t.component.setImage(t.zoomImageInfo.url,Math.round(w.width),Math.round(w.height)),t.component.setPageName(t.storedFile.name),t.rendered=!0,t.component.setRenderingState(!1),this.formComponent.setDisableState(!1),[2,!0]}}))}))},SplitViewerComponent.prototype.formByDocumentChange=function(t){if(this.formComponent.isDisabled())this.value=at.asJson(t);else{var h=this.value;if(h){if(this.changeRunJobLabel(t.mode),this.value=at.asJson(t),t.mode!==h.mode){if(h.mode===Tt.single)return void this.formComponent.resetPages();t.mode===Tt.single&&this.formComponent.setAllPages()}}else this.value=t}},SplitViewerComponent.prototype.initAsPages=function(){var h=this;this.asDocument=!1,this.headerComponent.setToggleVisible(!0),t.prototype.initScroll.call(this),t.prototype.onDocumentRead.call(this),this.pageHandler=new zl(this.document.totalPages,this.viewItems);var y=new Jl(this.getOnDestroy$(),this.viewItems);y.init(),y.change$.subscribe((function(t){var y=In.pagesToValue(t),w=at.asJson(h.value);w.pages=y,h.pageHandler.setPages(t,!0),h.formComponent.setValue(w)}));var w=this.formComponent;w.setTotalPages(this.document.totalPages),this.viewItems.forEach((function(t){return t.component.setIgnoreRenderingOnClick(!0)})),this.value=this.getInitValue(),w.change$.pipe(takeUntil(this.destroyEvent)).subscribe((function(t){return h.onPerPageFormChange(t)}));var A=this.serviceProvider.splitService;A.selectAllPagesChange$.pipe(takeUntil(this.destroyEvent)).subscribe((function(t){return h.onToggleAllChange(t)})),A.onDocumentRead(this.document.totalPages),w.setDisableState(!1),w.setValue(this.value),A.onSelectAllPagesChange(!0)},SplitViewerComponent.prototype.onToggleAllChange=function(t){var h=this.value;this.changeIcons(h.mode),this.viewItems.forEach((function(h){h.component.setSelected(t)})),t?(this.pageHandler.selectAll(),this.formComponent.setAllPages()):(this.pageHandler.deselectAll(),this.formComponent.resetPages())},SplitViewerComponent.prototype.onPerPageFormChange=function(t){if(this.formComponent.isDisabled())this.value=at.asJson(t);else{var h=this.value;h?(this.value=at.asJson(t),this.updateMode(t,h),this.updatePages(t,h),this.checkOrUpdateHeaderState()):this.value=t}},SplitViewerComponent.prototype.checkOrUpdateHeaderState=function(){var t=this.viewItems.map((function(t){return t.component.isSelected()})),h=t.every((function(t){return!!t})),y=this.headerComponent.isSelected();h?this.headerComponent.setSelectState(Sn.selectAll,!1):y&&!h&&this.headerComponent.setSelectState(Sn.deselectAll,!1)},SplitViewerComponent.prototype.updateMode=function(t,h){var y=this.toggleMode;if(this.isToggleModeChange(t.mode,y)&&(this.changeIcons(t.mode),this.changeRunJobLabel(t.mode),this.toggleMode=t.mode),t.mode!==h.mode){if(h.mode===Tt.single)return t.pages="",this.value=at.asJson(t),void this.formComponent.setValue(at.asJson(t));this.value=at.asJson(t);var w=this.serviceProvider.splitService;switch(t.mode){case Tt.single:w.onSelectAllPagesChange(!0);break;case Tt.deleteSelected:this.changeIcons(t.mode)}}},SplitViewerComponent.prototype.updatePages=function(t,h){t.pages!==h.pages&&(t.pages||this.headerComponent.setSelectState(Sn.deselectAll),In.lastIsSeparator(t.pages)||this.pageHandler.changeValueHandler(t.pages))},SplitViewerComponent.prototype.changeIcons=function(t){var h=this,y=this.getIconData(t);this.viewItems.forEach((function(t){t.component.setIcon(y.icon),t.component.toggleIconCss([h.splitCss.ok,h.splitCss.iconDelete],!1),t.component.toggleIconCss(y.css,!0)}))},SplitViewerComponent.prototype.isToggleModeChange=function(t,h){var y=Tt.deleteSelected;return!this.toggleMode||this.toggleMode!==t&&(t===y||this.toggleMode===y)},SplitViewerComponent.prototype.changeRunJobLabel=function(t){var h=this.footerComponent,y=h.getDefaultLabelKey();t===Tt.deleteSelected&&(y=h.createLabelKey(wt.deletePdf)),h.setBtnLabel(y,0)},SplitViewerComponent.prototype.getIconData=function(t){var h=Kt.okGreen,y=this.splitCss,w=y.ok;return t===Tt.deleteSelected&&(h=Kt.trash,w=y.iconDelete),{icon:h,css:w}},SplitViewerComponent}(Gl),Kl=function(){var extendStatics=function(t,h){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,h){t.__proto__=h}||function(t,h){for(var y in h)Object.prototype.hasOwnProperty.call(h,y)&&(t[y]=h[y])},extendStatics(t,h)};return function(t,h){if("function"!=typeof h&&null!==h)throw new TypeError("Class extends value "+String(h)+" is not a constructor or null");function __(){this.constructor=t}extendStatics(t,h),t.prototype=null===h?Object.create(h):(__.prototype=h.prototype,new __)}}(),DeleteViewerComponent_awaiter=function(t,h,y,w){return new(y||(y=Promise))((function(A,T){function fulfilled(t){try{step(w.next(t))}catch(t){T(t)}}function rejected(t){try{step(w.throw(t))}catch(t){T(t)}}function step(t){t.done?A(t.value):function adopt(t){return t instanceof y?t:new y((function(h){h(t)}))}(t.value).then(fulfilled,rejected)}step((w=w.apply(t,h||[])).next())}))},DeleteViewerComponent_generator=function(t,h){var y,w,A,T,E={label:0,sent:function(){if(1&A[0])throw A[1];return A[1]},trys:[],ops:[]};return T={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(T[Symbol.iterator]=function(){return this}),T;function verb(T){return function(j){return function step(T){if(y)throw new TypeError("Generator is already executing.");for(;E;)try{if(y=1,w&&(A=2&T[0]?w.return:T[0]?w.throw||((A=w.return)&&A.call(w),0):w.next)&&!(A=A.call(w,T[1])).done)return A;switch(w=0,A&&(T=[2&T[0],A.value]),T[0]){case 0:case 1:A=T;break;case 4:return E.label++,{value:T[1],done:!1};case 5:E.label++,w=T[1],T=[0];continue;case 7:T=E.ops.pop(),E.trys.pop();continue;default:if(!(A=E.trys,(A=A.length>0&&A[A.length-1])||6!==T[0]&&2!==T[0])){E=0;continue}if(3===T[0]&&(!A||T[1]>A[0]&&T[1]<A[3])){E.label=T[1];break}if(6===T[0]&&E.label<A[1]){E.label=A[1],A=T;break}if(A&&E.label<A[2]){E.label=A[2],E.ops.push(T);break}A[2]&&E.ops.pop(),E.trys.pop();continue}T=h.call(t,E)}catch(t){T=[6,t],w=0}finally{y=A=0}if(5&T[0])throw T[1];return{value:T[0]?T[1]:void 0,done:!0}}([T,j])}}},Yl=function(t){function DeleteViewerComponent(h,y){var w=t.call(this,h,y)||this;return w.deleteCss={iconDelete:"icon--delete"},w.value={pages:void 0,pending:!1,valid:!1},w}return Kl(DeleteViewerComponent,t),Object.defineProperty(DeleteViewerComponent.prototype,"formComponent",{get:function(){return this.footerComponent.getFormComponent()},enumerable:!1,configurable:!0}),DeleteViewerComponent.prototype.destroyComponent=function(){this.pageHandler&&(this.pageHandler.destroy(),this.pageHandler=null),t.prototype.destroyComponent.call(this)},DeleteViewerComponent.prototype.initScroll=function(){},DeleteViewerComponent.prototype.onBeforeHeaderInit=function(){this.headerComponent.setService(this.serviceProvider.deletePagesService)},DeleteViewerComponent.prototype.onDocumentRead=function(){this.document.totalPages>this.maxPerPagePages?this.initAsDocument():this.initAsPages()},DeleteViewerComponent.prototype.subscribePageItem=function(t){var h=this;t.subscribed||(t.component.zoom$.pipe(takeUntil(this.destroyEvent)).subscribe((function(t){return h.onZoom(t)})),t.component.click$.pipe(takeUntil(this.destroyEvent)).subscribe((function(y){h.value.pages=h.pageHandler.getOnClickedValue(t.initPageNumber,y.isSelected),h.formComponent.setValue(h.value)})))},DeleteViewerComponent.prototype.initAsDocument=function(){return DeleteViewerComponent_awaiter(this,void 0,void 0,(function(){var t,h,y,w,A=this;return DeleteViewerComponent_generator(this,(function(T){switch(T.label){case 0:return this.asDocument=!0,this.headerComponent.setToggleVisible(!1),t=this.document,this.serviceProvider.deletePagesService.onDocumentRead(t.totalPages),h=t.storedFile.guid,(y=new Bn(this.ids.viewerContainerId,h)).setViewModelOptions({imageUrl:void 0,useDelete:!1}),w=this.serviceProvider.viewerService.getMinMaxItemValue(),t.component=y,t.viewOrder=1,t.initPageNumber=1,t.maxSize=w.max,this.viewItems=[t],y.init(),y.setRenderingState(!0),y.zoom$.pipe(takeUntil(this.destroyEvent),takeUntil(t.destroy$)).subscribe((function(t){return A.onZoom(t)})),y.setTotalPages(t.totalPages),y.setPageBoxVisibleState(!0),y.setPageNumberVisibleState(!1),y.setRotateVisibleState(!1),y.setZoomBtnVisibleState(!0),y.setDeleteBtnVisible(!1),this.destroyPending(),this.$component.toggleClass(this.helper.css.displayNone,!1),this.$component.toggleClass(this.helper.css.perPageViewerSingle,!0),this.waitRender=!1,this.scrollLocked=!1,this.waitScroll=!1,this.serviceProvider.viewerService.onViewItemsChange([y]),[4,this.renderDocument(t)];case 1:return T.sent(),this.formComponent.setTotalPages(this.document.totalPages),this.formComponent.change$.pipe(takeUntil(this.destroyEvent)).subscribe((function(t){return A.formByDocumentChange(t)})),this.formComponent.resetPages(),this.initialized=!0,this.formComponent.focus(),[2]}}))}))},DeleteViewerComponent.prototype.renderDocument=function(t){return DeleteViewerComponent_awaiter(this,void 0,void 0,(function(){var h,y,w,A;return DeleteViewerComponent_generator(this,(function(T){switch(T.label){case 0:return t.rendered?[2,!0]:[4,this.serviceProvider.pdfService.getPDFPageLoadingTask(this.document.pdfDocumentProxy,t.initPageNumber)];case 1:return h=T.sent(),y=this.serviceProvider.pdfService.getViewPortInfo(h,t.maxSize),w=y.viewport,t.documentSize=y.documentSize,t.currentSize=y.currentSize,A=t,[4,this.renderZoom$(h,t.destroy$).toPromise()];case 2:return A.zoomImageInfo=T.sent(),t.component.setImage(t.zoomImageInfo.url,Math.round(w.width),Math.round(w.height)),t.component.setPageName(t.storedFile.name),t.rendered=!0,t.component.setRenderingState(!1),this.formComponent.setDisableState(!1),[2,!0]}}))}))},DeleteViewerComponent.prototype.formByDocumentChange=function(t){},DeleteViewerComponent.prototype.initAsPages=function(){var h=this;this.headerComponent.setToggleVisible(!0),t.prototype.initScroll.call(this),t.prototype.onDocumentRead.call(this),this.viewItems.forEach((function(t){t.component.setIgnoreRenderingOnClick(!0),t.component.setIcon(Kt.trash),t.component.setSelected(!1),t.component.toggleIconCss(h.deleteCss.iconDelete,!0)})),this.asDocument=!1,this.pageHandler=new zl(this.document.totalPages,this.viewItems);var y=new Jl(this.getOnDestroy$(),this.viewItems);y.init(),y.change$.subscribe((function(t){var y=In.pagesToValue(t),w=at.asJson(h.value);w.pages=y,h.pageHandler.setPages(t,!0),h.formComponent.setValue(w)}));var w=this.formComponent;w.setTotalPages(this.document.totalPages),w.change$.pipe(takeUntil(this.destroyEvent)).subscribe((function(t){return h.onPerPageFormChange(t)}));var A=this.serviceProvider.deletePagesService;A.selectAllPagesChange$.pipe(takeUntil(this.destroyEvent)).subscribe((function(t){return h.onToggleAllChange(t)})),A.onDocumentRead(this.document.totalPages),w.setDisableState(!1),this.initialized=!0,w.resetPages(),w.setValidPages(!0),A.onSelectAllPagesChange(!1),this.formComponent.focus()},DeleteViewerComponent.prototype.onToggleAllChange=function(t){this.viewItems.forEach((function(h){h.component.setSelected(t)})),t?(this.pageHandler.selectAll(),this.formComponent.setAllPages()):(this.pageHandler.deselectAll(),this.formComponent.resetPages())},DeleteViewerComponent.prototype.onPerPageFormChange=function(t){if(this.formComponent.isDisabled())this.value=at.asJson(t);else{var h=this.value;this.value=at.asJson(t),this.updatePages(t,h),this.checkOrUpdateHeaderState()}},DeleteViewerComponent.prototype.checkOrUpdateHeaderState=function(){var t=this.viewItems.map((function(t){return t.component.isSelected()})),h=t.every((function(t){return!!t})),y=this.headerComponent.isSelected();h?this.headerComponent.setSelectState(Sn.selectAll,!1):y&&!h&&this.headerComponent.setSelectState(Sn.deselectAll,!1)},DeleteViewerComponent.prototype.updatePages=function(t,h){h&&t.pages===h.pages||(t.pages||this.headerComponent.setSelectState(Sn.deselectAll),In.lastIsSeparator(t.pages)||this.pageHandler.changeValueHandler(t.pages))},DeleteViewerComponent}(Gl),Zl=function(){var extendStatics=function(t,h){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,h){t.__proto__=h}||function(t,h){for(var y in h)Object.prototype.hasOwnProperty.call(h,y)&&(t[y]=h[y])},extendStatics(t,h)};return function(t,h){if("function"!=typeof h&&null!==h)throw new TypeError("Class extends value "+String(h)+" is not a constructor or null");function __(){this.constructor=t}extendStatics(t,h),t.prototype=null===h?Object.create(h):(__.prototype=h.prototype,new __)}}(),RotateViewerComponent_awaiter=function(t,h,y,w){return new(y||(y=Promise))((function(A,T){function fulfilled(t){try{step(w.next(t))}catch(t){T(t)}}function rejected(t){try{step(w.throw(t))}catch(t){T(t)}}function step(t){t.done?A(t.value):function adopt(t){return t instanceof y?t:new y((function(h){h(t)}))}(t.value).then(fulfilled,rejected)}step((w=w.apply(t,h||[])).next())}))},RotateViewerComponent_generator=function(t,h){var y,w,A,T,E={label:0,sent:function(){if(1&A[0])throw A[1];return A[1]},trys:[],ops:[]};return T={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(T[Symbol.iterator]=function(){return this}),T;function verb(T){return function(j){return function step(T){if(y)throw new TypeError("Generator is already executing.");for(;E;)try{if(y=1,w&&(A=2&T[0]?w.return:T[0]?w.throw||((A=w.return)&&A.call(w),0):w.next)&&!(A=A.call(w,T[1])).done)return A;switch(w=0,A&&(T=[2&T[0],A.value]),T[0]){case 0:case 1:A=T;break;case 4:return E.label++,{value:T[1],done:!1};case 5:E.label++,w=T[1],T=[0];continue;case 7:T=E.ops.pop(),E.trys.pop();continue;default:if(!(A=E.trys,(A=A.length>0&&A[A.length-1])||6!==T[0]&&2!==T[0])){E=0;continue}if(3===T[0]&&(!A||T[1]>A[0]&&T[1]<A[3])){E.label=T[1];break}if(6===T[0]&&E.label<A[1]){E.label=A[1],A=T;break}if(A&&E.label<A[2]){E.label=A[2],E.ops.push(T);break}A[2]&&E.ops.pop(),E.trys.pop();continue}T=h.call(t,E)}catch(t){T=[6,t],w=0}finally{y=A=0}if(5&T[0])throw T[1];return{value:T[0]?T[1]:void 0,done:!0}}([T,j])}}},ec=function(t){function RotateViewerComponent(h,y){return t.call(this,h,y)||this}return Zl(RotateViewerComponent,t),Object.defineProperty(RotateViewerComponent.prototype,"formComponent",{get:function(){return this.footerComponent.getFormComponent()},enumerable:!1,configurable:!0}),RotateViewerComponent.prototype.initScroll=function(){},RotateViewerComponent.prototype.onDocumentRead=function(){this.document.totalPages>this.maxPerPagePages?(this.formComponent.allowReset(!1),this.initAsDocument()):(this.formComponent.allowReset(!0),this.initAsPages())},RotateViewerComponent.prototype.subscribePageItem=function(t){var h=this;t.subscribed||(t.component.zoom$.pipe(takeUntil(this.destroyEvent)).subscribe((function(t){return h.onZoom(t)})),t.component.rotate$.pipe(takeUntil(this.destroyEvent)).subscribe((function(y){y.itemId===t.fileId&&h.onRotate(y,t)})),t.subscribed=!0)},RotateViewerComponent.prototype.onRotate=function(h,y,w){void 0===w&&(w=!1),t.prototype.onRotate.call(this,h,y),w||this.savePerPageValue()},RotateViewerComponent.prototype.renderDocument=function(t){return RotateViewerComponent_awaiter(this,void 0,void 0,(function(){var h,y,w,A,T;return RotateViewerComponent_generator(this,(function(E){switch(E.label){case 0:return t.rendered?[2,!0]:[4,(h=this.serviceProvider.pdfService).getPDFPageLoadingTask(this.document.pdfDocumentProxy,t.initPageNumber)];case 1:return y=E.sent(),w=h.getViewPortInfo(y,t.maxSize),A=w.viewport,t.documentSize=w.documentSize,t.currentSize=w.currentSize,T=t,[4,this.renderZoom$(y,t.destroy$).toPromise()];case 2:return T.zoomImageInfo=E.sent(),t.component.setImage(t.zoomImageInfo.url,Math.round(A.width),Math.round(A.height)),t.component.setPageName(t.storedFile.name),t.rendered=!0,t.component.setRenderingState(!1),this.formComponent.setDisableState(!1),[2,!0]}}))}))},RotateViewerComponent.prototype.initAsDocument=function(){return RotateViewerComponent_awaiter(this,void 0,void 0,(function(){var t,h,y,w,A,T,E=this;return RotateViewerComponent_generator(this,(function(j){switch(j.label){case 0:return this.asDocument=!0,t=this.document,this.serviceProvider.deletePagesService.onDocumentRead(t.totalPages),h=t.storedFile.guid,(y=new Bn(this.ids.viewerContainerId,h)).setViewModelOptions({imageUrl:void 0,useDelete:!1}),w=this.serviceProvider.viewerService.getMinMaxItemValue(),t.component=y,t.viewOrder=1,t.initPageNumber=1,t.maxSize=w.max,this.viewItems=[t],y.init(),y.setRenderingState(!0),y.zoom$.pipe(takeUntil(this.destroyEvent),takeUntil(t.destroy$)).subscribe((function(t){return E.onZoom(t)})),y.setTotalPages(t.totalPages),y.setPageBoxVisibleState(!0),y.setPageNumberVisibleState(!1),y.setRotateVisibleState(!1),y.setZoomBtnVisibleState(!0),y.setDeleteBtnVisible(!1),this.destroyPending(),this.$component.toggleClass(this.helper.css.displayNone,!1),this.$component.toggleClass(this.helper.css.perPageViewerSingle,!0),this.waitRender=!1,this.scrollLocked=!1,this.waitScroll=!1,this.serviceProvider.viewerService.onViewItemsChange([y]),[4,this.renderDocument(t)];case 1:return j.sent(),A=this.formComponent,T=function(h){if(E.initialized){E.viewItems.forEach((function(t){E.onRotate({direction:h,itemId:t.fileId},t,!0)}));E.saveDucumentValue(t)}},A.change$.pipe(takeUntil(this.destroyEvent)).subscribe((function(t){return T(t.direction)})),A.setComponentVisible(!0),A.setDisableState(!1),this.serviceProvider.viewerService.onRunJobDisabledChange(!1),this.initialized=!0,this.saveDucumentValue(t),[2]}}))}))},RotateViewerComponent.prototype.saveDucumentValue=function(t){var h=t.workFile.options.angle,y={pages:Array.from(Array(t.totalPages),(function(t,h){return h+1})).map((function(t){return{angle:h,page:t}})),pending:!1,valid:!0};this.serviceProvider.toolsConfigService.setFormValue(y)},RotateViewerComponent.prototype.initAsPages=function(){var h=this;this.asDocument=!1,t.prototype.initScroll.call(this),t.prototype.onDocumentRead.call(this);var y=this.formComponent,changeRotation=function(t){if(h.initialized){h.viewItems.forEach((function(y){h.onRotate({direction:t,itemId:y.fileId},y,!0)}));h.savePerPageValue()}};y.setDisableState(!0),y.change$.pipe(takeUntil(this.destroyEvent)).subscribe((function(t){return changeRotation(t.direction)})),y.reset$.pipe(takeUntil(this.destroyEvent)).subscribe((function(t){return changeRotation(Pn.zero)})),this.viewItems.length>1&&y.setComponentVisible(!0),y.setDisableState(!1),this.serviceProvider.viewerService.onRunJobDisabledChange(!1),this.initialized=!0},RotateViewerComponent.prototype.savePerPageValue=function(){this.serviceProvider.toolsConfigService.setFormValue(this.getPerPageFormValue())},RotateViewerComponent.prototype.getPerPageFormValue=function(){var t=this,h={pages:this.viewItems.map((function(h){return t.viewItemToDtoItem(h)})),pending:!1,valid:!0};return h},RotateViewerComponent.prototype.viewItemToDtoItem=function(t){return{angle:t.workFile.options.angle,page:t.initPageNumber}},RotateViewerComponent}(Gl),tc=function(){var extendStatics=function(t,h){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,h){t.__proto__=h}||function(t,h){for(var y in h)Object.prototype.hasOwnProperty.call(h,y)&&(t[y]=h[y])},extendStatics(t,h)};return function(t,h){if("function"!=typeof h&&null!==h)throw new TypeError("Class extends value "+String(h)+" is not a constructor or null");function __(){this.constructor=t}extendStatics(t,h),t.prototype=null===h?Object.create(h):(__.prototype=h.prototype,new __)}}(),rc=function(t){function RearrangeViewerComponent(h,y){var w=t.call(this,h,y)||this;return w.maxPerPagePages=300,w}return tc(RearrangeViewerComponent,t),RearrangeViewerComponent.prototype.initScroll=function(){},RearrangeViewerComponent.prototype.onDocumentRead=function(){this.document.totalPages>this.maxPerPagePages?this.onPagesOverLimit(this.document.totalPages,this.document.storedFile.name):this.initAsPages()},RearrangeViewerComponent.prototype.subscribePageItem=function(h){h.subscribed||t.prototype.subscribePageItem.call(this,h)},RearrangeViewerComponent.prototype.onDelete=function(h){this.serviceProvider.viewerService.onRunJobDisabledChange(!1),t.prototype.onDelete.call(this,h)},RearrangeViewerComponent.prototype.onRotate=function(h,y){t.prototype.onRotate.call(this,h,y),this.serviceProvider.viewerService.onRunJobDisabledChange(!1)},RearrangeViewerComponent.prototype.onPagesOverLimit=function(t,h){this.serviceProvider.errorDialogService.showMaxPagesError(h,this.maxPerPagePages,t).subscribe((function(){})),this.currentState.gotTo(ge.destroy)},RearrangeViewerComponent.prototype.initAsPages=function(){this.asDocument=!1,t.prototype.initScroll.call(this),t.prototype.onDocumentRead.call(this);var h=this.serviceProvider.Translate.get("Page");this.viewItems.forEach((function(t){var y=h+" "+t.initPageNumber;t.component.setPageName(y)})),this.initSortable(),this.initialized=!0},RearrangeViewerComponent.prototype.onBeforeHeaderInit=function(){var t=this;this.headerComponent.hasSortable&&this.headerComponent.sort$.pipe(takeUntil(this.destroyEvent)).subscribe((function(h){return t.sort(h)}))},RearrangeViewerComponent.prototype.initSortable=function(){var t=this;this.serviceProvider.sortableService.useSortable()&&this.serviceProvider.sortableService.initSortable$(this.helper.getById(this.ids.viewerContainerId),{sort:!0,onStart:function(t){},onEnd:function(h){t.helper.getById(t.ids.viewerContainerId).find(".page-item").each((function(h,y){var w=t.viewItems.find((function(t){return t.fileId===y.id})),A=h+1;w.component.setPageNumber(A),w.viewOrder=A})),t.serviceProvider.viewerService.onRunJobDisabledChange(!1)}}).pipe(takeUntil(this.destroyEvent),filter((function(t){return!!t}))).subscribe((function(t){}))},RearrangeViewerComponent.prototype.sort=function(t){this.serviceProvider.sortableService.sortArray(this.viewItems,(function(t){return t.initPageNumber}),t===or.asc),this.updateViewCounters(this.viewItems,!1),this.serviceProvider.sortableService.sortDomElementsBySortedItems(this.viewItems,(function(t){return t.fileId}),this.ids.viewerContainerId,".page-item"),this.serviceProvider.viewerService.onRunJobDisabledChange(!1)},RearrangeViewerComponent.prototype.onBeforeRunJob=function(){var h={pages:this.viewItems.map((function(t){return{new:t.viewOrder,old:t.initPageNumber,angle:t.workFile.options.angle}})),pending:!1,valid:!0};this.document.workFile.options.rearrange=h,t.prototype.onBeforeRunJob.call(this)},RearrangeViewerComponent}(Gl),nc=function(){var extendStatics=function(t,h){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,h){t.__proto__=h}||function(t,h){for(var y in h)Object.prototype.hasOwnProperty.call(h,y)&&(t[y]=h[y])},extendStatics(t,h)};return function(t,h){if("function"!=typeof h&&null!==h)throw new TypeError("Class extends value "+String(h)+" is not a constructor or null");function __(){this.constructor=t}extendStatics(t,h),t.prototype=null===h?Object.create(h):(__.prototype=h.prototype,new __)}}(),oc=function(t){function PageViewerState(h,y){var w=t.call(this,h,ge.pageViewer)||this;if(!y)throw new Error("!inputData");if(!y.data.isViewerOptions)throw new Error("is not isViewerOptions");switch(w.options=y.data,w.serviceProvider.toolsConfigService.getToolConfig().viewerType){case St.split:w.view=new Ql(w.componentId,w);break;case St.delete:w.view=new Yl(w.componentId,w);break;case St.rotate:w.view=new ec(w.componentId,w);break;case St.rearrange:w.view=new rc(w.componentId,w);break;default:w.view=new Gl(w.componentId,w)}return w}return nc(PageViewerState,t),Object.defineProperty(PageViewerState.prototype,"toolsConfigService",{get:function(){return this.serviceProvider.toolsConfigService},enumerable:!1,configurable:!0}),PageViewerState.prototype.createTemplate=function(){return t.prototype.createTemplate.call(this,"")},PageViewerState.prototype.bindEvents=function(){t.prototype.bindEvents.call(this),this.view.entryOptions=this.options,this.view.init()},PageViewerState.prototype.onDestroy=function(){this.destroyChildren(["view"]),t.prototype.onDestroy.call(this)},PageViewerState}(gs),ic=function(){var extendStatics=function(t,h){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,h){t.__proto__=h}||function(t,h){for(var y in h)Object.prototype.hasOwnProperty.call(h,y)&&(t[y]=h[y])},extendStatics(t,h)};return function(t,h){if("function"!=typeof h&&null!==h)throw new TypeError("Class extends value "+String(h)+" is not a constructor or null");function __(){this.constructor=t}extendStatics(t,h),t.prototype=null===h?Object.create(h):(__.prototype=h.prototype,new __)}}(),ac=__webpack_require__(62074),sc=__webpack_require__(66270),lc=__webpack_require__(50970);!function(t){t.default="default",t.expectedError="expectedError"}(Dl||(Dl={}));var cc=function(t){function ErrorViewComponent(h,y){var w=t.call(this,h)||this;return w.options=y,w.startOver=new J,w}return ic(ErrorViewComponent,t),Object.defineProperty(ErrorViewComponent.prototype,"startOver$",{get:function(){return this.startOver.asObservable().pipe(takeUntil(this.destroyEvent))},enumerable:!1,configurable:!0}),ErrorViewComponent.prototype.createTemplate=function(){return this.model=this.createViewModel(this.options.type),this.setTemplateValuesByModel(ac,this.model)},ErrorViewComponent.prototype.bind=function(){var t=this;fromEvent(this.helper.getById(this.model.btnStartOverId).get(0),"click").pipe(takeUntil(this.destroyEvent),take(1)).subscribe((function(){t.startOver.next()}))},ErrorViewComponent.prototype.createViewModel=function(t){if(t===Dl.expectedError){var h=this.options.translateMessageKey||"";return this.createExpectedModel(h)}return this.createDefaultModel()},ErrorViewComponent.prototype.createDefaultModel=function(){var t=this.serviceProvider.Translate,h=this.getBaseModel();return h.labelReportBug=t.get("component-report-bug"),h.iconBug=Kt.bug,h.message=t.get("component-failed-sorry"),h.errUrl=this.serviceProvider.toolsConfigService.getLocalizedUrl("contact-us.html"),h.errUrl+="?bugreport",h.actions=this.setTemplateValuesByModel(sc,h),h},ErrorViewComponent.prototype.createExpectedModel=function(t){var h=this.serviceProvider.Translate,y=this.getBaseModel(),w=h.get(t);if("expected-error-no-text-found"===t){var A=this.serviceProvider.toolsConfigService.getConfigModel();w=w.replace("%(lang)",A.resourcesRoot+A.lang).replace("%(from)",A.sessionId)}return y.message=w,y.actions=this.setTemplateValuesByModel(lc,y),y},ErrorViewComponent.prototype.getBaseModel=function(){var t=this.serviceProvider.Translate.get("component-start-over");return{componentId:this.componentId,iconAttention:Kt.attention,iconRotate:Kt.Rotate,labelStartOver:t,btnStartOverId:ke.createQuickGuidAsString(),message:void 0,errUrl:void 0,iconBug:void 0,actions:void 0,labelReportBug:void 0}},ErrorViewComponent}(Ht),uc=function(){var extendStatics=function(t,h){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,h){t.__proto__=h}||function(t,h){for(var y in h)Object.prototype.hasOwnProperty.call(h,y)&&(t[y]=h[y])},extendStatics(t,h)};return function(t,h){if("function"!=typeof h&&null!==h)throw new TypeError("Class extends value "+String(h)+" is not a constructor or null");function __(){this.constructor=t}extendStatics(t,h),t.prototype=null===h?Object.create(h):(__.prototype=h.prototype,new __)}}(),pc=function(t){function ErrorViewerState(h,y){var w=t.call(this,h,ge.dropZone)||this;if(w.inputData=y,!y)throw new Error("!inputData");var A=w.getOptions();return w.view=new cc(w.componentId,A),w}return uc(ErrorViewerState,t),ErrorViewerState.prototype.createTemplate=function(){return t.prototype.createTemplate.call(this,"")},ErrorViewerState.prototype.bindEvents=function(){var t=this;this.view.init(),this.view.startOver$.pipe(takeUntil(this.destroyEvent)).subscribe((function(){t.serviceProvider.appService.onStartOver(t)}))},ErrorViewerState.prototype.onDestroy=function(){this.destroyChildren(["view"]),t.prototype.onDestroy.call(this)},ErrorViewerState.prototype.getOptions=function(){var t=this.inputData;if(!t.data)throw new Error("!inputData.data");var h=t.data;if(!h.hasError)throw new Error("!eventData.hasError");var y={type:Dl.default};return h.status===ci.expectedError&&(y.type=Dl.expectedError,h.data&&h.data.message&&(y.translateMessageKey=h.data.message)),y},ErrorViewerState}(gs),dc="2.5.6";function normalizeUrl(t){return"string"!=typeof t?"":t.replace(/\/\//g,"/").replace(/(https?:\/)(?!\/)/,"$1/")}var fc=function(){var extendStatics=function(t,h){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,h){t.__proto__=h}||function(t,h){for(var y in h)Object.prototype.hasOwnProperty.call(h,y)&&(t[y]=h[y])},extendStatics(t,h)};return function(t,h){if("function"!=typeof h&&null!==h)throw new TypeError("Class extends value "+String(h)+" is not a constructor or null");function __(){this.constructor=t}extendStatics(t,h),t.prototype=null===h?Object.create(h):(__.prototype=h.prototype,new __)}}(),EditViewerState_awaiter=function(t,h,y,w){return new(y||(y=Promise))((function(A,T){function fulfilled(t){try{step(w.next(t))}catch(t){T(t)}}function rejected(t){try{step(w.throw(t))}catch(t){T(t)}}function step(t){t.done?A(t.value):function adopt(t){return t instanceof y?t:new y((function(h){h(t)}))}(t.value).then(fulfilled,rejected)}step((w=w.apply(t,h||[])).next())}))},EditViewerState_generator=function(t,h){var y,w,A,T,E={label:0,sent:function(){if(1&A[0])throw A[1];return A[1]},trys:[],ops:[]};return T={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(T[Symbol.iterator]=function(){return this}),T;function verb(T){return function(j){return function step(T){if(y)throw new TypeError("Generator is already executing.");for(;E;)try{if(y=1,w&&(A=2&T[0]?w.return:T[0]?w.throw||((A=w.return)&&A.call(w),0):w.next)&&!(A=A.call(w,T[1])).done)return A;switch(w=0,A&&(T=[2&T[0],A.value]),T[0]){case 0:case 1:A=T;break;case 4:return E.label++,{value:T[1],done:!1};case 5:E.label++,w=T[1],T=[0];continue;case 7:T=E.ops.pop(),E.trys.pop();continue;default:if(!(A=E.trys,(A=A.length>0&&A[A.length-1])||6!==T[0]&&2!==T[0])){E=0;continue}if(3===T[0]&&(!A||T[1]>A[0]&&T[1]<A[3])){E.label=T[1];break}if(6===T[0]&&E.label<A[1]){E.label=A[1],A=T;break}if(A&&E.label<A[2]){E.label=A[2],E.ops.push(T);break}A[2]&&E.ops.pop(),E.trys.pop();continue}T=h.call(t,E)}catch(t){T=[6,t],w=0}finally{y=A=0}if(5&T[0])throw T[1];return{value:T[0]?T[1]:void 0,done:!0}}([T,j])}}},EditViewerState_read=function(t,h){var y="function"==typeof Symbol&&t[Symbol.iterator];if(!y)return t;var w,A,T=y.call(t),E=[];try{for(;(void 0===h||h-- >0)&&!(w=T.next()).done;)E.push(w.value)}catch(t){A={error:t}}finally{try{w&&!w.done&&(y=T.return)&&y.call(T)}finally{if(A)throw A.error}}return E},hc=function(t){function EditViewerState(h,y){var w=t.call(this,h,y,ge.editViewer)||this;return w.hostCss="edit-wrapper",w.pending=new js(w.componentId),console.log("EditViewerState",{component:h,inputData:y}),w}return fc(EditViewerState,t),EditViewerState.prototype.initComponent=function(){this.initComponentBase()},EditViewerState.prototype.gotTo=function(h,y){h!==ge.pending&&t.prototype.gotTo.call(this,h,y)},EditViewerState.prototype.createTemplate=function(){return t.prototype.createTemplateBase.call(this," ")},EditViewerState.prototype.bindEvents=function(){this.pending.init(),t.prototype.bindEvents.call(this)},EditViewerState.prototype.startListening=function(h){var y=this,w=EditViewerState_read(h.items,1)[0],A=this.pwMap.get(w.guid),T=w.blobUrl;this.serviceProvider.appService.getEditor().then((function(h){return EditViewerState_awaiter(y,void 0,void 0,(function(){var y,E,j,B,N,V,W,H=this;return EditViewerState_generator(this,(function(G){switch(G.label){case 0:return y=this.toolsConfigService.getConfigModel(),E={src:normalizeUrl(y.resourcesRoot+"/styles.css?v="+dc),windowName:"candy-js-css",isCss:!0},(j=this.serviceProvider.scriptLoaderService).addScript(E),[4,j.loadLib(E.windowName)];case 1:return G.sent(),B={serviceProvider:this.serviceProvider,createQuickGuidAsString:function(){return ke.createGuid().toString()}},N=function(){var t=H.serviceProvider.Translate.getLocale().toLowerCase();switch(t){case vt.ar:return"AR";case"cn":case"tw":case"zh":return"SC";case vt.ko:return"KR";case"jp":case vt.ja:return"JP"}return t}(),V=function(T){var E,j=H.toolsConfigService.getToolConfig(),V=new h(B,H.componentId,{fileUrl:T,fontFileExt:N,password:A,isLibMode:!0,endpoint:y.endpoint,sessionId:y.sessionId,tools:null===(E=null==j?void 0:j.advancedOptions)||void 0===E?void 0:E.tools}),W=H.serviceProvider.domHelper.getById(H.componentId);W.toggleClass(H.css.host,!1),W.toggleClass(H.hostCss,!0),H.destroyChildren(["pending"]),V.init(),V.onExport$.pipe(takeUntil(H.destroyEvent),take(1),finalize((function(){return V.destroyComponent()}))).subscribe((function(h){return EditViewerState_awaiter(H,void 0,void 0,(function(){var y,A,T,E,j,B;return EditViewerState_generator(this,(function(N){switch(N.label){case 0:return y=this.serviceProvider.fileReaderService,[4,fetch(h).then((function(t){return t.blob()})).then((function(t){return t.size}))];case 1:return A=N.sent(),T=y.toMeta({url:h,type:w.type,name:w.name,size:A}),E=new Wo(T,T.url,0),[4,this.serviceProvider.fileTransferService.download(E).pipe(take(1)).toPromise()];case 2:return N.sent(),this.serviceProvider.workFileStoreService.add(E.guid,E),j=[E],B=this.toolsConfigService.getConfigModel(),t.prototype.startListening.call(this,{initUploadTransactionId:this.serviceProvider.fileTransferService.upload(j,B),isViewerOptions:!0,items:j}),[2]}}))}))})),V.onError$.pipe(takeUntil(H.destroyEvent)).subscribe((function(t){H.serviceProvider.ga.onEditorError(t)})),H.setOnBeforeUnloadHandler(V)},/(iphone|ipad|ipod|macintosh)/.test(navigator.userAgent.toLowerCase())?((W=new FileReader).onload=function(){V(W.result)},W.readAsDataURL(w.blob)):V(T),[2]}}))}))}))},EditViewerState.prototype.setOnBeforeUnloadHandler=function(t){window.onbeforeunload=function(){if(t&&t.hasChanges instanceof Function)return!t.hasChanges()&&void 0},this.destroyEvent.pipe(take(1)).subscribe((function(){window.onbeforeunload=null}))},EditViewerState}(Qs),vc=function(){var extendStatics=function(t,h){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,h){t.__proto__=h}||function(t,h){for(var y in h)Object.prototype.hasOwnProperty.call(h,y)&&(t[y]=h[y])},extendStatics(t,h)};return function(t,h){if("function"!=typeof h&&null!==h)throw new TypeError("Class extends value "+String(h)+" is not a constructor or null");function __(){this.constructor=t}extendStatics(t,h),t.prototype=null===h?Object.create(h):(__.prototype=h.prototype,new __)}}(),mc=function(t){function BaseWidget(h){var y=t.call(this)||this;return y.config=h,y.rootContainerId=h.rootContainerId,y.type=h.toolName,y}return vc(BaseWidget,t),Object.defineProperty(BaseWidget.prototype,"stateName",{get:function(){if(this.state)return this.state.stateName},enumerable:!1,configurable:!0}),BaseWidget.prototype.initComponent=function(){if(this.destroyed)throw console.error("destroyed",{this:this}),new Error("destroyed");this.gotTo(ge.init)},BaseWidget.prototype.destroyComponent=function(){this.state.destroyComponent(),this.destroyed=!0},BaseWidget.prototype.gotTo=function(t,h){if(this.stateName!==t){switch(console.info("%c next state:"+t,"color: #00858c"),this.state&&!this.state.isDestroyed()&&this.state.destroyComponent(),t){case ge.init:this.state=this.createInitState(h);break;case ge.dropZone:this.state=this.createDropZoneState(h);break;case ge.limits:this.state=this.createLimitOperationsState(h);break;case ge.readFiles:this.state=this.createReadFilesState(h);break;case ge.pending:this.state=this.createPendingState(h);break;case ge.checkFiles:this.state=this.createCheckFilesState(h);break;case ge.selectViewerState:this.state=this.createSelectViewerState(h);break;case ge.editViewer:this.state=this.createEditViewerState(h);break;case ge.instantViewer:this.state=this.createInstantViewerState(h);break;case ge.fileViewer:this.state=this.createFileViewerState(h);break;case ge.pageViewer:this.state=this.createPageViewerState(h);break;case ge.queueState:this.state=this.createQueueState(h);break;case ge.uploadState:this.state=this.createUploadState(h);break;case ge.runJobState:this.state=this.createRunJobState(h);break;case ge.errorViewer:this.state=this.createErrorViewerState(h);break;case ge.destroy:this.state=this.createDestroyState(h);break;default:this.state=this.createInitState(h)}this.state.initComponent()}},BaseWidget.prototype.getCurrentState=function(){return this.state},BaseWidget.prototype.setCurrentState=function(t){this.stateName!==t.stateName&&(this.state&&!this.state.isDestroyed()&&this.state.destroyComponent(),this.state=t)},BaseWidget.prototype.isDestroyed=function(){return this.destroyed},BaseWidget.prototype.createInitState=function(t){return new _s(this,t)},BaseWidget.prototype.createDropZoneState=function(t){return new Bs(this,t)},BaseWidget.prototype.createLimitOperationsState=function(t){return new Vs(this,t)},BaseWidget.prototype.createReadFilesState=function(t){return new Ws(this,t)},BaseWidget.prototype.createPendingState=function(t){return new Gs(this,t)},BaseWidget.prototype.createCheckFilesState=function(t){return new qs(this,t)},BaseWidget.prototype.createSelectViewerState=function(t){return new Js(this,t)},BaseWidget.prototype.createEditViewerState=function(t){return new hc(this,t)},BaseWidget.prototype.createInstantViewerState=function(t){return new Qs(this,t)},BaseWidget.prototype.createFileViewerState=function(t){return new Ul(this,t)},BaseWidget.prototype.createPageViewerState=function(t){return new oc(this,t)},BaseWidget.prototype.createQueueState=function(t){return new nl(this,t)},BaseWidget.prototype.createUploadState=function(t){return new ll(this,t)},BaseWidget.prototype.createRunJobState=function(t){return new ml(this,t)},BaseWidget.prototype.createErrorViewerState=function(t){return new pc(this,t)},BaseWidget.prototype.createDestroyState=function(t){return new ws(this,t)},BaseWidget}(Lt),yc=function(){var extendStatics=function(t,h){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,h){t.__proto__=h}||function(t,h){for(var y in h)Object.prototype.hasOwnProperty.call(h,y)&&(t[y]=h[y])},extendStatics(t,h)};return function(t,h){if("function"!=typeof h&&null!==h)throw new TypeError("Class extends value "+String(h)+" is not a constructor or null");function __(){this.constructor=t}extendStatics(t,h),t.prototype=null===h?Object.create(h):(__.prototype=h.prototype,new __)}}(),gc=function(t){function DefaultWidget(h){return t.call(this,h)||this}return yc(DefaultWidget,t),DefaultWidget}(mc),bc=function(){var extendStatics=function(t,h){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,h){t.__proto__=h}||function(t,h){for(var y in h)Object.prototype.hasOwnProperty.call(h,y)&&(t[y]=h[y])},extendStatics(t,h)};return function(t,h){if("function"!=typeof h&&null!==h)throw new TypeError("Class extends value "+String(h)+" is not a constructor or null");function __(){this.constructor=t}extendStatics(t,h),t.prototype=null===h?Object.create(h):(__.prototype=h.prototype,new __)}}(),_c=function(t){function AddWatermarkWidget(h){var y=t.call(this,h)||this;return y.serviceProvider.appService.startOverCustomHandler=function(t){var w=y.serviceProvider.appService.deps;y.serviceProvider.appService.getApp().rebuild(h,w)},y}return bc(AddWatermarkWidget,t),AddWatermarkWidget.prototype.initComponent=function(){var h=this,y=this.serviceProvider.viewerService,w=this.serviceProvider.mediaService,A=w.isDesktop(),onMediaChange=function(){var t=y.getMinMaxItemValue(),h=A?300:160;t.max=h,y.setViewItemSize(t.min,t.max)};w.change$.pipe(takeWhile((function(){return!h.destroyed}))).subscribe((function(t){A!==t.isDesktop&&(A=t.isDesktop,onMediaChange())})),onMediaChange(),t.prototype.initComponent.call(this)},AddWatermarkWidget}(mc),Sc=function(){var extendStatics=function(t,h){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,h){t.__proto__=h}||function(t,h){for(var y in h)Object.prototype.hasOwnProperty.call(h,y)&&(t[y]=h[y])},extendStatics(t,h)};return function(t,h){if("function"!=typeof h&&null!==h)throw new TypeError("Class extends value "+String(h)+" is not a constructor or null");function __(){this.constructor=t}extendStatics(t,h),t.prototype=null===h?Object.create(h):(__.prototype=h.prototype,new __)}}(),wc=function(t){function ConverterCheckFilesState(h,y){return t.call(this,h,y)||this}return Sc(ConverterCheckFilesState,t),ConverterCheckFilesState.prototype.bindEvents=function(){var h=this.serviceProvider.toolsConfigService.getConfigModel(),y=this.inputData.data.files[0];Ol.isImage(y.ext)||(h.maxFilesCount=1),t.prototype.bindEvents.call(this)},ConverterCheckFilesState}(qs),Cc=function(t){function ConverterWidget(h){var y=t.call(this,h)||this;return y.initMaxFilesCount=h.maxFilesCount,y.serviceProvider.appService.startOverCustomHandler=function(t){var w=y.serviceProvider.appService.deps;h.maxFilesCount=y.initMaxFilesCount,y.serviceProvider.appService.getApp().rebuild(h,w)},y}return Sc(ConverterWidget,t),ConverterWidget.prototype.destroyComponent=function(){var h=this.serviceProvider.toolsConfigService.getConfigModel();h.toolName===wt.pdfConverter&&(h.maxFilesCount=this.initMaxFilesCount),t.prototype.destroyComponent.call(this)},ConverterWidget.prototype.createCheckFilesState=function(t){return new wc(this,t)},ConverterWidget}(mc),Pc=function(){function WidgetFactory(){}return WidgetFactory.prototype.create=function(t){var h;switch(t.toolName){case wt.addPdfWatermark:h=new _c(t);break;case wt.pdfConverter:h=new Cc(t);break;default:h=new gc(t)}return h},WidgetFactory}(),kc=function(){function DropZoneDocumentProtectorService(){}return DropZoneDocumentProtectorService.prototype.protectViewer=function(){DropZoneDocumentProtectorService.initialized||($(document).on("dragenter",(function(t){t.preventDefault()})).on("dragover",(function(t){t.preventDefault()})).on("dragleave",(function(t){t.preventDefault()})).on("drop",(function(t){return t.preventDefault(),!1})),DropZoneDocumentProtectorService.initialized=!0)},DropZoneDocumentProtectorService.initialized=!1,DropZoneDocumentProtectorService}();var xc=function(){var extendStatics=function(t,h){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,h){t.__proto__=h}||function(t,h){for(var y in h)Object.prototype.hasOwnProperty.call(h,y)&&(t[y]=h[y])},extendStatics(t,h)};return function(t,h){if("function"!=typeof h&&null!==h)throw new TypeError("Class extends value "+String(h)+" is not a constructor or null");function __(){this.constructor=t}extendStatics(t,h),t.prototype=null===h?Object.create(h):(__.prototype=h.prototype,new __)}}(),Ac=function(t){function ModalComponent(h){var y=t.call(this,h)||this;return y.parentId=h,y.css={root:"app-modal",show:"app-modal--show"},y.lastDialogs=[],y.bound=!1,y}return xc(ModalComponent,t),Object.defineProperty(ModalComponent.prototype,"modalService",{get:function(){return this.serviceProvider.modalService},enumerable:!1,configurable:!0}),ModalComponent.prototype.onDestroy=function(){for(;this.lastDialogs.length;)this.lastDialogs.pop().hide();t.prototype.onDestroy.call(this)},ModalComponent.prototype.bind=function(){var t=this;this.bound||(this.modalService.onChange$.pipe(takeUntil(this.destroyEvent)).subscribe((function(h){if(h.show){if(h.show){var y=h.createComponent(t.componentId);t.lastDialogs.push(y),y.init(),y.show(),t.modalService.onComponentCreated(y)}}else{var w=t.lastDialogs.pop();w&&t.modalService.onComponentClose(w)}t.toggleShow(h.show)})),this.modalService.onHide$.pipe(takeUntil(this.destroyEvent)).subscribe((function(h){h.hide();var y=t.lastDialogs.findIndex((function(t){return t===h}));t.lastDialogs.splice(y,1),t.lastDialogs.length||t.toggleShow(!1)})),fromEvent(this.helper.getById(this.componentId).get(0),"click").pipe(takeUntil(this.destroyEvent),filter((function(h){var y;return(null===(y=h.target)||void 0===y?void 0:y.id)===t.componentId}))).subscribe((function(){var h,y=t.lastDialogs[t.lastDialogs.length-1];(null===(h=null==y?void 0:y.dialogOptions)||void 0===h?void 0:h.backdrop)&&t.modalService.onComponentClose(y)})),this.bound=!0)},ModalComponent.prototype.createTemplate=function(){return"<div id="+this.componentId+' class="'+this.css.root+'"></div>'},ModalComponent.prototype.toggleShow=function(t){this.$component.toggleClass(this.css.show,t);var h=document.documentElement.clientWidth;document.documentElement.style.overflow=t?"hidden":"";var y=document.documentElement.clientWidth;document.documentElement.style.paddingRight=t?Math.abs(y-h)+"px":""},ModalComponent}(Ht),ConfigMutator_read=function(t,h){var y="function"==typeof Symbol&&t[Symbol.iterator];if(!y)return t;var w,A,T=y.call(t),E=[];try{for(;(void 0===h||h-- >0)&&!(w=T.next()).done;)E.push(w.value)}catch(t){A={error:t}}finally{try{w&&!w.done&&(y=T.return)&&y.call(T)}finally{if(A)throw A.error}}return E},ConfigMutator_spreadArray=function(t,h){for(var y=0,w=h.length,A=t.length;y<w;y++,A++)t[A]=h[y];return t},Ic=function(){function ConfigMutator(){}return ConfigMutator.prototype.mutate=function(t){if(!t.fileAccept||!t.fileExtensions){var h="application/pdf, .pdf",y=["epub","mobi","fb2"],w=".epub,.mobi,.fb2";switch(t.toolName){case wt.jpgToPdf:case wt.pngToPdf:case wt.bmpToPdf:case wt.tiffToPdf:t.fileAccept="image/png, image/tiff, image/bmp, image/jpeg, image/jpg, jpeg/jfif",t.fileExtensions=["png","tiff","tif","bmp","jpg","jpeg","jfif"];break;case wt.pdfToJpg:case wt.pdfToPng:case wt.pdfToBmp:case wt.pdfToTiff:case wt.pdfToWord:case wt.pdfToDocx:case wt.pdfToRtf:case wt.pdfToPpt:case wt.pdfToExcel:case wt.compressPdf:case wt.extractText:case wt.extractImages:case wt.pdfOcr:case wt.pdfResize:case wt.protectPdf:case wt.editMetadataPdf:case wt.addPdfPageNumbers:case wt.addPdfHeaderAndFooter:case wt.addPdfWatermark:case wt.cropPdf:case wt.splitPdf:case wt.deletePdf:case wt.rotatePdf:case wt.unlockPdf:case wt.rearrangePdf:case wt.editPdf:case wt.signPdf:t.fileAccept=h,t.fileExtensions=["pdf"];break;case wt.mergePdf:t.fileAccept="application/pdf, image/png, image/tiff, image/bmp, image/jpeg, image/jpg, image/gif, jpeg/jfif, .jfif, .pdf, .bmp, .jpg, .jpeg, .png, .tiff, .tif, .gif",t.fileExtensions=["pdf","bmp","jpg","jpeg","png","tiff","tif","jfif","gif"];break;case wt.wordToPdf:t.fileAccept=".odt,.doc,.docx,.rtf,.xml,application/msword,application/vnd.oasis.opendocument.text,application/vnd.openxmlformats-officedocument.wordprocessingml.document,application/rtf",t.fileExtensions=["doc","docx","odt","rtf"];break;case wt.excelToPdf:t.fileAccept=".ods,.xls,.xlsx,.xml,application/vnd.oasis.opendocument.spreadsheet,application/vnd.ms-excel,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",t.fileExtensions=["xls","xlsx","ods"];break;case wt.docxToPdf:t.fileAccept="application/msword, application/vnd.oasis.opendocument.text, application/vnd.openxmlformats-officedocument.wordprocessingml.document,.doc,.docx,.odt",t.fileExtensions=["doc","docx","odt"];break;case wt.rtfToPdf:t.fileAccept="application/rtf, application/msword, application/vnd.oasis.opendocument.text, application/vnd.openxmlformats-officedocument.wordprocessingml.document,.doc,.docx,.odt,.rtf",t.fileExtensions=["doc","docx","odt","rtf"];break;case wt.odtToPdf:t.fileAccept="application/vnd.oasis.opendocument.text,.odt",t.fileExtensions=["odt"];break;case wt.pptToPdf:t.fileAccept="application/vnd.ms-powerpoint, application/vnd.openxmlformats-officedocument.presentationml.presentation,.ppt,.pptx",t.fileExtensions=["ppt","pptx"];break;case wt.htmlToPdf:t.fileAccept="text/html,.html,.htm",t.fileExtensions=["html","htm"];break;case wt.xmlToPdf:t.fileAccept="application/xml, text/xml,.xml",t.fileExtensions=["xml"];break;case wt.txtToPdf:t.fileAccept="text/plain,.txt,.text",t.fileExtensions=["txt","text"];break;case wt.chmToPdf:t.fileAccept="application/x-chm,.chm",t.fileExtensions=["chm"];break;case wt.djvuToPdf:t.fileAccept="image/vnd.djvu,.djvu,.djv",t.fileExtensions=["djvu","djv"];break;case wt.epubToPdf:case wt.fb2ToPdf:case wt.mobiToPdf:t.fileAccept=w,t.fileExtensions=y;break;case wt.pdfConverter:var A=ConfigMutator_spreadArray(["djvu","djv"],ConfigMutator_read(y)),T=ConfigMutator_spreadArray(ConfigMutator_spreadArray(ConfigMutator_spreadArray(ConfigMutator_spreadArray(ConfigMutator_spreadArray([],ConfigMutator_read(["pdf"])),ConfigMutator_read(["bmp","jpg","jpeg","png","tiff","tif","jfif","gif"])),ConfigMutator_read(["doc","docx","odt","rtf","xls","xlsx","ods","ppt","pptx"])),ConfigMutator_read(A)),ConfigMutator_read(["html","htm","xml","txt","text","chm"]));t.fileAccept=["application/pdf","image/png","image/tiff","image/bmp","image/jpeg","image/jpg","image/gif","jpeg/jfif","application/msword","application/vnd.oasis.opendocument.text","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/rtf","application/vnd.oasis.opendocument.spreadsheet","application/vnd.ms-excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/rtf","application/vnd.ms-powerpoint","application/vnd.openxmlformats-officedocument.presentationml.presentation","text/html","text/plain","application/xml","text/xml","application/x-chm","image/vnd.djvu"].join(",")+","+T.map((function(t){return"."+t})).join(","),t.fileExtensions=T,t.maxFilesCount=1}}},ConfigMutator}();function once(t){var h=!1;return function(){for(var y=[],w=0;w<arguments.length;w++)y[w]=arguments[w];h||(h=!0,t.apply(this,y))}}var Tc=function(){var extendStatics=function(t,h){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,h){t.__proto__=h}||function(t,h){for(var y in h)Object.prototype.hasOwnProperty.call(h,y)&&(t[y]=h[y])},extendStatics(t,h)};return function(t,h){if("function"!=typeof h&&null!==h)throw new TypeError("Class extends value "+String(h)+" is not a constructor or null");function __(){this.constructor=t}extendStatics(t,h),t.prototype=null===h?Object.create(h):(__.prototype=h.prototype,new __)}}(),Oc=function(t){function InputWrapperComponent(h){return t.call(this,h)||this}return Tc(InputWrapperComponent,t),InputWrapperComponent.prototype.bind=function(){var t=this,h=this.serviceProvider.toolsConfigService.getConfigModel(),y=!1,w=this.$input.off("change").on("change",(function(h){y=!1,h.target.files&&(t.serviceProvider.inputService.dropFiles(h.target.files),w.val(""))})).off("click").on("click",(function(t){if(t.isDefaultPrevented())return!1;y=!0})).focus((function(t){})).attr("accept",h.fileAccept);this.serviceProvider.toolsConfigService.allowMultipleFiles()&&w.attr("multiple",""),this.serviceProvider.inputService.acceptChange$.pipe(takeUntil(this.destroyEvent)).subscribe((function(h){t.$input.attr("accept",h)})),this.serviceProvider.inputService.selectFileClick$.pipe(takeUntil(this.destroyEvent),filter((function(t){return!y&&t===tr.device})),tap((function(){w.click(),setTimeout((function(){return y=!1}),1e3)}))).subscribe()},InputWrapperComponent.prototype.createTemplate=function(){return'<input id="'+this.componentId+'" type="file" class="'+this.helper.css.displayNone+'" />'},Object.defineProperty(InputWrapperComponent.prototype,"$input",{get:function(){return this.helper.getById(this.componentId)},enumerable:!1,configurable:!0}),InputWrapperComponent}(Ht),Ec=function(){function AuthInterceptor(){}return AuthInterceptor.prototype.intercept=function(t,h,y){if(t.setRequestHeader("Authorization","Bearer "+y.token),y.isDevelopmentMode){if(!(h.data&&h.data.get instanceof Function))return;var w=h.data.get("payload");if(w){var A=JSON.parse(w);console.log("AuthInterceptor:ajaxSetup:beforeSend:payloadData",A)}}},AuthInterceptor}(),Fc=function(){function FakeRunJobInterceptor(){}return FakeRunJobInterceptor.prototype.intercept=function(t,h,y){if(y.isDevelopmentMode&&(h.data&&h.data instanceof FormData&&h.data.get instanceof Function&&"runJob"===h.data.get("method")))return},FakeRunJobInterceptor.prototype.getParseError=function(){return""},FakeRunJobInterceptor.prototype.getEmptyDataError=function(){return null},FakeRunJobInterceptor.prototype.getNoImagesError=function(){return{expectedError:"expected-error-no-images-found"}},FakeRunJobInterceptor.prototype.getNoTextError=function(){return{expectedError:"expected-error-no-text-found"}},FakeRunJobInterceptor.prototype.getOcrNoTextError=function(){return{expectedError:"expected-error-ocr-no-text"}},FakeRunJobInterceptor.prototype.getErroredError=function(){return{status:ci.errored}},FakeRunJobInterceptor.prototype.getNotImplementedError=function(){return{error:"not_implemented"}},FakeRunJobInterceptor}();__webpack_require__(78274).init();var Rc=function(){function CandyApp(){var t=this;this.runFilesProcessing=once((function(){var h=window.chosenFiles;h&&0<h.length?t.serviceProvider.inputService.dropFiles(h):window.onChosenFiles=once((function(h){t.serviceProvider.inputService.dropFiles(h)}))})),console.log("CandyApp Started, version: "+Oi),this.serviceInjector=Dt.start((function(t){return function iocServiceResolver(t){var h={type:Ft.object,value:t},y={type:Ft.service,value:ys};t.registrate("ScriptLoaderService",hi,[]),t.registrate("DomHelper",Ie,[]),t.registrate("TranslateService",Rt,[]),t.registrate("WorkFileStoreService",Qo,[]),t.registrate("StateService",Uo,[]),t.registrate("DropZoneDocumentProtectorService",kc,[]),t.registrate("ModalService",Go,[]),t.registrate("InterceptorService",ds,[]),t.registrate("WebSocketService",di,[]),t.registrate("FileRenderService",wi,[]),t.registrate("MediaService",bt,[]),t.registrate("InputService",$a,[]),t.registrate("ViewerService",Ka,[]),t.registrate("FormValuesService",ms,[]),t.registrate("ServiceProvider",ys,[h]),t.registrate("FileTransferService",pi,[y]),t.registrate("ToolsConfigService",Mo,[y]),t.registrate("FileMetaDataService",Xa,[y]),t.registrate("FileReaderService",Ho,[y]),t.registrate("GoogleAnalyticSenderService",Fi,[y]),t.registrate("LocalPickerService",Ii,[y]),t.registrate("GDrivePickerService",Wi,[y]),t.registrate("DropboxPickerService",Gi,[y]),t.registrate("PickerHandlerService",Ja,[y]),t.registrate("FileConverterService",Si,[y]),t.registrate("JobService",fi,[y]),t.registrate("PdfService",_i,[y]),t.registrate("SortableService",Ti,[y]),t.registrate("ErrorDialogService",Vi,[y]),t.registrate("PasswordDialogService",cs,[y]),t.registrate("ToolOptionService",Qa,[y]),t.registrate("SplitService",Ya,[y]),t.registrate("DeletePagesService",us,[y]),t.registrate("RotatePagesService",ps,[y]),t.registrate("AppService",fs,[y]),t.registrate("LimitOperationsService",hs,[y]),t.registrate("LimitOperationsStatisticService",vs,[y])}(t)})),this.serviceProvider=this.serviceInjector.get(ys),this.serviceInjector.get(kc).protectViewer(),this.serviceProvider.appService.setApp(this),window.debugApp=this}return CandyApp.prototype.createWidget=function(t,h,y){if(void 0===y&&(y=!1),t.webSocket=void 0,this.serviceProvider.appService.deps=h,t.rootContainerId=t.selector.split("#").pop(),y&&(new Ic).mutate(t),this.widget)this.rebuild(t,h);else{var w=$("#"+t.rootContainerId).addClass("candy-app").addClass("d-flex").addClass("align-items-center").addClass("tool--"+t.toolName).toggleClass("ssr",!1).html("");this.initInfrastructure(t,h),this.initMedia(w),this.initModal(t),this.serviceProvider.toolsConfigService.useEditor()&&this.serviceProvider.appService.getEditor(),this.initWidget(t),this.runFilesProcessing()}},CandyApp.prototype.rebuild=function(t,h){this.widget&&(this.widget.destroyComponent(),this.widget=null),$("#"+t.rootContainerId).removeAttr("class"),this.serviceInjector.get(ds).reset(),this.createWidget(t,h)},CandyApp.prototype.initSentry=function(){var t="Sentry",onInit=function(t){t.init({dsn:"https://b6b56055f6d244e1a7f9a634448b4bec@sentry.io/1857965"})},err=function(t){console.warn("no sentry",{e:t})};window[t]?onInit(window[t]):this.serviceInjector.get(hi).loadLib(t).then((function(t){t?onInit(t):err("scriptLoader:lib was not loaded")}),(function(t){return err(t)}))},CandyApp.prototype.initInfrastructure=function(t,h){this.serviceProvider.Translate.setTranslates(t.lang,t.translates),Kt.initToolIcons("/"),this.checkPlatform();var y=[new Ec];t.isDevelopmentMode&&y.push(new Fc),this.serviceInjector.get(ds).init(t,y),this.serviceProvider.toolsConfigService.setConfigModel(t);var w=this.serviceProvider.scriptLoaderService;h||(h=w.createDefaultLibs()),w.init(h),this.inputComponent&&this.inputComponent.destroyComponent(),this.inputComponent=new Oc(t.rootContainerId),this.inputComponent.init()},CandyApp.prototype.initMedia=function(t){var h=this.serviceProvider.mediaService;h.change$.subscribe((function(y){var w=h.css,A=Object.values(w);t.removeClass(A);var T=h.isMobileByWidth(),E=h.isTabletByWidth(),j=y.isDesktopByWidth;switch(!0){case j:t.addClass(w.isDesktop);break;case T:t.addClass(w.isMobile);break;case E:t.addClass(w.isTablet)}console.info("media.change$",{e:y,css:w,isMobile:T,isTablet:E,isDesktop:j})})),h.init()},CandyApp.prototype.initModal=function(t){this.modalRef&&(this.modalRef.destroyComponent(),this.modalRef=null),this.modalRef=new Ac(t.rootContainerId),this.modalRef.init()},CandyApp.prototype.initWidget=function(t){var h=new Pc;this.widget=h.create(t),this.widget.initComponent()},CandyApp.prototype.checkPlatform=function(){navigator.platform.toLowerCase().indexOf("win")>-1&&$("body").addClass("platform-windows")},CandyApp}()}(),candyLib=__webpack_exports__})();
//# sourceMappingURL=bundle.js.map