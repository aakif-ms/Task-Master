<% layout('./layouts/boilerplate') %>
    <span class="absolute text-white text-4xl top-5 left-4 cursor-pointer lg:hidden" onclick="navbarExpand()">
        <i class="bi bi-filter-left px-2 bg-gray-900 rounded-md"></i>
    </span>
    <div class="flex h-full items-stretch">
        <!-- sidebar -->
        <div
            class="sidebar flex flex-col w-[300px] lg:left-0 left-[-300px] p-2 overflow-y-auto text-center bg-stone-100">
            <div class="text-gray-100 text-xl">
                <div class="p-2.5 mt-1 flex items-center">
                    <h1 class="font-bold text-lightTeal text-[45px] ml-3 px-2">Task Master</h1>
                    <i class="bi bi-x ml-20 cursor-pointer lg:hidden text-black" onclick="navbarExpand()"></i>
                </div>
            </div>
            <div
                class="p-2.5 mt-24 flex items-center font-bold justify-center rounded-md px-4 duration-300 cursor-pointer text-zinc-600 hover:bg-gray-600 hover:text-lightTeal">
                <i class="bi bi-sticky-fill"></i>
                <a href="/todo/new" class="mx-12 font-bold text-[20px]">Add Task</a>
            </div>
            <hr class="my-2 text-gray-200">
            <div
                class="p-2.5 mt-3 flex items-center font-bold justify-center rounded-md px-4 duration-300 cursor-pointer text-zinc-600 hover:bg-gray-600 hover:text-lightTeal">
                <i class="bi bi-calendar"></i>
                <a href="#" class="mx-12 font-bold text-[20px]">Calendar</a>
            </div>
            <hr class="my-2 text-gray-200">
            <div
                class="p-2.5 mt-3 flex items-center font-bold justify-center rounded-md px-4 duration-300 cursor-pointer text-zinc-600 hover:bg-gray-600 hover:text-lightTeal">
                <i class="bi bi-gear"></i>
                <a href="#" class="mx-12 font-bold text-[20px]">Settings</a>
            </div>
            <div class="mt-auto mb-12">
                <a href="/user/logout">Logout</a>
            </div>
        </div>
        <!-- /sidebar -->

        <!-- main -->
        <div class="main flex flex-col gap-12 w-full px-16 py-12">
            <!-- mainHeader -->
            <div class="flex items-center justify-between w-full">
                <div class="relative flex items-center">
                    <h1 class="text-7xl z-10 text-lightTeal font-extrabold">My Task</h1>
                    <div class="absolute z-0 w-28 h-28 rounded-full bg-headingCircle">
                        <!-- Light-coloured circle -->
                    </div>
                </div>
                <div class="">
                    <h4>Welcome back, <%= user %>
                    </h4>
                </div>
            </div>
            <!-- /mainHeader -->

            <!-- Section -->
            <div class="flex justify-around h-full">
                <div class="flex flex-col gap-5 min-w-[32rem]">
                    <h1 class="text-5xl text-black text-lightTeal text-center w-full">Pending</h1>
                    <div class="bg-zinc-100 shadow-xl rounded-3xl h-full p-6 w-full overflow-auto">
                        <div class="flex flex-col gap-6" id="pending">
                            <% todos.filter(todo=> !todo.completed).forEach(todo => { %>
                                <div id="todo-<%= todo._id %>">
                                    <div class="flex relative items-center gap-5">
                                        <input type="checkbox" class="form-checkbox"
                                            onclick="toggleTodo('<%= todo._id %>')">
                                        <div>
                                            <a href="/todo/<%=todo._id%>/show">
                                                <h2 class="text-xl -mb-1.5 font-semibold">
                                                    <%= todo.heading %>
                                            </a>
                                            </h2>
                                            <p class="text-gray-600">
                                                <%= todo.subHeading %>
                                            </p>
                                        </div>
                                        <div class="absolute inset-y-0 right-0">
                                            <a href="/todo/<%= todo._id %>/edit"><i class="bi bi-pencil"></i></a>
                                            <br>
                                            <form action="/todo/<%=todo._id%>?_method=delete" method="POST">
                                                <button><i class="bi bi-trash"></i></button>
                                            </form>
                                        </div>
                                    </div>
                                    <hr class="mt-3 hr">
                                </div>
                                <% }) %>
                        </div>
                    </div>
                </div>
                <div class="flex flex-col gap-5 min-w-[32rem]">
                    <h1 class="text-5xl text-black text-lightTeal text-center w-full">Completed</h1>
                    <div class="bg-zinc-100 h-full shadow-xl rounded-3xl p-6 w-full">
                        <div class="flex flex-col gap-6" id="completed">
                            <% todos.filter(todo=> todo.completed).forEach(todo => { %>
                                <div id="todo-<%= todo._id %>">
                                    <div class="flex relative items-center gap-5">
                                        <input type="checkbox" class="form-checkbox" checked
                                            onclick="toggleTodo('<%= todo._id %>')">
                                        <div>
                                            <a href="/todo/<%=todo._id%>/show">
                                                <h2 class="text-xl -mb-1.5">
                                                    <%= todo.heading %>
                                            </a>
                                            </h2>
                                            <p class="text-gray-600">
                                                <%= todo.subHeading %>
                                            </p>
                                        </div>
                                        <div class="absolute inset-y-0 right-0">
                                            <a href="/todo/<%= todo._id %>/edit"><i class="bi bi-pencil"></i></a>
                                            <br>
                                            <form action="/todo/<%=todo._id%>?_method=delete" method="POST">
                                                <button><i class="bi bi-trash"></i></button>
                                            </form>
                                        </div>
                                    </div>
                                    <hr class="hr">
                                </div>
                                <% }) %>
                        </div>
                    </div>
                </div>
            </div>
            <!-- /Section -->
        </div>
        <!-- /main -->
    </div>


    <script src="/moveToDo.js"></script>